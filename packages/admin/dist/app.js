(()=>{var t,e={757:(t,e,n)=>{t.exports=n(666)},884:(t,e,n)=>{"use strict";var i,r,o,a,s=!1,l=!1,u=[];function c(t){!function(t){u.includes(t)||u.push(t);l||s||(s=!0,queueMicrotask(d))}(t)}function h(t){let e=u.indexOf(t);-1!==e&&u.splice(e,1)}function d(){s=!1,l=!0;for(let t=0;t<u.length;t++)u[t]();u.length=0,l=!1}var f=!0;function p(t){r=t}var g=[],m=[],v=[];function y(t,e){"function"==typeof e?(t._x_cleanups||(t._x_cleanups=[]),t._x_cleanups.push(e)):(e=t,m.push(e))}function b(t,e){t._x_attributeCleanups&&Object.entries(t._x_attributeCleanups).forEach((([n,i])=>{(void 0===e||e.includes(n))&&(i.forEach((t=>t())),delete t._x_attributeCleanups[n])}))}var x=new MutationObserver(T),_=!1;function E(){x.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),_=!0}function w(){(A=A.concat(x.takeRecords())).length&&!D&&(D=!0,queueMicrotask((()=>{T(A),A.length=0,D=!1}))),x.disconnect(),_=!1}var A=[],D=!1;function C(t){if(!_)return t();w();let e=t();return E(),e}var k=!1,S=[];function T(t){if(k)return void(S=S.concat(t));let e=[],n=[],i=new Map,r=new Map;for(let o=0;o<t.length;o++)if(!t[o].target._x_ignoreMutationObserver&&("childList"===t[o].type&&(t[o].addedNodes.forEach((t=>1===t.nodeType&&e.push(t))),t[o].removedNodes.forEach((t=>1===t.nodeType&&n.push(t)))),"attributes"===t[o].type)){let e=t[o].target,n=t[o].attributeName,a=t[o].oldValue,s=()=>{i.has(e)||i.set(e,[]),i.get(e).push({name:n,value:e.getAttribute(n)})},l=()=>{r.has(e)||r.set(e,[]),r.get(e).push(n)};e.hasAttribute(n)&&null===a?s():e.hasAttribute(n)?(l(),s()):l()}r.forEach(((t,e)=>{b(e,t)})),i.forEach(((t,e)=>{g.forEach((n=>n(e,t)))}));for(let t of n)if(!e.includes(t)&&(m.forEach((e=>e(t))),t._x_cleanups))for(;t._x_cleanups.length;)t._x_cleanups.pop()();e.forEach((t=>{t._x_ignoreSelf=!0,t._x_ignore=!0}));for(let t of e)n.includes(t)||t.isConnected&&(delete t._x_ignoreSelf,delete t._x_ignore,v.forEach((e=>e(t))),t._x_ignore=!0,t._x_ignoreSelf=!0);e.forEach((t=>{delete t._x_ignoreSelf,delete t._x_ignore})),e=null,n=null,i=null,r=null}function O(t){return R(L(t))}function I(t,e,n){return t._x_dataStack=[e,...L(n||t)],()=>{t._x_dataStack=t._x_dataStack.filter((t=>t!==e))}}function M(t,e){let n=t._x_dataStack[0];Object.entries(e).forEach((([t,e])=>{n[t]=e}))}function L(t){return t._x_dataStack?t._x_dataStack:"function"==typeof ShadowRoot&&t instanceof ShadowRoot?L(t.host):t.parentNode?L(t.parentNode):[]}function R(t){let e=new Proxy({},{ownKeys:()=>Array.from(new Set(t.flatMap((t=>Object.keys(t))))),has:(e,n)=>t.some((t=>t.hasOwnProperty(n))),get:(n,i)=>(t.find((t=>{if(t.hasOwnProperty(i)){let n=Object.getOwnPropertyDescriptor(t,i);if(n.get&&n.get._x_alreadyBound||n.set&&n.set._x_alreadyBound)return!0;if((n.get||n.set)&&n.enumerable){let r=n.get,o=n.set,a=n;r=r&&r.bind(e),o=o&&o.bind(e),r&&(r._x_alreadyBound=!0),o&&(o._x_alreadyBound=!0),Object.defineProperty(t,i,{...a,get:r,set:o})}return!0}return!1}))||{})[i],set:(e,n,i)=>{let r=t.find((t=>t.hasOwnProperty(n)));return r?r[n]=i:t[t.length-1][n]=i,!0}});return e}function P(t){let e=(n,i="")=>{Object.entries(Object.getOwnPropertyDescriptors(n)).forEach((([r,{value:o,enumerable:a}])=>{if(!1===a||void 0===o)return;let s=""===i?r:`${i}.${r}`;var l;"object"==typeof o&&null!==o&&o._x_interceptor?n[r]=o.initialize(t,s,r):"object"!=typeof(l=o)||Array.isArray(l)||null===l||o===n||o instanceof Element||e(o,s)}))};return e(t)}function F(t,e=(()=>{})){let n={initialValue:void 0,_x_interceptor:!0,initialize(e,n,i){return t(this.initialValue,(()=>function(t,e){return e.split(".").reduce(((t,e)=>t[e]),t)}(e,n)),(t=>N(e,n,t)),n,i)}};return e(n),t=>{if("object"==typeof t&&null!==t&&t._x_interceptor){let e=n.initialize.bind(n);n.initialize=(i,r,o)=>{let a=t.initialize(i,r,o);return n.initialValue=a,e(i,r,o)}}else n.initialValue=t;return n}}function N(t,e,n){if("string"==typeof e&&(e=e.split(".")),1!==e.length){if(0===e.length)throw error;return t[e[0]]||(t[e[0]]={}),N(t[e[0]],e.slice(1),n)}t[e[0]]=n}var B={};function j(t,e){B[t]=e}function z(t,e){return Object.entries(B).forEach((([n,i])=>{Object.defineProperty(t,`$${n}`,{get(){let[t,n]=rt(e);return t={interceptor:F,...t},y(e,n),i(e,t)},enumerable:!1})})),t}function H(t,e,n,...i){try{return n(...i)}catch(n){V(n,t,e)}}function V(t,e,n){Object.assign(t,{el:e,expression:n}),console.warn(`Alpine Expression Error: ${t.message}\n\n${n?'Expression: "'+n+'"\n\n':""}`,e),setTimeout((()=>{throw t}),0)}var W=!0;function U(t,e,n={}){let i;return G(t,e)((t=>i=t),n),i}function G(...t){return q(...t)}var q=$;function $(t,e){let n={};z(n,t);let i=[n,...L(t)];if("function"==typeof e)return function(t,e){return(n=(()=>{}),{scope:i={},params:r=[]}={})=>{X(n,e.apply(R([i,...t]),r))}}(i,e);let r=function(t,e,n){let i=function(t,e){if(Y[t])return Y[t];let n=Object.getPrototypeOf((async function(){})).constructor,i=/^[\n\s]*if.*\(.*\)/.test(t)||/^(let|const)\s/.test(t)?`(() => { ${t} })()`:t;let r=(()=>{try{return new n(["__self","scope"],`with (scope) { __self.result = ${i} }; __self.finished = true; return __self.result;`)}catch(n){return V(n,e,t),Promise.resolve()}})();return Y[t]=r,r}(e,n);return(r=(()=>{}),{scope:o={},params:a=[]}={})=>{i.result=void 0,i.finished=!1;let s=R([o,...t]);if("function"==typeof i){let t=i(i,s).catch((t=>V(t,n,e)));i.finished?(X(r,i.result,s,a,n),i.result=void 0):t.then((t=>{X(r,t,s,a,n)})).catch((t=>V(t,n,e))).finally((()=>i.result=void 0))}}}(i,e,t);return H.bind(null,t,e,r)}var Y={};function X(t,e,n,i,r){if(W&&"function"==typeof e){let o=e.apply(n,i);o instanceof Promise?o.then((e=>X(t,e,n,i))).catch((t=>V(t,r,e))):t(o)}else t(e)}var K="x-";function Z(t=""){return K+t}var J={};function Q(t,e){J[t]=e}function tt(t,e,n){let i={},r=Array.from(e).map(at(((t,e)=>i[t]=e))).filter(ut).map(function(t,e){return({name:n,value:i})=>{let r=n.match(ct()),o=n.match(/:([a-zA-Z0-9\-:]+)/),a=n.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],s=e||t[n]||n;return{type:r?r[1]:null,value:o?o[1]:null,modifiers:a.map((t=>t.replace(".",""))),expression:i,original:s}}}(i,n)).sort(ft);return r.map((e=>function(t,e){let n=()=>{},i=J[e.type]||n,[r,o]=rt(t);!function(t,e,n){t._x_attributeCleanups||(t._x_attributeCleanups={}),t._x_attributeCleanups[e]||(t._x_attributeCleanups[e]=[]),t._x_attributeCleanups[e].push(n)}(t,e.original,o);let a=()=>{t._x_ignore||t._x_ignoreSelf||(i.inline&&i.inline(t,e,r),i=i.bind(i,t,e,r),et?nt.get(it).push(i):i())};return a.runCleanups=o,a}(t,e)))}var et=!1,nt=new Map,it=Symbol();function rt(t){let e=[],[n,i]=function(t){let e=()=>{};return[n=>{let i=r(n);return t._x_effects||(t._x_effects=new Set,t._x_runEffects=()=>{t._x_effects.forEach((t=>t()))}),t._x_effects.add(i),e=()=>{void 0!==i&&(t._x_effects.delete(i),o(i))},i},()=>{e()}]}(t);e.push(i);let a={Alpine:Kt,effect:n,cleanup:t=>e.push(t),evaluateLater:G.bind(G,t),evaluate:U.bind(U,t)};return[a,()=>e.forEach((t=>t()))]}var ot=(t,e)=>({name:n,value:i})=>(n.startsWith(t)&&(n=n.replace(t,e)),{name:n,value:i});function at(t=(()=>{})){return({name:e,value:n})=>{let{name:i,value:r}=st.reduce(((t,e)=>e(t)),{name:e,value:n});return i!==e&&t(i,e),{name:i,value:r}}}var st=[];function lt(t){st.push(t)}function ut({name:t}){return ct().test(t)}var ct=()=>new RegExp(`^${K}([^:^.]+)\\b`);var ht="DEFAULT",dt=["ignore","ref","data","id","bind","init","for","mask","model","modelable","transition","show","if",ht,"teleport","element"];function ft(t,e){let n=-1===dt.indexOf(t.type)?ht:t.type,i=-1===dt.indexOf(e.type)?ht:e.type;return dt.indexOf(n)-dt.indexOf(i)}function pt(t,e,n={}){t.dispatchEvent(new CustomEvent(e,{detail:n,bubbles:!0,composed:!0,cancelable:!0}))}var gt=[],mt=!1;function vt(t=(()=>{})){return queueMicrotask((()=>{mt||setTimeout((()=>{yt()}))})),new Promise((e=>{gt.push((()=>{t(),e()}))}))}function yt(){for(mt=!1;gt.length;)gt.shift()()}function bt(t,e){if("function"==typeof ShadowRoot&&t instanceof ShadowRoot)return void Array.from(t.children).forEach((t=>bt(t,e)));let n=!1;if(e(t,(()=>n=!0)),n)return;let i=t.firstElementChild;for(;i;)bt(i,e),i=i.nextElementSibling}function xt(t,...e){console.warn(`Alpine Warning: ${t}`,...e)}var _t=[],Et=[];function wt(){return _t.map((t=>t()))}function At(){return _t.concat(Et).map((t=>t()))}function Dt(t){_t.push(t)}function Ct(t){Et.push(t)}function kt(t,e=!1){return St(t,(t=>{if((e?At():wt()).some((e=>t.matches(e))))return!0}))}function St(t,e){if(t){if(e(t))return t;if(t._x_teleportBack&&(t=t._x_teleportBack),t.parentElement)return St(t.parentElement,e)}}function Tt(t,e=bt){!function(t){et=!0;let e=Symbol();it=e,nt.set(e,[]);let n=()=>{for(;nt.get(e).length;)nt.get(e).shift()();nt.delete(e)};t(n),et=!1,n()}((()=>{e(t,((t,e)=>{tt(t,t.attributes).forEach((t=>t())),t._x_ignore&&e()}))}))}function Ot(t,e){return Array.isArray(e)?It(t,e.join(" ")):"object"==typeof e&&null!==e?function(t,e){let n=t=>t.split(" ").filter(Boolean),i=Object.entries(e).flatMap((([t,e])=>!!e&&n(t))).filter(Boolean),r=Object.entries(e).flatMap((([t,e])=>!e&&n(t))).filter(Boolean),o=[],a=[];return r.forEach((e=>{t.classList.contains(e)&&(t.classList.remove(e),a.push(e))})),i.forEach((e=>{t.classList.contains(e)||(t.classList.add(e),o.push(e))})),()=>{a.forEach((e=>t.classList.add(e))),o.forEach((e=>t.classList.remove(e)))}}(t,e):"function"==typeof e?Ot(t,e()):It(t,e)}function It(t,e){return e=!0===e?e="":e||"",n=e.split(" ").filter((e=>!t.classList.contains(e))).filter(Boolean),t.classList.add(...n),()=>{t.classList.remove(...n)};var n}function Mt(t,e){return"object"==typeof e&&null!==e?function(t,e){let n={};return Object.entries(e).forEach((([e,i])=>{n[e]=t.style[e],e.startsWith("--")||(e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),t.style.setProperty(e,i)})),setTimeout((()=>{0===t.style.length&&t.removeAttribute("style")})),()=>{Mt(t,n)}}(t,e):function(t,e){let n=t.getAttribute("style",e);return t.setAttribute("style",e),()=>{t.setAttribute("style",n||"")}}(t,e)}function Lt(t,e=(()=>{})){let n=!1;return function(){n?e.apply(this,arguments):(n=!0,t.apply(this,arguments))}}function Rt(t,e,n={}){t._x_transition||(t._x_transition={enter:{during:n,start:n,end:n},leave:{during:n,start:n,end:n},in(n=(()=>{}),i=(()=>{})){Ft(t,e,{during:this.enter.during,start:this.enter.start,end:this.enter.end},n,i)},out(n=(()=>{}),i=(()=>{})){Ft(t,e,{during:this.leave.during,start:this.leave.start,end:this.leave.end},n,i)}})}function Pt(t){let e=t.parentNode;if(e)return e._x_hidePromise?e:Pt(e)}function Ft(t,e,{during:n,start:i,end:r}={},o=(()=>{}),a=(()=>{})){if(t._x_transitioning&&t._x_transitioning.cancel(),0===Object.keys(n).length&&0===Object.keys(i).length&&0===Object.keys(r).length)return o(),void a();let s,l,u;!function(t,e){let n,i,r,o=Lt((()=>{C((()=>{n=!0,i||e.before(),r||(e.end(),yt()),e.after(),t.isConnected&&e.cleanup(),delete t._x_transitioning}))}));t._x_transitioning={beforeCancels:[],beforeCancel(t){this.beforeCancels.push(t)},cancel:Lt((function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();o()})),finish:o},C((()=>{e.start(),e.during()})),mt=!0,requestAnimationFrame((()=>{if(n)return;let o=1e3*Number(getComputedStyle(t).transitionDuration.replace(/,.*/,"").replace("s","")),a=1e3*Number(getComputedStyle(t).transitionDelay.replace(/,.*/,"").replace("s",""));0===o&&(o=1e3*Number(getComputedStyle(t).animationDuration.replace("s",""))),C((()=>{e.before()})),i=!0,requestAnimationFrame((()=>{n||(C((()=>{e.end()})),yt(),setTimeout(t._x_transitioning.finish,o+a),r=!0)}))}))}(t,{start(){s=e(t,i)},during(){l=e(t,n)},before:o,end(){s(),u=e(t,r)},after:a,cleanup(){l(),u()}})}function Nt(t,e,n){if(-1===t.indexOf(e))return n;const i=t[t.indexOf(e)+1];if(!i)return n;if("scale"===e&&isNaN(i))return n;if("duration"===e){let t=i.match(/([0-9]+)ms/);if(t)return t[1]}return"origin"===e&&["top","right","left","center","bottom"].includes(t[t.indexOf(e)+2])?[i,t[t.indexOf(e)+2]].join(" "):i}Q("transition",((t,{value:e,modifiers:n,expression:i},{evaluate:r})=>{"function"==typeof i&&(i=r(i)),i?function(t,e,n){Rt(t,Ot,""),{enter:e=>{t._x_transition.enter.during=e},"enter-start":e=>{t._x_transition.enter.start=e},"enter-end":e=>{t._x_transition.enter.end=e},leave:e=>{t._x_transition.leave.during=e},"leave-start":e=>{t._x_transition.leave.start=e},"leave-end":e=>{t._x_transition.leave.end=e}}[n](e)}(t,i,e):function(t,e,n){Rt(t,Mt);let i=!e.includes("in")&&!e.includes("out")&&!n,r=i||e.includes("in")||["enter"].includes(n),o=i||e.includes("out")||["leave"].includes(n);e.includes("in")&&!i&&(e=e.filter(((t,n)=>n<e.indexOf("out"))));e.includes("out")&&!i&&(e=e.filter(((t,n)=>n>e.indexOf("out"))));let a=!e.includes("opacity")&&!e.includes("scale"),s=a||e.includes("opacity"),l=a||e.includes("scale"),u=s?0:1,c=l?Nt(e,"scale",95)/100:1,h=Nt(e,"delay",0),d=Nt(e,"origin","center"),f="opacity, transform",p=Nt(e,"duration",150)/1e3,g=Nt(e,"duration",75)/1e3,m="cubic-bezier(0.4, 0.0, 0.2, 1)";r&&(t._x_transition.enter.during={transformOrigin:d,transitionDelay:h,transitionProperty:f,transitionDuration:`${p}s`,transitionTimingFunction:m},t._x_transition.enter.start={opacity:u,transform:`scale(${c})`},t._x_transition.enter.end={opacity:1,transform:"scale(1)"});o&&(t._x_transition.leave.during={transformOrigin:d,transitionDelay:h,transitionProperty:f,transitionDuration:`${g}s`,transitionTimingFunction:m},t._x_transition.leave.start={opacity:1,transform:"scale(1)"},t._x_transition.leave.end={opacity:u,transform:`scale(${c})`})}(t,n,e)})),window.Element.prototype._x_toggleAndCascadeWithTransitions=function(t,e,n,i){let r=()=>{"visible"===document.visibilityState?requestAnimationFrame(n):setTimeout(n)};e?t._x_transition&&(t._x_transition.enter||t._x_transition.leave)?t._x_transition.enter&&(Object.entries(t._x_transition.enter.during).length||Object.entries(t._x_transition.enter.start).length||Object.entries(t._x_transition.enter.end).length)?t._x_transition.in(n):r():t._x_transition?t._x_transition.in(n):r():(t._x_hidePromise=t._x_transition?new Promise(((e,n)=>{t._x_transition.out((()=>{}),(()=>e(i))),t._x_transitioning.beforeCancel((()=>n({isFromCancelledTransition:!0})))})):Promise.resolve(i),queueMicrotask((()=>{let e=Pt(t);e?(e._x_hideChildren||(e._x_hideChildren=[]),e._x_hideChildren.push(t)):queueMicrotask((()=>{let e=t=>{let n=Promise.all([t._x_hidePromise,...(t._x_hideChildren||[]).map(e)]).then((([t])=>t()));return delete t._x_hidePromise,delete t._x_hideChildren,n};e(t).catch((t=>{if(!t.isFromCancelledTransition)throw t}))}))})))};var Bt=!1;function jt(t,e=(()=>{})){return(...n)=>Bt?e(...n):t(...n)}function zt(t,e,n,r=[]){switch(t._x_bindings||(t._x_bindings=i({})),t._x_bindings[e]=n,e=r.includes("camel")?e.toLowerCase().replace(/-(\w)/g,((t,e)=>e.toUpperCase())):e){case"value":!function(t,e){if("radio"===t.type)void 0===t.attributes.value&&(t.value=e),window.fromModel&&(t.checked=Ht(t.value,e));else if("checkbox"===t.type)Number.isInteger(e)?t.value=e:Number.isInteger(e)||Array.isArray(e)||"boolean"==typeof e||[null,void 0].includes(e)?Array.isArray(e)?t.checked=e.some((e=>Ht(e,t.value))):t.checked=!!e:t.value=String(e);else if("SELECT"===t.tagName)!function(t,e){const n=[].concat(e).map((t=>t+""));Array.from(t.options).forEach((t=>{t.selected=n.includes(t.value)}))}(t,e);else{if(t.value===e)return;t.value=e}}(t,n);break;case"style":!function(t,e){t._x_undoAddedStyles&&t._x_undoAddedStyles();t._x_undoAddedStyles=Mt(t,e)}(t,n);break;case"class":!function(t,e){t._x_undoAddedClasses&&t._x_undoAddedClasses();t._x_undoAddedClasses=Ot(t,e)}(t,n);break;default:!function(t,e,n){[null,void 0,!1].includes(n)&&function(t){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(t)}(e)?t.removeAttribute(e):(Vt(e)&&(n=e),function(t,e,n){t.getAttribute(e)!=n&&t.setAttribute(e,n)}(t,e,n))}(t,e,n)}}function Ht(t,e){return t==e}function Vt(t){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(t)}function Wt(t,e){var n;return function(){var i=this,r=arguments,o=function(){n=null,t.apply(i,r)};clearTimeout(n),n=setTimeout(o,e)}}function Ut(t,e){let n;return function(){let i=this,r=arguments;n||(t.apply(i,r),n=!0,setTimeout((()=>n=!1),e))}}var Gt={},qt=!1;var $t={};var Yt={};var Xt={get reactive(){return i},get release(){return o},get effect(){return r},get raw(){return a},version:"3.10.0",flushAndStopDeferringMutations:function(){k=!1,T(S),S=[]},dontAutoEvaluateFunctions:function(t){let e=W;W=!1,t(),W=e},disableEffectScheduling:function(t){f=!1,t(),f=!0},setReactivityEngine:function(t){i=t.reactive,o=t.release,r=e=>t.effect(e,{scheduler:t=>{f?c(t):t()}}),a=t.raw},closestDataStack:L,skipDuringClone:jt,addRootSelector:Dt,addInitSelector:Ct,addScopeToNode:I,deferMutations:function(){k=!0},mapAttributes:lt,evaluateLater:G,setEvaluator:function(t){q=t},mergeProxies:R,findClosest:St,closestRoot:kt,interceptor:F,transition:Ft,setStyles:Mt,mutateDom:C,directive:Q,throttle:Ut,debounce:Wt,evaluate:U,initTree:Tt,nextTick:vt,prefixed:Z,prefix:function(t){K=t},plugin:function(t){t(Kt)},magic:j,store:function(t,e){if(qt||(Gt=i(Gt),qt=!0),void 0===e)return Gt[t];Gt[t]=e,"object"==typeof e&&null!==e&&e.hasOwnProperty("init")&&"function"==typeof e.init&&Gt[t].init(),P(Gt[t])},start:function(){document.body||xt("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),pt(document,"alpine:init"),pt(document,"alpine:initializing"),E(),function(t){v.push(t)}((t=>Tt(t,bt))),y((t=>function(t){bt(t,(t=>b(t)))}(t))),function(t){g.push(t)}(((t,e)=>{tt(t,e).forEach((t=>t()))})),Array.from(document.querySelectorAll(At())).filter((t=>!kt(t.parentElement,!0))).forEach((t=>{Tt(t)})),pt(document,"alpine:initialized")},clone:function(t,e){e._x_dataStack||(e._x_dataStack=t._x_dataStack),Bt=!0,function(t){let e=r;p(((t,n)=>{let i=e(t);return o(i),()=>{}})),t(),p(e)}((()=>{!function(t){let e=!1,n=(t,n)=>{bt(t,((t,i)=>{if(e&&function(t){return wt().some((e=>t.matches(e)))}(t))return i();e=!0,n(t,i)}))};Tt(t,n)}(e)})),Bt=!1},bound:function(t,e,n){if(t._x_bindings&&void 0!==t._x_bindings[e])return t._x_bindings[e];let i=t.getAttribute(e);return null===i?"function"==typeof n?n():n:Vt(e)?!![e,"true"].includes(i):""===i||i},$data:O,data:function(t,e){Yt[t]=e},bind:function(t,e){$t[t]="function"!=typeof e?()=>e:e}},Kt=Xt;function Zt(t,e){const n=Object.create(null),i=t.split(",");for(let t=0;t<i.length;t++)n[i[t]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}var Jt,Qt={},te=Object.assign,ee=Object.prototype.hasOwnProperty,ne=(t,e)=>ee.call(t,e),ie=Array.isArray,re=t=>"[object Map]"===le(t),oe=t=>"symbol"==typeof t,ae=t=>null!==t&&"object"==typeof t,se=Object.prototype.toString,le=t=>se.call(t),ue=t=>"string"==typeof t&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,ce=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},he=/-(\w)/g,de=(ce((t=>t.replace(he,((t,e)=>e?e.toUpperCase():"")))),/\B([A-Z])/g),fe=(ce((t=>t.replace(de,"-$1").toLowerCase())),ce((t=>t.charAt(0).toUpperCase()+t.slice(1)))),pe=(ce((t=>t?`on${fe(t)}`:"")),(t,e)=>t!==e&&(t==t||e==e)),ge=new WeakMap,me=[],ve=Symbol(""),ye=Symbol("");var be=0;function xe(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}var _e=!0,Ee=[];function we(){const t=Ee.pop();_e=void 0===t||t}function Ae(t,e,n){if(!_e||void 0===Jt)return;let i=ge.get(t);i||ge.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=new Set),r.has(Jt)||(r.add(Jt),Jt.deps.push(r))}function De(t,e,n,i,r,o){const a=ge.get(t);if(!a)return;const s=new Set,l=t=>{t&&t.forEach((t=>{(t!==Jt||t.allowRecurse)&&s.add(t)}))};if("clear"===e)a.forEach(l);else if("length"===n&&ie(t))a.forEach(((t,e)=>{("length"===e||e>=i)&&l(t)}));else switch(void 0!==n&&l(a.get(n)),e){case"add":ie(t)?ue(n)&&l(a.get("length")):(l(a.get(ve)),re(t)&&l(a.get(ye)));break;case"delete":ie(t)||(l(a.get(ve)),re(t)&&l(a.get(ye)));break;case"set":re(t)&&l(a.get(ve))}s.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}var Ce=Zt("__proto__,__v_isRef,__isVue"),ke=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(oe)),Se=Le(),Te=Le(!1,!0),Oe=Le(!0),Ie=Le(!0,!0),Me={};function Le(t=!1,e=!1){return function(n,i,r){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_raw"===i&&r===(t?e?ln:sn:e?an:on).get(n))return n;const o=ie(n);if(!t&&o&&ne(Me,i))return Reflect.get(Me,i,r);const a=Reflect.get(n,i,r);if(oe(i)?ke.has(i):Ce(i))return a;if(t||Ae(n,0,i),e)return a;if(pn(a)){return!o||!ue(i)?a.value:a}return ae(a)?t?hn(a):cn(a):a}}function Re(t=!1){return function(e,n,i,r){let o=e[n];if(!t&&(i=fn(i),o=fn(o),!ie(e)&&pn(o)&&!pn(i)))return o.value=i,!0;const a=ie(e)&&ue(n)?Number(n)<e.length:ne(e,n),s=Reflect.set(e,n,i,r);return e===fn(r)&&(a?pe(i,o)&&De(e,"set",n,i):De(e,"add",n,i)),s}}["includes","indexOf","lastIndexOf"].forEach((t=>{const e=Array.prototype[t];Me[t]=function(...t){const n=fn(this);for(let t=0,e=this.length;t<e;t++)Ae(n,0,t+"");const i=e.apply(n,t);return-1===i||!1===i?e.apply(n,t.map(fn)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{const e=Array.prototype[t];Me[t]=function(...t){Ee.push(_e),_e=!1;const n=e.apply(this,t);return we(),n}}));var Pe={get:Se,set:Re(),deleteProperty:function(t,e){const n=ne(t,e),i=(t[e],Reflect.deleteProperty(t,e));return i&&n&&De(t,"delete",e,void 0),i},has:function(t,e){const n=Reflect.has(t,e);return oe(e)&&ke.has(e)||Ae(t,0,e),n},ownKeys:function(t){return Ae(t,0,ie(t)?"length":ve),Reflect.ownKeys(t)}},Fe={get:Oe,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},Ne=(te({},Pe,{get:Te,set:Re(!0)}),te({},Fe,{get:Ie}),t=>ae(t)?cn(t):t),Be=t=>ae(t)?hn(t):t,je=t=>t,ze=t=>Reflect.getPrototypeOf(t);function He(t,e,n=!1,i=!1){const r=fn(t=t.__v_raw),o=fn(e);e!==o&&!n&&Ae(r,0,e),!n&&Ae(r,0,o);const{has:a}=ze(r),s=i?je:n?Be:Ne;return a.call(r,e)?s(t.get(e)):a.call(r,o)?s(t.get(o)):void(t!==r&&t.get(e))}function Ve(t,e=!1){const n=this.__v_raw,i=fn(n),r=fn(t);return t!==r&&!e&&Ae(i,0,t),!e&&Ae(i,0,r),t===r?n.has(t):n.has(t)||n.has(r)}function We(t,e=!1){return t=t.__v_raw,!e&&Ae(fn(t),0,ve),Reflect.get(t,"size",t)}function Ue(t){t=fn(t);const e=fn(this);return ze(e).has.call(e,t)||(e.add(t),De(e,"add",t,t)),this}function Ge(t,e){e=fn(e);const n=fn(this),{has:i,get:r}=ze(n);let o=i.call(n,t);o||(t=fn(t),o=i.call(n,t));const a=r.call(n,t);return n.set(t,e),o?pe(e,a)&&De(n,"set",t,e):De(n,"add",t,e),this}function qe(t){const e=fn(this),{has:n,get:i}=ze(e);let r=n.call(e,t);r||(t=fn(t),r=n.call(e,t));i&&i.call(e,t);const o=e.delete(t);return r&&De(e,"delete",t,void 0),o}function $e(){const t=fn(this),e=0!==t.size,n=t.clear();return e&&De(t,"clear",void 0,void 0),n}function Ye(t,e){return function(n,i){const r=this,o=r.__v_raw,a=fn(o),s=e?je:t?Be:Ne;return!t&&Ae(a,0,ve),o.forEach(((t,e)=>n.call(i,s(t),s(e),r)))}}function Xe(t,e,n){return function(...i){const r=this.__v_raw,o=fn(r),a=re(o),s="entries"===t||t===Symbol.iterator&&a,l="keys"===t&&a,u=r[t](...i),c=n?je:e?Be:Ne;return!e&&Ae(o,0,l?ye:ve),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:s?[c(t[0]),c(t[1])]:c(t),done:e}},[Symbol.iterator](){return this}}}}function Ke(t){return function(...e){return"delete"!==t&&this}}var Ze={get(t){return He(this,t)},get size(){return We(this)},has:Ve,add:Ue,set:Ge,delete:qe,clear:$e,forEach:Ye(!1,!1)},Je={get(t){return He(this,t,!1,!0)},get size(){return We(this)},has:Ve,add:Ue,set:Ge,delete:qe,clear:$e,forEach:Ye(!1,!0)},Qe={get(t){return He(this,t,!0)},get size(){return We(this,!0)},has(t){return Ve.call(this,t,!0)},add:Ke("add"),set:Ke("set"),delete:Ke("delete"),clear:Ke("clear"),forEach:Ye(!0,!1)},tn={get(t){return He(this,t,!0,!0)},get size(){return We(this,!0)},has(t){return Ve.call(this,t,!0)},add:Ke("add"),set:Ke("set"),delete:Ke("delete"),clear:Ke("clear"),forEach:Ye(!0,!0)};function en(t,e){const n=e?t?tn:Je:t?Qe:Ze;return(e,i,r)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get(ne(n,i)&&i in e?n:e,i,r)}["keys","values","entries",Symbol.iterator].forEach((t=>{Ze[t]=Xe(t,!1,!1),Qe[t]=Xe(t,!0,!1),Je[t]=Xe(t,!1,!0),tn[t]=Xe(t,!0,!0)}));var nn={get:en(!1,!1)},rn=(en(!1,!0),{get:en(!0,!1)}),on=(en(!0,!0),new WeakMap),an=new WeakMap,sn=new WeakMap,ln=new WeakMap;function un(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>le(t).slice(8,-1))(t))}function cn(t){return t&&t.__v_isReadonly?t:dn(t,!1,Pe,nn,on)}function hn(t){return dn(t,!0,Fe,rn,sn)}function dn(t,e,n,i,r){if(!ae(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=r.get(t);if(o)return o;const a=un(t);if(0===a)return t;const s=new Proxy(t,2===a?i:n);return r.set(t,s),s}function fn(t){return t&&fn(t.__v_raw)||t}function pn(t){return Boolean(t&&!0===t.__v_isRef)}j("nextTick",(()=>vt)),j("dispatch",(t=>pt.bind(pt,t))),j("watch",((t,{evaluateLater:e,effect:n})=>(i,r)=>{let o,a=e(i),s=!0,l=n((()=>a((t=>{JSON.stringify(t),s?o=t:queueMicrotask((()=>{r(t,o),o=t})),s=!1}))));t._x_effects.delete(l)})),j("store",(function(){return Gt})),j("data",(t=>O(t))),j("root",(t=>kt(t))),j("refs",(t=>(t._x_refs_proxy||(t._x_refs_proxy=R(function(t){let e=[],n=t;for(;n;)n._x_refs&&e.push(n._x_refs),n=n.parentNode;return e}(t))),t._x_refs_proxy)));var gn={};function mn(t){return gn[t]||(gn[t]=0),++gn[t]}function vn(t,e,n){j(e,(e=>xt(`You can't use [$${directiveName}] without first installing the "${t}" plugin here: https://alpinejs.dev/plugins/${n}`,e)))}j("id",(t=>(e,n=null)=>{let i=function(t,e){return St(t,(t=>{if(t._x_ids&&t._x_ids[e])return!0}))}(t,e),r=i?i._x_ids[e]:mn(e);return n?`${e}-${r}-${n}`:`${e}-${r}`})),j("el",(t=>t)),vn("Focus","focus","focus"),vn("Persist","persist","persist"),Q("modelable",((t,{expression:e},{effect:n,evaluateLater:i})=>{let r=i(e),o=()=>{let t;return r((e=>t=e)),t},a=i(`${e} = __placeholder`),s=t=>a((()=>{}),{scope:{__placeholder:t}}),l=o();s(l),queueMicrotask((()=>{if(!t._x_model)return;t._x_removeModelListeners.default();let e=t._x_model.get,i=t._x_model.set;n((()=>s(e()))),n((()=>i(o())))}))})),Q("teleport",((t,{expression:e},{cleanup:n})=>{"template"!==t.tagName.toLowerCase()&&xt("x-teleport can only be used on a <template> tag",t);let i=document.querySelector(e);i||xt(`Cannot find x-teleport element for selector: "${e}"`);let r=t.content.cloneNode(!0).firstElementChild;t._x_teleport=r,r._x_teleportBack=t,t._x_forwardEvents&&t._x_forwardEvents.forEach((e=>{r.addEventListener(e,(e=>{e.stopPropagation(),t.dispatchEvent(new e.constructor(e.type,e))}))})),I(r,{},t),C((()=>{i.appendChild(r),Tt(r),r._x_ignore=!0})),n((()=>r.remove()))}));var yn=()=>{};function bn(t,e,n,i){let r=t,o=t=>i(t),a={},s=(t,e)=>n=>e(t,n);if(n.includes("dot")&&(e=e.replace(/-/g,".")),n.includes("camel")&&(e=function(t){return t.toLowerCase().replace(/-(\w)/g,((t,e)=>e.toUpperCase()))}(e)),n.includes("passive")&&(a.passive=!0),n.includes("capture")&&(a.capture=!0),n.includes("window")&&(r=window),n.includes("document")&&(r=document),n.includes("prevent")&&(o=s(o,((t,e)=>{e.preventDefault(),t(e)}))),n.includes("stop")&&(o=s(o,((t,e)=>{e.stopPropagation(),t(e)}))),n.includes("self")&&(o=s(o,((e,n)=>{n.target===t&&e(n)}))),(n.includes("away")||n.includes("outside"))&&(r=document,o=s(o,((e,n)=>{t.contains(n.target)||!1!==n.target.isConnected&&(t.offsetWidth<1&&t.offsetHeight<1||!1!==t._x_isShown&&e(n))}))),n.includes("once")&&(o=s(o,((t,n)=>{t(n),r.removeEventListener(e,o,a)}))),o=s(o,((t,i)=>{(function(t){return["keydown","keyup"].includes(t)})(e)&&function(t,e){let n=e.filter((t=>!["window","document","prevent","stop","once"].includes(t)));if(n.includes("debounce")){let t=n.indexOf("debounce");n.splice(t,xn((n[t+1]||"invalid-wait").split("ms")[0])?2:1)}if(0===n.length)return!1;if(1===n.length&&_n(t.key).includes(n[0]))return!1;const i=["ctrl","shift","alt","meta","cmd","super"].filter((t=>n.includes(t)));if(n=n.filter((t=>!i.includes(t))),i.length>0){if(i.filter((e=>("cmd"!==e&&"super"!==e||(e="meta"),t[`${e}Key`]))).length===i.length&&_n(t.key).includes(n[0]))return!1}return!0}(i,n)||t(i)})),n.includes("debounce")){let t=n[n.indexOf("debounce")+1]||"invalid-wait",e=xn(t.split("ms")[0])?Number(t.split("ms")[0]):250;o=Wt(o,e)}if(n.includes("throttle")){let t=n[n.indexOf("throttle")+1]||"invalid-wait",e=xn(t.split("ms")[0])?Number(t.split("ms")[0]):250;o=Ut(o,e)}return r.addEventListener(e,o,a),()=>{r.removeEventListener(e,o,a)}}function xn(t){return!Array.isArray(t)&&!isNaN(t)}function _n(t){if(!t)return[];t=t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase();let e={ctrl:"control",slash:"/",space:"-",spacebar:"-",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"="};return e[t]=t,Object.keys(e).map((n=>{if(e[n]===t)return n})).filter((t=>t))}function En(t){let e=t?parseFloat(t):null;return n=e,Array.isArray(n)||isNaN(n)?t:e;var n}function wn(t,e,n,i){let r={};if(/^\[.*\]$/.test(t.item)&&Array.isArray(e)){t.item.replace("[","").replace("]","").split(",").map((t=>t.trim())).forEach(((t,n)=>{r[t]=e[n]}))}else if(/^\{.*\}$/.test(t.item)&&!Array.isArray(e)&&"object"==typeof e){t.item.replace("{","").replace("}","").split(",").map((t=>t.trim())).forEach((t=>{r[t]=e[t]}))}else r[t.item]=e;return t.index&&(r[t.index]=n),t.collection&&(r[t.collection]=i),r}function An(){}function Dn(t,e,n){Q(e,(i=>xt(`You can't use [x-${e}] without first installing the "${t}" plugin here: https://alpinejs.dev/plugins/${n}`,i)))}yn.inline=(t,{modifiers:e},{cleanup:n})=>{e.includes("self")?t._x_ignoreSelf=!0:t._x_ignore=!0,n((()=>{e.includes("self")?delete t._x_ignoreSelf:delete t._x_ignore}))},Q("ignore",yn),Q("effect",((t,{expression:e},{effect:n})=>n(G(t,e)))),Q("model",((t,{modifiers:e,expression:n},{effect:i,cleanup:r})=>{let o=G(t,n),a=G(t,`${n} = rightSideOfExpression($event, ${n})`);var s="select"===t.tagName.toLowerCase()||["checkbox","radio"].includes(t.type)||e.includes("lazy")?"change":"input";let l=function(t,e,n){"radio"===t.type&&C((()=>{t.hasAttribute("name")||t.setAttribute("name",n)}));return(n,i)=>C((()=>{if(n instanceof CustomEvent&&void 0!==n.detail)return n.detail||n.target.value;if("checkbox"===t.type){if(Array.isArray(i)){let t=e.includes("number")?En(n.target.value):n.target.value;return n.target.checked?i.concat([t]):i.filter((e=>!(e==t)))}return n.target.checked}if("select"===t.tagName.toLowerCase()&&t.multiple)return e.includes("number")?Array.from(n.target.selectedOptions).map((t=>En(t.value||t.text))):Array.from(n.target.selectedOptions).map((t=>t.value||t.text));{let t=n.target.value;return e.includes("number")?En(t):e.includes("trim")?t.trim():t}}))}(t,e,n),u=bn(t,s,e,(t=>{a((()=>{}),{scope:{$event:t,rightSideOfExpression:l}})}));t._x_removeModelListeners||(t._x_removeModelListeners={}),t._x_removeModelListeners.default=u,r((()=>t._x_removeModelListeners.default()));let c=G(t,`${n} = __placeholder`);t._x_model={get(){let t;return o((e=>t=e)),t},set(t){c((()=>{}),{scope:{__placeholder:t}})}},t._x_forceModelUpdate=()=>{o((e=>{void 0===e&&n.match(/\./)&&(e=""),window.fromModel=!0,C((()=>zt(t,"value",e))),delete window.fromModel}))},i((()=>{e.includes("unintrusive")&&document.activeElement.isSameNode(t)||t._x_forceModelUpdate()}))})),Q("cloak",(t=>queueMicrotask((()=>C((()=>t.removeAttribute(Z("cloak")))))))),Ct((()=>`[${Z("init")}]`)),Q("init",jt(((t,{expression:e},{evaluate:n})=>"string"==typeof e?!!e.trim()&&n(e,{},!1):n(e,{},!1)))),Q("text",((t,{expression:e},{effect:n,evaluateLater:i})=>{let r=i(e);n((()=>{r((e=>{C((()=>{t.textContent=e}))}))}))})),Q("html",((t,{expression:e},{effect:n,evaluateLater:i})=>{let r=i(e);n((()=>{r((e=>{C((()=>{t.innerHTML=e,t._x_ignoreSelf=!0,Tt(t),delete t._x_ignoreSelf}))}))}))})),lt(ot(":",Z("bind:"))),Q("bind",((t,{value:e,modifiers:n,expression:i,original:r},{effect:o})=>{if(!e)return function(t,e,n,i){let r={};o=r,Object.entries($t).forEach((([t,e])=>{Object.defineProperty(o,t,{get:()=>(...t)=>e(...t)})}));var o;let a=G(t,e),s=[];for(;s.length;)s.pop()();a((e=>{let i=Object.entries(e).map((([t,e])=>({name:t,value:e}))),r=function(t){return Array.from(t).map(at()).filter((t=>!ut(t)))}(i);i=i.map((t=>r.find((e=>e.name===t.name))?{name:`x-bind:${t.name}`,value:`"${t.value}"`}:t)),tt(t,i,n).map((t=>{s.push(t.runCleanups),t()}))}),{scope:r})}(t,i,r);if("key"===e)return function(t,e){t._x_keyExpression=e}(t,i);let a=G(t,i);o((()=>a((r=>{void 0===r&&i.match(/\./)&&(r=""),C((()=>zt(t,e,r,n)))}))))})),Dt((()=>`[${Z("data")}]`)),Q("data",jt(((t,{expression:e},{cleanup:n})=>{e=""===e?"{}":e;let r={};z(r,t);let o={};var a,s;a=o,s=r,Object.entries(Yt).forEach((([t,e])=>{Object.defineProperty(a,t,{get:()=>(...t)=>e.bind(s)(...t),enumerable:!1})}));let l=U(t,e,{scope:o});void 0===l&&(l={}),z(l,t);let u=i(l);P(u);let c=I(t,u);u.init&&U(t,u.init),n((()=>{u.destroy&&U(t,u.destroy),c()}))}))),Q("show",((t,{modifiers:e,expression:n},{effect:i})=>{let r=G(t,n);t._x_doHide||(t._x_doHide=()=>{C((()=>t.style.display="none"))}),t._x_doShow||(t._x_doShow=()=>{C((()=>{1===t.style.length&&"none"===t.style.display?t.removeAttribute("style"):t.style.removeProperty("display")}))});let o,a=()=>{t._x_doHide(),t._x_isShown=!1},s=()=>{t._x_doShow(),t._x_isShown=!0},l=()=>setTimeout(s),u=Lt((t=>t?s():a()),(e=>{"function"==typeof t._x_toggleAndCascadeWithTransitions?t._x_toggleAndCascadeWithTransitions(t,e,s,a):e?l():a()})),c=!0;i((()=>r((t=>{(c||t!==o)&&(e.includes("immediate")&&(t?l():a()),u(t),o=t,c=!1)}))))})),Q("for",((t,{expression:e},{effect:n,cleanup:r})=>{let o=function(t){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,n=/^\s*\(|\)\s*$/g,i=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,r=t.match(i);if(!r)return;let o={};o.items=r[2].trim();let a=r[1].replace(n,"").trim(),s=a.match(e);s?(o.item=a.replace(e,"").trim(),o.index=s[1].trim(),s[2]&&(o.collection=s[2].trim())):o.item=a;return o}(e),a=G(t,o.items),s=G(t,t._x_keyExpression||"index");t._x_prevKeys=[],t._x_lookup={},n((()=>function(t,e,n,r){let o=t=>"object"==typeof t&&!Array.isArray(t),a=t;n((n=>{var s;s=n,!Array.isArray(s)&&!isNaN(s)&&n>=0&&(n=Array.from(Array(n).keys(),(t=>t+1))),void 0===n&&(n=[]);let l=t._x_lookup,u=t._x_prevKeys,c=[],d=[];if(o(n))n=Object.entries(n).map((([t,i])=>{let o=wn(e,i,t,n);r((t=>d.push(t)),{scope:{index:t,...o}}),c.push(o)}));else for(let t=0;t<n.length;t++){let i=wn(e,n[t],t,n);r((t=>d.push(t)),{scope:{index:t,...i}}),c.push(i)}let f=[],p=[],g=[],m=[];for(let t=0;t<u.length;t++){let e=u[t];-1===d.indexOf(e)&&g.push(e)}u=u.filter((t=>!g.includes(t)));let v="template";for(let t=0;t<d.length;t++){let e=d[t],n=u.indexOf(e);if(-1===n)u.splice(t,0,e),f.push([v,t]);else if(n!==t){let e=u.splice(t,1)[0],i=u.splice(n-1,1)[0];u.splice(t,0,i),u.splice(n,0,e),p.push([e,i])}else m.push(e);v=e}for(let t=0;t<g.length;t++){let e=g[t];l[e]._x_effects&&l[e]._x_effects.forEach(h),l[e].remove(),l[e]=null,delete l[e]}for(let t=0;t<p.length;t++){let[e,n]=p[t],i=l[e],r=l[n],o=document.createElement("div");C((()=>{r.after(o),i.after(r),r._x_currentIfEl&&r.after(r._x_currentIfEl),o.before(i),i._x_currentIfEl&&i.after(i._x_currentIfEl),o.remove()})),M(r,c[d.indexOf(n)])}for(let t=0;t<f.length;t++){let[e,n]=f[t],r="template"===e?a:l[e];r._x_currentIfEl&&(r=r._x_currentIfEl);let o=c[n],s=d[n],u=document.importNode(a.content,!0).firstElementChild;I(u,i(o),a),C((()=>{r.after(u),Tt(u)})),"object"==typeof s&&xt("x-for key cannot be an object, it must be a string or an integer",a),l[s]=u}for(let t=0;t<m.length;t++)M(l[m[t]],c[d.indexOf(m[t])]);a._x_prevKeys=d}))}(t,o,a,s))),r((()=>{Object.values(t._x_lookup).forEach((t=>t.remove())),delete t._x_prevKeys,delete t._x_lookup}))})),An.inline=(t,{expression:e},{cleanup:n})=>{let i=kt(t);i._x_refs||(i._x_refs={}),i._x_refs[e]=t,n((()=>delete i._x_refs[e]))},Q("ref",An),Q("if",((t,{expression:e},{effect:n,cleanup:i})=>{let r=G(t,e);n((()=>r((e=>{e?(()=>{if(t._x_currentIfEl)return t._x_currentIfEl;let e=t.content.cloneNode(!0).firstElementChild;I(e,{},t),C((()=>{t.after(e),Tt(e)})),t._x_currentIfEl=e,t._x_undoIf=()=>{bt(e,(t=>{t._x_effects&&t._x_effects.forEach(h)})),e.remove(),delete t._x_currentIfEl}})():t._x_undoIf&&(t._x_undoIf(),delete t._x_undoIf)})))),i((()=>t._x_undoIf&&t._x_undoIf()))})),Q("id",((t,{expression:e},{evaluate:n})=>{n(e).forEach((e=>function(t,e){t._x_ids||(t._x_ids={}),t._x_ids[e]||(t._x_ids[e]=mn(e))}(t,e)))})),lt(ot("@",Z("on:"))),Q("on",jt(((t,{value:e,modifiers:n,expression:i},{cleanup:r})=>{let o=i?G(t,i):()=>{};"template"===t.tagName.toLowerCase()&&(t._x_forwardEvents||(t._x_forwardEvents=[]),t._x_forwardEvents.includes(e)||t._x_forwardEvents.push(e));let a=bn(t,e,n,(t=>{o((()=>{}),{scope:{$event:t},params:[t]})}));r((()=>a()))}))),Dn("Collapse","collapse","collapse"),Dn("Intersect","intersect","intersect"),Dn("Focus","trap","focus"),Dn("Mask","mask","mask"),Kt.setEvaluator($),Kt.setReactivityEngine({reactive:cn,effect:function(t,e=Qt){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return t();if(!me.includes(n)){xe(n);try{return Ee.push(_e),_e=!0,me.push(n),Jt=n,t()}finally{me.pop(),we(),Jt=me[me.length-1]}}};return n.id=be++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n},release:function(t){t.active&&(xe(t),t.options.onStop&&t.options.onStop(),t.active=!1)},raw:fn});var Cn=Kt;const kn="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function Sn(t,e,n){const i=n||(t=>Array.prototype.slice.call(t));let r=!1,o=[];return function(...n){o=i(n),r||(r=!0,kn.call(window,(()=>{r=!1,t.apply(e,o)})))}}const Tn=t=>"start"===t?"left":"end"===t?"right":"center",On=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function In(){}const Mn=function(){let t=0;return function(){return t++}}();function Ln(t){return null==t}function Rn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)}function Pn(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const Fn=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function Nn(t,e){return Fn(t)?t:e}function Bn(t,e){return void 0===t?e:t}const jn=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function zn(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function Hn(t,e,n,i){let r,o,a;if(Rn(t))if(o=t.length,i)for(r=o-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<o;r++)e.call(n,t[r],r);else if(Pn(t))for(a=Object.keys(t),o=a.length,r=0;r<o;r++)e.call(n,t[a[r]],a[r])}function Vn(t,e){let n,i,r,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],o=e[n],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Wn(t){if(Rn(t))return t.map(Wn);if(Pn(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Wn(t[n[r]]);return e}return t}function Un(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function Gn(t,e,n,i){if(!Un(t))return;const r=e[t],o=n[t];Pn(r)&&Pn(o)?qn(r,o,i):e[t]=Wn(o)}function qn(t,e,n){const i=Rn(e)?e:[e],r=i.length;if(!Pn(t))return t;const o=(n=n||{}).merger||Gn;for(let a=0;a<r;++a){if(!Pn(e=i[a]))continue;const r=Object.keys(e);for(let i=0,a=r.length;i<a;++i)o(r[i],t,e,n)}return t}function $n(t,e){return qn(t,e,{merger:Yn})}function Yn(t,e,n){if(!Un(t))return;const i=e[t],r=n[t];Pn(i)&&Pn(r)?$n(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Wn(r))}function Xn(t,e){const n=t.indexOf(".",e);return-1===n?t.length:n}function Kn(t,e){if(""===e)return t;let n=0,i=Xn(e,n);for(;t&&i>n;)t=t[e.substr(n,i-n)],n=i+1,i=Xn(e,n);return t}function Zn(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Jn=t=>void 0!==t,Qn=t=>"function"==typeof t,ti=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const ei=Math.PI,ni=2*ei,ii=ni+ei,ri=Number.POSITIVE_INFINITY,oi=ei/180,ai=ei/2,si=ei/4,li=2*ei/3,ui=Math.log10,ci=Math.sign;function hi(t){const e=Math.round(t);t=fi(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ui(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function di(t){return!isNaN(parseFloat(t))&&isFinite(t)}function fi(t,e,n){return Math.abs(t-e)<n}function pi(t,e,n){let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function gi(t){return t*(ei/180)}function mi(t){return t*(180/ei)}function vi(t){if(!Fn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function yi(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*ei&&(o+=ni),{angle:o,distance:r}}function bi(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function xi(t,e){return(t-e+ii)%ni-ei}function _i(t){return(t%ni+ni)%ni}function Ei(t,e,n,i){const r=_i(t),o=_i(e),a=_i(n),s=_i(o-r),l=_i(a-r),u=_i(r-o),c=_i(r-a);return r===o||r===a||i&&o===a||s>l&&u<c}function wi(t,e,n){return Math.max(e,Math.min(n,t))}function Ai(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}const Di=t=>0===t||1===t,Ci=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*ni/n),ki=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ni/n)+1,Si={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*ai),easeOutSine:t=>Math.sin(t*ai),easeInOutSine:t=>-.5*(Math.cos(ei*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Di(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Di(t)?t:Ci(t,.075,.3),easeOutElastic:t=>Di(t)?t:ki(t,.075,.3),easeInOutElastic(t){const e=.1125;return Di(t)?t:t<.5?.5*Ci(2*t,e,.45):.5+.5*ki(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Si.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Si.easeInBounce(2*t):.5*Si.easeOutBounce(2*t-1)+.5},Ti={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Oi="0123456789ABCDEF",Ii=t=>Oi[15&t],Mi=t=>Oi[(240&t)>>4]+Oi[15&t],Li=t=>(240&t)>>4==(15&t);function Ri(t){var e=function(t){return Li(t.r)&&Li(t.g)&&Li(t.b)&&Li(t.a)}(t)?Ii:Mi;return t?"#"+e(t.r)+e(t.g)+e(t.b)+(t.a<255?e(t.a):""):t}function Pi(t){return t+.5|0}const Fi=(t,e,n)=>Math.max(Math.min(t,n),e);function Ni(t){return Fi(Pi(2.55*t),0,255)}function Bi(t){return Fi(Pi(255*t),0,255)}function ji(t){return Fi(Pi(t/2.55)/100,0,1)}function zi(t){return Fi(Pi(100*t),0,100)}const Hi=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Vi=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Wi(t,e,n){const i=e*Math.min(n,1-n),r=(e,r=(e+t/30)%12)=>n-i*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function Ui(t,e,n){const i=(i,r=(i+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Gi(t,e,n){const i=Wi(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function qi(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),o=Math.min(e,n,i),a=(r+o)/2;let s,l,u;return r!==o&&(u=r-o,l=a>.5?u/(2-r-o):u/(r+o),s=r===e?(n-i)/u+(n<i?6:0):r===n?(i-e)/u+2:(e-n)/u+4,s=60*s+.5),[0|s,l||0,a]}function $i(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Bi)}function Yi(t,e,n){return $i(Wi,t,e,n)}function Xi(t){return(t%360+360)%360}function Ki(t){const e=Vi.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?Ni(+e[5]):Bi(+e[5]));const r=Xi(+e[2]),o=+e[3]/100,a=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return $i(Gi,t,e,n)}(r,o,a):"hsv"===e[1]?function(t,e,n){return $i(Ui,t,e,n)}(r,o,a):Yi(r,o,a),{r:n[0],g:n[1],b:n[2],a:i}}const Zi={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ji={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Qi;function tr(t){Qi||(Qi=function(){const t={},e=Object.keys(Ji),n=Object.keys(Zi);let i,r,o,a,s;for(i=0;i<e.length;i++){for(a=s=e[i],r=0;r<n.length;r++)o=n[r],s=s.replace(o,Zi[o]);o=parseInt(Ji[a],16),t[s]=[o>>16&255,o>>8&255,255&o]}return t}(),Qi.transparent=[0,0,0,0]);const e=Qi[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}function er(t,e,n){if(t){let i=qi(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=Yi(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function nr(t,e){return t?Object.assign(e||{},t):t}function ir(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Bi(t[3]))):(e=nr(t,{r:0,g:0,b:0,a:1})).a=Bi(e.a),e}function rr(t){return"r"===t.charAt(0)?function(t){const e=Hi.exec(t);let n,i,r,o=255;if(e){if(e[7]!==n){const t=+e[7];o=255&(e[8]?Ni(t):255*t)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?Ni(n):n),i=255&(e[4]?Ni(i):i),r=255&(e[6]?Ni(r):r),{r:n,g:i,b:r,a:o}}}(t):Ki(t)}class or{constructor(t){if(t instanceof or)return t;const e=typeof t;let n;var i,r,o;"object"===e?n=ir(t):"string"===e&&(o=(i=t).length,"#"===i[0]&&(4===o||5===o?r={r:255&17*Ti[i[1]],g:255&17*Ti[i[2]],b:255&17*Ti[i[3]],a:5===o?17*Ti[i[4]]:255}:7!==o&&9!==o||(r={r:Ti[i[1]]<<4|Ti[i[2]],g:Ti[i[3]]<<4|Ti[i[4]],b:Ti[i[5]]<<4|Ti[i[6]],a:9===o?Ti[i[7]]<<4|Ti[i[8]]:255})),n=r||tr(t)||rr(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=nr(this._rgb);return t&&(t.a=ji(t.a)),t}set rgb(t){this._rgb=ir(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ji(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):this._rgb;var t}hexString(){return this._valid?Ri(this._rgb):this._rgb}hslString(){return this._valid?function(t){if(!t)return;const e=qi(t),n=e[0],i=zi(e[1]),r=zi(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${ji(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}(this._rgb):this._rgb}mix(t,e){const n=this;if(t){const i=n.rgb,r=t.rgb;let o;const a=e===o?.5:e,s=2*a-1,l=i.a-r.a,u=((s*l==-1?s:(s+l)/(1+s*l))+1)/2;o=1-u,i.r=255&u*i.r+o*r.r+.5,i.g=255&u*i.g+o*r.g+.5,i.b=255&u*i.b+o*r.b+.5,i.a=a*i.a+(1-a)*r.a,n.rgb=i}return n}clone(){return new or(this.rgb)}alpha(t){return this._rgb.a=Bi(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=Pi(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return er(this._rgb,2,t),this}darken(t){return er(this._rgb,2,-t),this}saturate(t){return er(this._rgb,1,t),this}desaturate(t){return er(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=qi(t);n[0]=Xi(n[0]+e),n=Yi(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function ar(t){return new or(t)}const sr=t=>t instanceof CanvasGradient||t instanceof CanvasPattern;function lr(t){return sr(t)?t:ar(t)}function ur(t){return sr(t)?t:ar(t).saturate(.5).darken(.1).hexString()}const cr=Object.create(null),hr=Object.create(null);function dr(t,e){if(!e)return t;const n=e.split(".");for(let e=0,i=n.length;e<i;++e){const i=n[e];t=t[i]||(t[i]=Object.create(null))}return t}function fr(t,e,n){return"string"==typeof e?qn(dr(t,e),n):qn(dr(t,""),e)}var pr=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>ur(e.backgroundColor),this.hoverBorderColor=(t,e)=>ur(e.borderColor),this.hoverColor=(t,e)=>ur(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return fr(this,t,e)}get(t){return dr(this,t)}describe(t,e){return fr(hr,t,e)}override(t,e){return fr(cr,t,e)}route(t,e,n,i){const r=dr(this,t),o=dr(this,n),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=o[i];return Pn(t)?Object.assign({},e,t):Bn(t,e)},set(t){this[a]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function gr(t,e,n,i,r){let o=e[r];return o||(o=e[r]=t.measureText(r).width,n.push(r)),o>i&&(i=o),i}function mr(t,e,n,i){let r=(i=i||{}).data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},o=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let a=0;const s=n.length;let l,u,c,h,d;for(l=0;l<s;l++)if(h=n[l],null!=h&&!0!==Rn(h))a=gr(t,r,o,a,h);else if(Rn(h))for(u=0,c=h.length;u<c;u++)d=h[u],null==d||Rn(d)||(a=gr(t,r,o,a,d));t.restore();const f=o.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[o[l]];o.splice(0,f)}return a}function vr(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function yr(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function br(t,e,n,i){let r,o,a,s,l;const u=e.pointStyle,c=e.rotation,h=e.radius;let d=(c||0)*oi;if(u&&"object"==typeof u&&(r=u.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(n,i),t.rotate(d),t.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),void t.restore();if(!(isNaN(h)||h<=0)){switch(t.beginPath(),u){default:t.arc(n,i,h,0,ni),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(d)*h,i-Math.cos(d)*h),d+=li,t.lineTo(n+Math.sin(d)*h,i-Math.cos(d)*h),d+=li,t.lineTo(n+Math.sin(d)*h,i-Math.cos(d)*h),t.closePath();break;case"rectRounded":l=.516*h,s=h-l,o=Math.cos(d+si)*s,a=Math.sin(d+si)*s,t.arc(n-o,i-a,l,d-ei,d-ai),t.arc(n+a,i-o,l,d-ai,d),t.arc(n+o,i+a,l,d,d+ai),t.arc(n-a,i+o,l,d+ai,d+ei),t.closePath();break;case"rect":if(!c){s=Math.SQRT1_2*h,t.rect(n-s,i-s,2*s,2*s);break}d+=si;case"rectRot":o=Math.cos(d)*h,a=Math.sin(d)*h,t.moveTo(n-o,i-a),t.lineTo(n+a,i-o),t.lineTo(n+o,i+a),t.lineTo(n-a,i+o),t.closePath();break;case"crossRot":d+=si;case"cross":o=Math.cos(d)*h,a=Math.sin(d)*h,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o);break;case"star":o=Math.cos(d)*h,a=Math.sin(d)*h,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o),d+=si,o=Math.cos(d)*h,a=Math.sin(d)*h,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o);break;case"line":o=Math.cos(d)*h,a=Math.sin(d)*h,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(d)*h,i+Math.sin(d)*h)}t.fill(),e.borderWidth>0&&t.stroke()}}function xr(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function _r(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Er(t){t.restore()}function wr(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Ar(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Dr(t,e,n,i,r,o={}){const a=Rn(e)?e:[e],s=o.strokeWidth>0&&""!==o.strokeColor;let l,u;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);Ln(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),l=0;l<a.length;++l)u=a[l],s&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Ln(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(u,n,i,o.maxWidth)),t.fillText(u,n,i,o.maxWidth),Cr(t,n,i,u,o),i+=r.lineHeight;t.restore()}function Cr(t,e,n,i,r){if(r.strikethrough||r.underline){const o=t.measureText(i),a=e-o.actualBoundingBoxLeft,s=e+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,u=n+o.actualBoundingBoxDescent,c=r.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(a,c),t.lineTo(s,c),t.stroke()}}function kr(t,e){const{x:n,y:i,w:r,h:o,radius:a}=e;t.arc(n+a.topLeft,i+a.topLeft,a.topLeft,-ai,ei,!0),t.lineTo(n,i+o-a.bottomLeft),t.arc(n+a.bottomLeft,i+o-a.bottomLeft,a.bottomLeft,ei,ai,!0),t.lineTo(n+r-a.bottomRight,i+o),t.arc(n+r-a.bottomRight,i+o-a.bottomRight,a.bottomRight,ai,0,!0),t.lineTo(n+r,i+a.topRight),t.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-ai,!0),t.lineTo(n+a.topLeft,i)}const Sr=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Tr=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Or(t,e){const n=(""+t).match(Sr);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}function Ir(t,e){const n={},i=Pn(e),r=i?Object.keys(e):e,o=Pn(t)?i?n=>Bn(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of r)n[t]=+o(t)||0;return n}function Mr(t){return Ir(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Lr(t){return Ir(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Rr(t){const e=Mr(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Pr(t,e){t=t||{},e=e||pr.font;let n=Bn(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let i=Bn(t.style,e.style);i&&!(""+i).match(Tr)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const r={family:Bn(t.family,e.family),lineHeight:Or(Bn(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Bn(t.weight,e.weight),string:""};return r.string=function(t){return!t||Ln(t.size)||Ln(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function Fr(t,e,n,i){let r,o,a,s=!0;for(r=0,o=t.length;r<o;++r)if(a=t[r],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),s=!1),void 0!==n&&Rn(a)&&(a=a[n%a.length],s=!1),void 0!==a))return i&&!s&&(i.cacheable=!1),a}function Nr(t,e){return Object.assign(Object.create(t),e)}function Br(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,o=0;for(;r-o>1;)i=o+r>>1,n(i)?o=i:r=i;return{lo:o,hi:r}}const jr=(t,e,n)=>Br(t,n,(i=>t[i][e]<n)),zr=(t,e,n)=>Br(t,n,(i=>t[i][e]>=n));const Hr=["push","pop","shift","splice","unshift"];function Vr(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(Hr.forEach((e=>{delete t[e]})),delete t._chartjs)}function Wr(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}function Ur(t,e=[""],n=t,i,r=(()=>t[0])){Jn(i)||(i=eo("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:r,override:r=>Ur([r,...t],e,n,i)};return new Proxy(o,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>Xr(n,i,(()=>function(t,e,n,i){let r;for(const o of e)if(r=eo($r(o,t),n),Jn(r))return Yr(t,r)?Qr(n,i,t,r):r}(i,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>no(t).includes(e),ownKeys:t=>no(t),set(t,e,n){const i=t._storage||(t._storage=r());return t[e]=i[e]=n,delete t._keys,!0}})}function Gr(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:qr(t,i),setContext:e=>Gr(t,e,n,i),override:r=>Gr(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Xr(t,e,(()=>function(t,e,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=t;let s=i[e];Qn(s)&&a.isScriptable(e)&&(s=function(t,e,n,i){const{_proxy:r,_context:o,_subProxy:a,_stack:s}=n;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);s.add(t),e=e(o,a||i),s.delete(t),Yr(t,e)&&(e=Qr(r._scopes,r,t,e));return e}(e,s,t,n));Rn(s)&&s.length&&(s=function(t,e,n,i){const{_proxy:r,_context:o,_subProxy:a,_descriptors:s}=n;if(Jn(o.index)&&i(t))e=e[o.index%e.length];else if(Pn(e[0])){const n=e,i=r._scopes.filter((t=>t!==n));e=[];for(const l of n){const n=Qr(i,r,t,l);e.push(Gr(n,o,a&&a[t],s))}}return e}(e,s,t,a.isIndexable));Yr(e,s)&&(s=Gr(s,r,o&&o[e],a));return s}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function qr(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Qn(n)?n:()=>n,isIndexable:Qn(i)?i:()=>i}}const $r=(t,e)=>t?t+Zn(e):e,Yr=(t,e)=>Pn(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Xr(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function Kr(t,e,n){return Qn(t)?t(e,n):t}const Zr=(t,e)=>!0===t?e:"string"==typeof t?Kn(e,t):void 0;function Jr(t,e,n,i,r){for(const o of e){const e=Zr(n,o);if(e){t.add(e);const o=Kr(e._fallback,n,r);if(Jn(o)&&o!==n&&o!==i)return o}else if(!1===e&&Jn(i)&&n!==i)return null}return!1}function Qr(t,e,n,i){const r=e._rootScopes,o=Kr(e._fallback,n,i),a=[...t,...r],s=new Set;s.add(i);let l=to(s,a,n,o||n,i);return null!==l&&((!Jn(o)||o===n||(l=to(s,a,o,l,i),null!==l))&&Ur(Array.from(s),[""],r,o,(()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];if(Rn(r)&&Pn(n))return n;return r}(e,n,i))))}function to(t,e,n,i,r){for(;n;)n=Jr(t,e,n,i,r);return n}function eo(t,e){for(const n of e){if(!n)continue;const e=n[t];if(Jn(e))return e}}function no(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}const io=Number.EPSILON||1e-14,ro=(t,e)=>e<t.length&&!t[e].skip&&t[e],oo=t=>"x"===t?"y":"x";function ao(t,e,n,i){const r=t.skip?e:t,o=e,a=n.skip?e:n,s=bi(o,r),l=bi(a,o);let u=s/(s+l),c=l/(s+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const h=i*u,d=i*c;return{previous:{x:o.x-h*(a.x-r.x),y:o.y-h*(a.y-r.y)},next:{x:o.x+d*(a.x-r.x),y:o.y+d*(a.y-r.y)}}}function so(t,e="x"){const n=oo(e),i=t.length,r=Array(i).fill(0),o=Array(i);let a,s,l,u=ro(t,0);for(a=0;a<i;++a)if(s=l,l=u,u=ro(t,a+1),l){if(u){const t=u[e]-l[e];r[a]=0!==t?(u[n]-l[n])/t:0}o[a]=s?u?ci(r[a-1])!==ci(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(t,e,n){const i=t.length;let r,o,a,s,l,u=ro(t,0);for(let c=0;c<i-1;++c)l=u,u=ro(t,c+1),l&&u&&(fi(e[c],0,io)?n[c]=n[c+1]=0:(r=n[c]/e[c],o=n[c+1]/e[c],s=Math.pow(r,2)+Math.pow(o,2),s<=9||(a=3/Math.sqrt(s),n[c]=r*a*e[c],n[c+1]=o*a*e[c])))}(t,r,o),function(t,e,n="x"){const i=oo(n),r=t.length;let o,a,s,l=ro(t,0);for(let u=0;u<r;++u){if(a=s,s=l,l=ro(t,u+1),!s)continue;const r=s[n],c=s[i];a&&(o=(r-a[n])/3,s[`cp1${n}`]=r-o,s[`cp1${i}`]=c-o*e[u]),l&&(o=(l[n]-r)/3,s[`cp2${n}`]=r+o,s[`cp2${i}`]=c+o*e[u])}}(t,o,e)}function lo(t,e,n){return Math.max(Math.min(t,n),e)}function uo(t,e,n,i,r){let o,a,s,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)so(t,r);else{let n=i?t[t.length-1]:t[0];for(o=0,a=t.length;o<a;++o)s=t[o],l=ao(n,s,t[Math.min(o+1,a-(i?0:1))%a],e.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,n=s}e.capBezierPoints&&function(t,e){let n,i,r,o,a,s=xr(t[0],e);for(n=0,i=t.length;n<i;++n)a=o,o=s,s=n<i-1&&xr(t[n+1],e),o&&(r=t[n],a&&(r.cp1x=lo(r.cp1x,e.left,e.right),r.cp1y=lo(r.cp1y,e.top,e.bottom)),s&&(r.cp2x=lo(r.cp2x,e.left,e.right),r.cp2y=lo(r.cp2y,e.top,e.bottom)))}(t,n)}function co(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ho(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function fo(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const po=t=>window.getComputedStyle(t,null);const go=["top","right","bottom","left"];function mo(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const o=go[r];i[o]=parseFloat(t[e+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function vo(t,e){const{canvas:n,currentDevicePixelRatio:i}=e,r=po(n),o="border-box"===r.boxSizing,a=mo(r,"padding"),s=mo(r,"border","width"),{x:l,y:u,box:c}=function(t,e){const n=t.native||t,i=n.touches,r=i&&i.length?i[0]:n,{offsetX:o,offsetY:a}=r;let s,l,u=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(o,a,n.target))s=o,l=a;else{const t=e.getBoundingClientRect();s=r.clientX-t.left,l=r.clientY-t.top,u=!0}return{x:s,y:l,box:u}}(t,n),h=a.left+(c&&s.left),d=a.top+(c&&s.top);let{width:f,height:p}=e;return o&&(f-=a.width+s.width,p-=a.height+s.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((u-d)/p*n.height/i)}}const yo=t=>Math.round(10*t)/10;function bo(t,e,n,i){const r=po(t),o=mo(r,"margin"),a=fo(r.maxWidth,t,"clientWidth")||ri,s=fo(r.maxHeight,t,"clientHeight")||ri,l=function(t,e,n){let i,r;if(void 0===e||void 0===n){const o=ho(t);if(o){const t=o.getBoundingClientRect(),a=po(o),s=mo(a,"border","width"),l=mo(a,"padding");e=t.width-l.width-s.width,n=t.height-l.height-s.height,i=fo(a.maxWidth,o,"clientWidth"),r=fo(a.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||ri,maxHeight:r||ri}}(t,e,n);let{width:u,height:c}=l;if("content-box"===r.boxSizing){const t=mo(r,"border","width"),e=mo(r,"padding");u-=e.width+t.width,c-=e.height+t.height}return u=Math.max(0,u-o.width),c=Math.max(0,i?Math.floor(u/i):c-o.height),u=yo(Math.min(u,a,l.maxWidth)),c=yo(Math.min(c,s,l.maxHeight)),u&&!c&&(c=yo(u/2)),{width:u,height:c}}function xo(t,e,n){const i=e||1,r=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=r/i,t.width=o/i;const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||a.height!==r||a.width!==o)&&(t.currentDevicePixelRatio=i,a.height=r,a.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0)}const _o=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function Eo(t,e){const n=function(t,e){return po(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function wo(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Ao(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function Do(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},a=wo(t,r,n),s=wo(r,o,n),l=wo(o,e,n),u=wo(a,s,n),c=wo(s,l,n);return wo(u,c,n)}const Co=new Map;function ko(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Co.get(n);return i||(i=new Intl.NumberFormat(t,e),Co.set(n,i)),i}(e,n).format(t)}function So(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function To(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Oo(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Io(t){return"angle"===t?{between:Ei,compare:xi,normalize:_i}:{between:Ai,compare:(t,e)=>t-e,normalize:t=>t}}function Mo({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:r}}function Lo(t,e,n){if(!n)return[t];const{property:i,start:r,end:o}=n,a=e.length,{compare:s,between:l,normalize:u}=Io(i),{start:c,end:h,loop:d,style:f}=function(t,e,n){const{property:i,start:r,end:o}=n,{between:a,normalize:s}=Io(i),l=e.length;let u,c,{start:h,end:d,loop:f}=t;if(f){for(h+=l,d+=l,u=0,c=l;u<c&&a(s(e[h%l][i]),r,o);++u)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,v,y=!1,b=null;const x=()=>y||l(r,v,g)&&0!==s(r,v),_=()=>!y||0===s(o,g)||l(o,v,g);for(let t=c,n=c;t<=h;++t)m=e[t%a],m.skip||(g=u(m[i]),g!==v&&(y=l(g,r,o),null===b&&x()&&(b=0===s(g,r)?t:n),null!==b&&_()&&(p.push(Mo({start:b,end:t,loop:d,count:a,style:f})),b=null),n=t,v=g));return null!==b&&p.push(Mo({start:b,end:h,loop:d,count:a,style:f})),p}function Ro(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const o=Lo(i[r],t.points,e);o.length&&n.push(...o)}return n}function Po(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=t._chart.getContext(),o=Fo(t.options),{_datasetIndex:a,options:{spanGaps:s}}=t,l=n.length,u=[];let c=o,h=e[0].start,d=h;function f(t,e,i,r){const o=s?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=o;for(;n[e%l].skip;)e+=o;t%l!=e%l&&(u.push({start:t%l,end:e%l,loop:i,style:r}),c=r,h=e%l)}}for(const t of e){h=s?h:t.start;let e,o=n[h%l];for(d=h+1;d<=t.end;d++){const s=n[d%l];e=Fo(i.setContext(Nr(r,{type:"segment",p0:o,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),No(e,c)&&f(h,d-1,t.loop,c),o=s,c=e}h<d-1&&f(h,d-1,t.loop,c)}return u}(t,e,n,i):e}function Fo(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function No(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var Bo=new
/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
<<<<<<< HEAD
class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],o=e.duration;r.forEach((i=>i({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=Tn.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o,a=r.length-1,s=!1;for(;a>=0;--a)o=r[a],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),s=!0):(r[a]=r[r.length-1],r.pop());s&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const jo="transparent",Vo={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=ur(t||jo),r=i.valid&&ur(e||jo);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class zo{constructor(t,e,n,i){const r=e[n];i=Fr([t.to,i,r,t.from]);const o=Fr([t.from,r,i]);this._active=!0,this._fn=t.fn||Vo[t.type||typeof o],this._easing=ki[t.easing]||ki.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Fr([t.to,e,i,t.from]),this._from=Fr([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let s;if(this._active=r!==a&&(o||e<n),!this._active)return this._target[i]=a,void this._notify(!0);e<0?this._target[i]=r:(s=e/n%2,s=o&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[i]=this._fn(r,a,s))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}pr.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Uo=Object.keys(pr.animation);pr.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),pr.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),pr.describe("animations",{_fallback:"animation"}),pr.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class Go{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Pn(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((n=>{const i=t[n];if(!Pn(i))return;const r={};for(const t of Uo)r[t]=i[t];(Ln(i.properties)&&i.properties||[n]).forEach((t=>{t!==n&&e.has(t)||e.set(t,r)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let e=0;e<i.length;e++){const r=t[i[e]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let s;for(s=o.length-1;s>=0;--s){const u=o[s];if("$"===u.charAt(0))continue;if("options"===u){i.push(...this._animateOptions(t,e));continue}const l=e[u];let c=r[u];const h=n.get(u);if(c){if(h&&c.active()){c.update(h,l,a);continue}c.cancel()}h&&h.duration?(r[u]=c=new zo(h,t,u,l),i.push(c)):t[u]=l}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Bo.add(this._chart,n),!0):void 0}}function Wo(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:i?o:r,end:i?r:o}}function Ho(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,o;for(r=0,o=i.length;r<o;++r)n.push(i[r].index);return n}function qo(t,e,n,i={}){const r=t.keys,o="single"===i.mode;let a,s,u,l;if(null!==e){for(a=0,s=r.length;a<s;++a){if(u=+r[a],u===n){if(i.all)continue;break}l=t.values[u],Fn(l)&&(o||0===e||ci(e)===ci(l))&&(e+=l)}return e}}function $o(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Yo(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Xo(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function Ko(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:o,vScale:a,index:s}=i,u=o.axis,l=a.axis,c=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(o,a,i),h=e.length;let d;for(let t=0;t<h;++t){const n=e[t],{[u]:o,[l]:h}=n;d=(n._stacks||(n._stacks={}))[l]=Yo(r,c,o),d[s]=h,d._top=Xo(d,a,!0,i.type),d._bottom=Xo(d,a,!1,i.type)}}function Zo(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function Jo(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n]}}}const Qo=t=>"reset"===t||"none"===t,ta=(t,e)=>e?t:Object.assign({},t);class ea{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=$o(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Jo(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=Bn(n.xAxisID,Zo(t,"x")),o=e.yAxisID=Bn(n.yAxisID,Zo(t,"y")),a=e.rAxisID=Bn(n.rAxisID,Zo(t,"r")),s=e.indexAxis,u=e.iAxisID=i(s,r,o,a),l=e.vAxisID=i(s,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(u),e.vScale=this.getScaleForId(l)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ur(this._data,this),t._stacked&&Jo(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Pn(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i],n[i]={x:o,y:t[o]};return n}(e);else if(n!==e){if(n){Ur(n,this);const t=this._cachedMeta;Jo(t),t._parsed=[]}e&&Object.isExtensible(e)&&(r=this,(i=e)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),zr.forEach((t=>{const e="_onData"+Zn(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...t){const r=n.apply(this,t);return i._chartjs.listeners.forEach((n=>{"function"==typeof n[e]&&n[e](...t)})),r}})})))),this._syncList=[],this._data=e}var i,r}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=$o(e.vScale,e),e.stack!==n.stack&&(i=!0,Jo(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&Ko(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,a=r.axis;let s,u,l,c=0===t&&e===i.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,l=i;else{l=Ln(i[t])?this.parseArrayData(n,i,t,e):Pn(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===u[a]||h&&u[a]<h[a];for(s=0;s<e;++s)n._parsed[s+t]=u=l[s],c&&(r()&&(c=!1),h=u);n._sorted=c}o&&Ko(this,l)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:o}=t,a=r.axis,s=o.axis,u=r.getLabels(),l=r===o,c=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,c[h]={[a]:l||r.parse(u[f],f),[s]:o.parse(e[f],f)};return c}parseArrayData(t,e,n,i){const{xScale:r,yScale:o}=t,a=new Array(i);let s,u,l,c;for(s=0,u=i;s<u;++s)l=s+n,c=e[l],a[s]={x:r.parse(c[0],l),y:o.parse(c[1],l)};return a}parseObjectData(t,e,n,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,u=new Array(i);let l,c,h,d;for(l=0,c=i;l<c;++l)h=l+n,d=e[h],u[l]={x:r.parse(Kn(d,a),h),y:o.parse(Kn(d,s),h)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,o=e[t.axis];return qo({keys:Ho(i,!0),values:e._stacks[t.axis]},o,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let o=null===r?NaN:r;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,o=qo(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,o=i.length,a=this._getOtherScale(t),s=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Ho(n,!0),values:null})(e,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:l,max:c}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=i[h];const e=d[a.axis];return!Fn(d[t.axis])||l>e||c<e}for(h=0;h<o&&(f()||(this.updateRangeFromParsed(u,t,d,s),!r));++h);if(r)for(h=o-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(u,t,d,s);break}return u}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],Fn(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return Pn(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(Bn(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=Wo(t,n),r=Wo(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,o=[],a=this._drawStart||0,s=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop;let l;for(n.dataset&&n.dataset.draw(t,r,a,s),l=a;l<a+s;++l){const e=i[l];e.hidden||(e.active&&u?o.push(e):e.draw(t,r))}for(l=0;l<o.length;++l)o[l].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return Nr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return Nr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,r=this._cachedDataOpts,o=t+"-"+e,a=r[o],s=this.enableOptionSharing&&Jn(n);if(a)return ta(a,s);const u=this.chart.config,l=u.datasetElementScopeKeys(this._type,t),c=i?[`${t}Hover`,"hover",t,""]:[t,""],h=u.getOptionScopes(this.getDataset(),l),d=Object.keys(pr.elements[t]),f=u.resolveNamedOptions(h,d,(()=>this.getContext(n,i)),c);return f.$shared&&(f.$shared=s,r[o]=Object.freeze(ta(f,s))),f}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let s;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),o=i.getOptionScopes(this.getDataset(),r);s=i.createResolver(o,this.getContext(t,n,e))}const u=new Go(i,s&&s.animations);return s&&s._cacheable&&(r[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Qo(t)||this.chart._animationsDisabled}updateElement(t,e,n,i){Qo(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!Qo(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const i=n.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,n=!0){const i=this._cachedMeta,r=i.data,o=t+e;let a;const s=t=>{for(t.length+=e,a=t.length-1;a>=o;a--)t[a]=t[a-e]};for(s(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&Jo(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function na(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=Gr(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,r,o,a,s=e._length;const u=()=>{32767!==o&&-32768!==o&&(Jn(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=n.length;i<r;++i)o=e.getPixelForValue(n[i]),u();for(a=void 0,i=0,r=e.ticks.length;i<r;++i)o=e.getPixelForTick(i),u();return s}function ia(t,e,n,i){return Ln(t)?function(t,e,n,i){const r=n.parse(t[0],i),o=n.parse(t[1],i),a=Math.min(r,o),s=Math.max(r,o);let u=a,l=s;Math.abs(a)>Math.abs(s)&&(u=s,l=a),e[n.axis]=l,e._custom={barStart:u,barEnd:l,start:r,end:o,min:a,max:s}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function ra(t,e,n,i){const r=t.iScale,o=t.vScale,a=r.getLabels(),s=r===o,u=[];let l,c,h,d;for(l=n,c=n+i;l<c;++l)d=e[l],h={},h[r.axis]=s||r.parse(a[l],l),u.push(ia(d,h,o,l));return u}function oa(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function aa(t,e,n,i){let r=e.borderSkipped;const o={};if(!r)return void(t.borderSkipped=o);const{start:a,end:s,reverse:u,top:l,bottom:c}=function(t){let e,n,i,r,o;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:n,end:i,reverse:e,top:r,bottom:o}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=l:(n._bottom||0)===i?r=c:(o[sa(c,a,s,u)]=!0,r=l)),o[sa(r,a,s,u)]=!0,t.borderSkipped=o}function sa(t,e,n,i){var r,o,a;return i?(a=n,t=ua(t=(r=t)===(o=e)?a:r===a?o:r,n,e)):t=ua(t,e,n),t}function ua(t,e,n){return"start"===t?e:"end"===t?n:t}function la(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}ea.defaults={},ea.prototype.datasetElementType=null,ea.prototype.dataElementType=null;class ca extends ea{parsePrimitiveData(t,e,n,i){return ra(t,e,n,i)}parseArrayData(t,e,n,i){return ra(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,u="x"===r.axis?a:s,l="x"===o.axis?a:s,c=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=e[h],f={},f[r.axis]=r.parse(Kn(p,u),h),c.push(ia(Kn(p,l),f,o,h));return c}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),o=r._custom,a=oa(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:o,_cachedMeta:{vScale:a}}=this,s=a.getBasePixel(),u=a.isHorizontal(),l=this._getRuler(),c=this.resolveDataElementOptions(e,i),h=this.getSharedOptions(c),d=this.includeOptions(i,h);this.updateSharedOptions(h,i,c);for(let c=e;c<e+n;c++){const e=this.getParsed(c),n=r||Rn(e[a.axis])?{base:s,head:s}:this._calculateBarValuePixels(c),f=this._calculateBarIndexPixels(c,l),p=(e._stacks||{})[a.axis],g={horizontal:u,base:n.base,enableBorderRadius:!p||oa(e._custom)||o===p._top||o===p._bottom,x:u?n.head:f.center,y:u?f.center:n.head,height:u?f.size:Math.abs(n.size),width:u?Math.abs(n.size):f.size};d&&(g.options=h||this.resolveDataElementOptions(c,t[c].active?"active":i));const m=g.options||t[c].options;aa(g,m,p,o),la(g,m,l.ratio),this.updateElement(t[c],c,g,i)}}_getStacks(t,e){const n=this._cachedMeta.iScale,i=n.getMatchingVisibleMetas(this._type),r=n.options.stacked,o=i.length,a=[];let s,u;for(s=0;s<o;++s)if(u=i[s],u.controller.options.grouped){if(void 0!==e){const t=u.controller.getParsed(e)[u.controller._cachedMeta.vScale.axis];if(Rn(t)||isNaN(t))continue}if((!1===r||-1===a.indexOf(u.stack)||void 0===r&&void 0===u.stack)&&a.push(u.stack),u.index===t)break}return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||na(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n},options:{base:i,minBarLength:r}}=this,o=i||0,a=this.getParsed(t),s=a._custom,u=oa(s);let l,c,h=a[e.axis],d=0,f=n?this.applyStack(e,a,n):h;f!==h&&(d=f-h,f=h),u&&(h=s.barStart,f=s.barEnd-s.barStart,0!==h&&ci(h)!==ci(s.barEnd)&&(d=0),d+=h);const p=Rn(i)||u?d:i;let g=e.getPixelForValue(p);if(l=this.chart.getDataVisibility(t)?e.getPixelForValue(d+f):g,c=l-g,Math.abs(c)<r&&(c=function(t,e,n){return 0!==t?ci(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(c,e,o)*r,h===o&&(g-=c/2),l=g+c),g===e.getPixelForValue(o)){const t=ci(c)*e.getLineWidthForValue(o)/2;g+=t,c-=t}return{size:c,base:g,head:l,center:l+c/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,o=Bn(i.maxBarThickness,1/0);let a,s;if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,u="flex"===i.barThickness?function(t,e,n,i){const r=e.pixels,o=r[t];let a=t>0?r[t-1]:null,s=t<r.length-1?r[t+1]:null;const u=n.categoryPercentage;null===a&&(a=o-(null===s?e.end-e.start:s-o)),null===s&&(s=o+o-a);const l=o-(o-Math.min(a,s))/2*u;return{chunk:Math.abs(s-a)/2*u/i,ratio:n.barPercentage,start:l}}(t,e,i,n):function(t,e,n,i){const r=n.barThickness;let o,a;return Rn(r)?(o=e.min*n.categoryPercentage,a=n.barPercentage):(o=r*i,a=1),{chunk:o/i,ratio:a,start:e.pixels[t]-o/2}}(t,e,i,n),l=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=u.start+u.chunk*l+u.chunk/2,s=Math.min(o,u.chunk*u.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),s=Math.min(o,e.min*e.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null!==this.getParsed(r)[e.axis]&&n[r].draw(this._ctx)}}ca.id="bar",ca.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},ca.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class ha extends ea{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let t=0;t<r.length;t++)r[t]._custom=this.resolveDataElementOptions(t+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=Bn(i[2],this.resolveDataElementOptions(t+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=Bn(i&&i.r&&+i.r,this.resolveDataElementOptions(t+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:n,yScale:i}=e,r=this.getParsed(t),o=n.getLabelForValue(r.x),a=i.getLabelForValue(r.y),s=r._custom;return{label:e.label,value:"("+o+", "+a+(s?", "+s:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:a}=this._cachedMeta,s=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(s),l=this.includeOptions(i,u),c=o.axis,h=a.axis;for(let s=e;s<e+n;s++){const e=t[s],n=!r&&this.getParsed(s),u={},d=u[c]=r?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),f=u[h]=r?a.getBasePixel():a.getPixelForValue(n[h]);u.skip=isNaN(d)||isNaN(f),l&&(u.options=this.resolveDataElementOptions(s,e.active?"active":i),r&&(u.options.radius=0)),this.updateElement(e,s,u,i)}this.updateSharedOptions(u,i,s)}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=Bn(n&&n._custom,r),i}}ha.id="bubble",ha.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},ha.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class da extends ea{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,o,a=t=>+n[t];if(Pn(n[t])){const{key:t="value"}=this._parsing;a=e=>+Kn(n[e],t)}for(r=t,o=t+e;r<o;++r)i._parsed[r]=a(r)}}_getRotation(){return gi(this.options.rotation-90)}_getCircumference(){return gi(this.options.circumference)}_getRotationExtents(){let t=ni,e=-ni;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),s=Math.min((u=this.options.cutout,l=a,"string"==typeof u&&u.endsWith("%")?parseFloat(u)/100:u/l),1);var u,l;const c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let i=1,r=1,o=0,a=0;if(e<ni){const s=t,u=s+e,l=Math.cos(s),c=Math.sin(s),h=Math.cos(u),d=Math.sin(u),f=(t,e,i)=>xi(t,s,u,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>xi(t,s,u,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,l,h),m=f(ai,c,d),v=p(ei,l,h),y=p(ei+ai,c,d);i=(g-v)/2,r=(m-y)/2,o=-(g+v)/2,a=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:a}}(d,h,s),v=(n.width-o)/f,y=(n.height-o)/p,b=Math.max(Math.min(v,y)/2,0),_=jn(this.options.radius,b),E=(_-Math.max(_*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=m*_,i.total=this.calculateTotal(),this.outerRadius=_-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/ni)}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,a=o.chartArea,s=o.options.animation,u=(a.left+a.right)/2,l=(a.top+a.bottom)/2,c=r&&s.animateScale,h=c?0:this.innerRadius,d=c?0:this.outerRadius,f=this.resolveDataElementOptions(e,i),p=this.getSharedOptions(f),g=this.includeOptions(i,p);let m,v=this._getRotation();for(m=0;m<e;++m)v+=this._circumference(m,r);for(m=e;m<e+n;++m){const e=this._circumference(m,r),n=t[m],o={x:u+this.offsetX,y:l+this.offsetY,startAngle:v,endAngle:v+e,circumference:e,outerRadius:d,innerRadius:h};g&&(o.options=p||this.resolveDataElementOptions(m,n.active?"active":i)),v+=e,this.updateElement(n,m,o,i)}this.updateSharedOptions(p,i,f)}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?ni*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=To(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,o,a,s;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),t=o.data,a=o.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)s=a.resolveDataElementOptions(i),"inner"!==s.borderAlign&&(e=Math.max(e,s.borderWidth||0,s.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Bn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}da.id="doughnut",da.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},da.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},da.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const r=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return Ln(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}};class fa extends ea{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:s}=function(t,e,n){const i=e.length;let r=0,o=i;if(t._sorted){const{iScale:a,_parsed:s}=t,u=a.axis,{min:l,max:c,minDefined:h,maxDefined:d}=a.getUserBounds();h&&(r=wi(Math.min(jr(s,a.axis,l).lo,n?i:jr(e,u,a.getPixelForValue(l)).lo),0,i-1)),o=d?wi(Math.max(jr(s,a.axis,c).hi+1,n?0:jr(e,u,a.getPixelForValue(c)).hi+1),r,i)-r:i-r}return{start:r,count:o}}(e,i,o);this._drawStart=a,this._drawCount=s,function(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),o}(e)&&(a=0,s=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:u},t),this.updateElements(i,a,s,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:a,_stacked:s,_dataset:u}=this._cachedMeta,l=this.resolveDataElementOptions(e,i),c=this.getSharedOptions(l),h=this.includeOptions(i,c),d=o.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=di(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let y=e>0&&this.getParsed(e-1);for(let l=e;l<e+n;++l){const e=t[l],n=this.getParsed(l),p=v?e:{},b=Rn(n[f]),_=p[d]=o.getPixelForValue(n[d],l),E=p[f]=r||b?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,n,s):n[f],l);p.skip=isNaN(_)||isNaN(E)||b,p.stop=l>0&&n[d]-y[d]>m,g&&(p.parsed=n,p.raw=u.data[l]),h&&(p.options=c||this.resolveDataElementOptions(l,e.active?"active":i)),v||this.updateElement(e,l,p,i),y=n}this.updateSharedOptions(c,i,l)}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}fa.id="line",fa.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},fa.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class pa extends ea{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=To(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),o=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,a=this.getDataset(),s=o.options.animation,u=this._cachedMeta.rScale,l=u.xCenter,c=u.yCenter,h=u.getIndexAngle(0)-.5*ei;let d,f=h;const p=360/this.countVisibleElements();for(d=0;d<e;++d)f+=this._computeAngle(d,i,p);for(d=e;d<e+n;d++){const e=t[d];let n=f,g=f+this._computeAngle(d,i,p),m=o.getDataVisibility(d)?u.getDistanceFromCenterForValue(a.data[d]):0;f=g,r&&(s.animateScale&&(m=0),s.animateRotate&&(n=g=h));const v={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:g,options:this.resolveDataElementOptions(d,e.active?"active":i)};this.updateElement(e,d,v,i)}}countVisibleElements(){const t=this.getDataset(),e=this._cachedMeta;let n=0;return e.data.forEach(((e,i)=>{!isNaN(t.data[i])&&this.chart.getDataVisibility(i)&&n++})),n}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?gi(this.resolveDataElementOptions(t,e).angle||n):0}}pa.id="polarArea",pa.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},pa.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const r=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class ga extends da{}ga.id="pie",ga.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class ma extends ea{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this.getDataset(),o=this._cachedMeta.rScale,a="reset"===i;for(let s=e;s<e+n;s++){const e=t[s],n=this.resolveDataElementOptions(s,e.active?"active":i),u=o.getPointPositionForValue(s,r.data[s]),l=a?o.xCenter:u.x,c=a?o.yCenter:u.y,h={x:l,y:c,angle:u.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,s,h,i)}}}ma.id="radar",ma.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},ma.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class va extends fa{}va.id="scatter",va.defaults={showLine:!1,fill:!1},va.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var ya=Object.freeze({__proto__:null,BarController:ca,BubbleController:ha,DoughnutController:da,LineController:fa,PolarAreaController:pa,PieController:ga,RadarController:ma,ScatterController:va});function ba(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _a{constructor(t){this.options=t||{}}formats(){return ba()}parse(t,e){return ba()}format(t,e){return ba()}add(t,e,n){return ba()}diff(t,e,n){return ba()}startOf(t,e,n){return ba()}endOf(t,e){return ba()}}_a.override=function(t){Object.assign(_a.prototype,t)};var Ea={_date:_a};function xa(t,e){return"native"in t?{x:t.x,y:t.y}:vo(t,e)}function wa(t,e,n,i){const{controller:r,data:o,_sorted:a}=t,s=r._cachedMeta.iScale;if(s&&e===s.axis&&"r"!==e&&a&&o.length){const t=s._reversePixels?Vr:jr;if(!i)return t(o,e,n);if(r._sharedOptions){const i=o[0],r="function"==typeof i.getRange&&i.getRange(e);if(r){const i=t(o,e,n-r),a=t(o,e,n+r);return{lo:i.lo,hi:a.hi}}}}return{lo:0,hi:o.length-1}}function Aa(t,e,n,i,r){const o=t.getSortedVisibleDatasetMetas(),a=n[e];for(let t=0,n=o.length;t<n;++t){const{index:n,data:s}=o[t],{lo:u,hi:l}=wa(o[t],e,a,r);for(let t=u;t<=l;++t){const e=s[t];e.skip||i(e,n,t)}}}function Da(t,e,n,i){const r=[];if(!_r(e,t.chartArea,t._minPadding))return r;return Aa(t,n,e,(function(t,n,o){t.inRange(e.x,e.y,i)&&r.push({element:t,datasetIndex:n,index:o})}),!0),r}function Ca(t,e,n,i,r){let o=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,o=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(n);let s=Number.POSITIVE_INFINITY;return Aa(t,n,e,(function(n,u,l){const c=n.inRange(e.x,e.y,r);if(i&&!c)return;const h=n.getCenterPoint(r);if(!_r(h,t.chartArea,t._minPadding)&&!c)return;const d=a(e,h);d<s?(o=[{element:n,datasetIndex:u,index:l}],s=d):d===s&&o.push({element:n,datasetIndex:u,index:l})})),o}function Ta(t,e,n,i,r){return _r(e,t.chartArea,t._minPadding)?"r"!==n||i?Ca(t,e,n,i,r):function(t,e,n,i){let r=[];return Aa(t,n,e,(function(t,n,o){const{startAngle:a,endAngle:s}=t.getProps(["startAngle","endAngle"],i),{angle:u}=yi(t,{x:e.x,y:e.y});xi(u,a,s)&&r.push({element:t,datasetIndex:n,index:o})})),r}(t,e,n,r):[]}function ka(t,e,n,i){const r=xa(e,t),o=[],a=n.axis,s="x"===a?"inXRange":"inYRange";let u=!1;return function(t,e){const n=t.getSortedVisibleDatasetMetas();let i,r,o;for(let t=0,a=n.length;t<a;++t){({index:i,data:r}=n[t]);for(let t=0,n=r.length;t<n;++t)o=r[t],o.skip||e(o,i,t)}}(t,((t,e,n)=>{t[s](r[a],i)&&o.push({element:t,datasetIndex:e,index:n}),t.inRange(r.x,r.y,i)&&(u=!0)})),n.intersect&&!u?[]:o}var Sa={modes:{index(t,e,n,i){const r=xa(e,t),o=n.axis||"x",a=n.intersect?Da(t,r,o,i):Ta(t,r,o,!1,i),s=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&s.push({element:n,datasetIndex:t.index,index:e})})),s):[]},dataset(t,e,n,i){const r=xa(e,t),o=n.axis||"xy";let a=n.intersect?Da(t,r,o,i):Ta(t,r,o,!1,i);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,i)=>Da(t,xa(e,t),n.axis||"xy",i),nearest:(t,e,n,i)=>Ta(t,xa(e,t),n.axis||"xy",n.intersect,i),x:(t,e,n,i)=>ka(t,e,{axis:"x",intersect:n.intersect},i),y:(t,e,n,i)=>ka(t,e,{axis:"y",intersect:n.intersect},i)}};const Ia=["left","top","right","bottom"];function Oa(t,e){return t.filter((t=>t.pos===e))}function Ma(t,e){return t.filter((t=>-1===Ia.indexOf(t.pos)&&t.box.axis===e))}function Ra(t,e){return t.sort(((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function La(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!Ia.includes(i))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let o,a,s;for(o=0,a=t.length;o<a;++o){s=t[o];const{fullSize:a}=s.box,u=n[s.stack],l=u&&s.stackWeight/u.weight;s.horizontal?(s.width=l?l*i:a&&e.availableWidth,s.height=r):(s.width=i,s.height=l?l*r:a&&e.availableHeight)}return n}function Pa(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Fa(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Na(t,e,n,i){const{pos:r,box:o}=n,a=t.maxPadding;if(!Pn(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?o.height:o.width),n.size=e.size/e.count,t[r]+=n.size}o.getPadding&&Fa(a,o.getPadding());const s=Math.max(0,e.outerWidth-Pa(a,t,"left","right")),u=Math.max(0,e.outerHeight-Pa(a,t,"top","bottom")),l=s!==t.w,c=u!==t.h;return t.w=s,t.h=u,n.horizontal?{same:l,other:c}:{same:c,other:l}}function Ba(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}return i(t?["left","right"]:["top","bottom"])}function ja(t,e,n,i){const r=[];let o,a,s,u,l,c;for(o=0,a=t.length,l=0;o<a;++o){s=t[o],u=s.box,u.update(s.width||e.w,s.height||e.h,Ba(s.horizontal,e));const{same:a,other:h}=Na(e,n,s,i);l|=a&&r.length,c=c||h,u.fullSize||r.push(s)}return l&&ja(r,e,n,i)||c}function Va(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function za(t,e,n,i){const r=n.padding;let{x:o,y:a}=e;for(const s of t){const t=s.box,u=i[s.stack]||{count:1,placed:0,weight:1},l=s.stackWeight/u.weight||1;if(s.horizontal){const i=e.w*l,o=u.size||t.height;Jn(u.start)&&(a=u.start),t.fullSize?Va(t,r.left,a,n.outerWidth-r.right-r.left,o):Va(t,e.left+u.placed,a,i,o),u.start=a,u.placed+=i,a=t.bottom}else{const i=e.h*l,a=u.size||t.width;Jn(u.start)&&(o=u.start),t.fullSize?Va(t,o,r.top,a,n.outerHeight-r.bottom-r.top):Va(t,o,e.top+u.placed,a,i),u.start=o,u.placed+=i,o=t.right}}e.x=o,e.y=a}pr.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Ua={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Lr(t.options.layout.padding),o=Math.max(e-r.width,0),a=Math.max(n-r.height,0),s=function(t){const e=function(t){const e=[];let n,i,r,o,a,s;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:o,options:{stack:a,stackWeight:s=1}}=r),e.push({index:n,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&o+a,stackWeight:s});return e}(t),n=Ra(e.filter((t=>t.box.fullSize)),!0),i=Ra(Oa(e,"left"),!0),r=Ra(Oa(e,"right")),o=Ra(Oa(e,"top"),!0),a=Ra(Oa(e,"bottom")),s=Ma(e,"x"),u=Ma(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:r.concat(u).concat(a).concat(s),chartArea:Oa(e,"chartArea"),vertical:i.concat(r).concat(u),horizontal:o.concat(a).concat(s)}}(t.boxes),u=s.vertical,l=s.horizontal;zn(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const c=u.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/c,hBoxMaxHeight:a/2}),d=Object.assign({},r);Fa(d,Lr(i));const f=Object.assign({maxPadding:d,w:o,h:a,x:r.left,y:r.top},r),p=La(u.concat(l),h);ja(s.fullSize,f,h,p),ja(u,f,h,p),ja(l,f,h,p)&&ja(u,f,h,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),za(s.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,za(s.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},zn(s.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class Ga{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class Wa extends Ga{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ha={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},qa=t=>null===t||""===t;const $a=!!Eo&&{passive:!0};function Ya(t,e,n){t.canvas.removeEventListener(e,n,$a)}function Xa(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Ka(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||Xa(n.addedNodes,i),e=e&&!Xa(n.removedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function Za(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||Xa(n.removedNodes,i),e=e&&!Xa(n.addedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const Ja=new Map;let Qa=0;function ts(){const t=window.devicePixelRatio;t!==Qa&&(Qa=t,Ja.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function es(t,e,n){const i=t.canvas,r=i&&ho(i);if(!r)return;const o=kn(((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()}),window),a=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||o(n,i)}));return a.observe(r),function(t,e){Ja.size||window.addEventListener("resize",ts),Ja.set(t,e)}(t,o),a}function ns(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Ja.delete(t),Ja.size||window.removeEventListener("resize",ts)}(t)}function is(t,e,n){const i=t.canvas,r=kn((e=>{null!==t.ctx&&n(function(t,e){const n=Ha[t.type]||t.type,{x:i,y:r}=vo(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,n){t.addEventListener(e,n,$a)}(i,e,r),r}class rs extends Ga{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t.$chartjs={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",qa(r)){const e=xo(t,"width");void 0!==e&&(t.width=e)}if(qa(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=xo(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const n=e.$chartjs.initial;["height","width"].forEach((t=>{const i=n[t];Rn(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:Ka,detach:Za,resize:es}[e]||is;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:ns,detach:ns,resize:ns}[e]||Ya)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return bo(t,e,n,i)}isAttached(t){const e=ho(t);return!(!e||!e.isConnected)}}class os{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return di(this.x)&&di(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}os.defaults={},os.defaultRoutes=void 0;const as={values:t=>Ln(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const a=li(Math.abs(o)),s=Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:r,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(u,this.options.ticks.format),To(t,i,u)},logarithmic(t,e,n){if(0===t)return"0";const i=t/Math.pow(10,Math.floor(li(t)));return 1===i||2===i||5===i?as.numeric.call(this,t,e,n):""}};var ss={formatters:as};function us(t,e){const n=t.options.ticks,i=n.maxTicksLimit||function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],o=r.length,a=r[0],s=r[o-1],u=[];if(o>i)return function(t,e,n,i){let r,o=0,a=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===a&&(e.push(t[r]),o++,a=n[o*i])}(e,u,r,o/i),u;const l=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const o=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(i);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>r)return e}return Math.max(r,1)}(r,e,i);if(o>0){let t,n;const i=o>1?Math.round((s-a)/(o-1)):null;for(ls(e,u,l,Rn(i)?0:a-i,a),t=0,n=o-1;t<n;t++)ls(e,u,l,r[t],r[t+1]);return ls(e,u,l,s,Rn(i)?e.length:s+i),u}return ls(e,u,l),u}function ls(t,e,n,i,r){const o=Bn(i,0),a=Math.min(Bn(r,t.length),t.length);let s,u,l,c=0;for(n=Math.ceil(n),r&&(s=r-i,n=s/Math.floor(s/n)),l=o;l<0;)c++,l=Math.round(o+c*n);for(u=Math.max(o,0);u<a;u++)u===l&&(e.push(t[u]),c++,l=Math.round(o+c*n))}pr.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ss.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),pr.route("scale.ticks","color","","color"),pr.route("scale.grid","color","","borderColor"),pr.route("scale.grid","borderColor","","borderColor"),pr.route("scale.title","color","","color"),pr.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),pr.describe("scales",{_fallback:"scale"}),pr.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const cs=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n;function hs(t,e){const n=[],i=t.length/e,r=t.length;let o=0;for(;o<r;o+=i)n.push(t[Math.floor(o)]);return n}function ds(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),o=t._startPixel,a=t._endPixel,s=1e-6;let u,l=t.getPixelForTick(r);if(!(n&&(u=1===i?Math.max(l-o,a-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<o-s||l>a+s)))return l}function fs(t){return t.drawTicks?t.tickLength:0}function ps(t,e){if(!t.display)return 0;const n=Pr(t.font,e),i=Lr(t.padding);return(Ln(t.text)?t.text.length:1)*n.lineHeight+i.height}function gs(t,e,n){let i=Sn(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class ms extends os{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=Nn(t,Number.POSITIVE_INFINITY),e=Nn(e,Number.NEGATIVE_INFINITY),n=Nn(n,Number.POSITIVE_INFINITY),i=Nn(i,Number.NEGATIVE_INFINITY),{min:Nn(t,n),max:Nn(e,i),minDefined:Fn(t),maxDefined:Fn(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:o}=this.getUserBounds();if(r&&o)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let s=0,u=a.length;s<u;++s)e=a[s].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),o||(i=Math.max(i,e.max));return n=o&&n>i?i:n,i=r&&n>i?n:i,{min:Nn(n,Nn(i,n)),max:Nn(i,Nn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Vn(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:r}=t,o=jn(e,(r-i)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(i,-Math.abs(o)),max:a(r,o)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=a<this.ticks.length;this._convertTicksToLabels(s?hs(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=us(this,this.ticks),this._labelSizes=null),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Vn(this.options.afterUpdate,[this])}beforeSetDimensions(){Vn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Vn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Vn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Vn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=Vn(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Vn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Vn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,i=e.minRotation||0,r=e.maxRotation;let o,a,s,u=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const l=this._getLabelSizes(),c=l.widest.width,h=l.highest.height,d=wi(this.chart.width-c,0,this.maxWidth);o=t.offset?this.maxWidth/n:d/(n-1),c+6>o&&(o=d/(n-(t.offset?.5:1)),a=this.maxHeight-fs(t.grid)-e.padding-ps(t.title,this.chart.options.font),s=Math.sqrt(c*c+h*h),u=mi(Math.min(Math.asin(wi((l.highest.height+6)/o,-1,1)),Math.asin(wi(a/s,-1,1))-Math.asin(wi(h/s,-1,1)))),u=Math.max(i,Math.min(r,u))),this.labelRotation=u}afterCalculateLabelRotation(){Vn(this.options.afterCalculateLabelRotation,[this])}beforeFit(){Vn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=ps(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=fs(r)+o):(t.height=this.maxHeight,t.width=fs(r)+o),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:o}=this._getLabelSizes(),s=2*n.padding,u=gi(this.labelRotation),l=Math.cos(u),c=Math.sin(u);if(a){const e=n.mirror?0:c*r.width+l*o.height;t.height=Math.min(this.maxHeight,t.height+e+s)}else{const e=n.mirror?0:l*r.width+c*o.height;t.width=Math.min(this.maxWidth,t.width+e+s)}this._calculatePadding(e,i,c,l)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:o},position:a}=this.options,s=0!==this.labelRotation,u="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,l=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,h=0;s?u?(c=i*t.width,h=n*e.height):(c=n*t.height,h=i*e.width):"start"===r?h=e.width:"end"===r?c=t.width:(c=t.width/2,h=e.width/2),this.paddingLeft=Math.max((c-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-l+o)*this.width/(this.width-l),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+o,this.paddingBottom=i+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Vn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Rn(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=hs(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:i}=this,r=[],o=[];let a,s,u,l,c,h,d,f,p,g,m,v=0,y=0;for(a=0;a<e;++a){if(l=t[a].label,c=this._resolveTickFontOptions(a),n.font=h=c.string,d=i[h]=i[h]||{data:{},gc:[]},f=c.lineHeight,p=g=0,Rn(l)||Ln(l)){if(Ln(l))for(s=0,u=l.length;s<u;++s)m=l[s],Rn(m)||Ln(m)||(p=gr(n,d.data,d.gc,p,m),g+=f)}else p=gr(n,d.data,d.gc,p,l),g=f;r.push(p),o.push(g),v=Math.max(p,v),y=Math.max(g,y)}!function(t,e){zn(t,(t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}}))}(i,e);const b=r.indexOf(v),_=o.indexOf(y),E=t=>({width:r[t]||0,height:o[t]||0});return{first:E(0),last:E(e-1),widest:E(b),highest:E(_),widths:r,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return wi(this._alignToPixels?vr(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Nr(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Nr(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=gi(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,s=r?r.highest.height+o:0;return this.isHorizontal()?s*n>a*i?a/n:s/i:s*i<a*n?s/n:a/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:o}=i,a=r.offset,s=this.isHorizontal(),u=this.ticks.length+(a?1:0),l=fs(r),c=[],h=r.setContext(this.getContext()),d=h.drawBorder?h.borderWidth:0,f=d/2,p=function(t){return vr(n,t,d)};let g,m,v,y,b,_,E,x,w,A,D,C;if("top"===o)g=p(this.bottom),_=this.bottom-l,x=g-f,A=p(t.top)+f,C=t.bottom;else if("bottom"===o)g=p(this.top),A=t.top,C=p(t.bottom)-f,_=g+f,x=this.top+l;else if("left"===o)g=p(this.right),b=this.right-l,E=g-f,w=p(t.left)+f,D=t.right;else if("right"===o)g=p(this.left),w=t.left,D=p(t.right)-f,b=g+f,E=this.left+l;else if("x"===e){if("center"===o)g=p((t.top+t.bottom)/2+.5);else if(Pn(o)){const t=Object.keys(o)[0],e=o[t];g=p(this.chart.scales[t].getPixelForValue(e))}A=t.top,C=t.bottom,_=g+f,x=_+l}else if("y"===e){if("center"===o)g=p((t.left+t.right)/2);else if(Pn(o)){const t=Object.keys(o)[0],e=o[t];g=p(this.chart.scales[t].getPixelForValue(e))}b=g-f,E=b-l,w=t.left,D=t.right}const T=Bn(i.ticks.maxTicksLimit,u),k=Math.max(1,Math.ceil(u/T));for(m=0;m<u;m+=k){const t=r.setContext(this.getContext(m)),e=t.lineWidth,i=t.color,o=r.borderDash||[],u=t.borderDashOffset,l=t.tickWidth,h=t.tickColor,d=t.tickBorderDash||[],f=t.tickBorderDashOffset;v=ds(this,m,a),void 0!==v&&(y=vr(n,v,e),s?b=E=w=D=y:_=x=A=C=y,c.push({tx1:b,ty1:_,tx2:E,ty2:x,x1:w,y1:A,x2:D,y2:C,width:e,color:i,borderDash:o,borderDashOffset:u,tickWidth:l,tickColor:h,tickBorderDash:d,tickBorderDashOffset:f}))}return this._ticksLength=u,this._borderValue=g,c}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:s,crossAlign:u,padding:l,mirror:c}=r,h=fs(n.grid),d=h+l,f=c?-l:d,p=-gi(this.labelRotation),g=[];let m,v,y,b,_,E,x,w,A,D,C,T,k="middle";if("top"===i)E=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===i)E=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,_=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,_=t.x}else if("x"===e){if("center"===i)E=(t.top+t.bottom)/2+d;else if(Pn(i)){const t=Object.keys(i)[0],e=i[t];E=this.chart.scales[t].getPixelForValue(e)+d}x=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)_=(t.left+t.right)/2-d;else if(Pn(i)){const t=Object.keys(i)[0],e=i[t];_=this.chart.scales[t].getPixelForValue(e)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===s?k="top":"end"===s&&(k="bottom"));const S=this._getLabelSizes();for(m=0,v=a.length;m<v;++m){y=a[m],b=y.label;const t=r.setContext(this.getContext(m));w=this.getPixelForTick(m)+r.labelOffset,A=this._resolveTickFontOptions(m),D=A.lineHeight,C=Ln(b)?b.length:1;const e=C/2,n=t.color,s=t.textStrokeColor,l=t.textStrokeWidth;let h;if(o?(_=w,T="top"===i?"near"===u||0!==p?-C*D+D/2:"center"===u?-S.highest.height/2-e*D+D:-S.highest.height+D/2:"near"===u||0!==p?D/2:"center"===u?S.highest.height/2-e*D:S.highest.height-C*D,c&&(T*=-1)):(E=w,T=(1-C)*D/2),t.showLabelBackdrop){const e=Lr(t.backdropPadding),n=S.heights[m],i=S.widths[m];let r=E+T-e.top,o=_-e.left;switch(k){case"middle":r-=n/2;break;case"bottom":r-=n}switch(x){case"center":o-=i/2;break;case"right":o-=i}h={left:o,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({rotation:p,label:b,font:A,color:n,strokeColor:s,strokeWidth:l,textOffset:T,textAlign:x,textBaseline:k,translation:[_,E],backdrop:h})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-gi(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align&&(n="right"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=t+r,a=this._getLabelSizes().widest.width;let s,u;return"left"===e?i?(u=this.right+r,"near"===n?s="left":"center"===n?(s="center",u+=a/2):(s="right",u+=a)):(u=this.right-o,"near"===n?s="right":"center"===n?(s="center",u-=a/2):(s="left",u=this.left)):"right"===e?i?(u=this.left+r,"near"===n?s="right":"center"===n?(s="center",u-=a/2):(s="left",u-=a)):(u=this.left+o,"near"===n?s="left":"center"===n?(s="center",u+=a/2):(s="right",u=this.right)):s="right",{textAlign:s,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const t=i[r];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,i=n.setContext(this.getContext()),r=n.drawBorder?i.borderWidth:0;if(!r)return;const o=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let s,u,l,c;this.isHorizontal()?(s=vr(t,this.left,r)-r/2,u=vr(t,this.right,o)+o/2,l=c=a):(l=vr(t,this.top,r)-r/2,c=vr(t,this.bottom,o)+o/2,s=u=a),e.save(),e.lineWidth=i.borderWidth,e.strokeStyle=i.borderColor,e.beginPath(),e.moveTo(s,l),e.lineTo(u,c),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&Er(e,n);const i=this._labelItems||(this._labelItems=this._computeLabelItems(t));let r,o;for(r=0,o=i.length;r<o;++r){const t=i[r],n=t.font,o=t.label;t.backdrop&&(e.fillStyle=t.backdrop.color,e.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),Dr(e,o,0,t.textOffset,n,t)}n&&xr(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=Pr(n.font),o=Lr(n.padding),a=n.align;let s=r.lineHeight/2;"bottom"===e||"center"===e||Pn(e)?(s+=o.bottom,Ln(n.text)&&(s+=r.lineHeight*(n.text.length-1))):s+=o.top;const{titleX:u,titleY:l,maxWidth:c,rotation:h}=function(t,e,n,i){const{top:r,left:o,bottom:a,right:s,chart:u}=t,{chartArea:l,scales:c}=u;let h,d,f,p=0;const g=a-r,m=s-o;if(t.isHorizontal()){if(d=In(i,o,s),Pn(n)){const t=Object.keys(n)[0],i=n[t];f=c[t].getPixelForValue(i)+g-e}else f="center"===n?(l.bottom+l.top)/2+g-e:cs(t,n,e);h=s-o}else{if(Pn(n)){const t=Object.keys(n)[0],i=n[t];d=c[t].getPixelForValue(i)-m+e}else d="center"===n?(l.left+l.right)/2-m+e:cs(t,n,e);f=In(i,a,r),p="left"===n?-ai:ai}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,s,e,a);Dr(t,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:h,textAlign:gs(a,e,i),textBaseline:"middle",translation:[u,l]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Bn(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===ms.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const o=e[r];o[n]!==this.id||t&&o.type!==t||i.push(o)}return i}_resolveTickFontOptions(t){return Pr(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class vs{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=qn(Object.create(null),[n?pr.get(n):{},pr.get(e),t.defaults]);pr.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),r=i.pop(),o=[t].concat(i).join("."),a=e[n].split("."),s=a.pop(),u=a.join(".");pr.route(o,r,u,s)}))}(e,t.defaultRoutes);t.descriptors&&pr.describe(e,t.descriptors)}(t,o,n),this.override&&pr.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in pr[i]&&(delete pr[i][n],this.override&&delete cr[n])}}var ys=new class{constructor(){this.controllers=new vs(ea,"datasets",!0),this.elements=new vs(os,"elements"),this.plugins=new vs(Object,"plugins"),this.scales=new vs(ms,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):zn(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=Zn(t);Vn(n["before"+i],[],n),e[t](n),Vn(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}};class bs{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===Vn(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){Rn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=Bn(n.options&&n.options.plugins,{}),r=function(t){const e=[],n=Object.keys(ys.plugins.items);for(let t=0;t<n.length;t++)e.push(ys.getPlugin(n[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const n=i[t];-1===e.indexOf(n)&&e.push(n)}return e}(n);return!1!==i||e?function(t,e,n,i){const r=[],o=t.getContext();for(let a=0;a<e.length;a++){const s=e[a],u=_s(n[s.id],i);null!==u&&r.push({plugin:s,options:Es(t.config,s,u,o)})}return r}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function _s(t,e){return e||!1!==t?!0===t?{}:t:null}function Es(t,e,n,i){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(n,r);return t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xs(t,e){const n=pr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function ws(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(n=e.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.charAt(0).toLowerCase();var n}function As(t){const e=t.options||(t.options={});e.plugins=Bn(e.plugins,{}),e.scales=function(t,e){const n=cr[t.type]||{scales:{}},i=e.scales||{},r=xs(t.type,e),o=Object.create(null),a=Object.create(null);return Object.keys(i).forEach((t=>{const e=i[t];if(!Pn(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const s=ws(t,e),u=function(t,e){return t===e?"_index_":"_value_"}(s,r),l=n.scales||{};o[s]=o[s]||t,a[t]=$n(Object.create(null),[{axis:s},e,l[s],l[u]])})),t.data.datasets.forEach((n=>{const r=n.type||t.type,s=n.indexAxis||xs(r,e),u=(cr[r]||{}).scales||{};Object.keys(u).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,s),r=n[e+"AxisID"]||o[e]||e;a[r]=a[r]||Object.create(null),$n(a[r],[{axis:e},i[r],u[t]])}))})),Object.keys(a).forEach((t=>{const e=a[t];$n(e,[pr.scales[e.type],pr.scale])})),a}(t,e)}function Ds(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Cs=new Map,Ts=new Set;function ks(t,e){let n=Cs.get(t);return n||(n=e(),Cs.set(t,n),Ts.add(n)),n}const Ss=(t,e,n)=>{const i=Kn(e,n);void 0!==i&&t.add(i)};class Is{constructor(t){this._config=function(t){return(t=t||{}).data=Ds(t.data),As(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ds(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),As(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ks(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return ks(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return ks(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return ks(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,o=this._cachedScopes(t,n),a=o.get(e);if(a)return a;const s=new Set;e.forEach((e=>{t&&(s.add(t),e.forEach((e=>Ss(s,t,e)))),e.forEach((t=>Ss(s,i,t))),e.forEach((t=>Ss(s,cr[r]||{},t))),e.forEach((t=>Ss(s,pr,t))),e.forEach((t=>Ss(s,hr,t)))}));const u=Array.from(s);return 0===u.length&&u.push(Object.create(null)),Ts.has(e)&&o.set(e,u),u}chartOptionScopes(){const{options:t,type:e}=this;return[t,cr[e]||{},pr.datasets[e]||{},{type:e},pr,hr]}resolveNamedOptions(t,e,n,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Os(this._resolverCache,t,i);let s=o;if(function(t,e){const{isScriptable:n,isIndexable:i}=qr(t);for(const r of e){const e=n(r),o=i(r),a=(o||e)&&t[r];if(e&&(Qn(a)||Ms(a))||o&&Ln(a))return!0}return!1}(o,e)){r.$shared=!1;s=Hr(o,n=Qn(n)?n():n,this.createResolver(t,n,a))}for(const t of e)r[t]=s[t];return r}createResolver(t,e,n=[""],i){const{resolver:r}=Os(this._resolverCache,t,n);return Pn(e)?Hr(r,e,void 0,i):r}}function Os(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let o=i.get(r);if(!o){o={resolver:Wr(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(r,o)}return o}const Ms=t=>Pn(t)&&Object.getOwnPropertyNames(t).reduce(((e,n)=>e||Qn(t[n])),!1);const Rs=["top","bottom","left","right","chartArea"];function Ls(t,e){return"top"===t||"bottom"===t||-1===Rs.indexOf(t)&&"x"===e}function Ps(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Fs(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Vn(n&&n.onComplete,[t],e)}function Ns(t){const e=t.chart,n=e.options.animation;Vn(n&&n.onProgress,[t],e)}function Bs(t){return co()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const js={},Vs=t=>{const e=Bs(t);return Object.values(js).filter((t=>t.canvas===e)).pop()};function zs(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}class Us{constructor(t,e){const n=this.config=new Is(e),i=Bs(t),r=Vs(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!co()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Wa:rs}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,o.aspectRatio),s=a&&a.canvas,u=s&&s.height,l=s&&s.width;this.id=Mn(),this.ctx=a,this.canvas=s,this.width=l,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bs,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}((t=>this.update(t)),o.resizeDelay||0),this._dataChanges=[],js[this.id]=this,a&&s?(Bo.listen(this,"complete",Fs),Bo.listen(this,"progress",Ns),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return Rn(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_o(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return yr(this.canvas,this.ctx),this}stop(){return Bo.stop(this),this}resize(t,e){Bo.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,_o(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Vn(n.onResize,[this,o],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){zn(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let r=[];e&&(r=r.concat(Object.keys(e).map((t=>{const n=e[t],i=ws(t,n),r="r"===i,o="x"===i;return{options:n,dposition:r?"chartArea":o?"bottom":"left",dtype:r?"radialLinear":o?"category":"linear"}})))),zn(r,(e=>{const r=e.options,o=r.id,a=ws(o,r),s=Bn(r.type,e.dtype);void 0!==r.position&&Ls(r.position,a)===Ls(e.dposition)||(r.position=e.dposition),i[o]=!0;let u=null;if(o in n&&n[o].type===s)u=n[o];else{u=new(ys.getScale(s))({id:o,type:s,ctx:this.ctx,chart:this}),n[u.id]=u}u.init(r,t)})),zn(i,((t,e)=>{t||delete n[e]})),zn(n,(t=>{Ua.configure(this,t,t.options),Ua.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(Ps("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const o=i.type||this.config.type;if(r.type&&r.type!==o&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=o,r.indexAxis=i.indexAxis||xs(o,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=ys.getController(o),{datasetElementType:i,dataElementType:a}=pr.datasets[o];Object.assign(e.prototype,{dataElementType:ys.getElement(a),datasetElementType:i&&ys.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){zn(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(n),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||zn(r,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ps("z","_idx"));const{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){zn(this.scales,(t=>{Ua.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);ti(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){zs(t,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let t=1;t<e;t++)if(!ti(i,n(t)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ua.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],zn(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Qn(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Bo.has(this)?this.attached&&!Bo.running(this)&&Bo.start(this):(this.draw(),Fs({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,r=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(i&&Er(e,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),t.controller.draw(),i&&xr(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}getElementsAtEventForMode(t,e,n,i){const r=Sa.modes[e];return"function"==typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Nr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);Jn(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Bo.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),yr(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete js[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};zn(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){zn(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},zn(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,o,a,s;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,s=t.length;a<s;++a){o=t[a];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}));!Un(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=r(e,t),a=n?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:_r(t,this.chartArea,this._minPadding)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,o=e,a=this._getActiveElements(t,i,n,o),s=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),u=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,s);n&&(this._lastEvent=null,Vn(r.onHover,[t,a,this],this),s&&Vn(r.onClick,[t,a,this],this));const l=!Un(a,i);return(l||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=u,l}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}const Gs=()=>zn(Us.instances,(t=>t._plugins.invalidate())),Ws=!0;function Hs(t,e,n){const{startAngle:i,pixelMargin:r,x:o,y:a,outerRadius:s,innerRadius:u}=e;let l=r/s;t.beginPath(),t.arc(o,a,s,i-l,n+l),u>r?(l=r/u,t.arc(o,a,u,n+l,i-l,!0)):t.arc(o,a,r,n+ai,i-ai),t.closePath(),t.clip()}function qs(t,e,n,i){const r=Or(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(n-e)/2,a=Math.min(o,i*e/2),s=t=>{const e=(n-Math.min(o,t))*i/2;return wi(t,0,Math.min(o,e))};return{outerStart:s(r.outerStart),outerEnd:s(r.outerEnd),innerStart:wi(r.innerStart,0,a),innerEnd:wi(r.innerEnd,0,a)}}function $s(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Ys(t,e,n,i,r){const{x:o,y:a,startAngle:s,pixelMargin:u,innerRadius:l}=e,c=Math.max(e.outerRadius+i+n-u,0),h=l>0?l+i+n+u:0;let d=0;const f=r-s;if(i){const t=((l>0?l-i:0)+(c>0?c-i:0))/2;d=(f-(0!==t?f*t/(t+i):f))/2}const p=(f-Math.max(.001,f*c-n/ei)/c)/2,g=s+p+d,m=r-p-d,{outerStart:v,outerEnd:y,innerStart:b,innerEnd:_}=qs(e,h,c,m-g),E=c-v,x=c-y,w=g+v/E,A=m-y/x,D=h+b,C=h+_,T=g+b/D,k=m-_/C;if(t.beginPath(),t.arc(o,a,c,w,A),y>0){const e=$s(x,A,o,a);t.arc(e.x,e.y,y,A,m+ai)}const S=$s(C,m,o,a);if(t.lineTo(S.x,S.y),_>0){const e=$s(C,k,o,a);t.arc(e.x,e.y,_,m+ai,k+Math.PI)}if(t.arc(o,a,h,m-_/h,g+b/h,!0),b>0){const e=$s(D,T,o,a);t.arc(e.x,e.y,b,T+Math.PI,g-ai)}const I=$s(E,g,o,a);if(t.lineTo(I.x,I.y),v>0){const e=$s(E,w,o,a);t.arc(e.x,e.y,v,g-ai,w)}t.closePath()}function Xs(t,e,n,i,r){const{options:o}=e,{borderWidth:a,borderJoinStyle:s}=o,u="inner"===o.borderAlign;a&&(u?(t.lineWidth=2*a,t.lineJoin=s||"round"):(t.lineWidth=a,t.lineJoin=s||"bevel"),e.fullCircles&&function(t,e,n){const{x:i,y:r,startAngle:o,pixelMargin:a,fullCircles:s}=e,u=Math.max(e.outerRadius-a,0),l=e.innerRadius+a;let c;for(n&&Hs(t,e,o+ni),t.beginPath(),t.arc(i,r,l,o+ni,o,!0),c=0;c<s;++c)t.stroke();for(t.beginPath(),t.arc(i,r,u,o,o+ni),c=0;c<s;++c)t.stroke()}(t,e,u),u&&Hs(t,e,r),Ys(t,e,n,i,r),t.stroke())}Object.defineProperties(Us,{defaults:{enumerable:Ws,value:pr},instances:{enumerable:Ws,value:js},overrides:{enumerable:Ws,value:cr},registry:{enumerable:Ws,value:ys},version:{enumerable:Ws,value:"3.7.1"},getChart:{enumerable:Ws,value:Vs},register:{enumerable:Ws,value:(...t)=>{ys.add(...t),Gs()}},unregister:{enumerable:Ws,value:(...t)=>{ys.remove(...t),Gs()}}});class Ks extends os{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:o}=yi(i,{x:t,y:e}),{startAngle:a,endAngle:s,innerRadius:u,outerRadius:l,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=this.options.spacing/2,d=Bn(c,s-a)>=ni||xi(r,a,s),f=Ai(o,u+h,l+h);return d&&f}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:s,spacing:u}=this.options,l=(i+r)/2,c=(o+a+u+s)/2;return{x:e+Math.cos(l)*c,y:n+Math.sin(l)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/2,r=(e.spacing||0)/2;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>ni?Math.floor(n/ni):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let o=0;if(i){o=i/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*o,Math.sin(e)*o),this.circumference>=ei&&(o=i)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const a=function(t,e,n,i){const{fullCircles:r,startAngle:o,circumference:a}=e;let s=e.endAngle;if(r){Ys(t,e,n,i,o+ni);for(let e=0;e<r;++e)t.fill();isNaN(a)||(s=o+a%ni,a%ni==0&&(s+=ni))}return Ys(t,e,n,i,s),t.fill(),s}(t,this,o,r);Xs(t,this,o,r,a),t.restore()}}function Zs(t,e,n=e){t.lineCap=Bn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Bn(n.borderDash,e.borderDash)),t.lineDashOffset=Bn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Bn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Bn(n.borderWidth,e.borderWidth),t.strokeStyle=Bn(n.borderColor,e.borderColor)}function Js(t,e,n){t.lineTo(n.x,n.y)}function Qs(t,e,n={}){const i=t.length,{start:r=0,end:o=i-1}=n,{start:a,end:s}=e,u=Math.max(r,a),l=Math.min(o,s),c=r<a&&o<a||r>s&&o>s;return{count:i,start:u,loop:e.loop,ilen:l<u&&!c?i+l-u:l-u}}function tu(t,e,n,i){const{points:r,options:o}=e,{count:a,start:s,loop:u,ilen:l}=Qs(r,n,i),c=function(t){return t.stepped?wr:t.tension||"monotone"===t.cubicInterpolationMode?Ar:Js}(o);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=l;++h)d=r[(s+(g?l-h:h))%a],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):c(t,f,d,g,o.stepped),f=d);return u&&(d=r[(s+(g?l:0))%a],c(t,f,d,g,o.stepped)),!!u}function eu(t,e,n,i){const r=e.points,{count:o,start:a,ilen:s}=Qs(r,n,i),{move:u=!0,reverse:l}=i||{};let c,h,d,f,p,g,m=0,v=0;const y=t=>(a+(l?s-t:t))%o,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(u&&(h=r[y(0)],t.moveTo(h.x,h.y)),c=0;c<=s;++c){if(h=r[y(c)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(v*m+e)/++v):(b(),t.lineTo(e,n),d=i,v=0,f=p=n),g=n}b()}function nu(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?eu:tu}Ks.id="arc",Ks.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Ks.defaultRoutes={backgroundColor:"backgroundColor"};const iu="function"==typeof Path2D;function ru(t,e,n,i){iu&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Zs(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:o}=e,a=nu(e);for(const s of r)Zs(t,o,s.style),t.beginPath(),a(t,e,s,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class ou extends os{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;lo(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const o=!!t._loop,{start:a,end:s}=function(t,e,n,i){let r=0,o=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(o+=r);o>r&&t[o%e].skip;)o--;return o%=e,{start:r,end:o}}(n,r,o,i);return Po(t,!0===i?[{start:a,end:s,loop:o}]:function(t,e,n,i){const r=t.length,o=[];let a,s=e,u=t[e];for(a=e+1;a<=n;++a){const n=t[a%r];n.skip||n.stop?u.skip||(i=!1,o.push({start:e%r,end:(a-1)%r,loop:i}),e=s=n.stop?a:null):(s=a,u.skip&&(e=a)),u=n}return null!==s&&o.push({start:e%r,end:s%r,loop:i}),o}(n,a,s<a?s+r:s,!!t._fullLoop&&0===a&&s===r-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,o=Lo(this,{property:e,start:i,end:i});if(!o.length)return;const a=[],s=function(t){return t.stepped?Ao:t.tension||"monotone"===t.cubicInterpolationMode?Do:wo}(n);let u,l;for(u=0,l=o.length;u<l;++u){const{start:l,end:c}=o[u],h=r[l],d=r[c];if(h===d){a.push(h);continue}const f=s(h,d,Math.abs((i-h[e])/(d[e]-h[e])),n.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return nu(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=nu(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)o&=r(t,this,a,{start:e,end:e+n-1});return!!o}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),ru(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function au(t,e,n,i){const r=t.options,{[n]:o}=t.getProps([n],i);return Math.abs(e-o)<r.radius+r.hitRadius}ou.id="line",ou.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},ou.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},ou.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class su extends os{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return au(this,t,"x",e)}inYRange(t,e){return au(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!_r(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,br(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function uu(t,e){const{x:n,y:i,base:r,width:o,height:a}=t.getProps(["x","y","base","width","height"],e);let s,u,l,c,h;return t.horizontal?(h=a/2,s=Math.min(n,r),u=Math.max(n,r),l=i-h,c=i+h):(h=o/2,s=n-h,u=n+h,l=Math.min(i,r),c=Math.max(i,r)),{left:s,top:l,right:u,bottom:c}}function lu(t,e,n,i){return t?0:wi(e,n,i)}function cu(t){const e=uu(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,o=Mr(i);return{t:lu(r.top,o.top,0,n),r:lu(r.right,o.right,0,e),b:lu(r.bottom,o.bottom,0,n),l:lu(r.left,o.left,0,e)}}(t,n/2,i/2),o=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,o=Rr(r),a=Math.min(e,n),s=t.borderSkipped,u=i||Pn(r);return{topLeft:lu(!u||s.top||s.left,o.topLeft,0,a),topRight:lu(!u||s.top||s.right,o.topRight,0,a),bottomLeft:lu(!u||s.bottom||s.left,o.bottomLeft,0,a),bottomRight:lu(!u||s.bottom||s.right,o.bottomRight,0,a)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function hu(t,e,n,i){const r=null===e,o=null===n,a=t&&!(r&&o)&&uu(t,i);return a&&(r||Ai(e,a.left,a.right))&&(o||Ai(n,a.top,a.bottom))}function du(t,e){t.rect(e.x,e.y,e.w,e.h)}function fu(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-i,a=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+o,h:t.h+a,radius:t.radius}}su.id="point",su.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},su.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class pu extends os{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=cu(this),a=(s=o.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?Tr:du;var s;t.save(),o.w===r.w&&o.h===r.h||(t.beginPath(),a(t,fu(o,e,r)),t.clip(),a(t,fu(r,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,fu(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return hu(this,t,e,n)}inXRange(t,e){return hu(this,t,null,e)}inYRange(t,e){return hu(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}pu.id="bar",pu.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},pu.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var gu=Object.freeze({__proto__:null,ArcElement:Ks,LineElement:ou,PointElement:su,BarElement:pu});function mu(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function vu(t){t.data.datasets.forEach((t=>{mu(t)}))}var yu={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void vu(t);const i=t.width;t.data.datasets.forEach(((e,r)=>{const{_data:o,indexAxis:a}=e,s=t.getDatasetMeta(r),u=o||e.data;if("y"===Fr([a,t.options.indexAxis]))return;if("line"!==s.type)return;const l=t.scales[s.xAxisID];if("linear"!==l.type&&"time"!==l.type)return;if(t.options.parsing)return;let{start:c,count:h}=function(t,e){const n=e.length;let i,r=0;const{iScale:o}=t,{min:a,max:s,minDefined:u,maxDefined:l}=o.getUserBounds();return u&&(r=wi(jr(e,o.axis,a).lo,0,n-1)),i=l?wi(jr(e,o.axis,s).hi+1,r,n)-r:n-r,{start:r,count:i}}(s,u);if(h<=(n.threshold||4*i))return void mu(e);let d;switch(Rn(o)&&(e._data=u,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":d=function(t,e,n,i,r){const o=r.samples||i;if(o>=n)return t.slice(e,e+n);const a=[],s=(n-2)/(o-2);let u=0;const l=e+n-1;let c,h,d,f,p,g=e;for(a[u++]=t[g],c=0;c<o-2;c++){let i,r=0,o=0;const l=Math.floor((c+1)*s)+1+e,m=Math.min(Math.floor((c+2)*s)+1,n)+e,v=m-l;for(i=l;i<m;i++)r+=t[i].x,o+=t[i].y;r/=v,o/=v;const y=Math.floor(c*s)+1+e,b=Math.min(Math.floor((c+1)*s)+1,n)+e,{x:_,y:E}=t[g];for(d=f=-1,i=y;i<b;i++)f=.5*Math.abs((_-r)*(t[i].y-E)-(_-t[i].x)*(o-E)),f>d&&(d=f,h=t[i],p=i);a[u++]=h,g=p}return a[u++]=t[l],a}(u,c,h,i,n);break;case"min-max":d=function(t,e,n,i){let r,o,a,s,u,l,c,h,d,f,p=0,g=0;const m=[],v=e+n-1,y=t[e].x,b=t[v].x-y;for(r=e;r<e+n;++r){o=t[r],a=(o.x-y)/b*i,s=o.y;const e=0|a;if(e===u)s<d?(d=s,l=r):s>f&&(f=s,c=r),p=(g*p+o.x)/++g;else{const n=r-1;if(!Rn(l)&&!Rn(c)){const e=Math.min(l,c),i=Math.max(l,c);e!==h&&e!==n&&m.push({...t[e],x:p}),i!==h&&i!==n&&m.push({...t[i],x:p})}r>0&&n!==h&&m.push(t[n]),m.push(o),u=e,g=0,d=f=s,l=c=h=r}}return m}(u,c,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=d}))},destroy(t){vu(t)}};function bu(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=Bn(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(Pn(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return Fn(r)&&Math.floor(r)===r?("-"!==i[0]&&"+"!==i[0]||(r=e+r),!(r===e||r<0||r>=n)&&r):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}class _u{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:o}=this;return e=e||{start:0,end:ni},t.arc(i,r,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function Eu(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,o=[],a=i.reverse?e.max:e.min,s=i.reverse?e.min:e.max;let u,l,c;if(c="start"===n?a:"end"===n?s:Pn(n)?n.value:e.getBaseValue(),i.grid.circular)return l=e.getPointPositionForValue(0,a),new _u({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(c)});for(u=0;u<r;++u)o.push(e.getPointPositionForValue(u,c));return o}(t):function(t){const{scale:e={},fill:n}=t;let i,r=null;return"start"===n?r=e.bottom:"end"===n?r=e.top:Pn(n)?r=e.getPixelForValue(n.value):e.getBasePixel&&(r=e.getBasePixel()),Fn(r)?(i=e.isHorizontal(),{x:i?r:null,y:i?null:r}):null}(t)}function xu(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function wu(t,e,n){const i=[];for(let r=0;r<n.length;r++){const o=n[r],{first:a,last:s,point:u}=Au(o,e,"x");if(!(!u||a&&s))if(a)i.unshift(u);else if(t.push(u),!s)break}t.push(...i)}function Au(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],o=t.segments,a=t.points;let s=!1,u=!1;for(let t=0;t<o.length;t++){const e=o[t],i=a[e.start][n],l=a[e.end][n];if(Ai(r,i,l)){s=r===i,u=r===l;break}}return{first:s,last:u,point:i}}function Du(t){const{chart:e,fill:n,line:i}=t;if(Fn(n))return function(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,r=[],o=i.segments,a=i.points,s=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let t=0;t<i.length;t++){const r=i[t];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}(e,n);s.push(Cu({x:null,y:e.bottom},i));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)wu(r,a[t],s)}return new ou({points:r,options:{}})}(t);if("shape"===n)return!0;const r=Eu(t);return r instanceof _u?r:Cu(r,i)}function Cu(t,e){let n=[],i=!1;return Ln(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=xu(t,e,r);const a=r[t],s=r[e];null!==i?(o.push({x:a.x,y:i}),o.push({x:s.x,y:i})):null!==n&&(o.push({x:n,y:a.y}),o.push({x:n,y:s.y}))})),o}(t,e),n.length?new ou({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Tu(t,e,n){let i=t[e].fill;const r=[e];let o;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!Fn(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function ku(t,e,n){const{segments:i,points:r}=e;let o=!0,a=!1;t.beginPath();for(const s of i){const{start:i,end:u}=s,l=r[i],c=r[xu(i,u,r)];o?(t.moveTo(l.x,l.y),o=!1):(t.lineTo(l.x,n),t.lineTo(l.x,l.y)),a=!!e.pathSegment(t,s,{move:a}),a?t.closePath():t.lineTo(c.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Su(t,e,n,i){if(i)return;let r=e[t],o=n[t];return"angle"===t&&(r=Ei(r),o=Ei(o)),{property:t,start:r,end:o}}function Iu(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function Ou(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:o,start:a,end:s}=n||{};"x"===o&&(t.beginPath(),t.rect(a,i,s-a,r-i),t.clip())}function Mu(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}function Ru(t,e){const{line:n,target:i,property:r,color:o,scale:a}=e,s=function(t,e,n){const i=t.segments,r=t.points,o=e.points,a=[];for(const t of i){let{start:i,end:s}=t;s=xu(i,s,r);const u=Su(n,r[i],r[s],t.loop);if(!e.segments){a.push({source:t,target:u,start:r[i],end:r[s]});continue}const l=Lo(e,u);for(const e of l){const i=Su(n,o[e.start],o[e.end],e.loop),s=Ro(t,r,i);for(const t of s)a.push({source:t,target:e,start:{[n]:Iu(u,i,"start",Math.max)},end:{[n]:Iu(u,i,"end",Math.min)}})}}return a}(n,i,r);for(const{source:e,target:u,start:l,end:c}of s){const{style:{backgroundColor:s=o}={}}=e,h=!0!==i;t.save(),t.fillStyle=s,Ou(t,a,h&&Su(r,l,c)),t.beginPath();const d=!!n.pathSegment(t,e);let f;if(h){d?t.closePath():Mu(t,i,c,r);const e=!!i.pathSegment(t,u,{move:d,reverse:!0});f=d&&e,f||Mu(t,i,l,r)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function Lu(t,e,n){const i=Du(e),{line:r,scale:o,axis:a}=e,s=r.options,u=s.fill,l=s.backgroundColor,{above:c=l,below:h=l}=u||{};i&&r.points.length&&(Er(t,n),function(t,e){const{line:n,target:i,above:r,below:o,area:a,scale:s}=e,u=n._loop?"angle":e.axis;t.save(),"x"===u&&o!==r&&(ku(t,i,a.top),Ru(t,{line:n,target:i,color:r,scale:s,property:u}),t.restore(),t.save(),ku(t,i,a.bottom)),Ru(t,{line:n,target:i,color:o,scale:s,property:u}),t.restore()}(t,{line:r,target:i,above:c,below:h,area:n,scale:o,axis:a}),xr(t))}var Pu={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let o,a,s,u;for(a=0;a<i;++a)o=t.getDatasetMeta(a),s=o.dataset,u=null,s&&s.options&&s instanceof ou&&(u={visible:t.isDatasetVisible(a),index:a,fill:bu(s,a,i),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:s}),o.$filler=u,r.push(u);for(a=0;a<i;++a)u=r[a],u&&!1!==u.fill&&(u.fill=Tu(r,a,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;n&&(n.line.updateControlPoints(o,n.axis),i&&Lu(t.ctx,n,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&Lu(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;i&&!1!==i.fill&&"beforeDatasetDraw"===n.drawTime&&Lu(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Fu=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class Nu extends os{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Vn(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=Pr(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:s}=Fu(n,r);let u,l;e.font=i.string,this.isHorizontal()?(u=this.maxWidth,l=this._fitRows(o,r,a,s)+10):(l=this.maxHeight,u=this._fitCols(o,r,a,s)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(l,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],u=this.lineWidths=[0],l=i+a;let c=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-l;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+r.measureText(t.text).width;(0===f||u[u.length-1]+p+2*a>o)&&(c+=l,u[u.length-(f>0?0:1)]=0,d+=l,h++),s[f]={left:0,top:d,row:h,width:p,height:i},u[u.length-1]+=p+a})),c}_fitCols(t,e,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],u=this.columnSizes=[],l=o-t;let c=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((t,o)=>{const g=n+e/2+r.measureText(t.text).width;o>0&&d+i+2*a>l&&(c+=h+a,u.push({width:h,height:d}),f+=h+a,p++,h=d=0),s[o]={left:f,top:d,col:p,width:g,height:i},h=Math.max(h,g),d+=i+a})),c+=h,u.push({width:h,height:d}),c}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,o=ko(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=In(n,this.left+i,this.right-this.lineWidths[r]);for(const s of e)r!==s.row&&(r=s.row,a=In(n,this.left+i,this.right-this.lineWidths[r])),s.top+=this.top+t+i,s.left=o.leftForLtr(o.x(a),s.width),a+=s.width+i}else{let r=0,a=In(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const s of e)s.col!==r&&(r=s.col,a=In(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),s.top=a,s.left+=this.left+i,s.left=o.leftForLtr(o.x(s.left),s.width),a+=s.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Er(t,this),this._draw(),xr(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:o}=t,a=pr.color,s=ko(t.rtl,this.left,this.width),u=Pr(o.font),{color:l,padding:c}=o,h=u.size,d=h/2;let f;this.drawTitle(),i.textAlign=s.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=Fu(o,h),v=this.isHorizontal(),y=this._computeTitleHeight();f=v?{x:In(r,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:In(r,this.top+y+c,this.bottom-e[0].height),line:0},So(this.ctx,t.textDirection);const b=m+c;this.legendItems.forEach(((_,E)=>{i.strokeStyle=_.fontColor||l,i.fillStyle=_.fontColor||l;const x=i.measureText(_.text).width,w=s.textAlign(_.textAlign||(_.textAlign=o.textAlign)),A=p+d+x;let D=f.x,C=f.y;s.setWidth(this.width),v?E>0&&D+A+c>this.right&&(C=f.y+=b,f.line++,D=f.x=In(r,this.left+c,this.right-n[f.line])):E>0&&C+b>this.bottom&&(D=f.x=D+e[f.line].width+c,f.line++,C=f.y=In(r,this.top+y+c,this.bottom-e[f.line].height));!function(t,e,n){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();const r=Bn(n.lineWidth,1);if(i.fillStyle=Bn(n.fillStyle,a),i.lineCap=Bn(n.lineCap,"butt"),i.lineDashOffset=Bn(n.lineDashOffset,0),i.lineJoin=Bn(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Bn(n.strokeStyle,a),i.setLineDash(Bn(n.lineDash,[])),o.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},a=s.xPlus(t,p/2);br(i,o,a,e+d)}else{const o=e+Math.max((h-g)/2,0),a=s.leftForLtr(t,p),u=Rr(n.borderRadius);i.beginPath(),Object.values(u).some((t=>0!==t))?Tr(i,{x:a,y:o,w:p,h:g,radius:u}):i.rect(a,o,p,g),i.fill(),0!==r&&i.stroke()}i.restore()}(s.x(D),C,_),D=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(w,D+p+d,v?D+A:this.right,t.rtl),function(t,e,n){Dr(i,n.text,t,e+m/2,u,{strikethrough:n.hidden,textAlign:s.textAlign(n.textAlign)})}(s.x(D),C,_),v?f.x+=A+c:f.y+=b})),Io(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Pr(e.font),i=Lr(e.padding);if(!e.display)return;const r=ko(t.rtl,this.left,this.width),o=this.ctx,a=e.position,s=n.size/2,u=i.top+s;let l,c=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),l=this.top+u,c=In(t.align,c,this.right-h);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);l=u+In(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=In(a,c,c+h);o.textAlign=r.textAlign(Sn(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,Dr(o,e.text,d,l,n)}_computeTitleHeight(){const t=this.options.title,e=Pr(t.font),n=Lr(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(Ai(t,this.left,this.right)&&Ai(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Ai(t,i.left,i.left+i.width)&&Ai(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if("mousemove"===t&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type){const i=this._hoveredItem,r=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(i,n);i&&!r&&Vn(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&Vn(e.onHover,[t,n,this],this)}else n&&Vn(e.onClick,[t,n,this],this)}}var Bu={id:"legend",_element:Nu,start(t,e,n){const i=t.legend=new Nu({ctx:t.ctx,options:n,chart:t});Ua.configure(t,i,n),Ua.addBox(t,i)},stop(t){Ua.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Ua.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:o}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const a=t.controller.getStyle(n?0:void 0),s=Lr(a.borderWidth);return{text:e[t.index].label,fillStyle:a.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(s.width+s.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:r||a.textAlign,borderRadius:0,datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ju extends os{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=Ln(n.text)?n.text.length:1;this._padding=Lr(n.padding);const r=i*Pr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:o}=this,a=o.align;let s,u,l,c=0;return this.isHorizontal()?(u=In(a,n,r),l=e+t,s=r-n):("left"===o.position?(u=n+t,l=In(a,i,e),c=-.5*ei):(u=r-t,l=In(a,e,i),c=.5*ei),s=i-e),{titleX:u,titleY:l,maxWidth:s,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Pr(e.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:o,maxWidth:a,rotation:s}=this._drawArgs(i);Dr(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:s,textAlign:Sn(e.align),textBaseline:"middle",translation:[r,o]})}}var Vu={id:"title",_element:ju,start(t,e,n){!function(t,e){const n=new ju({ctx:t.ctx,options:e,chart:t});Ua.configure(t,n,e),Ua.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;Ua.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Ua.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const zu=new WeakMap;var Uu={id:"subtitle",start(t,e,n){const i=new ju({ctx:t.ctx,options:n,chart:t});Ua.configure(t,i,n),Ua.addBox(t,i),zu.set(t,i)},stop(t){Ua.removeBox(t,zu.get(t)),zu.delete(t)},beforeUpdate(t,e,n){const i=zu.get(t);Ua.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Gu={average(t){if(!t.length)return!1;let e,n,i=0,r=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i+=t.x,r+=t.y,++o}}return{x:i/o,y:r/o}},nearest(t,e){if(!t.length)return!1;let n,i,r,o=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=bi(e,i.getCenterPoint());t<s&&(s=t,r=i)}}if(r){const t=r.tooltipPosition();o=t.x,a=t.y}return{x:o,y:a}}};function Wu(t,e){return e&&(Ln(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Hu(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function qu(t,e){const{element:n,datasetIndex:i,index:r}=e,o=t.getDatasetMeta(i).controller,{label:a,value:s}=o.getLabelAndValue(r);return{chart:t,label:a,parsed:o.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:s,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function $u(t,e){const n=t.chart.ctx,{body:i,footer:r,title:o}=t,{boxWidth:a,boxHeight:s}=e,u=Pr(e.bodyFont),l=Pr(e.titleFont),c=Pr(e.footerFont),h=o.length,d=r.length,f=i.length,p=Lr(e.padding);let g=p.height,m=0,v=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){g+=f*(e.displayColors?Math.max(s,u.lineHeight):u.lineHeight)+(v-f)*u.lineHeight+(v-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*c.lineHeight+(d-1)*e.footerSpacing);let y=0;const b=function(t){m=Math.max(m,n.measureText(t).width+y)};return n.save(),n.font=l.string,zn(t.title,b),n.font=u.string,zn(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?a+2+e.boxPadding:0,zn(i,(t=>{zn(t.before,b),zn(t.lines,b),zn(t.after,b)})),y=0,n.font=c.string,zn(t.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function Yu(t,e,n,i){const{x:r,width:o}=n,{width:a,chartArea:{left:s,right:u}}=t;let l="center";return"center"===i?l=r<=(s+u)/2?"left":"right":r<=o/2?l="left":r>=a-o/2&&(l="right"),function(t,e,n,i){const{x:r,width:o}=i,a=n.caretSize+n.caretPadding;return"left"===t&&r+o+a>e.width||"right"===t&&r-o-a<0||void 0}(l,t,e,n)&&(l="center"),l}function Xu(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||Yu(t,e,n,i),yAlign:i}}function Ku(t,e,n,i){const{caretSize:r,caretPadding:o,cornerRadius:a}=t,{xAlign:s,yAlign:u}=n,l=r+o,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:f}=Rr(a);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,s);const g=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,u,l);return"center"===u?"left"===s?p+=l:"right"===s&&(p-=l):"left"===s?p-=Math.max(c,d)+r:"right"===s&&(p+=Math.max(h,f)+r),{x:wi(p,0,i.width-e.width),y:wi(g,0,i.height-e.height)}}function Zu(t,e,n){const i=Lr(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function Ju(t){return Wu([],Hu(t))}function Qu(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}class tl extends os{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new Go(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Nr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=n.beforeTitle.apply(this,[t]),r=n.title.apply(this,[t]),o=n.afterTitle.apply(this,[t]);let a=[];return a=Wu(a,Hu(i)),a=Wu(a,Hu(r)),a=Wu(a,Hu(o)),a}getBeforeBody(t,e){return Ju(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:n}=e,i=[];return zn(t,(t=>{const e={before:[],lines:[],after:[]},r=Qu(n,t);Wu(e.before,Hu(r.beforeLabel.call(this,t))),Wu(e.lines,r.label.call(this,t)),Wu(e.after,Hu(r.afterLabel.call(this,t))),i.push(e)})),i}getAfterBody(t,e){return Ju(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:n}=e,i=n.beforeFooter.apply(this,[t]),r=n.footer.apply(this,[t]),o=n.afterFooter.apply(this,[t]);let a=[];return a=Wu(a,Hu(i)),a=Wu(a,Hu(r)),a=Wu(a,Hu(o)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],o=[];let a,s,u=[];for(a=0,s=e.length;a<s;++a)u.push(qu(this.chart,e[a]));return t.filter&&(u=u.filter(((e,i,r)=>t.filter(e,i,r,n)))),t.itemSort&&(u=u.sort(((e,i)=>t.itemSort(e,i,n)))),zn(u,(e=>{const n=Qu(t.callbacks,e);i.push(n.labelColor.call(this,e)),r.push(n.labelPointStyle.call(this,e)),o.push(n.labelTextColor.call(this,e))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=u,u}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(i.length){const t=Gu[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=$u(this,n),a=Object.assign({},t,e),s=Xu(this.chart,n,a),u=Ku(n,a,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,r={opacity:1,x:u.x,y:u.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:s,topRight:u,bottomLeft:l,bottomRight:c}=Rr(a),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,v,y,b,_;return"center"===r?(b=d+p/2,"left"===i?(g=h,m=g-o,y=b+o,_=b-o):(g=h+f,m=g+o,y=b-o,_=b+o),v=g):(m="left"===i?h+Math.max(s,l)+o:"right"===i?h+f-Math.max(u,c)-o:this.caretX,"top"===r?(y=d,b=y-o,g=m-o,v=m+o):(y=d+p,b=y+o,g=m+o,v=m-o),_=y),{x1:g,x2:m,x3:v,y1:y,y2:b,y3:_}}drawTitle(t,e,n){const i=this.title,r=i.length;let o,a,s;if(r){const u=ko(n.rtl,this.x,this.width);for(t.x=Zu(this,n.titleAlign,n),e.textAlign=u.textAlign(n.titleAlign),e.textBaseline="middle",o=Pr(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,s=0;s<r;++s)e.fillText(i[s],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,s+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:s,boxWidth:u,boxPadding:l}=r,c=Pr(r.bodyFont),h=Zu(this,"left",r),d=i.x(h),f=s<c.lineHeight?(c.lineHeight-s)/2:0,p=e.y+f;if(r.usePointStyle){const e={radius:Math.min(u,s)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(d,u)+u/2,l=p+s/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,br(t,e,n,l),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,br(t,e,n,l)}else{t.lineWidth=o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=i.leftForLtr(d,u-l),n=i.leftForLtr(i.xPlus(d,1),u-l-2),a=Rr(o.borderRadius);Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Tr(t,{x:e,y:p,w:u,h:s,radius:a}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Tr(t,{x:n,y:p+1,w:u-2,h:s-2,radius:a}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,p,u,s),t.strokeRect(e,p,u,s),t.fillStyle=o.backgroundColor,t.fillRect(n,p+1,u-2,s-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:s,boxWidth:u,boxPadding:l}=n,c=Pr(n.bodyFont);let h=c.lineHeight,d=0;const f=ko(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+r},g=f.textAlign(o);let m,v,y,b,_,E,x;for(e.textAlign=o,e.textBaseline="middle",e.font=c.string,t.x=Zu(this,g,n),e.fillStyle=n.bodyColor,zn(this.beforeBody,p),d=a&&"right"!==g?"center"===o?u/2+l:u+2+l:0,b=0,E=i.length;b<E;++b){for(m=i[b],v=this.labelTextColors[b],e.fillStyle=v,zn(m.before,p),y=m.lines,a&&y.length&&(this._drawColorBox(e,t,b,f,n),h=Math.max(c.lineHeight,s)),_=0,x=y.length;_<x;++_)p(y[_]),h=c.lineHeight;zn(m.after,p)}d=0,h=c.lineHeight,zn(this.afterBody,p),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let o,a;if(r){const s=ko(n.rtl,this.x,this.width);for(t.x=Zu(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=s.textAlign(n.footerAlign),e.textBaseline="middle",o=Pr(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],s.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:o}=this,{x:a,y:s}=t,{width:u,height:l}=n,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:f}=Rr(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+c,s),"top"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+u-h,s),e.quadraticCurveTo(a+u,s,a+u,s+h),"center"===o&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(a+u,s+l-f),e.quadraticCurveTo(a+u,s+l,a+u-f,s+l),"bottom"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+d,s+l),e.quadraticCurveTo(a,s+l,a,s+l-d),"center"===o&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(a,s+c),e.quadraticCurveTo(a,s,a+c,s),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=Gu[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=$u(this,t),a=Object.assign({},n,this._size),s=Xu(e,t,a),u=Ku(t,a,s,e);i._to===u.x&&r._to===u.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,u))}}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Lr(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),So(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),Io(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),r=!Un(n,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,n),a=this._positionChanged(o,t),s=e||!Un(o,r)||a;return s&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e;const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,o=Gu[r.position].call(this,t,e);return!1!==o&&(n!==o.x||i!==o.y)}}tl.positioners=Gu;var el={id:"tooltip",_element:tl,positioners:Gu,afterInit(t,e,n){n&&(t.tooltip=new tl({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip,n={tooltip:e};!1!==t.notifyPlugins("beforeTooltipDraw",n)&&(e&&e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n))},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:On,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:On,beforeBody:On,beforeLabel:On,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Rn(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:On,afterBody:On,beforeFooter:On,footer:On,afterFooter:On}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},nl=Object.freeze({__proto__:null,Decimation:yu,Filler:Pu,Legend:Bu,SubTitle:Uu,Title:Vu,Tooltip:el});function il(t,e,n,i){const r=t.indexOf(e);if(-1===r)return((t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i);return r!==t.lastIndexOf(e)?n:r}class rl extends ms{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Rn(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:wi(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:il(n,t,Bn(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)i.push({value:n});return i}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function ol(t,e){const n=[],{bounds:i,step:r,min:o,max:a,precision:s,count:u,maxTicks:l,maxDigits:c,includeBounds:h}=t,d=r||1,f=l-1,{min:p,max:g}=e,m=!Rn(o),v=!Rn(a),y=!Rn(u),b=(g-p)/(c+1);let _,E,x,w,A=hi((g-p)/f/d)*d;if(A<1e-14&&!m&&!v)return[{value:p},{value:g}];w=Math.ceil(g/A)-Math.floor(p/A),w>f&&(A=hi(w*A/f/d)*d),Rn(s)||(_=Math.pow(10,s),A=Math.ceil(A*_)/_),"ticks"===i?(E=Math.floor(p/A)*A,x=Math.ceil(g/A)*A):(E=p,x=g),m&&v&&r&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-o)/r,A/1e3)?(w=Math.round(Math.min((a-o)/A,l)),A=(a-o)/w,E=o,x=a):y?(E=m?o:E,x=v?a:x,w=u-1,A=(x-E)/w):(w=(x-E)/A,w=fi(w,Math.round(w),A/1e3)?Math.round(w):Math.ceil(w));const D=Math.max(vi(A),vi(E));_=Math.pow(10,Rn(s)?D:s),E=Math.round(E*_)/_,x=Math.round(x*_)/_;let C=0;for(m&&(h&&E!==o?(n.push({value:o}),E<o&&C++,fi(Math.round((E+C*A)*_)/_,o,al(o,b,t))&&C++):E<o&&C++);C<w;++C)n.push({value:Math.round((E+C*A)*_)/_});return v&&h&&x!==a?n.length&&fi(n[n.length-1].value,a,al(a,b,t))?n[n.length-1].value=a:n.push({value:a}):v&&x!==a||n.push({value:x}),n}function al(t,e,{horizontal:n,minRotation:i}){const r=gi(i),o=(n?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}rl.id="category",rl.defaults={ticks:{callback:rl.prototype.getLabelForValue}};class sl extends ms{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Rn(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=t=>i=e?i:t,a=t=>r=n?r:t;if(t){const t=ci(i),e=ci(r);t<0&&e<0?a(0):t>0&&e>0&&o(0)}if(i===r){let e=1;(r>=Number.MAX_SAFE_INTEGER||i<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*r)),a(r+e),t||o(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=ol({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&pi(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return To(t,this.chart.options.locale,this.options.ticks.format)}}class ul extends sl{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Fn(t)?t:0,this.max=Fn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=gi(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function ll(t){return 1===t/Math.pow(10,Math.floor(li(t)))}ul.id="linear",ul.defaults={ticks:{callback:ss.formatters.numeric}};class cl extends ms{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=sl.prototype.parse.apply(this,[t,e]);if(0!==n)return Fn(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Fn(t)?Math.max(0,t):null,this.max=Fn(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,o=t=>i=e?i:t,a=(t,e)=>Math.pow(10,Math.floor(li(t))+e);n===i&&(n<=0?(r(1),o(10)):(r(a(n,-1)),o(a(i,1)))),n<=0&&r(a(i,-1)),i<=0&&o(a(n,1)),this._zero&&this.min!==this._suggestedMin&&n===a(this.min,0)&&r(a(n,-1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=function(t,e){const n=Math.floor(li(e.max)),i=Math.ceil(e.max/Math.pow(10,n)),r=[];let o=Nn(t.min,Math.pow(10,Math.floor(li(e.min)))),a=Math.floor(li(o)),s=Math.floor(o/Math.pow(10,a)),u=a<0?Math.pow(10,Math.abs(a)):1;do{r.push({value:o,major:ll(o)}),++s,10===s&&(s=1,++a,u=a>=0?1:u),o=Math.round(s*Math.pow(10,a)*u)/u}while(a<n||a===n&&s<i);const l=Nn(t.max,o);return r.push({value:l,major:ll(o)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&pi(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":To(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=li(t),this._valueRange=li(this.max)-li(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(li(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function hl(t){const e=t.ticks;if(e.display&&t.display){const t=Lr(e.backdropPadding);return Bn(e.font&&e.font.size,pr.font.size)+t.height}return 0}function dl(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function fl(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],o=t._pointLabels.length,a=t.options.pointLabels,s=a.centerPointLabels?ei/o:0;for(let h=0;h<o;h++){const o=a.setContext(t.getPointLabelContext(h));r[h]=o.padding;const d=t.getPointPosition(h,t.drawingArea+r[h],s),f=Pr(o.font),p=(u=t.ctx,l=f,c=Ln(c=t._pointLabels[h])?c:[c],{w:mr(u,l.string,c),h:c.length*l.lineHeight});i[h]=p;const g=Ei(t.getIndexAngle(h)+s),m=Math.round(mi(g));pl(n,e,g,dl(m,d.x,p.w,0,180),dl(m,d.y,p.h,90,270))}var u,l,c;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],r=t._pointLabels.length,o=t.options,a=hl(o)/2,s=t.drawingArea,u=o.pointLabels.centerPointLabels?ei/r:0;for(let o=0;o<r;o++){const r=t.getPointPosition(o,s+a+n[o],u),l=Math.round(mi(Ei(r.angle+ai))),c=e[o],h=vl(r.y,c.h,l),d=gl(l),f=ml(r.x,c.w,d);i.push({x:r.x,y:h,textAlign:d,left:f,top:h,right:f+c.w,bottom:h+c.h})}return i}(t,i,r)}function pl(t,e,n,i,r){const o=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let s=0,u=0;i.start<e.l?(s=(e.l-i.start)/o,t.l=Math.min(t.l,e.l-s)):i.end>e.r&&(s=(i.end-e.r)/o,t.r=Math.max(t.r,e.r+s)),r.start<e.t?(u=(e.t-r.start)/a,t.t=Math.min(t.t,e.t-u)):r.end>e.b&&(u=(r.end-e.b)/a,t.b=Math.max(t.b,e.b+u))}function gl(t){return 0===t||180===t?"center":t<180?"left":"right"}function ml(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function vl(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function yl(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,ni);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let o=1;o<i;o++)n=t.getPointPosition(o,e),r.lineTo(n.x,n.y)}}cl.id="logarithmic",cl.defaults={ticks:{callback:ss.formatters.logarithmic,major:{enabled:!0}}};class bl extends sl{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Lr(hl(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Fn(t)&&!isNaN(t)?t:0,this.max=Fn(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/hl(this.options))}generateTickLabels(t){sl.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=Vn(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?fl(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return Ei(t*(ni/(this._pointLabels.length||1))+gi(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Rn(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Rn(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Nr(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-ai+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),yl(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i}=e,r=this._pointLabels.length;let o,a,s;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=i.setContext(t.getPointLabelContext(r)),o=Pr(e.font),{x:a,y:s,textAlign:u,left:l,top:c,right:h,bottom:d}=t._pointLabelItems[r],{backdropColor:f}=e;if(!Rn(f)){const t=Lr(e.backdropPadding);n.fillStyle=f,n.fillRect(l-t.left,c-t.top,h-l+t.width,d-c+t.height)}Dr(n,t._pointLabels[r],a,s+o.lineHeight/2,o,{color:e.color,textAlign:u,textBaseline:"middle"})}}(this,r),i.display&&this.ticks.forEach(((t,e)=>{if(0!==e){a=this.getDistanceFromCenterForValue(t.value);!function(t,e,n,i){const r=t.ctx,o=e.circular,{color:a,lineWidth:s}=e;!o&&!i||!a||!s||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=s,r.setLineDash(e.borderDash),r.lineDashOffset=e.borderDashOffset,r.beginPath(),yl(t,n,o,i),r.closePath(),r.stroke(),r.restore())}(this,i.setContext(this.getContext(e-1)),a,r)}})),n.display){for(t.save(),o=r-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:u}=i;u&&r&&(t.lineWidth=u,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),s=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(s.x,s.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,a)=>{if(0===a&&!e.reverse)return;const s=n.setContext(this.getContext(a)),u=Pr(s.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),s.showLabelBackdrop){t.font=u.string,o=t.measureText(i.label).width,t.fillStyle=s.backdropColor;const e=Lr(s.backdropPadding);t.fillRect(-o/2-e.left,-r-u.size/2-e.top,o+e.width,u.size+e.height)}Dr(t,i.label,0,-r,u,{color:s.color})})),t.restore()}drawTitle(){}}bl.id="radialLinear",bl.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ss.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},bl.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},bl.descriptors={angleLines:{_fallback:"grid"}};const _l={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},El=Object.keys(_l);function xl(t,e){return t-e}function wl(t,e){if(Rn(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:o}=t._parseOpts;let a=e;return"function"==typeof i&&(a=i(a)),Fn(a)||(a="string"==typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!di(o)&&!0!==o?n.startOf(a,r):n.startOf(a,"isoWeek",o)),+a)}function Al(t,e,n,i){const r=El.length;for(let o=El.indexOf(t);o<r-1;++o){const t=_l[El[o]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return El[o]}return El[r-1]}function Dl(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=Br(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function Cl(t,e,n){const i=[],r={},o=e.length;let a,s;for(a=0;a<o;++a)s=e[a],r[s]=a,i.push({value:s,major:!1});return 0!==o&&n?function(t,e,n,i){const r=t._adapter,o=+r.startOf(e[0].value,i),a=e[e.length-1].value;let s,u;for(s=o;s<=a;s=+r.add(s,1,i))u=n[s],u>=0&&(e[u].major=!0);return e}(t,i,r,n):i}class Tl extends ms{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const n=t.time||(t.time={}),i=this._adapter=new Ea._date(t.adapters.date);$n(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:wl(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function s(t){o||isNaN(t.min)||(i=Math.min(i,t.min)),a||isNaN(t.max)||(r=Math.max(r,t.max))}o&&a||(s(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||s(this.getMinMax(!1))),i=Fn(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=Fn(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=function(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(i,r,this.max);return this._unit=e.unit||(n.autoSkip?Al(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let o=El.length-1;o>=El.indexOf(n);o--){const n=El[o];if(_l[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return El[n?El.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=El.indexOf(t)+1,n=El.length;e<n;++e)if(_l[El[e]].common)return El[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&o.reverse(),Cl(this,o,this._majorUnit)}initOffsets(t){let e,n,i=0,r=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),r=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=wi(i,0,o),r=wi(r,0,o),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||Al(r.minUnit,e,n,this._getLabelCapacity(e)),a=Bn(r.stepSize,1),s="week"===o&&r.isoWeekday,u=di(s)||!0===s,l={};let c,h,d=e;if(u&&(d=+t.startOf(d,"isoWeek",s)),d=+t.startOf(d,u?"day":o),t.diff(n,e,o)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+o);const f="data"===i.ticks.source&&this.getDataTimestamps();for(c=d,h=0;c<n;c=+t.add(c,a,o),h++)Dl(l,c,f);return c!==n&&"ticks"!==i.bounds&&1!==h||Dl(l,c,f),Object.keys(l).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}_tickFormatFunction(t,e,n,i){const r=this.options,o=r.time.displayFormats,a=this._unit,s=this._majorUnit,u=a&&o[a],l=s&&o[s],c=n[e],h=s&&l&&c&&c.major,d=this._adapter.format(t,i||(h?l:u)),f=r.ticks.callback;return f?Vn(f,[d,e,n],this):d}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=gi(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Cl(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(wl(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Gr(t.sort(xl))}}function kl(t,e,n){let i,r,o,a,s=0,u=t.length-1;n?(e>=t[s].pos&&e<=t[u].pos&&({lo:s,hi:u}=jr(t,"pos",e)),({pos:i,time:o}=t[s]),({pos:r,time:a}=t[u])):(e>=t[s].time&&e<=t[u].time&&({lo:s,hi:u}=jr(t,"time",e)),({time:i,pos:o}=t[s]),({time:r,pos:a}=t[u]));const l=r-i;return l?o+(a-o)*(e-i)/l:o}Tl.id="time",Tl.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class Sl extends Tl{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=kl(e,this.min),this._tableRange=kl(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let o,a,s,u,l;for(o=0,a=t.length;o<a;++o)u=t[o],u>=e&&u<=n&&i.push(u);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,a=i.length;o<a;++o)l=i[o+1],s=i[o-1],u=i[o],Math.round((l+s)/2)!==u&&r.push({time:u,pos:o/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(kl(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return kl(this._table,n*this._tableRange+this._minPos,!0)}}Sl.id="timeseries",Sl.defaults=Tl.defaults;const Il=[ya,gu,nl,Object.freeze({__proto__:null,CategoryScale:rl,LinearScale:ul,LogarithmicScale:cl,RadialLinearScale:bl,TimeScale:Tl,TimeSeriesScale:Sl})];Us.register(...Il);const Ol=Us;function Ml(t,e,n){if(-1===t.indexOf(e))return n;const i=t[t.indexOf(e)+1];if(!i)return n;if("duration"===e){let t=i.match(/([0-9]+)ms/);if(t)return t[1]}if("min"===e){let t=i.match(/([0-9]+)px/);if(t)return t[1]}return i}var Rl=function(t){function e(e,{modifiers:n}){let i=Ml(n,"duration",250)/1e3,r=Ml(n,"min",0),o=!n.includes("min");e._x_isShown||(e.style.height=`${r}px`),!e._x_isShown&&o&&(e.hidden=!0),e._x_isShown||(e.style.overflow="hidden");let a=(e,n)=>{let i=t.setStyles(e,n);return n.height?()=>{}:i},s={transitionProperty:"height",transitionDuration:`${i}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};e._x_transition={in(n=(()=>{}),i=(()=>{})){o&&(e.hidden=!1),o&&(e.style.display=null);let a=e.getBoundingClientRect().height;e.style.height="auto";let u=e.getBoundingClientRect().height;a===u&&(a=r),t.transition(e,t.setStyles,{during:s,start:{height:a+"px"},end:{height:u+"px"}},(()=>e._x_isShown=!0),(()=>{e.style.height==`${u}px`&&(e.style.overflow=null)}))},out(n=(()=>{}),i=(()=>{})){let u=e.getBoundingClientRect().height;t.transition(e,a,{during:s,start:{height:u+"px"},end:{height:r+"px"}},(()=>e.style.overflow="hidden"),(()=>{e._x_isShown=!1,e.style.height==`${r}px`&&o&&(e.style.display="none",e.hidden=!0)}))}}}t.directive("collapse",e),e.inline=(t,{modifiers:e})=>{e.includes("min")&&(t._x_doShow=()=>{},t._x_doHide=()=>{})}},Ll=n(757),Pl=n.n(Ll),Fl=["query","success","failure"];function Nl(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function Bl(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){Nl(o,i,r,a,s,"next",t)}function s(t){Nl(o,i,r,a,s,"throw",t)}a(void 0)}))}}function jl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(t,e)||ac(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vl(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zl(){return zl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=Ul(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},zl.apply(this,arguments)}function Ul(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zl(t)););return t}function Gl(t){var e="function"==typeof Map?new Map:void 0;return Gl=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Wl(t,arguments,Zl(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ql(n,t)},Gl(t)}function Wl(t,e,n){return Wl=Kl()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&ql(r,n.prototype),r},Wl.apply(null,arguments)}function Hl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ql(t,e)}function ql(t,e){return ql=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ql(t,e)}function $l(t){var e=Kl();return function(){var n,i=Zl(t);if(e){var r=Zl(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Yl(this,n)}}function Yl(t,e){if(e&&("object"===uc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xl(t)}function Xl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Zl(t){return Zl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Zl(t)}function Jl(t){return function(t){if(Array.isArray(t))return sc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ac(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ql(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function tc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ql(Object(n),!0).forEach((function(e){ec(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ql(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ec(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ic(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function rc(t,e,n){return e&&ic(t.prototype,e),n&&ic(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ac(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ac(t,e){if(t){if("string"==typeof t)return sc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sc(t,e):void 0}}function sc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function uc(t){return uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uc(t)}var lc=Object.create,cc=Object.defineProperty,hc=Object.getPrototypeOf,dc=Object.prototype.hasOwnProperty,fc=Object.getOwnPropertyNames,pc=Object.getOwnPropertyDescriptor,gc=function(t,e){return function(){return e||t((e={exports:{}}).exports,e),e.exports}},mc=function(t){return function(t,e,n){if(e&&"object"===uc(e)||"function"==typeof e){var i,r=oc(fc(e));try{var o=function(){var r=i.value;dc.call(t,r)||"default"===r||cc(t,r,{get:function(){return e[r]},enumerable:!(n=pc(e,r))||n.enumerable})};for(r.s();!(i=r.n()).done;)o()}catch(t){r.e(t)}finally{r.f()}}return t}((e=cc(null!=t?lc(hc(t)):{},"default",t&&t.__esModule&&"default"in t?{get:function(){return t.default},enumerable:!0}:{value:t,enumerable:!0}),cc(e,"__esModule",{value:!0})),t);var e},vc=gc((function(t,e){var i,r;i=t,r=function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,i=/\d\d?/,r=/\d*[^\s\d-_:/()]+/,o={},a=function(t){return(t=+t)+(t>68?1900:2e3)},s=function(t){return function(e){this[t]=+e}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(t){if(!t)return 0;if("Z"===t)return 0;var e=t.match(/([+-]|\d\d)/g),n=60*e[1]+(+e[2]||0);return 0===n?0:"+"===e[0]?-n:n}(t)}],l=function(t){var e=o[t];return e&&(e.indexOf?e:e.s.concat(e.f))},c=function(t,e){var n,i=o.meridiem;if(i){for(var r=1;r<=24;r+=1)if(t.indexOf(i(r,0,e))>-1){n=r>12;break}}else n=t===(e?"pm":"PM");return n},h={A:[r,function(t){this.afternoon=c(t,!1)}],a:[r,function(t){this.afternoon=c(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[n,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[i,s("seconds")],ss:[i,s("seconds")],m:[i,s("minutes")],mm:[i,s("minutes")],H:[i,s("hours")],h:[i,s("hours")],HH:[i,s("hours")],hh:[i,s("hours")],D:[i,s("day")],DD:[n,s("day")],Do:[r,function(t){var e=o.ordinal,n=t.match(/\d+/);if(this.day=n[0],e)for(var i=1;i<=31;i+=1)e(i).replace(/\[|\]/g,"")===t&&(this.day=i)}],M:[i,s("month")],MM:[n,s("month")],MMM:[r,function(t){var e=l("months"),n=(l("monthsShort")||e.map((function(t){return t.slice(0,3)}))).indexOf(t)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[r,function(t){var e=l("months").indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,s("year")],YY:[n,function(t){this.year=a(t)}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};return function(n,i,r){r.p.customParseFormat=!0,n&&n.parseTwoDigitYear&&(a=n.parseTwoDigitYear);var s=i.prototype,u=s.parse;s.parse=function(n){var i=n.date,a=n.utc,s=n.args;this.$u=a;var l=s[1];if("string"==typeof l){var c=!0===s[2],d=!0===s[3],f=c||d,p=s[2];d&&(p=s[2]),o=this.$locale(),!c&&p&&(o=r.Ls[p]),this.$d=function(n,i,r){try{if(["x","X"].indexOf(i)>-1)return new Date(("X"===i?1e3:1)*n);var a=function(n){var i,r;i=n,r=o&&o.formats;for(var a=(n=i.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,n,i){var o=i&&i.toUpperCase();return n||r[i]||t[i]||r[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))}))).match(e),s=a.length,u=0;u<s;u+=1){var l=a[u],c=h[l],d=c&&c[0],f=c&&c[1];a[u]=f?{regex:d,parser:f}:l.replace(/^\[|\]$/g,"")}return function(t){for(var e={},n=0,i=0;n<s;n+=1){var r=a[n];if("string"==typeof r)i+=r.length;else{var o=r.regex,u=r.parser,l=t.slice(i),c=o.exec(l)[0];u.call(e,c),t=t.replace(c,"")}}return function(t){var e=t.afternoon;if(void 0!==e){var n=t.hours;e?n<12&&(t.hours+=12):12===n&&(t.hours=0),delete t.afternoon}}(e),e}}(i)(n),s=a.year,u=a.month,l=a.day,c=a.hours,d=a.minutes,f=a.seconds,p=a.milliseconds,g=a.zone,m=new Date,v=l||(s||u?1:m.getDate()),y=s||m.getFullYear(),b=0;s&&!u||(b=u>0?u-1:m.getMonth());var _=c||0,E=d||0,x=f||0,w=p||0;return g?new Date(Date.UTC(y,b,v,_,E,x,w+60*g.offset*1e3)):r?new Date(Date.UTC(y,b,v,_,E,x,w)):new Date(y,b,v,_,E,x,w)}catch(t){return new Date("")}}(i,l,a),this.init(),p&&!0!==p&&(this.$L=this.locale(p).$L),f&&i!=this.format(l)&&(this.$d=new Date("")),o={}}else if(l instanceof Array)for(var g=l.length,m=1;m<=g;m+=1){s[1]=l[m-1];var v=r.apply(this,s);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}m===g&&(this.$d=new Date(""))}else u.call(this,n)}}},"object"==uc(t)&&void 0!==e?e.exports=r():"function"==typeof define&&n.amdO?define(r):(i="undefined"!=typeof globalThis?globalThis:i||self).dayjs_plugin_customParseFormat=r()})),yc=gc((function(t,e){var i,r;i=t,r=function(){return function(t,e,n){var i=e.prototype,r=function(t){return t&&(t.indexOf?t:t.s)},o=function(t,e,n,i,o){var a=t.name?t:t.$locale(),s=r(a[e]),u=r(a[n]),l=s||u.map((function(t){return t.slice(0,i)}));if(!o)return l;var c=a.weekStart;return l.map((function(t,e){return l[(e+(c||0))%7]}))},a=function(){return n.Ls[n.locale()]},s=function(t,e){return t.formats[e]||t.formats[e.toUpperCase()].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))},u=function(){var t=this;return{months:function(e){return e?e.format("MMMM"):o(t,"months")},monthsShort:function(e){return e?e.format("MMM"):o(t,"monthsShort","months",3)},firstDayOfWeek:function(){return t.$locale().weekStart||0},weekdays:function(e){return e?e.format("dddd"):o(t,"weekdays")},weekdaysMin:function(e){return e?e.format("dd"):o(t,"weekdaysMin","weekdays",2)},weekdaysShort:function(e){return e?e.format("ddd"):o(t,"weekdaysShort","weekdays",3)},longDateFormat:function(e){return s(t.$locale(),e)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return u.bind(this)()},n.localeData=function(){var t=a();return{firstDayOfWeek:function(){return t.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(e){return s(t,e)},meridiem:t.meridiem,ordinal:t.ordinal}},n.months=function(){return o(a(),"months")},n.monthsShort=function(){return o(a(),"monthsShort","months",3)},n.weekdays=function(t){return o(a(),"weekdays",null,null,t)},n.weekdaysShort=function(t){return o(a(),"weekdaysShort","weekdays",3,t)},n.weekdaysMin=function(t){return o(a(),"weekdaysMin","weekdays",2,t)}}},"object"==uc(t)&&void 0!==e?e.exports=r():"function"==typeof define&&n.amdO?define(r):(i="undefined"!=typeof globalThis?globalThis:i||self).dayjs_plugin_localeData=r()})),bc=gc((function(t,e){var i,r;i=t,r=function(){var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(n,i,r){var o,a=function(t,n,i){void 0===i&&(i={});var r=new Date(t);return function(t,n){void 0===n&&(n={});var i=n.timeZoneName||"short",r=t+"|"+i,o=e[r];return o||(o=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:i}),e[r]=o),o}(n,i).formatToParts(r)},s=function(e,n){for(var i=a(e,n),o=[],s=0;s<i.length;s+=1){var u=i[s],l=u.type,c=u.value,h=t[l];h>=0&&(o[h]=parseInt(c,10))}var d=o[3],f=24===d?0:d,p=o[0]+"-"+o[1]+"-"+o[2]+" "+f+":"+o[4]+":"+o[5]+":000",g=+e;return(r.utc(p).valueOf()-(g-=g%1e3))/6e4},u=i.prototype;u.tz=function(t,e){void 0===t&&(t=o);var n=this.utcOffset(),i=this.toDate(),a=i.toLocaleString("en-US",{timeZone:t}),s=Math.round((i-new Date(a))/1e3/60),u=r(a).$set("millisecond",this.$ms).utcOffset(15*-Math.round(i.getTimezoneOffset()/15)-s,!0);if(e){var l=u.utcOffset();u=u.add(n-l,"minute")}return u.$x.$timezone=t,u},u.offsetName=function(t){var e=this.$x.$timezone||r.tz.guess(),n=a(this.valueOf(),e,{timeZoneName:t}).find((function(t){return"timezonename"===t.type.toLowerCase()}));return n&&n.value};var l=u.startOf;u.startOf=function(t,e){if(!this.$x||!this.$x.$timezone)return l.call(this,t,e);var n=r(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return l.call(n,t,e).tz(this.$x.$timezone,!0)},r.tz=function(t,e,n){var i=n&&e,a=n||e||o,u=s(+r(),a);if("string"!=typeof t)return r(t).tz(a);var l=function(t,e,n){var i=t-60*e*1e3,r=s(i,n);if(e===r)return[i,e];var o=s(i-=60*(r-e)*1e3,n);return r===o?[i,r]:[t-60*Math.min(r,o)*1e3,Math.max(r,o)]}(r.utc(t,i).valueOf(),u,a),c=l[0],h=l[1],d=r(c).utcOffset(h);return d.$x.$timezone=a,d},r.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},r.tz.setDefault=function(t){o=t}}},"object"==uc(t)&&void 0!==e?e.exports=r():"function"==typeof define&&n.amdO?define(r):(i="undefined"!=typeof globalThis?globalThis:i||self).dayjs_plugin_timezone=r()})),_c=gc((function(t,e){var i,r;i=t,r=function(){var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(i,r,o){var a=r.prototype;o.utc=function(t){var e={date:t,utc:!0,args:arguments};return new r(e)},a.utc=function(e){var n=o(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),s.call(this,t)};var u=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else u.call(this)};var l=a.utcOffset;a.utcOffset=function(i,r){var o=this.$utils().u;if(o(i))return this.$u?0:o(this.$offset)?l.call(this):this.$offset;if("string"==typeof i&&null===(i=function(t){void 0===t&&(t="");var i=t.match(e);if(!i)return null;var r=(""+i[0]).match(n)||["-",0,0],o=r[0],a=60*+r[1]+ +r[2];return 0===a?0:"+"===o?a:-a}(i)))return this;var a=Math.abs(i)<=16?60*i:i,s=this;if(r)return s.$offset=a,s.$u=0===i,s;if(0!==i){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(a+u,t)).$offset=a,s.$x.$localOffset=u}else s=this.utc();return s};var c=a.format;a.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,e)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var h=a.toDate;a.toDate=function(t){return"s"===t&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var d=a.diff;a.diff=function(t,e,n){if(t&&this.$u===t.$u)return d.call(this,t,e,n);var i=this.local(),r=o(t).local();return d.call(i,r,e,n)}}},"object"==uc(t)&&void 0!==e?e.exports=r():"function"==typeof define&&n.amdO?define(r):(i="undefined"!=typeof globalThis?globalThis:i||self).dayjs_plugin_utc=r()})),Ec=gc((function(t,e){(function(){}).call(t),function(){null==window.Set&&(window.Set=function(){function t(){this.clear()}return t.prototype.clear=function(){return this.values=[]},t.prototype.has=function(t){return-1!==this.values.indexOf(t)},t.prototype.add=function(t){return this.has(t)||this.values.push(t),this},t.prototype.delete=function(t){var e;return-1!==(e=this.values.indexOf(t))&&(this.values.splice(e,1),!0)},t.prototype.forEach=function(){var t;return(t=this.values).forEach.apply(t,arguments)},t}())}.call(t),function(t){function n(){}function i(t){if("object"!=uc(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function r(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void h((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void a(e.promise,t)}o(e.promise,i)}else(1===t._state?o:a)(e.promise,t._value)})))}function o(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==uc(e)||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void s(t);if("function"==typeof n)return void l(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,s(t)}catch(e){a(t,e)}}function a(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&setTimeout((function(){t._handled||d(t._value)}),1);for(var e=0,n=t._deferreds.length;n>e;e++)r(t,t._deferreds[e]);t._deferreds=null}function u(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t((function(t){n||(n=!0,o(e,t))}),(function(t){n||(n=!0,a(e,t))}))}catch(t){if(n)return;n=!0,a(e,t)}}var c=setTimeout,h="function"==typeof setImmediate&&setImmediate||function(t){c(t,1)},d=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var o=new i(n);return r(this,new u(t,e,o)),o},i.all=function(t){var e=Array.prototype.slice.call(t);return new i((function(t,n){function i(o,a){try{if(a&&("object"==uc(a)||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){i(o,t)}),n)}e[o]=a,0==--r&&t(e)}catch(t){n(t)}}if(0===e.length)return t([]);for(var r=e.length,o=0;o<e.length;o++)i(o,e[o])}))},i.resolve=function(t){return t&&"object"==uc(t)&&t.constructor===i?t:new i((function(e){e(t)}))},i.reject=function(t){return new i((function(e,n){n(t)}))},i.race=function(t){return new i((function(e,n){for(var i=0,r=t.length;r>i;i++)t[i].then(e,n)}))},i._setImmediateFn=function(t){h=t},i._setUnhandledRejectionFn=function(t){d=t},void 0!==e&&e.exports?e.exports=i:t.Promise||(t.Promise=i)}(t),function(){var t,e,n,i="object"==uc(window.customElements),r="function"==typeof document.registerElement;i||r||("undefined"==typeof WeakMap&&(t=Object.defineProperty,e=Date.now()%1e9,(n=function(){this.name="__st"+(1e9*Math.random()>>>0)+e+++"__"}).prototype={set:function(e,n){var i=e[this.name];return i&&i[0]===e?i[1]=n:t(e,this.name,{value:[e,n],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},delete:function(t){var e=t[this.name];return!(!e||e[0]!==t||(e[0]=e[1]=void 0,0))},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=n),function(t){function e(){g=!1;var t=m;m=[],t.sort((function(t,e){return t.uid_-e.uid_}));var n=!1;t.forEach((function(t){var e=t.takeRecords();(function(t){t.nodes_.forEach((function(e){var n=c.get(e);n&&n.forEach((function(e){e.observer===t&&e.removeTransientObservers()}))}))})(t),e.length&&(t.callback_(e,t),n=!0)})),n&&e()}function n(t,e){for(var n=t;n;n=n.parentNode){var i=c.get(n);if(i)for(var r=0;r<i.length;r++){var o=i[r],a=o.options;if(n===t||a.subtree){var s=e(a);s&&o.enqueue(s)}}}}function i(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++v}function r(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function o(t,e){return f=new r(t,e)}function a(t){return p||(p=function(t){var e=new r(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}(f),p.oldValue=t,p)}function s(t,e){return t===e?t:p&&function(t){return t===p||t===f}(t)?p:null}function u(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var l,c=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))l=setTimeout;else if(window.setImmediate)l=window.setImmediate;else{var h=[],d=String(Math.random());window.addEventListener("message",(function(t){if(t.data===d){var e=h;h=[],e.forEach((function(t){t()}))}})),l=function(t){h.push(t),window.postMessage(d,"*")}}var f,p,g=!1,m=[],v=0;i.prototype={observe:function(t,e){if(t=function(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=c.get(t);n||c.set(t,n=[]);for(var i,r=0;r<n.length;r++)if(n[r].observer===this){(i=n[r]).removeListeners(),i.options=e;break}i||(i=new u(this,t,e),n.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach((function(t){for(var e=c.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}}),this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}},u.prototype={enqueue:function(t){var n=this.observer.records_,i=n.length;if(n.length>0){var r=s(n[i-1],t);if(r)return void(n[i-1]=r)}else!function(t){m.push(t),g||(g=!0,l(e))}(this.observer);n[i]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=c.get(t);e||c.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach((function(t){this.removeListeners_(t);for(var e=c.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}}),this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,i=t.relatedNode.namespaceURI,r=t.target;(u=new o("attributes",r)).attributeName=e,u.attributeNamespace=i;var s=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;n(r,(function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(i)?void 0:t.attributeOldValue?a(s):u}));break;case"DOMCharacterDataModified":var u=o("characterData",r=t.target);s=t.prevValue;n(r,(function(t){return t.characterData?t.characterDataOldValue?a(s):u:void 0}));break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var l,c,h=t.target;"DOMNodeInserted"===t.type?(l=[h],c=[]):(l=[],c=[h]);var d=h.previousSibling,g=h.nextSibling;(u=o("childList",t.target.parentNode)).addedNodes=l,u.removedNodes=c,u.previousSibling=d,u.nextSibling=g,n(t.relatedNode,(function(t){return t.childList?u:void 0}))}f=p=void 0}},t.JsMutationObserver=i,t.MutationObserver||(t.MutationObserver=i,i._isPolyfilled=!0)}}(self),function(){if(!window.performance||!window.performance.now){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}var e;window.requestAnimationFrame||(window.requestAnimationFrame=(e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)?function(t){return e((function(){t(performance.now())}))}:function(t){return window.setTimeout(t,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)});var n=function(){var t=document.createEvent("Event");return t.initEvent("foo",!0,!0),t.preventDefault(),t.defaultPrevented}();if(!n){var i=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(i.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var r=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||r&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||r&&"function"!=typeof window.Event){var o=window.Event;window.Event=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n},window.Event.prototype=o.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},function(t){var e=t.flags,n=[];t.addModule=function(t){n.push(t)},t.initializeModules=function(){n.forEach((function(e){e(t)}))},t.hasNative=Boolean(document.registerElement),t.isIE=/Trident/.test(navigator.userAgent),t.useNative=!e.register&&t.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule((function(t){function e(t,e){n(t,(function(t){return!!e(t)||void i(t,e)})),i(t,e)}function n(t,e,i){var r=t.firstElementChild;if(!r)for(r=t.firstChild;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.nextSibling;for(;r;)!0!==e(r,i)&&n(r,e,i),r=r.nextElementSibling;return null}function i(t,n){for(var i=t.shadowRoot;i;)e(i,n),i=i.olderShadowRoot}function r(t,e,n){if(t=window.wrap(t),!(n.indexOf(t)>=0)){n.push(t);for(var i,a=t.querySelectorAll("link[rel="+o+"]"),s=0,u=a.length;u>s&&(i=a[s]);s++)i.import&&r(i.import,e,n);e(t)}}var o=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";t.forDocumentTree=function(t,e){r(t,e,[])},t.forSubtree=e})),window.CustomElements.addModule((function(t){function e(t,e){return n(t,e)||i(t,e)}function n(e,n){return!!t.upgrade(e,n)||void(n&&a(e))}function i(t,e){p(t,(function(t){return!!n(t,e)||void 0}))}function r(t){y.push(t),v||(v=!0,setTimeout(o))}function o(){v=!1;for(var t,e=y,n=0,i=e.length;i>n&&(t=e[n]);n++)t();y=[]}function a(t){m?r((function(){s(t)})):s(t)}function s(t){t.__upgraded__&&!t.__attached&&(t.__attached=!0,t.attachedCallback&&t.attachedCallback())}function u(t){m?r((function(){l(t)})):l(t)}function l(t){t.__upgraded__&&t.__attached&&(t.__attached=!1,t.detachedCallback&&t.detachedCallback())}function c(t,n){if(f.dom){var i=n[0];if(i&&"childList"===i.type&&i.addedNodes&&i.addedNodes){for(var r=i.addedNodes[0];r&&r!==document&&!r.host;)r=r.parentNode;var o=r&&(r.URL||r._URL||r.host&&r.host.localName)||"";o=o.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,o||"")}var a=function(t){for(var e=t,n=window.wrap(document);e;){if(e==n)return!0;e=e.parentNode||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host}}(t);n.forEach((function(t){"childList"===t.type&&(b(t.addedNodes,(function(t){t.localName&&e(t,a)})),b(t.removedNodes,(function(t){t.localName&&function(t){u(t),p(t,(function(t){u(t)}))}(t)})))})),f.dom&&console.groupEnd()}function h(t){if(!t.__observer){var e=new MutationObserver(c.bind(this,t));e.observe(t,{childList:!0,subtree:!0}),t.__observer=e}}function d(t){t=window.wrap(t),f.dom&&console.group("upgradeDocument: ",t.baseURI.split("/").pop()),e(t,t===window.wrap(document)),h(t),f.dom&&console.groupEnd()}var f=t.flags,p=t.forSubtree,g=t.forDocumentTree,m=window.MutationObserver._isPolyfilled&&f["throttle-attached"];t.hasPolyfillMutations=m,t.hasThrottledAttached=m;var v=!1,y=[],b=Array.prototype.forEach.call.bind(Array.prototype.forEach),_=Element.prototype.createShadowRoot;_&&(Element.prototype.createShadowRoot=function(){var t=_.call(this);return window.CustomElements.watchShadow(this),t}),t.watchShadow=function(t){if(t.shadowRoot&&!t.shadowRoot.__watched){f.dom&&console.log("watching shadow-root for: ",t.localName);for(var e=t.shadowRoot;e;)h(e),e=e.olderShadowRoot}},t.upgradeDocumentTree=function(t){g(t,d)},t.upgradeDocument=d,t.upgradeSubtree=i,t.upgradeAll=e,t.attached=a,t.takeRecords=function(t){for((t=window.wrap(t))||(t=window.wrap(document));t.parentNode;)t=t.parentNode;var e=t.__observer;e&&(c(t,e.takeRecords()),o())}})),window.CustomElements.addModule((function(t){function e(e,r,o){return i.upgrade&&console.group("upgrade:",e.localName),r.is&&e.setAttribute("is",r.is),n(e,r),e.__upgraded__=!0,(a=e).createdCallback&&a.createdCallback(),o&&t.attached(e),t.upgradeSubtree(e,o),i.upgrade&&console.groupEnd(),e;var a}function n(t,e){Object.__proto__||function(t,e,n){for(var i={},r=e;r!==n&&r!==HTMLElement.prototype;){for(var o,a=Object.getOwnPropertyNames(r),s=0;o=a[s];s++)i[o]||(Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o)),i[o]=1);r=Object.getPrototypeOf(r)}}(t,e.prototype,e.native),t.__proto__=e.prototype}var i=t.flags;t.upgrade=function(n,i){if("template"===n.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(n),!n.__upgraded__&&n.nodeType===Node.ELEMENT_NODE){var r=n.getAttribute("is"),o=t.getRegisteredDefinition(n.localName)||t.getRegisteredDefinition(r);if(o&&(r&&o.tag==n.localName||!r&&!o.extends))return e(n,o,i)}},t.upgradeWithDefinition=e,t.implementPrototype=n})),window.CustomElements.addModule((function(t){function e(t,e,n){t=t.toLowerCase();var i=this.getAttribute(t);n.apply(this,arguments);var r=this.getAttribute(t);this.attributeChangedCallback&&r!==i&&this.attributeChangedCallback(t,i,r)}function n(t){var e=i(t);return e?n(e.extends).concat([e]):[]}function i(t){return t?f[t.toLowerCase()]:void 0}function r(t,e){t&&(t=t.toLowerCase()),e&&(e=e.toLowerCase());var n,o=i(e||t);if(o){if(t==o.tag&&e==o.is)return new o.ctor;if(!e&&!o.is)return new o.ctor}return e?((n=r(t)).setAttribute("is",e),n):(n=g(t),t.indexOf("-")>=0&&c(n,HTMLElement),n)}function o(t,e){var n=t[e];t[e]=function(){var t=n.apply(this,arguments);return u(t),t}}var a,s=(t.isIE,t.upgradeDocumentTree),u=t.upgradeAll,l=t.upgradeWithDefinition,c=t.implementPrototype,h=t.useNative,d=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],f={},p="http://www.w3.org/1999/xhtml",g=document.createElement.bind(document),m=document.createElementNS.bind(document);a=Object.__proto__||h?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;for(var n=t;n;){if(n===e.prototype)return!0;n=n.__proto__}return!1},o(Node.prototype,"cloneNode"),o(document,"importNode"),document.registerElement=function(r,o){var a,u=o||{};if(!r)throw new Error("document.registerElement: first argument `name` must not be empty");if(r.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(r)+"'.");if(function(t){for(var e=0;e<d.length;e++)if(t===d[e])return!0}(r))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(r)+"'. The type name is invalid.");if(i(r))throw new Error("DuplicateDefinitionError: a type with name '"+String(r)+"' is already registered");return u.prototype||(u.prototype=Object.create(HTMLElement.prototype)),u.__name=r.toLowerCase(),u.extends&&(u.extends=u.extends.toLowerCase()),u.lifecycle=u.lifecycle||{},u.ancestry=n(u.extends),function(t){for(var e,n=t.extends,i=0;e=t.ancestry[i];i++)n=e.is&&e.tag;t.tag=n||t.__name,n&&(t.is=t.__name)}(u),function(t){if(!Object.__proto__){var e=HTMLElement.prototype;if(t.is){var n=document.createElement(t.tag);e=Object.getPrototypeOf(n)}for(var i,r=t.prototype,o=!1;r;)r==e&&(o=!0),(i=Object.getPrototypeOf(r))&&(r.__proto__=i),r=i;o||console.warn(t.tag+" prototype not found in prototype chain for "+t.is),t.native=e}}(u),function(t){if(!t.setAttribute._polyfilled){var n=t.setAttribute;t.setAttribute=function(t,i){e.call(this,t,i,n)};var i=t.removeAttribute;t.removeAttribute=function(t){e.call(this,t,null,i)},t.setAttribute._polyfilled=!0}}(u.prototype),function(t,e){f[t]=e}(u.__name,u),u.ctor=(a=u,function(){return function(t){return l(g(t.tag),t)}(a)}),u.ctor.prototype=u.prototype,u.prototype.constructor=u.ctor,t.ready&&s(document),u.ctor},document.createElement=r,document.createElementNS=function(t,e,n){return t===p?r(e,n):m(t,e)},t.registry=f,t.instanceof=a,t.reservedTagList=d,t.getRegisteredDefinition=i,document.register=document.registerElement})),function(t){function e(){o(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(t){setTimeout(t,16)})((function(){setTimeout((function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))}))}))}var n=t.useNative,i=t.initializeModules;if(t.isIE,n){var r=function(){};t.watchShadow=r,t.upgrade=r,t.upgradeAll=r,t.upgradeDocumentTree=r,t.upgradeSubtree=r,t.takeRecords=r,t.instanceof=function(t,e){return t instanceof e}}else i();var o=t.upgradeDocumentTree,a=t.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(t){return t}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(t){t.import&&a(wrap(t.import))}),"complete"===document.readyState||t.flags.eager)e();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,e)}else e()}(window.CustomElements))}.call(t),function(){}.call(t),function(){(function(){(function(){this.Trix={VERSION:"1.3.1",ZERO_WIDTH_SPACE:"\ufeff",NON_BREAKING_SPACE:"",OBJECT_REPLACEMENT_CHARACTER:"",browser:{composesExistingText:/Android.*Chrome/.test(navigator.userAgent),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:function(){var t,e,n;if("undefined"==typeof InputEvent)return!1;for(t=0,e=(n=["data","getTargetRanges","inputType"]).length;e>t;t++)if(!(n[t]in InputEvent.prototype))return!1;return!0}()},config:{}}}).call(this)}).call(this);var t=this.Trix;(function(){(function(){t.BasicObject=function(){function t(){}var e,n,i;return t.proxyMethod=function(t){var i,r,o,a,s;return o=n(t),i=o.name,a=o.toMethod,s=o.toProperty,r=o.optional,this.prototype[i]=function(){var t,n;return t=null!=a?r?"function"==typeof this[a]?this[a]():void 0:this[a]():null!=s?this[s]:void 0,r?null!=(n=null!=t?t[i]:void 0)?e.call(n,t,arguments):void 0:(n=t[i],e.call(n,t,arguments))}},n=function(t){var e,n;if(!(n=t.match(i)))throw new Error("can't parse @proxyMethod expression: "+t);return e={name:n[4]},null!=n[2]?e.toMethod=n[1]:e.toProperty=n[1],null!=n[3]&&(e.optional=!0),e},e=Function.prototype.apply,i=/^(.+?)(\(\))?(\?)?\.(.+?)$/,t}()}).call(this),function(){var e={}.hasOwnProperty;t.Object=function(n){function i(){this.id=++r}var r;return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),r=0,i.fromJSONString=function(t){return this.fromJSON(JSON.parse(t))},i.prototype.hasSameConstructorAs=function(t){return this.constructor===(null!=t?t.constructor:void 0)},i.prototype.isEqualTo=function(t){return this===t},i.prototype.inspect=function(){var t,e,n;return t=function(){var t,i,r;for(e in r=[],i=null!=(t=this.contentsForInspection())?t:{})n=i[e],r.push(e+"="+n);return r}.call(this),"#<"+this.constructor.name+":"+this.id+(t.length?" "+t.join(", "):"")+">"},i.prototype.contentsForInspection=function(){},i.prototype.toJSONString=function(){return JSON.stringify(this)},i.prototype.toUTF16String=function(){return t.UTF16String.box(this)},i.prototype.getCacheKey=function(){return this.id.toString()},i}(t.BasicObject)}.call(this),function(){t.extend=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this}}.call(this),function(){t.extend({defer:function(t){return setTimeout(t,1)}})}.call(this),function(){var e,n;t.extend({normalizeSpaces:function(e){return e.replace(RegExp(""+t.ZERO_WIDTH_SPACE,"g"),"").replace(RegExp(""+t.NON_BREAKING_SPACE,"g")," ")},normalizeNewlines:function(t){return t.replace(/\r\n/g,"\n")},breakableWhitespacePattern:RegExp("[^\\S"+t.NON_BREAKING_SPACE+"]"),squishBreakableWhitespace:function(e){return e.replace(RegExp(""+t.breakableWhitespacePattern.source,"g")," ").replace(/\ {2,}/g," ")},summarizeStringChange:function(e,i){var r,o,a,s;return e=t.UTF16String.box(e),(i=t.UTF16String.box(i)).length<e.length?(s=(o=n(e,i))[0],r=o[1]):(r=(a=n(i,e))[0],s=a[1]),{added:r,removed:s}}}),n=function(n,i){var r,o,a,s,u;return n.isEqualTo(i)?["",""]:(a=(s=(o=e(n,i)).utf16String.length)?(u=o.offset,r=n.codepoints.slice(0,u).concat(n.codepoints.slice(u+s)),e(i,t.UTF16String.fromCodepoints(r))):e(i,n),[o.utf16String.toString(),a.utf16String.toString()])},e=function(t,e){var n,i,r;for(n=0,i=t.length,r=e.length;i>n&&t.charAt(n).isEqualTo(e.charAt(n));)n++;for(;i>n+1&&t.charAt(i-1).isEqualTo(e.charAt(r-1));)i--,r--;return{utf16String:t.slice(n,i),offset:n}}}.call(this),function(){t.extend({copyObject:function(t){var e,n,i;for(e in null==t&&(t={}),n={},t)i=t[e],n[e]=i;return n},objectsAreEqual:function(t,e){var n;if(null==t&&(t={}),null==e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(n in t)if(t[n]!==e[n])return!1;return!0}})}.call(this),function(){var e=[].slice;t.extend({arraysAreEqual:function(t,e){var n,i,r;if(null==t&&(t=[]),null==e&&(e=[]),t.length!==e.length)return!1;for(i=n=0,r=t.length;r>n;i=++n)if(t[i]!==e[i])return!1;return!0},arrayStartsWith:function(e,n){return null==e&&(e=[]),null==n&&(n=[]),t.arraysAreEqual(e.slice(0,n.length),n)},spliceArray:function(){var t,n,i;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],(i=n.slice(0)).splice.apply(i,t),i},summarizeArrayChange:function(t,e){var n,i,r,o,a,s,u,l,c,h,d;for(null==t&&(t=[]),null==e&&(e=[]),n=[],h=[],r=new Set,o=0,u=t.length;u>o;o++)d=t[o],r.add(d);for(i=new Set,a=0,l=e.length;l>a;a++)d=e[a],i.add(d),r.has(d)||n.push(d);for(s=0,c=t.length;c>s;s++)d=t[s],i.has(d)||h.push(d);return{added:n,removed:h}}})}.call(this),function(){var e,n,i,r;e=null,n=null,r=null,i=null,t.extend({getAllAttributeNames:function(){return null!=e?e:e=t.getTextAttributeNames().concat(t.getBlockAttributeNames())},getBlockConfig:function(e){return t.config.blockAttributes[e]},getBlockAttributeNames:function(){return null!=n?n:n=Object.keys(t.config.blockAttributes)},getTextConfig:function(e){return t.config.textAttributes[e]},getTextAttributeNames:function(){return null!=r?r:r=Object.keys(t.config.textAttributes)},getListAttributeNames:function(){var e,n;return null!=i?i:i=function(){var i,r;for(e in r=[],i=t.config.blockAttributes)null!=(n=i[e].listAttribute)&&r.push(n);return r}()}})}.call(this),function(){var e,n,i,r,o,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=document.documentElement,n=null!=(i=null!=(r=null!=(o=e.matchesSelector)?o:e.webkitMatchesSelector)?r:e.msMatchesSelector)?i:e.mozMatchesSelector,t.extend({handleEvent:function(n,i){var r,o,a,s,u,l,c,h,d,f,p;return u=(c=null!=i?i:{}).onElement,s=c.matchingSelector,p=c.withCallback,a=c.inPhase,l=c.preventDefault,d=c.times,r=null!=u?u:e,h=s,p,f="capturing"===a,(o=function(e){var n;return null!=d&&0==--d&&o.destroy(),null!=(n=t.findClosestElementFromNode(e.target,{matchingSelector:h}))&&(null!=p&&p.call(n,e,n),l)?e.preventDefault():void 0}).destroy=function(){return r.removeEventListener(n,o,f)},r.addEventListener(n,o,f),o},handleEventOnce:function(e,n){return null==n&&(n={}),n.times=1,t.handleEvent(e,n)},triggerEvent:function(n,i){var r,o,a,s,u,l,c;return l=(c=null!=i?i:{}).onElement,o=c.bubbles,a=c.cancelable,r=c.attributes,s=null!=l?l:e,o=!1!==o,a=!1!==a,(u=document.createEvent("Events")).initEvent(n,o,a),null!=r&&t.extend.call(u,r),s.dispatchEvent(u)},elementMatchesSelector:function(t,e){return 1===(null!=t?t.nodeType:void 0)?n.call(t,e):void 0},findClosestElementFromNode:function(e,n){var i,r,o;for(i=(r=null!=n?n:{}).matchingSelector,o=r.untilNode;null!=e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.parentNode;if(null!=e){if(null==i)return e;if(e.closest&&null==o)return e.closest(i);for(;e&&e!==o;){if(t.elementMatchesSelector(e,i))return e;e=e.parentNode}}},findInnerElement:function(t){for(;null!=t?t.firstElementChild:void 0;)t=t.firstElementChild;return t},innerElementIsActive:function(e){return document.activeElement!==e&&t.elementContainsNode(e,document.activeElement)},elementContainsNode:function(t,e){if(t&&e)for(;e;){if(e===t)return!0;e=e.parentNode}},findNodeFromContainerAndOffset:function(t,e){var n;if(t)return t.nodeType===Node.TEXT_NODE?t:0===e?null!=(n=t.firstChild)?n:t:t.childNodes.item(e-1)},findElementFromContainerAndOffset:function(e,n){var i;return i=t.findNodeFromContainerAndOffset(e,n),t.findClosestElementFromNode(i)},findChildIndexOfNode:function(t){var e;if(null!=t?t.parentNode:void 0){for(e=0;t=t.previousSibling;)e++;return e}},removeNode:function(t){var e;return null!=t&&null!=(e=t.parentNode)?e.removeChild(t):void 0},walkTree:function(t,e){var n,i,r,o,a;return i=(r=null!=e?e:{}).onlyNodesOfType,o=r.usingFilter,n=r.expandEntityReferences,a=function(){switch(i){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}}(),document.createTreeWalker(t,a,null!=o?o:null,!0===n)},tagName:function(t){var e;return null!=t&&null!=(e=t.tagName)?e.toLowerCase():void 0},makeElement:function(t,e){var n,i,r,o,a,s,u,l,c,h,d,f,p,g;if(null==e&&(e={}),"object"==uc(t)?t=(e=t).tagName:e={attributes:e},r=document.createElement(t),null!=e.editable&&(null==e.attributes&&(e.attributes={}),e.attributes.contenteditable=e.editable),e.attributes)for(s in c=e.attributes)g=c[s],r.setAttribute(s,g);if(e.style)for(s in h=e.style)g=h[s],r.style[s]=g;if(e.data)for(s in d=e.data)g=d[s],r.dataset[s]=g;if(e.className)for(o=0,u=(f=e.className.split(" ")).length;u>o;o++)i=f[o],r.classList.add(i);if(e.textContent&&(r.textContent=e.textContent),e.childNodes)for(a=0,l=(p=[].concat(e.childNodes)).length;l>a;a++)n=p[a],r.appendChild(n);return r},getBlockTagNames:function(){var e,n;return null!=t.blockTagNames?t.blockTagNames:t.blockTagNames=function(){var i,r;for(e in r=[],i=t.config.blockAttributes)(n=i[e].tagName)&&r.push(n);return r}()},nodeIsBlockContainer:function(e){return t.nodeIsBlockStartComment(null!=e?e.firstChild:void 0)},nodeProbablyIsBlockContainer:function(e){var n,i;return n=t.tagName(e),a.call(t.getBlockTagNames(),n)>=0&&(i=t.tagName(e.firstChild),a.call(t.getBlockTagNames(),i)<0)},nodeIsBlockStart:function(e,n){return(null!=n?n:{strict:!0}).strict?t.nodeIsBlockStartComment(e):t.nodeIsBlockStartComment(e)||!t.nodeIsBlockStartComment(e.firstChild)&&t.nodeProbablyIsBlockContainer(e)},nodeIsBlockStartComment:function(e){return t.nodeIsCommentNode(e)&&"block"===(null!=e?e.data:void 0)},nodeIsCommentNode:function(t){return(null!=t?t.nodeType:void 0)===Node.COMMENT_NODE},nodeIsCursorTarget:function(e,n){var i;return i=(null!=n?n:{}).name,e?t.nodeIsTextNode(e)?e.data===t.ZERO_WIDTH_SPACE?!i||e.parentNode.dataset.trixCursorTarget===i:void 0:t.nodeIsCursorTarget(e.firstChild):void 0},nodeIsAttachmentElement:function(e){return t.elementMatchesSelector(e,t.AttachmentView.attachmentSelector)},nodeIsEmptyTextNode:function(e){return t.nodeIsTextNode(e)&&""===(null!=e?e.data:void 0)},nodeIsTextNode:function(t){return(null!=t?t.nodeType:void 0)===Node.TEXT_NODE}})}.call(this),function(){var e,n,i,r,o;e=t.copyObject,r=t.objectsAreEqual,t.extend({normalizeRange:i=function(t){var e;if(null!=t)return Array.isArray(t)||(t=[t,t]),[n(t[0]),n(null!=(e=t[1])?e:t[0])]},rangeIsCollapsed:function(t){var e,n,r;if(null!=t)return r=(n=i(t))[0],e=n[1],o(r,e)},rangesAreEqual:function(t,e){var n,r,a,s,u,l;if(null!=t&&null!=e)return r=(a=i(t))[0],n=a[1],l=(s=i(e))[0],u=s[1],o(r,l)&&o(n,u)}}),n=function(t){return"number"==typeof t?t:e(t)},o=function(t,e){return"number"==typeof t?t===e:r(t,e)}}.call(this),function(){var e,n,i,r,o,a,s,u;t.registerElement=function(t,e){var n,i;return null==e&&(e={}),t=t.toLowerCase(),e=s(e),(n=(i=a(e)).defaultCSS)&&(delete i.defaultCSS,r(n,t)),o(t,i)},r=function(t,e){return i(e).textContent=t.replace(/%t/g,e)},i=function(t){var n,i;return(n=document.createElement("style")).setAttribute("type","text/css"),n.setAttribute("data-tag-name",t.toLowerCase()),(i=e())&&n.setAttribute("nonce",i),document.head.insertBefore(n,document.head.firstChild),n},e=function(){var t;return(t=n("trix-csp-nonce")||n("csp-nonce"))?t.getAttribute("content"):void 0},n=function(t){return document.head.querySelector("meta[name="+t+"]")},a=function(t){var e,n,i;for(e in n={},t)i=t[e],n[e]="function"==typeof i?{value:i}:i;return n},u=function(t){var e,n,i,r,o;for(e={},n=0,r=(o=["initialize","connect","disconnect"]).length;r>n;n++)e[i=o[n]]=t[i],delete t[i];return e},s=window.customElements?function(t){var e,n,i,r,o;return o=u(t),i=o.initialize,e=o.connect,n=o.disconnect,i&&(r=e,e=function(){return this.initialized||(this.initialized=!0,i.call(this)),null!=r?r.call(this):void 0}),e&&(t.connectedCallback=e),n&&(t.disconnectedCallback=n),t}:function(t){var e,n,i,r;return i=(r=u(t)).initialize,e=r.connect,n=r.disconnect,i&&(t.createdCallback=i),e&&(t.attachedCallback=e),n&&(t.detachedCallback=n),t},o=window.customElements?function(t,e){var n;return n=function(){return"object"==("undefined"==typeof Reflect?"undefined":uc(Reflect))?Reflect.construct(HTMLElement,[],n):HTMLElement.apply(this)},Object.setPrototypeOf(n.prototype,HTMLElement.prototype),Object.setPrototypeOf(n,HTMLElement),Object.defineProperties(n.prototype,e),window.customElements.define(t,n),n}:function(t,e){var n,i;return i=Object.create(HTMLElement.prototype,e),n=document.registerElement(t,{prototype:i}),Object.defineProperty(i,"constructor",{value:n}),n}}.call(this),function(){var e,n;t.extend({getDOMSelection:function(){var t;return(t=window.getSelection()).rangeCount>0?t:void 0},getDOMRange:function(){var n,i;return(n=null!=(i=t.getDOMSelection())?i.getRangeAt(0):void 0)&&!e(n)?n:void 0},setDOMRange:function(e){var n;return(n=window.getSelection()).removeAllRanges(),n.addRange(e),t.selectionChangeObserver.update()}}),e=function(t){return n(t.startContainer)||n(t.endContainer)},n=function(t){return!Object.getPrototypeOf(t)}}.call(this),function(){var e;e={"application/x-trix-feature-detection":"test"},t.extend({dataTransferIsPlainText:function(t){var e,n,i;return i=t.getData("text/plain"),n=t.getData("text/html"),i&&n?(e=(new DOMParser).parseFromString(n,"text/html").body).textContent===i?!e.querySelector("*"):void 0:null!=i?i.length:void 0},dataTransferIsWritable:function(t){var n,i;if(null!=(null!=t?t.setData:void 0)){for(n in e)if(i=e[n],!function(){try{return t.setData(n,i),t.getData(n)===i}catch(t){}}())return;return!0}},keyEventIsKeyboardCommand:/Mac|^iP/.test(navigator.platform)?function(t){return t.metaKey}:function(t){return t.ctrlKey}})}.call(this),function(){var e,n,i,r;t.extend({RTL_PATTERN:/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,getDirection:(n=t.makeElement("input",{dir:"auto",name:"x",dirName:"x.dir"}),(e=t.makeElement("form")).appendChild(n),i=function(){try{return new FormData(e).has(n.dirName)}catch(t){}}(),r=function(){try{return n.matches(":dir(ltr),:dir(rtl)")}catch(t){}}(),i?function(t){return n.value=t,new FormData(e).get(n.dirName)}:r?function(t){return n.value=t,n.matches(":dir(rtl)")?"rtl":"ltr"}:function(e){var n;return n=e.trim().charAt(0),t.RTL_PATTERN.test(n)?"rtl":"ltr"})})}.call(this),function(){}.call(this),function(){var e,n={}.hasOwnProperty;e=t.arraysAreEqual,t.Hash=function(i){function r(t){null==t&&(t={}),this.values=a(t),r.__super__.constructor.apply(this,arguments)}var o,a,s,u,l;return function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,i),r.fromCommonAttributesOfObjects=function(t){var e,n,i,r,a,s;if(null==t&&(t=[]),!t.length)return new this;for(i=(e=o(t[0])).getKeys(),n=0,r=(s=t.slice(1)).length;r>n;n++)a=s[n],i=e.getKeysCommonToHash(o(a)),e=e.slice(i);return e},r.box=function(t){return o(t)},r.prototype.add=function(t,e){return this.merge(u(t,e))},r.prototype.remove=function(e){return new t.Hash(a(this.values,e))},r.prototype.get=function(t){return this.values[t]},r.prototype.has=function(t){return t in this.values},r.prototype.merge=function(e){return new t.Hash(s(this.values,l(e)))},r.prototype.slice=function(e){var n,i,r,o;for(o={},n=0,r=e.length;r>n;n++)i=e[n],this.has(i)&&(o[i]=this.values[i]);return new t.Hash(o)},r.prototype.getKeys=function(){return Object.keys(this.values)},r.prototype.getKeysCommonToHash=function(t){var e,n,i,r,a;for(t=o(t),a=[],e=0,i=(r=this.getKeys()).length;i>e;e++)n=r[e],this.values[n]===t.values[n]&&a.push(n);return a},r.prototype.isEqualTo=function(t){return e(this.toArray(),o(t).toArray())},r.prototype.isEmpty=function(){return 0===this.getKeys().length},r.prototype.toArray=function(){var t,e,n;return(null!=this.array?this.array:this.array=function(){var i;for(t in e=[],i=this.values)n=i[t],e.push(t,n);return e}.call(this)).slice(0)},r.prototype.toObject=function(){return a(this.values)},r.prototype.toJSON=function(){return this.toObject()},r.prototype.contentsForInspection=function(){return{values:JSON.stringify(this.values)}},u=function(t,e){var n;return(n={})[t]=e,n},s=function(t,e){var n,i,r;for(n in i=a(t),e)r=e[n],i[n]=r;return i},a=function(t,e){var n,i,r,o,a;for(o={},n=0,r=(a=Object.keys(t).sort()).length;r>n;n++)(i=a[n])!==e&&(o[i]=t[i]);return o},o=function(e){return e instanceof t.Hash?e:new t.Hash(e)},l=function(e){return e instanceof t.Hash?e.values:e},r}(t.Object)}.call(this),function(){t.ObjectGroup=function(){function t(t,e){var n,i;this.objects=null!=t?t:[],i=e.depth,(n=e.asTree)&&(this.depth=i,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}return t.groupObjects=function(t,e){var n,i,r,o,a,s,u,l,c;for(null==t&&(t=[]),r=(c=null!=e?e:{}).depth,(n=c.asTree)&&null==r&&(r=0),l=[],a=0,s=t.length;s>a;a++){if(u=t[a],o){if(("function"==typeof u.canBeGrouped?u.canBeGrouped(r):void 0)&&("function"==typeof(i=o[o.length-1]).canBeGroupedWith?i.canBeGroupedWith(u,r):void 0)){o.push(u);continue}l.push(new this(o,{depth:r,asTree:n})),o=null}("function"==typeof u.canBeGrouped?u.canBeGrouped(r):void 0)?o=[u]:l.push(u)}return o&&l.push(new this(o,{depth:r,asTree:n})),l},t.prototype.getObjects=function(){return this.objects},t.prototype.getDepth=function(){return this.depth},t.prototype.getCacheKey=function(){var t,e,n,i,r;for(e=["objectGroup"],t=0,n=(r=this.getObjects()).length;n>t;t++)i=r[t],e.push(i.getCacheKey());return e.join("/")},t}()}.call(this),function(){var e={}.hasOwnProperty;t.ObjectMap=function(t){function n(t){var e,n,i,r,o;for(null==t&&(t=[]),this.objects={},i=0,r=t.length;r>i;i++)o=t[i],n=JSON.stringify(o),null==(e=this.objects)[n]&&(e[n]=o)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.find=function(t){var e;return e=JSON.stringify(t),this.objects[e]},n}(t.BasicObject)}.call(this),function(){t.ElementStore=function(){function t(t){this.reset(t)}var e;return t.prototype.add=function(t){var n;return n=e(t),this.elements[n]=t},t.prototype.remove=function(t){var n,i;return n=e(t),(i=this.elements[n])?(delete this.elements[n],i):void 0},t.prototype.reset=function(t){var e,n,i;for(null==t&&(t=[]),this.elements={},n=0,i=t.length;i>n;n++)e=t[n],this.add(e);return t},e=function(t){return t.dataset.trixStoreKey},t}()}.call(this),function(){}.call(this),function(){var e={}.hasOwnProperty;t.Operation=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.isPerforming=function(){return!0===this.performing},n.prototype.hasPerformed=function(){return!0===this.performed},n.prototype.hasSucceeded=function(){return this.performed&&this.succeeded},n.prototype.hasFailed=function(){return this.performed&&!this.succeeded},n.prototype.getPromise=function(){return null!=this.promise?this.promise:this.promise=new Promise((t=this,function(e,n){return t.performing=!0,t.perform((function(i,r){return t.succeeded=i,t.performing=!1,t.performed=!0,t.succeeded?e(r):n(r)}))}));var t},n.prototype.perform=function(t){return t(!1)},n.prototype.release=function(){var t;return null!=(t=this.promise)&&"function"==typeof t.cancel&&t.cancel(),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null},n.proxyMethod("getPromise().then"),n.proxyMethod("getPromise().catch"),n}(t.BasicObject)}.call(this),function(){var e,n,i,r,o,a={}.hasOwnProperty;t.UTF16String=function(t){function e(t,e){this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}return function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.box=function(t){return null==t&&(t=""),t instanceof this?t:this.fromUCS2String(null!=t?t.toString():void 0)},e.fromUCS2String=function(t){return new this(t,r(t))},e.fromCodepoints=function(t){return new this(o(t),t)},e.prototype.offsetToUCS2Offset=function(t){return o(this.codepoints.slice(0,Math.max(0,t))).length},e.prototype.offsetFromUCS2Offset=function(t){return r(this.ucs2String.slice(0,Math.max(0,t))).length},e.prototype.slice=function(){var t;return this.constructor.fromCodepoints((t=this.codepoints).slice.apply(t,arguments))},e.prototype.charAt=function(t){return this.slice(t,t+1)},e.prototype.isEqualTo=function(t){return this.constructor.box(t).ucs2String===this.ucs2String},e.prototype.toJSON=function(){return this.ucs2String},e.prototype.getCacheKey=function(){return this.ucs2String},e.prototype.toString=function(){return this.ucs2String},e}(t.BasicObject),e=1===("function"==typeof Array.from?Array.from("").length:void 0),n=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),i=" "===("function"==typeof String.fromCodePoint?String.fromCodePoint(32,128124):void 0),r=e&&n?function(t){return Array.from(t).map((function(t){return t.codePointAt(0)}))}:function(t){var e,n,i,r,o;for(r=[],e=0,i=t.length;i>e;)(o=t.charCodeAt(e++))>=55296&&56319>=o&&i>e&&(56320==(64512&(n=t.charCodeAt(e++)))?o=((1023&o)<<10)+(1023&n)+65536:e--),r.push(o);return r},o=i?function(t){return String.fromCodePoint.apply(String,t)}:function(t){var e,n;return function(){var i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],e="",n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|1023&n),o.push(e+String.fromCharCode(n));return o}().join("")}}.call(this),function(){}.call(this),function(){}.call(this),function(){t.config.lang={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"}}.call(this),function(){t.config.css={attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"}}.call(this),function(){var e;t.config.blockAttributes=e={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test:function(n){return t.tagName(n.parentNode)===e[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test:function(n){return t.tagName(n.parentNode)===e[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}}}.call(this),function(){var e,n;e=t.config.lang,n=[e.bytes,e.KB,e.MB,e.GB,e.TB,e.PB],t.config.fileSize={prefix:"IEC",precision:2,formatter:function(t){var i,r;switch(t){case 0:return"0 "+e.bytes;case 1:return"1 "+e.byte;default:return i=function(){switch(this.prefix){case"SI":return 1e3;case"IEC":return 1024}}.call(this),r=Math.floor(Math.log(t)/Math.log(i)),(t/Math.pow(i,r)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"")+" "+n[r]}}}}.call(this),function(){t.config.textAttributes={bold:{tagName:"strong",inheritable:!0,parser:function(t){var e;return"bold"===(e=window.getComputedStyle(t)).fontWeight||e.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:function(t){return"italic"===window.getComputedStyle(t).fontStyle}},href:{groupTagName:"a",parser:function(e){var n,i;return i="a:not("+t.AttachmentView.attachmentSelector+")",(n=t.findClosestElementFromNode(e,{matchingSelector:i}))?n.getAttribute("href"):void 0}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}}}.call(this),function(){var e,n,i;i=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],n="data-trix-serialized-attributes",e=new RegExp("\x3c!--block--\x3e","g"),t.extend({serializers:{"application/json":function(e){var n;if(e instanceof t.Document)n=e;else{if(!(e instanceof HTMLElement))throw new Error("unserializable object");n=t.Document.fromHTML(e.innerHTML)}return n.toSerializableDocument().toJSONString()},"text/html":function(r){var o,a,s,u,l,c,h,d,f,p,g,m,v,y,b,_,E;if(r instanceof t.Document)u=t.DocumentView.render(r);else{if(!(r instanceof HTMLElement))throw new Error("unserializable object");u=r.cloneNode(!0)}for(l=0,f=(y=u.querySelectorAll("[data-trix-serialize=false]")).length;f>l;l++)s=y[l],t.removeNode(s);for(c=0,p=i.length;p>c;c++)for(o=i[c],h=0,g=(b=u.querySelectorAll("["+o+"]")).length;g>h;h++)(s=b[h]).removeAttribute(o);for(d=0,m=(_=u.querySelectorAll("[data-trix-serialized-attributes]")).length;m>d;d++){s=_[d];try{for(v in a=JSON.parse(s.getAttribute(n)),s.removeAttribute(n),a)E=a[v],s.setAttribute(v,E)}catch(t){}}return u.innerHTML.replace(e,"")}},deserializers:{"application/json":function(e){return t.Document.fromJSONString(e)},"text/html":function(e){return t.Document.fromHTML(e)}},serializeToContentType:function(e,n){var i;if(i=t.serializers[n])return i(e);throw new Error("unknown content type: "+n)},deserializeFromContentType:function(e,n){var i;if(i=t.deserializers[n])return i(e);throw new Error("unknown content type: "+n)}})}.call(this),function(){var e;e=t.config.lang,t.config.toolbar={getDefaultHTML:function(){return'<div class="trix-button-row">\n  <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="'+e.bold+'" tabindex="-1">'+e.bold+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="'+e.italic+'" tabindex="-1">'+e.italic+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="'+e.strike+'" tabindex="-1">'+e.strike+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="'+e.link+'" tabindex="-1">'+e.link+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="'+e.heading1+'" tabindex="-1">'+e.heading1+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="'+e.quote+'" tabindex="-1">'+e.quote+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="'+e.code+'" tabindex="-1">'+e.code+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="'+e.bullets+'" tabindex="-1">'+e.bullets+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="'+e.numbers+'" tabindex="-1">'+e.numbers+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="'+e.outdent+'" tabindex="-1">'+e.outdent+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="'+e.indent+'" tabindex="-1">'+e.indent+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="'+e.attachFiles+'" tabindex="-1">'+e.attachFiles+'</button>\n  </span>\n\n  <span class="trix-button-group-spacer"></span>\n\n  <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="'+e.undo+'" tabindex="-1">'+e.undo+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="'+e.redo+'" tabindex="-1">'+e.redo+'</button>\n  </span>\n</div>\n\n<div class="trix-dialogs" data-trix-dialogs>\n  <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">\n    <div class="trix-dialog__link-fields">\n      <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="'+e.urlPlaceholder+'" aria-label="'+e.url+'" required data-trix-input>\n      <div class="trix-button-group">\n        <input type="button" class="trix-button trix-button--dialog" value="'+e.link+'" data-trix-method="setAttribute">\n        <input type="button" class="trix-button trix-button--dialog" value="'+e.unlink+'" data-trix-method="removeAttribute">\n      </div>\n    </div>\n  </div>\n</div>'}}}.call(this),function(){t.config.undoInterval=5e3}.call(this),function(){t.config.attachments={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}}}.call(this),function(){t.config.keyNames={8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"}}.call(this),function(){t.config.input={level2Enabled:!0,getLevel:function(){return this.level2Enabled&&t.browser.supportsInputEvents?2:0},pickFiles:function(e){var n;return(n=t.makeElement("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId})).addEventListener("change",(function(){return e(n.files),t.removeNode(n)})),t.removeNode(document.getElementById(this.fileInputId)),document.body.appendChild(n),n.click()},fileInputId:"trix-file-input-"+Date.now().toString(16)}}.call(this),function(){}.call(this),function(){t.registerElement("trix-toolbar",{defaultCSS:"%t {\n  display: block;\n}\n\n%t {\n  white-space: nowrap;\n}\n\n%t [data-trix-dialog] {\n  display: none;\n}\n\n%t [data-trix-dialog][data-trix-active] {\n  display: block;\n}\n\n%t [data-trix-dialog] [data-trix-validate]:invalid {\n  background-color: #ffdddd;\n}",initialize:function(){return""===this.innerHTML?this.innerHTML=t.config.toolbar.getDefaultHTML():void 0}})}.call(this),function(){var e={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t.ObjectView=function(i){function r(t,e){this.object=t,this.options=null!=e?e:{},this.childViews=[],this.rootView=this}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(r,i),r.prototype.getNodes=function(){var t,e,n,i,r;for(null==this.nodes&&(this.nodes=this.createNodes()),r=[],t=0,e=(i=this.nodes).length;e>t;t++)n=i[t],r.push(n.cloneNode(!0));return r},r.prototype.invalidate=function(){var t;return this.nodes=null,this.childViews=[],null!=(t=this.parentView)?t.invalidate():void 0},r.prototype.invalidateViewForObject=function(t){var e;return null!=(e=this.findViewForObject(t))?e.invalidate():void 0},r.prototype.findOrCreateCachedChildView=function(t,e){var n;return(n=this.getCachedViewForObject(e))?this.recordChildView(n):(n=this.createChildView.apply(this,arguments),this.cacheViewForObject(n,e)),n},r.prototype.createChildView=function(e,n,i){var r;return null==i&&(i={}),n instanceof t.ObjectGroup&&(i.viewClass=e,e=t.ObjectGroupView),r=new e(n,i),this.recordChildView(r)},r.prototype.recordChildView=function(t){return t.parentView=this,t.rootView=this.rootView,this.childViews.push(t),t},r.prototype.getAllChildViews=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.childViews).length;n>e;e++)t=i[e],r.push(t),r=r.concat(t.getAllChildViews());return r},r.prototype.findElement=function(){return this.findElementForObject(this.object)},r.prototype.findElementForObject=function(t){var e;return(e=null!=t?t.id:void 0)?this.rootView.element.querySelector("[data-trix-id='"+e+"']"):void 0},r.prototype.findViewForObject=function(t){var e,n,i,r;for(e=0,n=(i=this.getAllChildViews()).length;n>e;e++)if((r=i[e]).object===t)return r},r.prototype.getViewCache=function(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?null!=this.viewCache?this.viewCache:this.viewCache={}:void 0},r.prototype.isViewCachingEnabled=function(){return!1!==this.shouldCacheViews},r.prototype.enableViewCaching=function(){return this.shouldCacheViews=!0},r.prototype.disableViewCaching=function(){return this.shouldCacheViews=!1},r.prototype.getCachedViewForObject=function(t){var e;return null!=(e=this.getViewCache())?e[t.getCacheKey()]:void 0},r.prototype.cacheViewForObject=function(t,e){var n;return null!=(n=this.getViewCache())?n[e.getCacheKey()]=t:void 0},r.prototype.garbageCollectCachedViews=function(){var t,e,i,r,o,a;if(t=this.getViewCache()){for(e in a=this.getAllChildViews().concat(this),i=function(){var t,e,n;for(n=[],t=0,e=a.length;e>t;t++)o=a[t],n.push(o.object.getCacheKey());return n}(),r=[],t)n.call(i,e)<0&&r.push(delete t[e]);return r}},r}(t.BasicObject)}.call(this),function(){var e={}.hasOwnProperty;t.ObjectGroupView=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.getChildViews=function(){var t,e,n,i;if(!this.childViews.length)for(t=0,e=(i=this.objectGroup.getObjects()).length;e>t;t++)n=i[t],this.findOrCreateCachedChildView(this.viewClass,n,this.options);return this.childViews},n.prototype.createNodes=function(){var t,e,n,i,r,o,a,s;for(t=this.createContainerElement(),e=0,i=(a=this.getChildViews()).length;i>e;e++)for(n=0,r=(s=a[e].getNodes()).length;r>n;n++)o=s[n],t.appendChild(o);return[t]},n.prototype.createContainerElement=function(t){return null==t&&(t=this.objectGroup.getDepth()),this.getChildViews()[0].createContainerElement(t)},n}(t.ObjectView)}.call(this),function(){var e={}.hasOwnProperty;t.Controller=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n}(t.BasicObject)}.call(this),function(){var e,n,i,r,o,a,s={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t.findClosestElementFromNode,i=t.nodeIsEmptyTextNode,n=t.nodeIsBlockStartComment,r=t.normalizeSpaces,o=t.summarizeStringChange,a=t.tagName,t.MutationObserver=function(t){function l(t){this.element=t,this.didMutate=function(t,e){return function(){return t.apply(e,arguments)}}(this.didMutate,this),this.observer=new window.MutationObserver(this.didMutate),this.start()}var c,h,d;return function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(l,t),"["+(h="data-trix-mutable")+"]",d={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},l.prototype.start=function(){return this.reset(),this.observer.observe(this.element,d)},l.prototype.stop=function(){return this.observer.disconnect()},l.prototype.didMutate=function(t){var e,n;return(e=this.mutations).push.apply(e,this.findSignificantMutations(t)),this.mutations.length?(null!=(n=this.delegate)&&"function"==typeof n.elementDidMutate&&n.elementDidMutate(this.getMutationSummary()),this.reset()):void 0},l.prototype.reset=function(){return this.mutations=[]},l.prototype.findSignificantMutations=function(t){var e,n,i,r;for(r=[],e=0,n=t.length;n>e;e++)i=t[e],this.mutationIsSignificant(i)&&r.push(i);return r},l.prototype.mutationIsSignificant=function(t){var e,n,i,r;if(this.nodeIsMutable(t.target))return!1;for(e=0,n=(r=this.nodesModifiedByMutation(t)).length;n>e;e++)if(i=r[e],this.nodeIsSignificant(i))return!0;return!1},l.prototype.nodeIsSignificant=function(t){return t!==this.element&&!this.nodeIsMutable(t)&&!i(t)},l.prototype.nodeIsMutable=function(t){return e(t,{matchingSelector:"[data-trix-mutable]"})},l.prototype.nodesModifiedByMutation=function(t){var e;switch(e=[],t.type){case"attributes":t.attributeName!==h&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push.apply(e,t.addedNodes),e.push.apply(e,t.removedNodes)}return e},l.prototype.getMutationSummary=function(){return this.getTextMutationSummary()},l.prototype.getTextMutationSummary=function(){var t,e,n,i,r,o,a,s,l,c,h;for(n=(s=this.getTextChangesFromCharacterData()).additions,r=s.deletions,o=0,a=(l=(h=this.getTextChangesFromChildList()).additions).length;a>o;o++)e=l[o],u.call(n,e)<0&&n.push(e);return r.push.apply(r,h.deletions),c={},(t=n.join(""))&&(c.textAdded=t),(i=r.join(""))&&(c.textDeleted=i),c},l.prototype.getMutationsByType=function(t){var e,n,i,r,o;for(o=[],e=0,n=(r=this.mutations).length;n>e;e++)(i=r[e]).type===t&&o.push(i);return o},l.prototype.getTextChangesFromChildList=function(){var t,e,i,o,a,s,u,l,h,d;for(t=[],u=[],e=0,o=(s=this.getMutationsByType("childList")).length;o>e;e++)a=s[e],t.push.apply(t,a.addedNodes),u.push.apply(u,a.removedNodes);return 0===t.length&&1===u.length&&n(u[0])?(h=[],d=["\n"]):(h=c(t),d=c(u)),{additions:function(){var t,e,n;for(n=[],i=t=0,e=h.length;e>t;i=++t)(l=h[i])!==d[i]&&n.push(r(l));return n}(),deletions:function(){var t,e,n;for(n=[],i=t=0,e=d.length;e>t;i=++t)(l=d[i])!==h[i]&&n.push(r(l));return n}()}},l.prototype.getTextChangesFromCharacterData=function(){var t,e,n,i,a,s,u,l;return(e=this.getMutationsByType("characterData")).length&&(l=e[0],n=e[e.length-1],a=r(l.oldValue),i=r(n.target.data),t=(s=o(a,i)).added,u=s.removed),{additions:t?[t]:[],deletions:u?[u]:[]}},c=function(t){var e,n,i,r;for(null==t&&(t=[]),r=[],e=0,n=t.length;n>e;e++)switch((i=t[e]).nodeType){case Node.TEXT_NODE:r.push(i.data);break;case Node.ELEMENT_NODE:"br"===a(i)?r.push("\n"):r.push.apply(r,c(i.childNodes))}return r},l}(t.BasicObject)}.call(this),function(){var e={}.hasOwnProperty;t.FileVerificationOperation=function(t){function n(t){this.file=t}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.perform=function(t){var e,n;return(e=new FileReader).onerror=function(){return t(!1)},e.onload=(n=this,function(){e.onerror=null;try{e.abort()}catch(t){}return t(!0,n.file)}),e.readAsArrayBuffer(this.file)},n}(t.Operation)}.call(this),function(){var e,n,i={}.hasOwnProperty;e=t.handleEvent,n=t.innerElementIsActive,t.InputController=function(r){function o(n){var i;for(i in this.element=n,this.mutationObserver=new t.MutationObserver(this.element),this.mutationObserver.delegate=this,this.events)e(i,{onElement:this.element,withCallback:this.handlerFor(i)})}return function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(o,r),o.prototype.events={},o.prototype.elementDidMutate=function(){},o.prototype.editorWillSyncDocumentView=function(){return this.mutationObserver.stop()},o.prototype.editorDidSyncDocumentView=function(){return this.mutationObserver.start()},o.prototype.requestRender=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestRender?t.inputControllerDidRequestRender():void 0},o.prototype.requestReparse=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestReparse&&t.inputControllerDidRequestReparse(),this.requestRender()},o.prototype.attachFiles=function(e){var n,i,r;return i=function(){var i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(new t.FileVerificationOperation(n));return o}(),Promise.all(i).then((r=this,function(t){return r.handleInput((function(){var e,n;return null!=(e=this.delegate)&&e.inputControllerWillAttachFiles(),null!=(n=this.responder)&&n.insertFiles(t),this.requestRender()}))}))},o.prototype.handlerFor=function(t){return e=this,function(i){return i.defaultPrevented?void 0:e.handleInput((function(){return n(this.element)?void 0:(this.eventName=t,this.events[t].call(this,i))}))};var e},o.prototype.handleInput=function(t){var e,n;try{return null!=(e=this.delegate)&&e.inputControllerWillHandleInput(),t.call(this)}finally{null!=(n=this.delegate)&&n.inputControllerDidHandleInput()}},o.prototype.createLinkHTML=function(t,e){var n;return(n=document.createElement("a")).href=t,n.textContent=null!=e?e:t,n.outerHTML},o}(t.BasicObject)}.call(this),function(){var e,n,i,r,o,a,s,u,l,c,h,d,f=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty,g=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};l=t.makeElement,c=t.objectsAreEqual,t.tagName,n=t.browser,s=t.keyEventIsKeyboardCommand,r=t.dataTransferIsWritable,i=t.dataTransferIsPlainText,u=t.config.keyNames,t.Level0InputController=function(n){function a(){a.__super__.constructor.apply(this,arguments),this.resetInputSummary()}var p;return f(a,n),p=0,a.prototype.setInputSummary=function(t){var e,n;for(e in null==t&&(t={}),this.inputSummary.eventName=this.eventName,t)n=t[e],this.inputSummary[e]=n;return this.inputSummary},a.prototype.resetInputSummary=function(){return this.inputSummary={}},a.prototype.reset=function(){return this.resetInputSummary(),t.selectionChangeObserver.reset()},a.prototype.elementDidMutate=function(t){var e;return this.isComposing()?null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidAllowUnhandledInput?e.inputControllerDidAllowUnhandledInput():void 0:this.handleInput((function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()}))},a.prototype.mutationIsExpected=function(t){var e,n,i,r,o,a,s,u,l;return a=t.textAdded,s=t.textDeleted,!!this.inputSummary.preferDocument||(e=null!=a?a===this.inputSummary.textAdded:!this.inputSummary.textAdded,n=null!=s?this.inputSummary.didDelete:!this.inputSummary.didDelete,l="\n"===s&&!n,!!(((u=("\n"===a||" \n"===a)&&!e)&&!l||l&&!u)&&(r=this.getSelectedRange())&&(i=u?a.replace(/\n$/,"").length||-1:(null!=a?a.length:void 0)||1,null!=(o=this.responder)?o.positionIsBlockBreak(r[1]+i):void 0))||e&&n)},a.prototype.mutationIsSignificant=function(t){var e,n,i;return i=Object.keys(t).length>0,e=""===(null!=(n=this.compositionInput)?n.getEndData():void 0),i||!e},a.prototype.events={keydown:function(e){var n,i,r,o,a,l,c,h,d;if(this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0,o=u[e.keyCode]){for(i=this.keys,r=0,l=(h=["ctrl","alt","shift","meta"]).length;l>r;r++)e[(c=h[r])+"Key"]&&("ctrl"===c&&(c="control"),i=null!=i?i[c]:void 0);null!=(null!=i?i[o]:void 0)&&(this.setInputSummary({keyName:o}),t.selectionChangeObserver.reset(),i[o].call(this,e))}return s(e)&&(n=String.fromCharCode(e.keyCode).toLowerCase())&&((a=function(){var t,n,i,r;for(r=[],t=0,n=(i=["alt","shift"]).length;n>t;t++)e[(c=i[t])+"Key"]&&r.push(c);return r}()).push(n),null!=(d=this.delegate)?d.inputControllerDidReceiveKeyboardCommand(a):void 0)?e.preventDefault():void 0},keypress:function(t){var e,n,i;if(null==this.inputSummary.eventName&&!t.metaKey&&(!t.ctrlKey||t.altKey))return(i=d(t))?(null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString(i),this.setInputSummary({textAdded:i,didDelete:this.selectionIsExpanded()})):void 0},textInput:function(t){var e,n,i,r;return e=t.data,(r=this.inputSummary.textAdded)&&r!==e&&r.toUpperCase()===e?(n=this.getSelectedRange(),this.setSelectedRange([n[0],n[1]+r.length]),null!=(i=this.responder)&&i.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(n)):void 0},dragenter:function(t){return t.preventDefault()},dragstart:function(t){var e;return t.target,this.serializeSelectionToDataTransfer(t.dataTransfer),this.draggedRange=this.getSelectedRange(),null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidStartDrag?e.inputControllerDidStartDrag():void 0},dragover:function(t){var e,n;return!this.draggedRange&&!this.canAcceptDataTransfer(t.dataTransfer)||(t.preventDefault(),e={x:t.clientX,y:t.clientY},c(e,this.draggingPoint))?void 0:(this.draggingPoint=e,null!=(n=this.delegate)&&"function"==typeof n.inputControllerDidReceiveDragOverPoint?n.inputControllerDidReceiveDragOverPoint(this.draggingPoint):void 0)},dragend:function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidCancelDrag&&t.inputControllerDidCancelDrag(),this.draggedRange=null,this.draggingPoint=null},drop:function(e){var n,i,r,o,a,s,u,l,c;return e.preventDefault(),r=null!=(a=e.dataTransfer)?a.files:void 0,o={x:e.clientX,y:e.clientY},null!=(s=this.responder)&&s.setLocationRangeFromPointRange(o),(null!=r?r.length:void 0)?this.attachFiles(r):this.draggedRange?(null!=(u=this.delegate)&&u.inputControllerWillMoveText(),null!=(l=this.responder)&&l.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()):(i=e.dataTransfer.getData("application/x-trix-document"))&&(n=t.Document.fromJSONString(i),null!=(c=this.responder)&&c.insertDocument(n),this.requestRender()),this.draggedRange=null,this.draggingPoint=null},cut:function(t){var e,n;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&(this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault(),null!=(n=this.delegate)&&n.inputControllerWillCutText(),this.deleteInDirection("backward"),t.defaultPrevented)?this.requestRender():void 0},copy:function(t){var e;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&this.serializeSelectionToDataTransfer(t.clipboardData)?t.preventDefault():void 0},paste:function(e){var n,r,a,s,u,l,c,d,f,m,v,y,b,_,E,x,w,A,D,C,T,k,S,I;return n=null!=(d=e.clipboardData)?d:e.testClipboardData,c={clipboard:n},null==n||h(e)?void this.getPastedHTMLUsingHiddenElement((I=this,function(t){var e,n,i;return c.type="text/html",c.html=t,null!=(e=I.delegate)&&e.inputControllerWillPaste(c),null!=(n=I.responder)&&n.insertHTML(c.html),I.requestRender(),null!=(i=I.delegate)?i.inputControllerDidPaste(c):void 0})):((s=n.getData("URL"))?(c.type="text/html",S=(l=n.getData("public.url-name"))?t.squishBreakableWhitespace(l).trim():s,c.html=this.createLinkHTML(s,S),null!=(f=this.delegate)&&f.inputControllerWillPaste(c),this.setInputSummary({textAdded:S,didDelete:this.selectionIsExpanded()}),null!=(E=this.responder)&&E.insertHTML(c.html),this.requestRender(),null!=(x=this.delegate)&&x.inputControllerDidPaste(c)):i(n)?(c.type="text/plain",c.string=n.getData("text/plain"),null!=(w=this.delegate)&&w.inputControllerWillPaste(c),this.setInputSummary({textAdded:c.string,didDelete:this.selectionIsExpanded()}),null!=(A=this.responder)&&A.insertString(c.string),this.requestRender(),null!=(D=this.delegate)&&D.inputControllerDidPaste(c)):(u=n.getData("text/html"))?(c.type="text/html",c.html=u,null!=(C=this.delegate)&&C.inputControllerWillPaste(c),null!=(T=this.responder)&&T.insertHTML(c.html),this.requestRender(),null!=(k=this.delegate)&&k.inputControllerDidPaste(c)):g.call(n.types,"Files")>=0&&(a=null!=(m=n.items)&&null!=(v=m[0])&&"function"==typeof v.getAsFile?v.getAsFile():void 0)&&(!a.name&&(r=o(a))&&(a.name="pasted-file-"+ ++p+"."+r),c.type="File",c.file=a,null!=(y=this.delegate)&&y.inputControllerWillAttachFiles(),null!=(b=this.responder)&&b.insertFile(c.file),this.requestRender(),null!=(_=this.delegate)&&_.inputControllerDidPaste(c)),e.preventDefault())},compositionstart:function(t){return this.getCompositionInput().start(t.data)},compositionupdate:function(t){return this.getCompositionInput().update(t.data)},compositionend:function(t){return this.getCompositionInput().end(t.data)},beforeinput:function(){return this.inputSummary.didInput=!0},input:function(t){return this.inputSummary.didInput=!0,t.stopPropagation()}},a.prototype.keys={backspace:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},delete:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},return:function(){var t,e;return this.setInputSummary({preferDocument:!0}),null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),null!=(e=this.responder)?e.insertLineBreak():void 0},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canIncreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.increaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},right:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},control:{d:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},h:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},o:function(t){var e,n;return t.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n",{updatePosition:!1}),this.requestRender()}},shift:{return:function(t){var e,n;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n"),this.requestRender(),t.preventDefault()},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canDecreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.decreaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("backward")):void 0},right:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("forward")):void 0}},alt:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}},meta:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}}},a.prototype.getCompositionInput=function(){return this.isComposing()?this.compositionInput:this.compositionInput=new e(this)},a.prototype.isComposing=function(){return null!=this.compositionInput&&!this.compositionInput.isEnded()},a.prototype.deleteInDirection=function(t,e){var n;return!1!==(null!=(n=this.responder)?n.deleteInDirection(t):void 0)?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0},a.prototype.serializeSelectionToDataTransfer=function(e){var n,i;if(r(e))return n=null!=(i=this.responder)?i.getSelectedDocument().toSerializableDocument():void 0,e.setData("application/x-trix-document",JSON.stringify(n)),e.setData("text/html",t.DocumentView.render(n).innerHTML),e.setData("text/plain",n.toString().replace(/\n$/,"")),!0},a.prototype.canAcceptDataTransfer=function(t){var e,n,i,r,o;for(o={},e=0,n=(r=null!=(i=null!=t?t.types:void 0)?i:[]).length;n>e;e++)o[r[e]]=!0;return o.Files||o["application/x-trix-document"]||o["text/html"]||o["text/plain"]},a.prototype.getPastedHTMLUsingHiddenElement=function(e){var n,i,r,o;return i=this.getSelectedRange(),r={position:"absolute",left:window.pageXOffset+"px",top:window.pageYOffset+"px",opacity:0},n=l({style:r,tagName:"div",editable:!0}),document.body.appendChild(n),n.focus(),requestAnimationFrame((o=this,function(){var r;return r=n.innerHTML,t.removeNode(n),o.setSelectedRange(i),e(r)}))},a.proxyMethod("responder?.getSelectedRange"),a.proxyMethod("responder?.setSelectedRange"),a.proxyMethod("responder?.expandSelectionInDirection"),a.proxyMethod("responder?.selectionIsInCursorTarget"),a.proxyMethod("responder?.selectionIsExpanded"),a}(t.InputController),o=function(t){var e,n;return null!=(e=t.type)&&null!=(n=e.match(/\/(\w+)$/))?n[1]:void 0},a=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),d=function(e){var n;return e.key&&a&&e.key.codePointAt(0)===e.keyCode?e.key:(null===e.which?n=e.keyCode:0!==e.which&&0!==e.charCode&&(n=e.charCode),null!=n&&"escape"!==u[n]?t.UTF16String.fromCodepoints([n]).toString():void 0)},h=function(t){var e,n,i,r,o,a,s,u,l;if(s=t.clipboardData){if(g.call(s.types,"text/html")>=0){for(i=0,a=(u=s.types).length;a>i;i++)if(l=u[i],e=/^CorePasteboardFlavorType/.test(l),n=/^dyn\./.test(l)&&s.getData(l),e||n)return!0;return!1}return r=g.call(s.types,"com.apple.webarchive")>=0,o=g.call(s.types,"com.apple.flat-rtfd")>=0,r||o}},e=function(t){function e(t){var e;this.inputController=t,e=this.inputController,this.responder=e.responder,this.delegate=e.delegate,this.inputSummary=e.inputSummary,this.data={}}return f(e,t),e.prototype.start=function(t){var e,n;return this.data.start=t,this.isSignificant()?("keypress"===this.inputSummary.eventName&&this.inputSummary.textAdded&&null!=(e=this.responder)&&e.deleteInDirection("left"),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=null!=(n=this.responder)?n.getSelectedRange():void 0):void 0},e.prototype.update=function(t){var e;return this.data.update=t,this.isSignificant()&&(e=this.selectPlaceholder())?(this.forgetPlaceholder(),this.range=e):void 0},e.prototype.end=function(t){var e,n,i,r;return this.data.end=t,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.setSelectedRange(this.range),null!=(i=this.responder)&&i.insertString(this.data.end),null!=(r=this.responder)?r.setSelectedRange(this.range[0]+this.data.end.length):void 0):null!=this.data.start||null!=this.data.update?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset()},e.prototype.getEndData=function(){return this.data.end},e.prototype.isEnded=function(){return null!=this.getEndData()},e.prototype.isSignificant=function(){return!n.composesExistingText||this.inputSummary.didInput},e.prototype.canApplyToDocument=function(){var t,e;return 0===(null!=(t=this.data.start)?t.length:void 0)&&(null!=(e=this.data.end)?e.length:void 0)>0&&null!=this.range},e.proxyMethod("inputController.setInputSummary"),e.proxyMethod("inputController.requestRender"),e.proxyMethod("inputController.requestReparse"),e.proxyMethod("responder?.selectionIsExpanded"),e.proxyMethod("responder?.insertPlaceholder"),e.proxyMethod("responder?.selectPlaceholder"),e.proxyMethod("responder?.forgetPlaceholder"),e}(t.BasicObject)}.call(this),function(){var e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t.dataTransferIsPlainText,n=t.keyEventIsKeyboardCommand,i=t.objectsAreEqual,t.Level2InputController=function(s){function u(){return this.render=r(this.render,this),u.__super__.constructor.apply(this,arguments)}var l,c,h,d,f,p;return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(u,s),u.prototype.elementDidMutate=function(){var t;return this.scheduledRender?this.composing&&null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidAllowUnhandledInput?t.inputControllerDidAllowUnhandledInput():void 0:this.reparse()},u.prototype.scheduleRender=function(){return null!=this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)},u.prototype.render=function(){var t;return cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||null!=(t=this.delegate)&&t.render(),"function"==typeof this.afterRender&&this.afterRender(),this.afterRender=null},u.prototype.reparse=function(){var t;return null!=(t=this.delegate)?t.reparse():void 0},u.prototype.events={keydown:function(t){var e,i,r,o;if(n(t)){if(e=c(t),null!=(o=this.delegate)?o.inputControllerDidReceiveKeyboardCommand(e):void 0)return t.preventDefault()}else if(r=t.key,t.altKey&&(r+="+Alt"),t.shiftKey&&(r+="+Shift"),i=this.keys[r])return this.withEvent(t,i)},paste:function(t){var e,n,i,r,o,a,s,u,l;return h(t)?(t.preventDefault(),this.attachFiles(t.clipboardData.files)):d(t)?(t.preventDefault(),n={type:"text/plain",string:t.clipboardData.getData("text/plain")},null!=(i=this.delegate)&&i.inputControllerWillPaste(n),null!=(r=this.responder)&&r.insertString(n.string),this.render(),null!=(o=this.delegate)?o.inputControllerDidPaste(n):void 0):(e=null!=(a=t.clipboardData)?a.getData("URL"):void 0)?(t.preventDefault(),n={type:"text/html",html:this.createLinkHTML(e)},null!=(s=this.delegate)&&s.inputControllerWillPaste(n),null!=(u=this.responder)&&u.insertHTML(n.html),this.render(),null!=(l=this.delegate)?l.inputControllerDidPaste(n):void 0):void 0},beforeinput:function(t){var e;return(e=this.inputTypes[t.inputType])?(this.withEvent(t,e),this.scheduleRender()):void 0},input:function(){return t.selectionChangeObserver.reset()},dragstart:function(t){var e,n;return(null!=(e=this.responder)?e.selectionContainsAttachments():void 0)?(t.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:null!=(n=this.responder)?n.getSelectedRange():void 0,point:f(t)}):void 0},dragenter:function(t){return l(t)?t.preventDefault():void 0},dragover:function(t){var e,n;if(this.dragging){if(t.preventDefault(),e=f(t),!i(e,this.dragging.point))return this.dragging.point=e,null!=(n=this.responder)?n.setLocationRangeFromPointRange(e):void 0}else if(l(t))return t.preventDefault()},drop:function(t){var e,n,i,r;return this.dragging?(t.preventDefault(),null!=(n=this.delegate)&&n.inputControllerWillMoveText(),null!=(i=this.responder)&&i.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender()):l(t)?(t.preventDefault(),e=f(t),null!=(r=this.responder)&&r.setLocationRangeFromPointRange(e),this.attachFiles(t.dataTransfer.files)):void 0},dragend:function(){var t;return this.dragging?(null!=(t=this.responder)&&t.setSelectedRange(this.dragging.range),this.dragging=null):void 0},compositionend:function(){return this.composing?(this.composing=!1,this.scheduleRender()):void 0}},u.prototype.keys={ArrowLeft:function(){var t,e;return(null!=(t=this.responder)?t.shouldManageMovingCursorInDirection("backward"):void 0)?(this.event.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},ArrowRight:function(){var t,e;return(null!=(t=this.responder)?t.shouldManageMovingCursorInDirection("forward"):void 0)?(this.event.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},Backspace:function(){var t,e,n;return(null!=(t=this.responder)?t.shouldManageDeletingInDirection("backward"):void 0)?(this.event.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.deleteInDirection("backward"),this.render()):void 0},Tab:function(){var t,e;return(null!=(t=this.responder)?t.canIncreaseNestingLevel():void 0)?(this.event.preventDefault(),null!=(e=this.responder)&&e.increaseNestingLevel(),this.render()):void 0},"Tab+Shift":function(){var t,e;return(null!=(t=this.responder)?t.canDecreaseNestingLevel():void 0)?(this.event.preventDefault(),null!=(e=this.responder)&&e.decreaseNestingLevel(),this.render()):void 0}},u.prototype.inputTypes={deleteByComposition:function(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut:function(){return this.deleteInDirection("backward")},deleteByDrag:function(){return this.event.preventDefault(),this.withTargetDOMRange((function(){var t;return this.deleteByDragRange=null!=(t=this.responder)?t.getSelectedRange():void 0}))},deleteCompositionText:function(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent:function(){return this.deleteInDirection("backward")},deleteContentBackward:function(){return this.deleteInDirection("backward")},deleteContentForward:function(){return this.deleteInDirection("forward")},deleteEntireSoftLine:function(){return this.deleteInDirection("forward")},deleteHardLineBackward:function(){return this.deleteInDirection("backward")},deleteHardLineForward:function(){return this.deleteInDirection("forward")},deleteSoftLineBackward:function(){return this.deleteInDirection("backward")},deleteSoftLineForward:function(){return this.deleteInDirection("forward")},deleteWordBackward:function(){return this.deleteInDirection("backward")},deleteWordForward:function(){return this.deleteInDirection("forward")},formatBackColor:function(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold:function(){return this.toggleAttributeIfSupported("bold")},formatFontColor:function(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName:function(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent:function(){var t;return(null!=(t=this.responder)?t.canIncreaseNestingLevel():void 0)?this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.increaseNestingLevel():void 0})):void 0},formatItalic:function(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter:function(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull:function(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft:function(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight:function(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent:function(){var t;return(null!=(t=this.responder)?t.canDecreaseNestingLevel():void 0)?this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.decreaseNestingLevel():void 0})):void 0},formatRemove:function(){return this.withTargetDOMRange((function(){var t,e,n,i;for(t in i=[],null!=(e=this.responder)?e.getCurrentAttributes():void 0)i.push(null!=(n=this.responder)?n.removeCurrentAttribute(t):void 0);return i}))},formatSetBlockTextDirection:function(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection:function(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough:function(){return this.toggleAttributeIfSupported("strike")},formatSubscript:function(){return this.toggleAttributeIfSupported("sub")},formatSuperscript:function(){return this.toggleAttributeIfSupported("sup")},formatUnderline:function(){return this.toggleAttributeIfSupported("underline")},historyRedo:function(){var t;return null!=(t=this.delegate)?t.inputControllerWillPerformRedo():void 0},historyUndo:function(){var t;return null!=(t=this.delegate)?t.inputControllerWillPerformUndo():void 0},insertCompositionText:function(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition:function(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop:function(){var t,e;return(t=this.deleteByDragRange)?(this.deleteByDragRange=null,null!=(e=this.delegate)&&e.inputControllerWillMoveText(),this.withTargetDOMRange((function(){var e;return null!=(e=this.responder)?e.moveTextFromRange(t):void 0}))):void 0},insertFromPaste:function(){var n,i,r,o,a,s,u,l,c,h,d,f;return n=this.event.dataTransfer,a={dataTransfer:n},(i=n.getData("URL"))?(this.event.preventDefault(),a.type="text/html",d=(o=n.getData("public.url-name"))?t.squishBreakableWhitespace(o).trim():i,a.html=this.createLinkHTML(i,d),null!=(s=this.delegate)&&s.inputControllerWillPaste(a),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.insertHTML(a.html):void 0})),this.afterRender=(f=this,function(){var t;return null!=(t=f.delegate)?t.inputControllerDidPaste(a):void 0})):e(n)?(a.type="text/plain",a.string=n.getData("text/plain"),null!=(u=this.delegate)&&u.inputControllerWillPaste(a),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.insertString(a.string):void 0})),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(a):void 0}}(this)):(r=n.getData("text/html"))?(this.event.preventDefault(),a.type="text/html",a.html=r,null!=(l=this.delegate)&&l.inputControllerWillPaste(a),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.insertHTML(a.html):void 0})),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(a):void 0}}(this)):(null!=(c=n.files)?c.length:void 0)?(a.type="File",a.file=n.files[0],null!=(h=this.delegate)&&h.inputControllerWillPaste(a),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.insertFile(a.file):void 0})),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(a):void 0}}(this)):void 0},insertFromYank:function(){return this.insertString(this.event.data)},insertLineBreak:function(){return this.insertString("\n")},insertLink:function(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList:function(){return this.toggleAttributeIfSupported("number")},insertParagraph:function(){var t;return null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.insertLineBreak():void 0}))},insertReplacementText:function(){return this.insertString(this.event.dataTransfer.getData("text/plain"),{updatePosition:!1})},insertText:function(){var t,e;return this.insertString(null!=(t=this.event.data)?t:null!=(e=this.event.dataTransfer)?e.getData("text/plain"):void 0)},insertTranspose:function(){return this.insertString(this.event.data)},insertUnorderedList:function(){return this.toggleAttributeIfSupported("bullet")}},u.prototype.insertString=function(t,e){var n;return null==t&&(t=""),null!=(n=this.delegate)&&n.inputControllerWillPerformTyping(),this.withTargetDOMRange((function(){var n;return null!=(n=this.responder)?n.insertString(t,e):void 0}))},u.prototype.toggleAttributeIfSupported=function(e){var n;return a.call(t.getAllAttributeNames(),e)>=0?(null!=(n=this.delegate)&&n.inputControllerWillPerformFormatting(e),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.toggleCurrentAttribute(e):void 0}))):void 0},u.prototype.activateAttributeIfSupported=function(e,n){var i;return a.call(t.getAllAttributeNames(),e)>=0?(null!=(i=this.delegate)&&i.inputControllerWillPerformFormatting(e),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.setCurrentAttribute(e,n):void 0}))):void 0},u.prototype.deleteInDirection=function(t,e){var n,i,r,o;return(null!=e?e:{recordUndoEntry:!0}).recordUndoEntry&&null!=(r=this.delegate)&&r.inputControllerWillPerformTyping(),o=this,i=function(){var e;return null!=(e=o.responder)?e.deleteInDirection(t):void 0},(n=this.getTargetDOMRange({minLength:2}))?this.withTargetDOMRange(n,i):i()},u.prototype.withTargetDOMRange=function(e,n){var i;return"function"==typeof e&&(n=e,e=this.getTargetDOMRange()),e?null!=(i=this.responder)?i.withTargetDOMRange(e,n.bind(this)):void 0:(t.selectionChangeObserver.reset(),n.call(this))},u.prototype.getTargetDOMRange=function(t){var e,n,i,r;return i=(null!=t?t:{minLength:0}).minLength,(r="function"==typeof(e=this.event).getTargetRanges?e.getTargetRanges():void 0)&&r.length&&(n=p(r[0]),0===i||n.toString().length>=i)?n:void 0},p=function(t){var e;return(e=document.createRange()).setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),e},u.prototype.withEvent=function(t,e){var n;this.event=t;try{n=e.call(this)}finally{this.event=null}return n},l=function(t){var e,n;return a.call(null!=(e=null!=(n=t.dataTransfer)?n.types:void 0)?e:[],"Files")>=0},h=function(t){var e;return(e=t.clipboardData)?a.call(e.types,"Files")>=0&&1===e.types.length&&e.files.length>=1:void 0},d=function(t){var e;return(e=t.clipboardData)?a.call(e.types,"text/plain")>=0&&1===e.types.length:void 0},c=function(t){var e;return e=[],t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),e.push(t.key),e},f=function(t){return{x:t.clientX,y:t.clientY}},u}(t.InputController)}.call(this),function(){var e,n,i,r,o,a,s,u,l=function(t,e){return function(){return t.apply(e,arguments)}},c={}.hasOwnProperty;n=t.defer,i=t.handleEvent,a=t.makeElement,u=t.tagName,s=t.config,o=s.lang,e=s.css,r=s.keyNames,t.AttachmentEditorController=function(s){function h(t,e,n,i){this.attachmentPiece=t,this.element=e,this.container=n,this.options=null!=i?i:{},this.didBlurCaption=l(this.didBlurCaption,this),this.didChangeCaption=l(this.didChangeCaption,this),this.didInputCaption=l(this.didInputCaption,this),this.didKeyDownCaption=l(this.didKeyDownCaption,this),this.didClickActionButton=l(this.didClickActionButton,this),this.didClickToolbar=l(this.didClickToolbar,this),this.attachment=this.attachmentPiece.attachment,"a"===u(this.element)&&(this.element=this.element.firstChild),this.install()}var d;return function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(h,s),d=function(t){return function(){var e;return(e=t.apply(this,arguments)).do(),null==this.undos&&(this.undos=[]),this.undos.push(e.undo)}},h.prototype.install=function(){return this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()?this.installCaptionEditor():void 0},h.prototype.uninstall=function(){var t,e;for(this.savePendingCaption();e=this.undos.pop();)e();return null!=(t=this.delegate)?t.didUninstallAttachmentEditor(this):void 0},h.prototype.savePendingCaption=function(){var t,e,n;return null!=this.pendingCaption?(t=this.pendingCaption,this.pendingCaption=null,t?null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestUpdatingAttributesForAttachment?e.attachmentEditorDidRequestUpdatingAttributesForAttachment({caption:t},this.attachment):void 0:null!=(n=this.delegate)&&"function"==typeof n.attachmentEditorDidRequestRemovingAttributeForAttachment?n.attachmentEditorDidRequestRemovingAttributeForAttachment("caption",this.attachment):void 0):void 0},h.prototype.makeElementMutable=d((function(){return{do:(t=this,function(){return t.element.dataset.trixMutable=!0}),undo:function(t){return function(){return delete t.element.dataset.trixMutable}}(this)};var t})),h.prototype.addToolbar=d((function(){var n,r;return n=a({tagName:"div",className:e.attachmentToolbar,data:{trixMutable:!0},childNodes:a({tagName:"div",className:"trix-button-row",childNodes:a({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:a({tagName:"button",className:"trix-button trix-button--remove",textContent:o.remove,attributes:{title:o.remove},data:{trixAction:"remove"}})})})}),this.attachment.isPreviewable()&&n.appendChild(a({tagName:"div",className:e.attachmentMetadataContainer,childNodes:a({tagName:"span",className:e.attachmentMetadata,childNodes:[a({tagName:"span",className:e.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),a({tagName:"span",className:e.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),i("click",{onElement:n,withCallback:this.didClickToolbar}),i("click",{onElement:n,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),{do:(r=this,function(){return r.element.appendChild(n)}),undo:function(){return t.removeNode(n)}}})),h.prototype.installCaptionEditor=d((function(){var r,s,u,l,c,h;return(l=a({tagName:"textarea",className:e.attachmentCaptionEditor,attributes:{placeholder:o.captionPlaceholder},data:{trixMutable:!0}})).value=this.attachmentPiece.getCaption(),(c=l.cloneNode()).classList.add("trix-autoresize-clone"),c.tabIndex=-1,r=function(){return c.value=l.value,l.style.height=c.scrollHeight+"px"},i("input",{onElement:l,withCallback:r}),i("input",{onElement:l,withCallback:this.didInputCaption}),i("keydown",{onElement:l,withCallback:this.didKeyDownCaption}),i("change",{onElement:l,withCallback:this.didChangeCaption}),i("blur",{onElement:l,withCallback:this.didBlurCaption}),u=this.element.querySelector("figcaption"),s=u.cloneNode(),{do:(h=this,function(){return u.style.display="none",s.appendChild(l),s.appendChild(c),s.classList.add(e.attachmentCaption+"--editing"),u.parentElement.insertBefore(s,u),r(),h.options.editCaption?n((function(){return l.focus()})):void 0}),undo:function(){return t.removeNode(s),u.style.display=null}}})),h.prototype.didClickToolbar=function(t){return t.preventDefault(),t.stopPropagation()},h.prototype.didClickActionButton=function(t){var e;if("remove"===t.target.getAttribute("data-trix-action"))return null!=(e=this.delegate)?e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment):void 0},h.prototype.didKeyDownCaption=function(t){var e;return"return"===r[t.keyCode]?(t.preventDefault(),this.savePendingCaption(),null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestDeselectingAttachment?e.attachmentEditorDidRequestDeselectingAttachment(this.attachment):void 0):void 0},h.prototype.didInputCaption=function(t){return this.pendingCaption=t.target.value.replace(/\s/g," ").trim()},h.prototype.didChangeCaption=function(){return this.savePendingCaption()},h.prototype.didBlurCaption=function(){return this.savePendingCaption()},h}(t.BasicObject)}.call(this),function(){var e,n,i,r={}.hasOwnProperty;i=t.makeElement,e=t.config.css,t.AttachmentView=function(o){function a(){a.__super__.constructor.apply(this,arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}var s;return function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(a,o),a.attachmentSelector="[data-trix-attachment]",a.prototype.createContentNodes=function(){return[]},a.prototype.createNodes=function(){var t,n,r,o,a,u,l;if(t=o=i({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),(n=this.getHref())&&(o=i({tagName:"a",editable:!1,attributes:{href:n,tabindex:-1}}),t.appendChild(o)),this.attachment.hasContent())o.innerHTML=this.attachment.getContent();else for(r=0,a=(l=this.createContentNodes()).length;a>r;r++)u=l[r],o.appendChild(u);return o.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=i({tagName:"progress",attributes:{class:e.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),t.appendChild(this.progressElement)),[s("left"),t,s("right")]},a.prototype.createCaptionElement=function(){var t,n,r,o,a,s,u;return r=i({tagName:"figcaption",className:e.attachmentCaption}),(t=this.attachmentPiece.getCaption())?(r.classList.add(e.attachmentCaption+"--edited"),r.textContent=t):((n=this.getCaptionConfig()).name&&(o=this.attachment.getFilename()),n.size&&(s=this.attachment.getFormattedFilesize()),o&&(a=i({tagName:"span",className:e.attachmentName,textContent:o}),r.appendChild(a)),s&&(o&&r.appendChild(document.createTextNode(" ")),u=i({tagName:"span",className:e.attachmentSize,textContent:s}),r.appendChild(u))),r},a.prototype.getClassName=function(){var t,n;return n=[e.attachment,e.attachment+"--"+this.attachment.getType()],(t=this.attachment.getExtension())&&n.push(e.attachment+"--"+t),n.join(" ")},a.prototype.getData=function(){var t,e;return e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},(t=this.attachmentPiece.attributes).isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(e.trixSerialize=!1),e},a.prototype.getHref=function(){return n(this.attachment.getContent(),"a")?void 0:this.attachment.getHref()},a.prototype.getCaptionConfig=function(){var e,n,i;return i=this.attachment.getType(),e=t.copyObject(null!=(n=t.config.attachments[i])?n.caption:void 0),"file"===i&&(e.name=!0),e},a.prototype.findProgressElement=function(){var t;return null!=(t=this.findElement())?t.querySelector("progress"):void 0},s=function(e){return i({tagName:"span",textContent:t.ZERO_WIDTH_SPACE,data:{trixCursorTarget:e,trixSerialize:!1}})},a.prototype.attachmentDidChangeUploadProgress=function(){var t,e;return e=this.attachment.getUploadProgress(),null!=(t=this.findProgressElement())?t.value=e:void 0},a}(t.ObjectView),n=function(t,e){var n;return(n=i("div")).innerHTML=null!=t?t:"",n.querySelector(e)}}.call(this),function(){var e,n={}.hasOwnProperty;e=t.makeElement,t.PreviewableAttachmentView=function(i){function r(){r.__super__.constructor.apply(this,arguments),this.attachment.previewDelegate=this}return function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,i),r.prototype.createContentNodes=function(){return this.image=e({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]},r.prototype.createCaptionElement=function(){var e;return(e=r.__super__.createCaptionElement.apply(this,arguments)).textContent||e.setAttribute("data-trix-placeholder",t.config.lang.captionPlaceholder),e},r.prototype.refresh=function(t){var e;return null==t&&(t=null!=(e=this.findElement())?e.querySelector("img"):void 0),t?this.updateAttributesForImage(t):void 0},r.prototype.updateAttributesForImage=function(t){var e,n,i,r,o,a;return o=this.attachment.getURL(),n=this.attachment.getPreviewURL(),t.src=n||o,n===o?t.removeAttribute("data-trix-serialized-attributes"):(i=JSON.stringify({src:o}),t.setAttribute("data-trix-serialized-attributes",i)),a=this.attachment.getWidth(),e=this.attachment.getHeight(),null!=a&&(t.width=a),null!=e&&(t.height=e),r=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/"),t.dataset.trixStoreKey=r},r.prototype.attachmentDidChangeAttributes=function(){return this.refresh(this.image),this.refresh()},r}(t.AttachmentView)}.call(this),function(){var e,n,i,r={}.hasOwnProperty;i=t.makeElement,e=t.findInnerElement,n=t.getTextConfig,t.PieceView=function(o){function a(){var t;a.__super__.constructor.apply(this,arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),t=this.options,this.textConfig=t.textConfig,this.context=t.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}var s;return function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(a,o),a.prototype.createNodes=function(){var t,n,i,r,o,a;if(a=this.attachment?this.createAttachmentNodes():this.createStringNodes(),t=this.createElement()){for(i=e(t),n=0,r=a.length;r>n;n++)o=a[n],i.appendChild(o);a=[t]}return a},a.prototype.createAttachmentNodes=function(){var e;return e=this.attachment.isPreviewable()?t.PreviewableAttachmentView:t.AttachmentView,this.createChildView(e,this.piece.attachment,{piece:this.piece}).getNodes()},a.prototype.createStringNodes=function(){var t,e,n,r,o,a,s,u,l;if(null!=(s=this.textConfig)?s.plaintext:void 0)return[document.createTextNode(this.string)];for(a=[],n=e=0,r=(u=this.string.split("\n")).length;r>e;n=++e)l=u[n],n>0&&(t=i("br"),a.push(t)),l.length&&(o=document.createTextNode(this.preserveSpaces(l)),a.push(o));return a},a.prototype.createElement=function(){var t,e,r,o,a,s,u,l,c;for(o in l={},s=this.attributes)if(c=s[o],(t=n(o))&&(t.tagName&&(a=i(t.tagName),r?(r.appendChild(a),r=a):e=r=a),t.styleProperty&&(l[t.styleProperty]=c),t.style))for(o in u=t.style)c=u[o],l[o]=c;if(Object.keys(l).length)for(o in null==e&&(e=i("span")),l)c=l[o],e.style[o]=c;return e},a.prototype.createContainerElement=function(){var t,e,r,o,a;for(r in o=this.attributes)if(a=o[r],(e=n(r))&&e.groupTagName)return(t={})[r]=a,i(e.groupTagName,t)},s=t.NON_BREAKING_SPACE,a.prototype.preserveSpaces=function(t){return this.context.isLast&&(t=t.replace(/\ $/,s)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 "+s+" $2").replace(/\ {2}/g,s+" ").replace(/\ {2}/g," "+s),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,s)),t},a}(t.ObjectView)}.call(this),function(){var e={}.hasOwnProperty;t.TextView=function(n){function i(){i.__super__.constructor.apply(this,arguments),this.text=this.object,this.textConfig=this.options.textConfig}var r;return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),i.prototype.createNodes=function(){var e,n,i,o,a,s,u,l,c,h;for(s=[],o=(l=t.ObjectGroup.groupObjects(this.getPieces())).length-1,i=n=0,a=l.length;a>n;i=++n)u=l[i],e={},0===i&&(e.isFirst=!0),i===o&&(e.isLast=!0),r(c)&&(e.followsWhitespace=!0),h=this.findOrCreateCachedChildView(t.PieceView,u,{textConfig:this.textConfig,context:e}),s.push.apply(s,h.getNodes()),c=u;return s},i.prototype.getPieces=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.text.getPieces()).length;e>t;t++)(n=i[t]).hasAttribute("blockBreak")||r.push(n);return r},r=function(t){return/\s$/.test(null!=t?t.toString():void 0)},i}(t.ObjectView)}.call(this),function(){var e,n,i,r={}.hasOwnProperty;i=t.makeElement,n=t.getBlockConfig,e=t.config.css,t.BlockView=function(o){function a(){a.__super__.constructor.apply(this,arguments),this.block=this.object,this.attributes=this.block.getAttributes()}return function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(a,o),a.prototype.createNodes=function(){var e,r,o,a,s,u,l,c,h,d;if(u=[document.createComment("block")],this.block.isEmpty()?u.push(i("br")):(h=null!=(l=n(this.block.getLastAttribute()))?l.text:void 0,d=this.findOrCreateCachedChildView(t.TextView,this.block.text,{textConfig:h}),u.push.apply(u,d.getNodes()),this.shouldAddExtraNewlineElement()&&u.push(i("br"))),this.attributes.length)return u;for(c=t.config.blockAttributes.default.tagName,this.block.isRTL()&&(e={dir:"rtl"}),r=i({tagName:c,attributes:e}),o=0,a=u.length;a>o;o++)s=u[o],r.appendChild(s);return[r]},a.prototype.createContainerElement=function(t){var r,o,a,s,u;return r=this.attributes[t],u=n(r).tagName,0===t&&this.block.isRTL()&&(o={dir:"rtl"}),"attachmentGallery"===r&&(s=this.block.getBlockBreakPosition(),a=e.attachmentGallery+" "+e.attachmentGallery+"--"+s),i({tagName:u,className:a,attributes:o})},a.prototype.shouldAddExtraNewlineElement=function(){return/\n\n$/.test(this.block.toString())},a}(t.ObjectView)}.call(this),function(){var e,n,i={}.hasOwnProperty;e=t.defer,n=t.makeElement,t.DocumentView=function(r){function o(){o.__super__.constructor.apply(this,arguments),this.element=this.options.element,this.elementStore=new t.ElementStore,this.setDocument(this.object)}var a,s,u;return function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(o,r),o.render=function(t){var e,i;return(i=new this(t,{element:e=n("div")})).render(),i.sync(),e},o.prototype.setDocument=function(t){return t.isEqualTo(this.document)?void 0:this.document=this.object=t},o.prototype.render=function(){var e,i,r,o,a,s,u;if(this.childViews=[],this.shadowElement=n("div"),!this.document.isEmpty()){for(s=[],e=0,i=(a=t.ObjectGroup.groupObjects(this.document.getBlocks(),{asTree:!0})).length;i>e;e++)o=a[e],u=this.findOrCreateCachedChildView(t.BlockView,o),s.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=u.getNodes()).length;e>t;t++)r=n[t],i.push(this.shadowElement.appendChild(r));return i}.call(this));return s}},o.prototype.isSynced=function(){return a(this.shadowElement,this.element)},o.prototype.sync=function(){var t;for(t=this.createDocumentFragmentForSync();this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()},o.prototype.didSync=function(){return this.elementStore.reset(s(this.element)),e((t=this,function(){return t.garbageCollectCachedViews()}));var t},o.prototype.createDocumentFragmentForSync=function(){var t,e,n,i,r,o,a,u,l,c;for(e=document.createDocumentFragment(),n=0,r=(u=this.shadowElement.childNodes).length;r>n;n++)a=u[n],e.appendChild(a.cloneNode(!0));for(i=0,o=(l=s(e)).length;o>i;i++)t=l[i],(c=this.elementStore.remove(t))&&t.parentNode.replaceChild(c,t);return e},s=function(t){return t.querySelectorAll("[data-trix-store-key]")},a=function(t,e){return u(t.innerHTML)===u(e.innerHTML)},u=function(t){return t.replace(/&nbsp;/g," ")},o}(t.ObjectView)}.call(this),function(){var e,n,i,r,o,a=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty;i=t.findClosestElementFromNode,r=t.handleEvent,o=t.innerElementIsActive,n=t.defer,e=t.AttachmentView.attachmentSelector,t.CompositionController=function(u){function l(n,i){this.element=n,this.composition=i,this.didClickAttachment=a(this.didClickAttachment,this),this.didBlur=a(this.didBlur,this),this.didFocus=a(this.didFocus,this),this.documentView=new t.DocumentView(this.composition.document,{element:this.element}),r("focus",{onElement:this.element,withCallback:this.didFocus}),r("blur",{onElement:this.element,withCallback:this.didBlur}),r("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),r("mousedown",{onElement:this.element,matchingSelector:e,withCallback:this.didClickAttachment}),r("click",{onElement:this.element,matchingSelector:"a"+e,preventDefault:!0})}return function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(l,u),l.prototype.didFocus=function(){var t,e,n,i;return i=this,t=function(){var t;return i.focused?void 0:(i.focused=!0,null!=(t=i.delegate)&&"function"==typeof t.compositionControllerDidFocus?t.compositionControllerDidFocus():void 0)},null!=(e=null!=(n=this.blurPromise)?n.then(t):void 0)?e:t()},l.prototype.didBlur=function(){return this.blurPromise=new Promise((t=this,function(e){return n((function(){var n;return o(t.element)||(t.focused=null,null!=(n=t.delegate)&&"function"==typeof n.compositionControllerDidBlur&&n.compositionControllerDidBlur()),t.blurPromise=null,e()}))}));var t},l.prototype.didClickAttachment=function(t,e){var n,r,o;return n=this.findAttachmentForElement(e),r=null!=i(t.target,{matchingSelector:"figcaption"}),null!=(o=this.delegate)&&"function"==typeof o.compositionControllerDidSelectAttachment?o.compositionControllerDidSelectAttachment(n,{editCaption:r}):void 0},l.prototype.getSerializableElement=function(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element},l.prototype.render=function(){var t,e,n;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&(null!=(t=this.delegate)&&"function"==typeof t.compositionControllerWillSyncDocumentView&&t.compositionControllerWillSyncDocumentView(),this.documentView.sync(),null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidSyncDocumentView&&e.compositionControllerDidSyncDocumentView()),null!=(n=this.delegate)&&"function"==typeof n.compositionControllerDidRender?n.compositionControllerDidRender():void 0},l.prototype.rerenderViewForObject=function(t){return this.invalidateViewForObject(t),this.render()},l.prototype.invalidateViewForObject=function(t){return this.documentView.invalidateViewForObject(t)},l.prototype.isViewCachingEnabled=function(){return this.documentView.isViewCachingEnabled()},l.prototype.enableViewCaching=function(){return this.documentView.enableViewCaching()},l.prototype.disableViewCaching=function(){return this.documentView.disableViewCaching()},l.prototype.refreshViewCache=function(){return this.documentView.garbageCollectCachedViews()},l.prototype.isEditingAttachment=function(){return null!=this.attachmentEditor},l.prototype.installAttachmentEditorForAttachment=function(e,n){var i,r,o;if((null!=(o=this.attachmentEditor)?o.attachment:void 0)!==e&&(r=this.documentView.findElementForObject(e)))return this.uninstallAttachmentEditor(),i=this.composition.document.getAttachmentPieceForAttachment(e),this.attachmentEditor=new t.AttachmentEditorController(i,r,this.element,n),this.attachmentEditor.delegate=this},l.prototype.uninstallAttachmentEditor=function(){var t;return null!=(t=this.attachmentEditor)?t.uninstall():void 0},l.prototype.didUninstallAttachmentEditor=function(){return this.attachmentEditor=null,this.render()},l.prototype.attachmentEditorDidRequestUpdatingAttributesForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.updateAttributesForAttachment(t,e)},l.prototype.attachmentEditorDidRequestRemovingAttributeForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.removeAttributeForAttachment(t,e)},l.prototype.attachmentEditorDidRequestRemovalOfAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestRemovalOfAttachment?e.compositionControllerDidRequestRemovalOfAttachment(t):void 0},l.prototype.attachmentEditorDidRequestDeselectingAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestDeselectingAttachment?e.compositionControllerDidRequestDeselectingAttachment(t):void 0},l.prototype.canSyncDocumentView=function(){return!this.isEditingAttachment()},l.prototype.findAttachmentForElement=function(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))},l}(t.BasicObject)}.call(this),function(){var e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty;n=t.handleEvent,i=t.triggerEvent,e=t.findClosestElementFromNode,t.ToolbarController=function(t){function a(t){this.element=t,this.didKeyDownDialogInput=r(this.didKeyDownDialogInput,this),this.didClickDialogButton=r(this.didClickDialogButton,this),this.didClickAttributeButton=r(this.didClickAttributeButton,this),this.didClickActionButton=r(this.didClickActionButton,this),this.attributes={},this.actions={},this.resetDialogInputs(),n("mousedown",{onElement:this.element,matchingSelector:s,withCallback:this.didClickActionButton}),n("mousedown",{onElement:this.element,matchingSelector:u,withCallback:this.didClickAttributeButton}),n("click",{onElement:this.element,matchingSelector:m,preventDefault:!0}),n("click",{onElement:this.element,matchingSelector:l,withCallback:this.didClickDialogButton}),n("keydown",{onElement:this.element,matchingSelector:c,withCallback:this.didKeyDownDialogInput})}var s,u,l,c,h,d,f,p,g,m;return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(a,t),m=(u="[data-trix-attribute]")+", "+(s="[data-trix-action]"),(h="[data-trix-dialog]")+"[data-trix-active]",l=h+" [data-trix-method]",c=h+" [data-trix-input]",a.prototype.didClickActionButton=function(t,e){var n,i,r;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=d(e),this.getDialog(n)?this.toggleDialog(n):null!=(r=this.delegate)?r.toolbarDidInvokeAction(n):void 0},a.prototype.didClickAttributeButton=function(t,e){var n,i,r;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=f(e),this.getDialog(n)?this.toggleDialog(n):null!=(r=this.delegate)&&r.toolbarDidToggleAttribute(n),this.refreshAttributeButtons()},a.prototype.didClickDialogButton=function(t,n){var i;return i=e(n,{matchingSelector:h}),this[n.getAttribute("data-trix-method")].call(this,i)},a.prototype.didKeyDownDialogInput=function(t,e){var n,i;return 13===t.keyCode&&(t.preventDefault(),n=e.getAttribute("name"),i=this.getDialog(n),this.setAttribute(i)),27===t.keyCode?(t.preventDefault(),this.hideDialog()):void 0},a.prototype.updateActions=function(t){return this.actions=t,this.refreshActionButtons()},a.prototype.refreshActionButtons=function(){return this.eachActionButton((t=this,function(e,n){return e.disabled=!1===t.actions[n]}));var t},a.prototype.eachActionButton=function(t){var e,n,i,r,o;for(o=[],n=0,i=(r=this.element.querySelectorAll(s)).length;i>n;n++)e=r[n],o.push(t(e,d(e)));return o},a.prototype.updateAttributes=function(t){return this.attributes=t,this.refreshAttributeButtons()},a.prototype.refreshAttributeButtons=function(){return this.eachAttributeButton((t=this,function(e,n){return e.disabled=!1===t.attributes[n],t.attributes[n]||t.dialogIsVisible(n)?(e.setAttribute("data-trix-active",""),e.classList.add("trix-active")):(e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"))}));var t},a.prototype.eachAttributeButton=function(t){var e,n,i,r,o;for(o=[],n=0,i=(r=this.element.querySelectorAll(u)).length;i>n;n++)e=r[n],o.push(t(e,f(e)));return o},a.prototype.applyKeyboardCommand=function(t){var e,n,r,o,a,s;for(o=JSON.stringify(t.sort()),r=0,a=(s=this.element.querySelectorAll("[data-trix-key]")).length;a>r;r++)if(n=(e=s[r]).getAttribute("data-trix-key").split("+"),JSON.stringify(n.sort())===o)return i("mousedown",{onElement:e}),!0;return!1},a.prototype.dialogIsVisible=function(t){var e;return(e=this.getDialog(t))?e.hasAttribute("data-trix-active"):void 0},a.prototype.toggleDialog=function(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)},a.prototype.showDialog=function(t){var e,n,i,r,o,a,s,u,l;for(this.hideDialog(),null!=(a=this.delegate)&&a.toolbarWillShowDialog(),(n=this.getDialog(t)).setAttribute("data-trix-active",""),n.classList.add("trix-active"),i=0,o=(s=n.querySelectorAll("input[disabled]")).length;o>i;i++)s[i].removeAttribute("disabled");return(e=f(n))&&(r=g(n,t))&&(r.value=null!=(u=this.attributes[e])?u:"",r.select()),null!=(l=this.delegate)?l.toolbarDidShowDialog(t):void 0},a.prototype.setAttribute=function(t){var e,n,i;return e=f(t),(n=g(t,e)).willValidate&&!n.checkValidity()?(n.setAttribute("data-trix-validate",""),n.classList.add("trix-validate"),n.focus()):(null!=(i=this.delegate)&&i.toolbarDidUpdateAttribute(e,n.value),this.hideDialog())},a.prototype.removeAttribute=function(t){var e,n;return e=f(t),null!=(n=this.delegate)&&n.toolbarDidRemoveAttribute(e),this.hideDialog()},a.prototype.hideDialog=function(){var t,e;return(t=this.element.querySelector("[data-trix-dialog][data-trix-active]"))?(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),null!=(e=this.delegate)?e.toolbarDidHideDialog(p(t)):void 0):void 0},a.prototype.resetDialogInputs=function(){var t,e,n,i,r;for(r=[],t=0,n=(i=this.element.querySelectorAll(c)).length;n>t;t++)(e=i[t]).setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),r.push(e.classList.remove("trix-validate"));return r},a.prototype.getDialog=function(t){return this.element.querySelector("[data-trix-dialog="+t+"]")},g=function(t,e){return null==e&&(e=f(t)),t.querySelector("[data-trix-input][name='"+e+"']")},d=function(t){return t.getAttribute("data-trix-action")},f=function(t){var e;return null!=(e=t.getAttribute("data-trix-attribute"))?e:t.getAttribute("data-trix-dialog-attribute")},p=function(t){return t.getAttribute("data-trix-dialog")},a}(t.BasicObject)}.call(this),function(){var e={}.hasOwnProperty;t.ImagePreloadOperation=function(t){function n(t){this.url=t}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.perform=function(t){var e,n;return(e=new Image).onload=(n=this,function(){return e.width=n.width=e.naturalWidth,e.height=n.height=e.naturalHeight,t(!0,e)}),e.onerror=function(){return t(!1)},e.src=this.url},n}(t.Operation)}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;t.Attachment=function(i){function r(n){null==n&&(n={}),this.releaseFile=e(this.releaseFile,this),r.__super__.constructor.apply(this,arguments),this.attributes=t.Hash.box(n),this.didChangeAttributes()}return function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,i),r.previewablePattern=/^image(\/(gif|png|jpe?g)|$)/,r.attachmentForFile=function(t){var e;return(e=new this(this.attributesForFile(t))).setFile(t),e},r.attributesForFile=function(e){return new t.Hash({filename:e.name,filesize:e.size,contentType:e.type})},r.fromJSON=function(t){return new this(t)},r.prototype.getAttribute=function(t){return this.attributes.get(t)},r.prototype.hasAttribute=function(t){return this.attributes.has(t)},r.prototype.getAttributes=function(){return this.attributes.toObject()},r.prototype.setAttributes=function(t){var e,n,i;return null==t&&(t={}),e=this.attributes.merge(t),this.attributes.isEqualTo(e)?void 0:(this.attributes=e,this.didChangeAttributes(),null!=(n=this.previewDelegate)&&"function"==typeof n.attachmentDidChangeAttributes&&n.attachmentDidChangeAttributes(this),null!=(i=this.delegate)&&"function"==typeof i.attachmentDidChangeAttributes?i.attachmentDidChangeAttributes(this):void 0)},r.prototype.didChangeAttributes=function(){return this.isPreviewable()?this.preloadURL():void 0},r.prototype.isPending=function(){return null!=this.file&&!(this.getURL()||this.getHref())},r.prototype.isPreviewable=function(){return this.attributes.has("previewable")?this.attributes.get("previewable"):this.constructor.previewablePattern.test(this.getContentType())},r.prototype.getType=function(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"},r.prototype.getURL=function(){return this.attributes.get("url")},r.prototype.getHref=function(){return this.attributes.get("href")},r.prototype.getFilename=function(){var t;return null!=(t=this.attributes.get("filename"))?t:""},r.prototype.getFilesize=function(){return this.attributes.get("filesize")},r.prototype.getFormattedFilesize=function(){var e;return"number"==typeof(e=this.attributes.get("filesize"))?t.config.fileSize.formatter(e):""},r.prototype.getExtension=function(){var t;return null!=(t=this.getFilename().match(/\.(\w+)$/))?t[1].toLowerCase():void 0},r.prototype.getContentType=function(){return this.attributes.get("contentType")},r.prototype.hasContent=function(){return this.attributes.has("content")},r.prototype.getContent=function(){return this.attributes.get("content")},r.prototype.getWidth=function(){return this.attributes.get("width")},r.prototype.getHeight=function(){return this.attributes.get("height")},r.prototype.getFile=function(){return this.file},r.prototype.setFile=function(t){return this.file=t,this.isPreviewable()?this.preloadFile():void 0},r.prototype.releaseFile=function(){return this.releasePreloadedFile(),this.file=null},r.prototype.getUploadProgress=function(){var t;return null!=(t=this.uploadProgress)?t:0},r.prototype.setUploadProgress=function(t){var e;return this.uploadProgress!==t?(this.uploadProgress=t,null!=(e=this.uploadProgressDelegate)&&"function"==typeof e.attachmentDidChangeUploadProgress?e.attachmentDidChangeUploadProgress(this):void 0):void 0},r.prototype.toJSON=function(){return this.getAttributes()},r.prototype.getCacheKey=function(){return[r.__super__.getCacheKey.apply(this,arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")},r.prototype.getPreviewURL=function(){return this.previewURL||this.preloadingURL},r.prototype.setPreviewURL=function(t){var e,n;return t!==this.getPreviewURL()?(this.previewURL=t,null!=(e=this.previewDelegate)&&"function"==typeof e.attachmentDidChangeAttributes&&e.attachmentDidChangeAttributes(this),null!=(n=this.delegate)&&"function"==typeof n.attachmentDidChangePreviewURL?n.attachmentDidChangePreviewURL(this):void 0):void 0},r.prototype.preloadURL=function(){return this.preload(this.getURL(),this.releaseFile)},r.prototype.preloadFile=function(){return this.file?(this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)):void 0},r.prototype.releasePreloadedFile=function(){return this.fileObjectURL?(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null):void 0},r.prototype.preload=function(e,n){var i,r;return e&&e!==this.getPreviewURL()?(this.preloadingURL=e,new t.ImagePreloadOperation(e).then((r=this,function(t){var i,o;return o=t.width,i=t.height,r.getWidth()&&r.getHeight()||r.setAttributes({width:o,height:i}),r.preloadingURL=null,r.setPreviewURL(e),"function"==typeof n?n():void 0})).catch((i=this,function(){return i.preloadingURL=null,"function"==typeof n?n():void 0}))):void 0},r}(t.Object)}.call(this),function(){var e={}.hasOwnProperty;t.Piece=function(n){function i(e,n){null==n&&(n={}),i.__super__.constructor.apply(this,arguments),this.attributes=t.Hash.box(n)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),i.types={},i.registerType=function(t,e){return e.type=t,this.types[t]=e},i.fromJSON=function(t){var e;return(e=this.types[t.type])?e.fromJSON(t):void 0},i.prototype.copyWithAttributes=function(t){return new this.constructor(this.getValue(),t)},i.prototype.copyWithAdditionalAttributes=function(t){return this.copyWithAttributes(this.attributes.merge(t))},i.prototype.copyWithoutAttribute=function(t){return this.copyWithAttributes(this.attributes.remove(t))},i.prototype.copy=function(){return this.copyWithAttributes(this.attributes)},i.prototype.getAttribute=function(t){return this.attributes.get(t)},i.prototype.getAttributesHash=function(){return this.attributes},i.prototype.getAttributes=function(){return this.attributes.toObject()},i.prototype.getCommonAttributes=function(){var t,e,n;return(n=pieceList.getPieceAtIndex(0))?(t=n.attributes,e=t.getKeys(),pieceList.eachPiece((function(n){return e=t.getKeysCommonToHash(n.attributes),t=t.slice(e)})),t.toObject()):{}},i.prototype.hasAttribute=function(t){return this.attributes.has(t)},i.prototype.hasSameStringValueAsPiece=function(t){return null!=t&&this.toString()===t.toString()},i.prototype.hasSameAttributesAsPiece=function(t){return null!=t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))},i.prototype.isBlockBreak=function(){return!1},i.prototype.isEqualTo=function(t){return i.__super__.isEqualTo.apply(this,arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)},i.prototype.isEmpty=function(){return 0===this.length},i.prototype.isSerializable=function(){return!0},i.prototype.toJSON=function(){return{type:this.constructor.type,attributes:this.getAttributes()}},i.prototype.contentsForInspection=function(){return{type:this.constructor.type,attributes:this.attributes.inspect()}},i.prototype.canBeGrouped=function(){return this.hasAttribute("href")},i.prototype.canBeGroupedWith=function(t){return this.getAttribute("href")===t.getAttribute("href")},i.prototype.getLength=function(){return this.length},i.prototype.canBeConsolidatedWith=function(){return!1},i}(t.Object)}.call(this),function(){var e={}.hasOwnProperty;t.Piece.registerType("attachment",t.AttachmentPiece=function(n){function i(t){this.attachment=t,i.__super__.constructor.apply(this,arguments),this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),i.fromJSON=function(e){return new this(t.Attachment.fromJSON(e.attachment),e.attributes)},i.permittedAttributes=["caption","presentation"],i.prototype.ensureAttachmentExclusivelyHasAttribute=function(t){return this.hasAttribute(t)?(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice(t)),this.attributes=this.attributes.remove(t)):void 0},i.prototype.removeProhibitedAttributes=function(){var t;return(t=this.attributes.slice(this.constructor.permittedAttributes)).isEqualTo(this.attributes)?void 0:this.attributes=t},i.prototype.getValue=function(){return this.attachment},i.prototype.isSerializable=function(){return!this.attachment.isPending()},i.prototype.getCaption=function(){var t;return null!=(t=this.attributes.get("caption"))?t:""},i.prototype.isEqualTo=function(t){var e;return i.__super__.isEqualTo.apply(this,arguments)&&this.attachment.id===(null!=t&&null!=(e=t.attachment)?e.id:void 0)},i.prototype.toString=function(){return t.OBJECT_REPLACEMENT_CHARACTER},i.prototype.toJSON=function(){var t;return(t=i.__super__.toJSON.apply(this,arguments)).attachment=this.attachment,t},i.prototype.getCacheKey=function(){return[i.__super__.getCacheKey.apply(this,arguments),this.attachment.getCacheKey()].join("/")},i.prototype.toConsole=function(){return JSON.stringify(this.toString())},i}(t.Piece))}.call(this),function(){var e,n={}.hasOwnProperty;e=t.normalizeNewlines,t.Piece.registerType("string",t.StringPiece=function(t){function i(t){i.__super__.constructor.apply(this,arguments),this.string=e(t),this.length=this.string.length}return function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.fromJSON=function(t){return new this(t.string,t.attributes)},i.prototype.getValue=function(){return this.string},i.prototype.toString=function(){return this.string.toString()},i.prototype.isBlockBreak=function(){return"\n"===this.toString()&&!0===this.getAttribute("blockBreak")},i.prototype.toJSON=function(){var t;return(t=i.__super__.toJSON.apply(this,arguments)).string=this.string,t},i.prototype.canBeConsolidatedWith=function(t){return null!=t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)},i.prototype.consolidateWith=function(t){return new this.constructor(this.toString()+t.toString(),this.attributes)},i.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.length?(e=this,n=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),n=new this.constructor(this.string.slice(t),this.attributes)),[e,n]},i.prototype.toConsole=function(){var t;return(t=this.string).length>15&&(t=t.slice(0,14)+""),JSON.stringify(t.toString())},i}(t.Piece))}.call(this),function(){var e,n={}.hasOwnProperty,i=[].slice;e=t.spliceArray,t.SplittableList=function(t){function r(t){null==t&&(t=[]),r.__super__.constructor.apply(this,arguments),this.objects=t.slice(0),this.length=this.objects.length}var o,a,s;return function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,t),r.box=function(t){return t instanceof this?t:new this(t)},r.prototype.indexOf=function(t){return this.objects.indexOf(t)},r.prototype.splice=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],new this.constructor(e.apply(null,[this.objects].concat(i.call(t))))},r.prototype.eachObject=function(t){var e,n,i,r,o,a;for(a=[],n=e=0,i=(o=this.objects).length;i>e;n=++e)r=o[n],a.push(t(r,n));return a},r.prototype.insertObjectAtIndex=function(t,e){return this.splice(e,0,t)},r.prototype.insertSplittableListAtIndex=function(t,e){return this.splice.apply(this,[e,0].concat(i.call(t.objects)))},r.prototype.insertSplittableListAtPosition=function(t,e){var n,i,r;return i=(r=this.splitObjectAtPosition(e))[0],n=r[1],new this.constructor(i).insertSplittableListAtIndex(t,n)},r.prototype.editObjectAtIndex=function(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)},r.prototype.replaceObjectAtIndex=function(t,e){return this.splice(e,1,t)},r.prototype.removeObjectAtIndex=function(t){return this.splice(t,1)},r.prototype.getObjectAtIndex=function(t){return this.objects[t]},r.prototype.getSplittableListInRange=function(t){var e,n,i,r;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],r=i[2],new this.constructor(n.slice(e,r+1))},r.prototype.selectSplittableList=function(t){var e,n;return n=function(){var n,i,r,o;for(o=[],n=0,i=(r=this.objects).length;i>n;n++)e=r[n],t(e)&&o.push(e);return o}.call(this),new this.constructor(n)},r.prototype.removeObjectsInRange=function(t){var e,n,i,r;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],r=i[2],new this.constructor(n).splice(e,r-e+1)},r.prototype.transformObjectsInRange=function(t,e){var n,i,r,o,a,s,u;return a=this.splitObjectsAtRange(t),o=a[0],i=a[1],s=a[2],u=function(){var t,a,u;for(u=[],n=t=0,a=o.length;a>t;n=++t)r=o[n],u.push(n>=i&&s>=n?e(r):r);return u}(),new this.constructor(u)},r.prototype.splitObjectsAtRange=function(t){var e,n,i,r,a;return n=(r=this.splitObjectAtPosition(s(t)))[0],e=r[1],i=r[2],[n=(a=new this.constructor(n).splitObjectAtPosition(o(t)+i))[0],e,a[1]-1]},r.prototype.getObjectAtPosition=function(t){var e,n;return e=(n=this.findIndexAndOffsetAtPosition(t)).index,n.offset,this.objects[e]},r.prototype.splitObjectAtPosition=function(t){var e,n,i,r,o,a,s,u,l;return e=(o=this.findIndexAndOffsetAtPosition(t)).index,r=o.offset,i=this.objects.slice(0),null!=e?0===r?(u=e,l=0):(n=(a=this.getObjectAtIndex(e).splitAtOffset(r))[0],s=a[1],i.splice(e,1,n,s),u=e+1,l=n.getLength()-r):(u=i.length,l=0),[i,u,l]},r.prototype.consolidate=function(){var t,e,n,i,r,o;for(i=[],r=this.objects[0],t=0,e=(o=this.objects.slice(1)).length;e>t;t++)n=o[t],("function"==typeof r.canBeConsolidatedWith?r.canBeConsolidatedWith(n):void 0)?r=r.consolidateWith(n):(i.push(r),r=n);return null!=r&&i.push(r),new this.constructor(i)},r.prototype.consolidateFromIndexToIndex=function(t,e){var n,r;return r=this.objects.slice(0).slice(t,e+1),n=new this.constructor(r).consolidate().toArray(),this.splice.apply(this,[t,r.length].concat(i.call(n)))},r.prototype.findIndexAndOffsetAtPosition=function(t){var e,n,i,r,o,a;for(e=0,i=n=0,r=(a=this.objects).length;r>n;i=++n){if(o=e+a[i].getLength(),t>=e&&o>t)return{index:i,offset:t-e};e=o}return{index:null,offset:null}},r.prototype.findPositionAtIndexAndOffset=function(t,e){var n,i,r,o,a,s;for(a=0,n=i=0,r=(s=this.objects).length;r>i;n=++i)if(o=s[n],t>n)a+=o.getLength();else if(n===t){a+=e;break}return a},r.prototype.getEndPosition=function(){var t,e;return null!=this.endPosition?this.endPosition:this.endPosition=function(){var n,i,r;for(e=0,n=0,i=(r=this.objects).length;i>n;n++)t=r[n],e+=t.getLength();return e}.call(this)},r.prototype.toString=function(){return this.objects.join("")},r.prototype.toArray=function(){return this.objects.slice(0)},r.prototype.toJSON=function(){return this.toArray()},r.prototype.isEqualTo=function(t){return r.__super__.isEqualTo.apply(this,arguments)||a(this.objects,null!=t?t.objects:void 0)},a=function(t,e){var n,i,r,o,a;if(null==e&&(e=[]),t.length!==e.length)return!1;for(a=!0,i=n=0,r=t.length;r>n;i=++n)o=t[i],a&&!o.isEqualTo(e[i])&&(a=!1);return a},r.prototype.contentsForInspection=function(){var t;return{objects:"["+function(){var e,n,i,r;for(r=[],e=0,n=(i=this.objects).length;n>e;e++)t=i[e],r.push(t.inspect());return r}.call(this).join(", ")+"]"}},s=function(t){return t[0]},o=function(t){return t[1]},r}(t.Object)}.call(this),function(){var e={}.hasOwnProperty;t.Text=function(n){function i(e){var n;null==e&&(e=[]),i.__super__.constructor.apply(this,arguments),this.pieceList=new t.SplittableList(function(){var t,i,r;for(r=[],t=0,i=e.length;i>t;t++)(n=e[t]).isEmpty()||r.push(n);return r}())}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),i.textForAttachmentWithAttributes=function(e,n){return new this([new t.AttachmentPiece(e,n)])},i.textForStringWithAttributes=function(e,n){return new this([new t.StringPiece(e,n)])},i.fromJSON=function(e){var n;return new this(function(){var i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(t.Piece.fromJSON(n));return o}())},i.prototype.copy=function(){return this.copyWithPieceList(this.pieceList)},i.prototype.copyWithPieceList=function(t){return new this.constructor(t.consolidate().toArray())},i.prototype.copyUsingObjectMap=function(t){var e,n;return n=function(){var n,i,r,o,a;for(a=[],n=0,i=(r=this.getPieces()).length;i>n;n++)e=r[n],a.push(null!=(o=t.find(e))?o:e);return a}.call(this),new this.constructor(n)},i.prototype.appendText=function(t){return this.insertTextAtPosition(t,this.getLength())},i.prototype.insertTextAtPosition=function(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))},i.prototype.removeTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))},i.prototype.replaceTextAtRange=function(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])},i.prototype.moveTextFromRangeToPosition=function(t,e){var n,i;if(!(t[0]<=e&&e<=t[1]))return n=(i=this.getTextAtRange(t)).getLength(),t[0]<e&&(e-=n),this.removeTextAtRange(t).insertTextAtPosition(i,e)},i.prototype.addAttributeAtRange=function(t,e,n){var i;return(i={})[t]=e,this.addAttributesAtRange(i,n)},i.prototype.addAttributesAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,(function(e){return e.copyWithAdditionalAttributes(t)})))},i.prototype.removeAttributeAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,(function(e){return e.copyWithoutAttribute(t)})))},i.prototype.setAttributesAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,(function(e){return e.copyWithAttributes(t)})))},i.prototype.getAttributesAtPosition=function(t){var e,n;return null!=(e=null!=(n=this.pieceList.getObjectAtPosition(t))?n.getAttributes():void 0)?e:{}},i.prototype.getCommonAttributes=function(){var e,n;return e=function(){var t,e,i,r;for(r=[],t=0,e=(i=this.pieceList.toArray()).length;e>t;t++)n=i[t],r.push(n.getAttributes());return r}.call(this),t.Hash.fromCommonAttributesOfObjects(e).toObject()},i.prototype.getCommonAttributesAtRange=function(t){var e;return null!=(e=this.getTextAtRange(t).getCommonAttributes())?e:{}},i.prototype.getExpandedRangeForAttributeAtOffset=function(t,e){var n,i,r;for(n=r=e,i=this.getLength();n>0&&this.getCommonAttributesAtRange([n-1,r])[t];)n--;for(;i>r&&this.getCommonAttributesAtRange([e,r+1])[t];)r++;return[n,r]},i.prototype.getTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))},i.prototype.getStringAtRange=function(t){return this.pieceList.getSplittableListInRange(t).toString()},i.prototype.getStringAtPosition=function(t){return this.getStringAtRange([t,t+1])},i.prototype.startsWithString=function(t){return this.getStringAtRange([0,t.length])===t},i.prototype.endsWithString=function(t){var e;return e=this.getLength(),this.getStringAtRange([e-t.length,e])===t},i.prototype.getAttachmentPieces=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.pieceList.toArray()).length;e>t;t++)null!=(n=i[t]).attachment&&r.push(n);return r},i.prototype.getAttachments=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.getAttachmentPieces()).length;e>t;t++)n=i[t],r.push(n.attachment);return r},i.prototype.getAttachmentAndPositionById=function(t){var e,n,i,r,o,a;for(r=0,e=0,n=(o=this.pieceList.toArray()).length;n>e;e++){if((null!=(a=(i=o[e]).attachment)?a.id:void 0)===t)return{attachment:i.attachment,position:r};r+=i.length}return{attachment:null,position:null}},i.prototype.getAttachmentById=function(t){var e,n;return e=(n=this.getAttachmentAndPositionById(t)).attachment,n.position,e},i.prototype.getRangeOfAttachment=function(t){var e,n;return t=(n=this.getAttachmentAndPositionById(t.id)).attachment,e=n.position,null!=t?[e,e+1]:void 0},i.prototype.updateAttributesForAttachment=function(t,e){var n;return(n=this.getRangeOfAttachment(e))?this.addAttributesAtRange(t,n):this},i.prototype.getLength=function(){return this.pieceList.getEndPosition()},i.prototype.isEmpty=function(){return 0===this.getLength()},i.prototype.isEqualTo=function(t){var e;return i.__super__.isEqualTo.apply(this,arguments)||(null!=t&&null!=(e=t.pieceList)?e.isEqualTo(this.pieceList):void 0)},i.prototype.isBlockBreak=function(){return 1===this.getLength()&&this.pieceList.getObjectAtIndex(0).isBlockBreak()},i.prototype.eachPiece=function(t){return this.pieceList.eachObject(t)},i.prototype.getPieces=function(){return this.pieceList.toArray()},i.prototype.getPieceAtPosition=function(t){return this.pieceList.getObjectAtPosition(t)},i.prototype.contentsForInspection=function(){return{pieceList:this.pieceList.inspect()}},i.prototype.toSerializableText=function(){var t;return t=this.pieceList.selectSplittableList((function(t){return t.isSerializable()})),this.copyWithPieceList(t)},i.prototype.toString=function(){return this.pieceList.toString()},i.prototype.toJSON=function(){return this.pieceList.toJSON()},i.prototype.toConsole=function(){var t;return JSON.stringify(function(){var e,n,i,r;for(r=[],e=0,n=(i=this.pieceList.toArray()).length;n>e;e++)t=i[e],r.push(JSON.parse(t.toConsole()));return r}.call(this))},i.prototype.getDirection=function(){return t.getDirection(this.toString())},i.prototype.isRTL=function(){return"rtl"===this.getDirection()},i}(t.Object)}.call(this),function(){var e,n,i,r,o={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},s=[].slice;e=t.arraysAreEqual,r=t.spliceArray,n=t.getBlockConfig,t.getBlockAttributeNames,i=t.getListAttributeNames,t.Block=function(u){function l(e,n){null==e&&(e=new t.Text),null==n&&(n=[]),l.__super__.constructor.apply(this,arguments),this.text=h(e),this.attributes=n}var c,h,d,f,p,g,m,v,y;return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(l,u),l.fromJSON=function(e){return new this(t.Text.fromJSON(e.text),e.attributes)},l.prototype.isEmpty=function(){return this.text.isBlockBreak()},l.prototype.isEqualTo=function(t){return l.__super__.isEqualTo.apply(this,arguments)||this.text.isEqualTo(null!=t?t.text:void 0)&&e(this.attributes,null!=t?t.attributes:void 0)},l.prototype.copyWithText=function(t){return new this.constructor(t,this.attributes)},l.prototype.copyWithoutText=function(){return this.copyWithText(null)},l.prototype.copyWithAttributes=function(t){return new this.constructor(this.text,t)},l.prototype.copyWithoutAttributes=function(){return this.copyWithAttributes(null)},l.prototype.copyUsingObjectMap=function(t){var e;return this.copyWithText((e=t.find(this.text))?e:this.text.copyUsingObjectMap(t))},l.prototype.addAttribute=function(t){var e;return e=this.attributes.concat(f(t)),this.copyWithAttributes(e)},l.prototype.removeAttribute=function(t){var e,i;return i=n(t).listAttribute,e=g(g(this.attributes,t),i),this.copyWithAttributes(e)},l.prototype.removeLastAttribute=function(){return this.removeAttribute(this.getLastAttribute())},l.prototype.getLastAttribute=function(){return p(this.attributes)},l.prototype.getAttributes=function(){return this.attributes.slice(0)},l.prototype.getAttributeLevel=function(){return this.attributes.length},l.prototype.getAttributeAtLevel=function(t){return this.attributes[t-1]},l.prototype.hasAttribute=function(t){return a.call(this.attributes,t)>=0},l.prototype.hasAttributes=function(){return this.getAttributeLevel()>0},l.prototype.getLastNestableAttribute=function(){return p(this.getNestableAttributes())},l.prototype.getNestableAttributes=function(){var t,e,i,r,o;for(o=[],e=0,i=(r=this.attributes).length;i>e;e++)t=r[e],n(t).nestable&&o.push(t);return o},l.prototype.getNestingLevel=function(){return this.getNestableAttributes().length},l.prototype.decreaseNestingLevel=function(){var t;return(t=this.getLastNestableAttribute())?this.removeAttribute(t):this},l.prototype.increaseNestingLevel=function(){var t,e,n;return(t=this.getLastNestableAttribute())?(n=this.attributes.lastIndexOf(t),e=r.apply(null,[this.attributes,n+1,0].concat(s.call(f(t)))),this.copyWithAttributes(e)):this},l.prototype.getListItemAttributes=function(){var t,e,i,r,o;for(o=[],e=0,i=(r=this.attributes).length;i>e;e++)t=r[e],n(t).listAttribute&&o.push(t);return o},l.prototype.isListItem=function(){var t;return null!=(t=n(this.getLastAttribute()))?t.listAttribute:void 0},l.prototype.isTerminalBlock=function(){var t;return null!=(t=n(this.getLastAttribute()))?t.terminal:void 0},l.prototype.breaksOnReturn=function(){var t;return null!=(t=n(this.getLastAttribute()))?t.breakOnReturn:void 0},l.prototype.findLineBreakInDirectionFromPosition=function(t,e){var n,i;return i=this.toString(),-1!==(n=function(){switch(t){case"forward":return i.indexOf("\n",e);case"backward":return i.slice(0,e).lastIndexOf("\n")}}())?n:void 0},l.prototype.contentsForInspection=function(){return{text:this.text.inspect(),attributes:this.attributes}},l.prototype.toString=function(){return this.text.toString()},l.prototype.toJSON=function(){return{text:this.text,attributes:this.attributes}},l.prototype.getDirection=function(){return this.text.getDirection()},l.prototype.isRTL=function(){return this.text.isRTL()},l.prototype.getLength=function(){return this.text.getLength()},l.prototype.canBeConsolidatedWith=function(t){return!this.hasAttributes()&&!t.hasAttributes()&&this.getDirection()===t.getDirection()},l.prototype.consolidateWith=function(e){var n,i;return n=t.Text.textForStringWithAttributes("\n"),i=this.getTextWithoutBlockBreak().appendText(n),this.copyWithText(i.appendText(e.text))},l.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.getLength()?(e=this,n=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),n=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,n]},l.prototype.getBlockBreakPosition=function(){return this.text.getLength()-1},l.prototype.getTextWithoutBlockBreak=function(){return m(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()},l.prototype.canBeGrouped=function(t){return this.attributes[t]},l.prototype.canBeGroupedWith=function(t,e){var r,o,s,u;return o=(s=t.getAttributes())[e],!((r=this.attributes[e])!==o||!1===n(r).group&&(u=s[e+1],a.call(i(),u)<0)||this.getDirection()!==t.getDirection()&&!t.isEmpty())},h=function(t){return t=y(t),c(t)},y=function(e){var n,i,r,o,a,u;return o=!1,u=e.getPieces(),i=2<=u.length?s.call(u,0,n=u.length-1):(n=0,[]),null==(r=u[n++])?e:(i=function(){var t,e,n;for(n=[],t=0,e=i.length;e>t;t++)(a=i[t]).isBlockBreak()?(o=!0,n.push(v(a))):n.push(a);return n}(),o?new t.Text(s.call(i).concat([r])):e)},d=t.Text.textForStringWithAttributes("\n",{blockBreak:!0}),c=function(t){return m(t)?t:t.appendText(d)},m=function(t){var e;return 0!==(e=t.getLength())&&t.getTextAtRange([e-1,e]).isBlockBreak()},v=function(t){return t.copyWithoutAttribute("blockBreak")},f=function(t){var e;return null!=(e=n(t).listAttribute)?[e,t]:[t]},p=function(t){return t.slice(-1)[0]},g=function(t,e){var n;return-1===(n=t.lastIndexOf(e))?t:r(t,n,1)},l}(t.Object)}.call(this),function(){var e,n,i,r={}.hasOwnProperty,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},a=[].slice;n=t.tagName,i=t.walkTree,e=t.nodeIsAttachmentElement,t.HTMLSanitizer=function(s){function u(t,e){var n;n=null!=e?e:{},this.allowedAttributes=n.allowedAttributes,this.forbiddenProtocols=n.forbiddenProtocols,this.forbiddenElements=n.forbiddenElements,null==this.allowedAttributes&&(this.allowedAttributes=l),null==this.forbiddenProtocols&&(this.forbiddenProtocols=h),null==this.forbiddenElements&&(this.forbiddenElements=c),this.body=d(t)}var l,c,h,d;return function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(u,s),l="style href src width height class".split(" "),h="javascript:".split(" "),c="script iframe".split(" "),u.sanitize=function(t,e){var n;return(n=new this(t,e)).sanitize(),n},u.prototype.sanitize=function(){return this.sanitizeElements(),this.normalizeListElementNesting()},u.prototype.getHTML=function(){return this.body.innerHTML},u.prototype.getBody=function(){return this.body},u.prototype.sanitizeElements=function(){var e,n,r,o,a;for(a=i(this.body),o=[];a.nextNode();)switch((r=a.currentNode).nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(r)?o.push(r):this.sanitizeElement(r);break;case Node.COMMENT_NODE:o.push(r)}for(e=0,n=o.length;n>e;e++)r=o[e],t.removeNode(r);return this.body},u.prototype.sanitizeElement=function(t){var e,n,i,r,s;for(t.hasAttribute("href")&&(r=t.protocol,o.call(this.forbiddenProtocols,r)>=0&&t.removeAttribute("href")),e=0,n=(s=a.call(t.attributes)).length;n>e;e++)i=s[e].name,o.call(this.allowedAttributes,i)>=0||0===i.indexOf("data-trix")||t.removeAttribute(i);return t},u.prototype.normalizeListElementNesting=function(){var t,e,i,r,o;for(t=0,e=(o=a.call(this.body.querySelectorAll("ul,ol"))).length;e>t;t++)(r=(i=o[t]).previousElementSibling)&&"li"===n(r)&&r.appendChild(i);return this.body},u.prototype.elementIsRemovable=function(t){return(null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE?this.elementIsForbidden(t)||this.elementIsntSerializable(t):void 0},u.prototype.elementIsForbidden=function(t){var e;return e=n(t),o.call(this.forbiddenElements,e)>=0},u.prototype.elementIsntSerializable=function(t){return"false"===t.getAttribute("data-trix-serialize")&&!e(t)},d=function(t){var e,n,i,r,o;for(null==t&&(t=""),t=t.replace(/<\/html[^>]*>[^]*$/i,"</html>"),(e=document.implementation.createHTMLDocument("")).documentElement.innerHTML=t,i=0,r=(o=e.head.querySelectorAll("style")).length;r>i;i++)n=o[i],e.body.appendChild(n);return e.body},u}(t.BasicObject)}.call(this),function(){var e,n,i,r,o,a,s,u,l,c,h,d={}.hasOwnProperty,f=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t.arraysAreEqual,a=t.makeElement,c=t.tagName,o=t.getBlockTagNames,h=t.walkTree,r=t.findClosestElementFromNode,i=t.elementContainsNode,s=t.nodeIsAttachmentElement,u=t.normalizeSpaces,n=t.breakableWhitespacePattern,l=t.squishBreakableWhitespace,t.HTMLParser=function(p){function g(t,e){this.html=t,this.referenceElement=(null!=e?e:{}).referenceElement,this.blocks=[],this.blockElements=[],this.processedElements=[]}var m,v,y,b,_,E,x,w,A,D,C,T;return function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(g,p),g.parse=function(t,e){var n;return(n=new this(t,e)).parse(),n},g.prototype.getDocument=function(){return t.Document.fromJSON(this.blocks)},g.prototype.parse=function(){var e,n;try{for(this.createHiddenContainer(),e=t.HTMLSanitizer.sanitize(this.html).getHTML(),this.containerElement.innerHTML=e,n=h(this.containerElement,{usingFilter:x});n.nextNode();)this.processNode(n.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}},g.prototype.createHiddenContainer=function(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=a({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))},g.prototype.removeHiddenContainer=function(){return t.removeNode(this.containerElement)},x=function(t){return"style"===c(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},g.prototype.processNode=function(t){switch(t.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(t))return this.appendBlockForTextNode(t),this.processTextNode(t);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}},g.prototype.appendBlockForTextNode=function(t){var n,i,r;return(i=t.parentNode)===this.currentBlockElement&&this.isBlockElement(t.previousSibling)?this.appendStringWithAttributes("\n"):i!==this.containerElement&&!this.isBlockElement(i)||(n=this.getBlockAttributes(i),e(n,null!=(r=this.currentBlock)?r.attributes:void 0))?void 0:(this.currentBlock=this.appendBlockForAttributesWithElement(n,i),this.currentBlockElement=i)},g.prototype.appendBlockForElement=function(t){var n,r,o,a;if(o=this.isBlockElement(t),r=i(this.currentBlockElement,t),o&&!this.isBlockElement(t.firstChild)){if((!this.isInsignificantTextNode(t.firstChild)||!this.isBlockElement(t.firstElementChild))&&(n=this.getBlockAttributes(t),t.firstChild))return r&&e(n,this.currentBlock.attributes)?this.appendStringWithAttributes("\n"):(this.currentBlock=this.appendBlockForAttributesWithElement(n,t),this.currentBlockElement=t)}else if(this.currentBlockElement&&!r&&!o)return(a=this.findParentBlockElement(t))?this.appendBlockForElement(a):(this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null)},g.prototype.findParentBlockElement=function(t){var e;for(e=t.parentElement;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&f.call(this.blockElements,e)>=0)return e;e=e.parentElement}return null},g.prototype.processTextNode=function(t){var e,n;return n=t.data,v(t.parentNode)||(n=l(n),C(null!=(e=t.previousSibling)?e.textContent:void 0)&&(n=_(n))),this.appendStringWithAttributes(n,this.getTextAttributes(t.parentNode))},g.prototype.processElement=function(t){var e,n,i,r,o;if(s(t))return e=w(t,"attachment"),Object.keys(e).length&&(r=this.getTextAttributes(t),this.appendAttachmentWithAttributes(e,r),t.innerHTML=""),this.processedElements.push(t);switch(c(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes("\n",this.getTextAttributes(t)),this.processedElements.push(t);case"img":for(n in e={url:t.getAttribute("src"),contentType:"image"},i=b(t))o=i[n],e[n]=o;return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes("\n");break;case"td":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes(" | ")}},g.prototype.appendBlockForAttributesWithElement=function(t,e){var n;return this.blockElements.push(e),n=m(t),this.blocks.push(n),n},g.prototype.appendEmptyBlock=function(){return this.appendBlockForAttributesWithElement([],null)},g.prototype.appendStringWithAttributes=function(t,e){return this.appendPiece(D(t,e))},g.prototype.appendAttachmentWithAttributes=function(t,e){return this.appendPiece(A(t,e))},g.prototype.appendPiece=function(t){return 0===this.blocks.length&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)},g.prototype.appendStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[i.length-1])?n.type:void 0)?n.string+=t:i.push(D(t))},g.prototype.prependStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[0])?n.type:void 0)?n.string=t+n.string:i.unshift(D(t))},D=function(t,e){return null==e&&(e={}),"string",{string:t=u(t),attributes:e,type:"string"}},A=function(t,e){return null==e&&(e={}),"attachment",{attachment:t,attributes:e,type:"attachment"}},m=function(t){return null==t&&(t={}),{text:[],attributes:t}},g.prototype.getTextAttributes=function(e){var n,i,o,a,u,l,c,h,d,f,p,g;for(n in o={},d=t.config.textAttributes)if((u=d[n]).tagName&&r(e,{matchingSelector:u.tagName,untilNode:this.containerElement}))o[n]=!0;else if(u.parser){if(g=u.parser(e)){for(i=!1,l=0,h=(f=this.findBlockElementAncestors(e)).length;h>l;l++)if(a=f[l],u.parser(a)===g){i=!0;break}i||(o[n]=g)}}else u.styleProperty&&(g=e.style[u.styleProperty])&&(o[n]=g);if(s(e))for(c in p=w(e,"attributes"))g=p[c],o[c]=g;return o},g.prototype.getBlockAttributes=function(e){var n,i,r,o;for(i=[];e&&e!==this.containerElement;){for(n in o=t.config.blockAttributes)!1!==(r=o[n]).parse&&c(e)===r.tagName&&(("function"==typeof r.test?r.test(e):void 0)||!r.test)&&(i.push(n),r.listAttribute&&i.push(r.listAttribute));e=e.parentNode}return i.reverse()},g.prototype.findBlockElementAncestors=function(t){var e,n;for(e=[];t&&t!==this.containerElement;)n=c(t),f.call(o(),n)>=0&&e.push(t),t=t.parentNode;return e},w=function(t,e){try{return JSON.parse(t.getAttribute("data-trix-"+e))}catch(t){return{}}},b=function(t){var e,n,i;return i=t.getAttribute("width"),n=t.getAttribute("height"),e={},i&&(e.width=parseInt(i,10)),n&&(e.height=parseInt(n,10)),e},g.prototype.isBlockElement=function(t){var e;if((null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE&&!s(t)&&!r(t,{matchingSelector:"td",untilNode:this.containerElement}))return e=c(t),f.call(o(),e)>=0||"block"===window.getComputedStyle(t).display},g.prototype.isInsignificantTextNode=function(t){var e,n,i;if((null!=t?t.nodeType:void 0)===Node.TEXT_NODE&&T(t.data)&&(n=t.parentNode,i=t.previousSibling,e=t.nextSibling,(!E(n.previousSibling)||this.isBlockElement(n.previousSibling))&&!v(n)))return!i||this.isBlockElement(i)||!e||this.isBlockElement(e)},g.prototype.isExtraBR=function(t){return"br"===c(t)&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t},v=function(t){var e;return"pre"===(e=window.getComputedStyle(t).whiteSpace)||"pre-wrap"===e||"pre-line"===e},E=function(t){return t&&!C(t.textContent)},g.prototype.translateBlockElementMarginsToNewlines=function(){var t,e,n,i,r,o,a;for(t=this.getMarginOfDefaultBlockElement(),a=[],n=e=0,i=(o=this.blocks).length;i>e;n=++e)o[n],(r=this.getMarginOfBlockElementAtIndex(n))&&(r.top>2*t.top&&this.prependStringToTextAtIndex("\n",n),a.push(r.bottom>2*t.bottom?this.appendStringToTextAtIndex("\n",n):void 0));return a},g.prototype.getMarginOfBlockElementAtIndex=function(t){var e,n;return!(e=this.blockElements[t])||!e.textContent||(n=c(e),f.call(o(),n)>=0||f.call(this.processedElements,e)>=0)?void 0:y(e)},g.prototype.getMarginOfDefaultBlockElement=function(){var e;return e=a(t.config.blockAttributes.default.tagName),this.containerElement.appendChild(e),y(e)},y=function(t){var e;return"block"===(e=window.getComputedStyle(t)).display?{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}:void 0},_=function(t){return t.replace(RegExp("^"+n.source+"+"),"")},T=function(t){return RegExp("^"+n.source+"*$").test(t)},C=function(t){return/\s$/.test(t)},g}(t.BasicObject)}.call(this),function(){var e,n,i,r,o={}.hasOwnProperty,a=[].slice,s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t.arraysAreEqual,i=t.normalizeRange,r=t.rangeIsCollapsed,n=t.getBlockConfig,t.Document=function(u){function l(e){null==e&&(e=[]),l.__super__.constructor.apply(this,arguments),0===e.length&&(e=[new t.Block]),this.blockList=t.SplittableList.box(e)}var c;return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(l,u),l.fromJSON=function(e){var n;return new this(function(){var i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(t.Block.fromJSON(n));return o}())},l.fromHTML=function(e,n){return t.HTMLParser.parse(e,n).getDocument()},l.fromString=function(e,n){var i;return i=t.Text.textForStringWithAttributes(e,n),new this([new t.Block(i)])},l.prototype.isEmpty=function(){var t;return 1===this.blockList.length&&((t=this.getBlockAtIndex(0)).isEmpty()&&!t.hasAttributes())},l.prototype.copy=function(t){var e;return null==t&&(t={}),e=t.consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray(),new this.constructor(e)},l.prototype.copyUsingObjectsFromDocument=function(e){var n;return n=new t.ObjectMap(e.getObjects()),this.copyUsingObjectMap(n)},l.prototype.copyUsingObjectMap=function(t){var e,n,i;return n=function(){var n,r,o,a;for(a=[],n=0,r=(o=this.getBlocks()).length;r>n;n++)e=o[n],a.push((i=t.find(e))?i:e.copyUsingObjectMap(t));return a}.call(this),new this.constructor(n)},l.prototype.copyWithBaseBlockAttributes=function(t){var e,n,i;return null==t&&(t=[]),i=function(){var i,r,o,a;for(a=[],i=0,r=(o=this.getBlocks()).length;r>i;i++)n=o[i],e=t.concat(n.getAttributes()),a.push(n.copyWithAttributes(e));return a}.call(this),new this.constructor(i)},l.prototype.replaceBlock=function(t,e){var n;return-1===(n=this.blockList.indexOf(t))?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,n))},l.prototype.insertDocumentAtRange=function(t,e){var n,o,a,s,u,l,c;return o=t.blockList,u=(e=i(e))[0],a=(l=this.locationFromPosition(u)).index,s=l.offset,c=this,n=this.getBlockAtPosition(u),r(e)&&n.isEmpty()&&!n.hasAttributes()?c=new this.constructor(c.blockList.removeObjectAtIndex(a)):n.getBlockBreakPosition()===s&&u++,c=c.removeTextAtRange(e),new this.constructor(c.blockList.insertSplittableListAtPosition(o,u))},l.prototype.mergeDocumentAtRange=function(t,n){var r,o,a,s,u,l,c,h,d,f,p,g;return p=(n=i(n))[0],f=this.locationFromPosition(p),o=this.getBlockAtIndex(f.index).getAttributes(),r=t.getBaseBlockAttributes(),g=o.slice(-r.length),e(r,g)?(c=o.slice(0,-r.length),l=t.copyWithBaseBlockAttributes(c)):l=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(o),a=l.getBlockCount(),s=l.getBlockAtIndex(0),e(o,s.getAttributes())?(u=s.getTextWithoutBlockBreak(),d=this.insertTextAtRange(u,n),a>1&&(l=new this.constructor(l.getBlocks().slice(1)),h=p+u.getLength(),d=d.insertDocumentAtRange(l,h))):d=this.insertDocumentAtRange(l,n),d},l.prototype.insertTextAtRange=function(t,e){var n,r,o,a,s;return s=(e=i(e))[0],r=(a=this.locationFromPosition(s)).index,o=a.offset,n=this.removeTextAtRange(e),new this.constructor(n.blockList.editObjectAtIndex(r,(function(e){return e.copyWithText(e.text.insertTextAtPosition(t,o))})))},l.prototype.removeTextAtRange=function(t){var e,n,o,a,s,u,l,c,h,d,f,p,g,m,v,y,b,_;return c=(d=t=i(t))[0],y=d[1],r(t)?this:(u=(f=this.locationRangeFromRange(t))[0],m=f[1],s=u.index,l=u.offset,a=this.getBlockAtIndex(s),g=m.index,v=m.offset,p=this.getBlockAtIndex(g),y-c==1&&a.getBlockBreakPosition()===l&&p.getBlockBreakPosition()!==v&&"\n"===p.text.getStringAtPosition(v)?o=this.blockList.editObjectAtIndex(g,(function(t){return t.copyWithText(t.text.removeTextAtRange([v,v+1]))})):(h=a.text.getTextAtRange([0,l]),b=p.text.getTextAtRange([v,p.getLength()]),_=h.appendText(b),n=s!==g&&0===l&&a.getAttributeLevel()>=p.getAttributeLevel()?p.copyWithText(_):a.copyWithText(_),e=g+1-s,o=this.blockList.splice(s,e,n)),new this.constructor(o))},l.prototype.moveTextFromRangeToPosition=function(t,e){var n,r,o,s,u,l,c,h,d,f;return d=(l=t=i(t))[0],o=l[1],e>=d&&o>=e?this:(r=this.getDocumentAtRange(t),h=this.removeTextAtRange(t),(u=e>d)&&(e-=r.getLength()),s=(c=r.getBlocks())[0],0===(n=2<=c.length?a.call(c,1):[]).length?(f=s.getTextWithoutBlockBreak(),u&&(e+=1)):f=s.text,h=h.insertTextAtRange(f,e),0===n.length?h:(r=new this.constructor(n),e+=f.getLength(),h.insertDocumentAtRange(r,e)))},l.prototype.addAttributeAtRange=function(t,e,i){var r;return r=this.blockList,this.eachBlockAtRange(i,(function(i,o,a){return r=r.editObjectAtIndex(a,(function(){return n(t)?i.addAttribute(t,e):o[0]===o[1]?i:i.copyWithText(i.text.addAttributeAtRange(t,e,o))}))})),new this.constructor(r)},l.prototype.addAttribute=function(t,e){var n;return n=this.blockList,this.eachBlock((function(i,r){return n=n.editObjectAtIndex(r,(function(){return i.addAttribute(t,e)}))})),new this.constructor(n)},l.prototype.removeAttributeAtRange=function(t,e){var i;return i=this.blockList,this.eachBlockAtRange(e,(function(e,r,o){return n(t)?i=i.editObjectAtIndex(o,(function(){return e.removeAttribute(t)})):r[0]!==r[1]?i=i.editObjectAtIndex(o,(function(){return e.copyWithText(e.text.removeAttributeAtRange(t,r))})):void 0})),new this.constructor(i)},l.prototype.updateAttributesForAttachment=function(t,e){var n,i,r;return i=this.getRangeOfAttachment(e)[0],n=this.locationFromPosition(i).index,r=this.getTextAtIndex(n),new this.constructor(this.blockList.editObjectAtIndex(n,(function(n){return n.copyWithText(r.updateAttributesForAttachment(t,e))})))},l.prototype.removeAttributeForAttachment=function(t,e){var n;return n=this.getRangeOfAttachment(e),this.removeAttributeAtRange(t,n)},l.prototype.insertBlockBreakAtRange=function(e){var n,r,o,a;return a=(e=i(e))[0],o=this.locationFromPosition(a).offset,r=this.removeTextAtRange(e),0===o&&(n=[new t.Block]),new this.constructor(r.blockList.insertSplittableListAtPosition(new t.SplittableList(n),a))},l.prototype.applyBlockAttributeAtRange=function(t,e,i){var r,o,a,s;return o=(a=this.expandRangeToLineBreaksAndSplitBlocks(i)).document,i=a.range,(r=n(t)).listAttribute?(s=(o=o.removeLastListAttributeAtRange(i,{exceptAttributeName:t})).convertLineBreaksToBlockBreaksInRange(i),o=s.document,i=s.range):o=r.exclusive?o.removeBlockAttributesAtRange(i):r.terminal?o.removeLastTerminalAttributeAtRange(i):o.consolidateBlocksAtRange(i),o.addAttributeAtRange(t,e,i)},l.prototype.removeLastListAttributeAtRange=function(t,e){var i;return null==e&&(e={}),i=this.blockList,this.eachBlockAtRange(t,(function(t,r,o){var a;if((a=t.getLastAttribute())&&n(a).listAttribute&&a!==e.exceptAttributeName)return i=i.editObjectAtIndex(o,(function(){return t.removeAttribute(a)}))})),new this.constructor(i)},l.prototype.removeLastTerminalAttributeAtRange=function(t){var e;return e=this.blockList,this.eachBlockAtRange(t,(function(t,i,r){var o;if((o=t.getLastAttribute())&&n(o).terminal)return e=e.editObjectAtIndex(r,(function(){return t.removeAttribute(o)}))})),new this.constructor(e)},l.prototype.removeBlockAttributesAtRange=function(t){var e;return e=this.blockList,this.eachBlockAtRange(t,(function(t,n,i){return t.hasAttributes()?e=e.editObjectAtIndex(i,(function(){return t.copyWithoutAttributes()})):void 0})),new this.constructor(e)},l.prototype.expandRangeToLineBreaksAndSplitBlocks=function(t){var e,n,r,o,a,s,u,l,c;return c=(s=t=i(t))[0],o=s[1],l=this.locationFromPosition(c),r=this.locationFromPosition(o),u=(e=this).getBlockAtIndex(l.index),null!=(l.offset=u.findLineBreakInDirectionFromPosition("backward",l.offset))&&(a=e.positionFromLocation(l),e=e.insertBlockBreakAtRange([a,a+1]),r.index+=1,r.offset-=e.getBlockAtIndex(l.index).getLength(),l.index+=1),l.offset=0,0===r.offset&&r.index>l.index?(r.index-=1,r.offset=e.getBlockAtIndex(r.index).getBlockBreakPosition()):("\n"===(n=e.getBlockAtIndex(r.index)).text.getStringAtRange([r.offset-1,r.offset])?r.offset-=1:r.offset=n.findLineBreakInDirectionFromPosition("forward",r.offset),r.offset!==n.getBlockBreakPosition()&&(a=e.positionFromLocation(r),e=e.insertBlockBreakAtRange([a,a+1]))),c=e.positionFromLocation(l),o=e.positionFromLocation(r),{document:e,range:t=i([c,o])}},l.prototype.convertLineBreaksToBlockBreaksInRange=function(t){var e,n,r;return n=(t=i(t))[0],r=this.getStringAtRange(t).slice(0,-1),e=this,r.replace(/.*?\n/g,(function(t){return n+=t.length,e=e.insertBlockBreakAtRange([n-1,n])})),{document:e,range:t}},l.prototype.consolidateBlocksAtRange=function(t){var e,n,r,o,a;return a=(r=t=i(t))[0],n=r[1],o=this.locationFromPosition(a).index,e=this.locationFromPosition(n).index,new this.constructor(this.blockList.consolidateFromIndexToIndex(o,e))},l.prototype.getDocumentAtRange=function(t){var e;return t=i(t),e=this.blockList.getSplittableListInRange(t).toArray(),new this.constructor(e)},l.prototype.getStringAtRange=function(t){var e,n;return(n=t=i(t))[n.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)},l.prototype.getBlockAtIndex=function(t){return this.blockList.getObjectAtIndex(t)},l.prototype.getBlockAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getBlockAtIndex(e)},l.prototype.getTextAtIndex=function(t){var e;return null!=(e=this.getBlockAtIndex(t))?e.text:void 0},l.prototype.getTextAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getTextAtIndex(e)},l.prototype.getPieceAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getPieceAtPosition(n)},l.prototype.getCharacterAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getStringAtRange([n,n+1])},l.prototype.getLength=function(){return this.blockList.getEndPosition()},l.prototype.getBlocks=function(){return this.blockList.toArray()},l.prototype.getBlockCount=function(){return this.blockList.length},l.prototype.getEditCount=function(){return this.editCount},l.prototype.eachBlock=function(t){return this.blockList.eachObject(t)},l.prototype.eachBlockAtRange=function(t,e){var n,r,o,a,s,u,l,c,h,d,f,p;if(f=(u=t=i(t))[0],o=u[1],d=this.locationFromPosition(f),r=this.locationFromPosition(o),d.index===r.index)return n=this.getBlockAtIndex(d.index),p=[d.offset,r.offset],e(n,p,d.index);for(h=[],s=a=l=d.index,c=r.index;c>=l?c>=a:a>=c;s=c>=l?++a:--a)(n=this.getBlockAtIndex(s))?(p=function(){switch(s){case d.index:return[d.offset,n.text.getLength()];case r.index:return[0,r.offset];default:return[0,n.text.getLength()]}}(),h.push(e(n,p,s))):h.push(void 0);return h},l.prototype.getCommonAttributesAtRange=function(e){var n,o,a;return o=(e=i(e))[0],r(e)?this.getCommonAttributesAtPosition(o):(a=[],n=[],this.eachBlockAtRange(e,(function(t,e){return e[0]!==e[1]?(a.push(t.text.getCommonAttributesAtRange(e)),n.push(c(t))):void 0})),t.Hash.fromCommonAttributesOfObjects(a).merge(t.Hash.fromCommonAttributesOfObjects(n)).toObject())},l.prototype.getCommonAttributesAtPosition=function(e){var n,i,r,o,a,u,l,h,d,f;if(a=(d=this.locationFromPosition(e)).index,h=d.offset,!(r=this.getBlockAtIndex(a)))return{};for(l in o=c(r),n=r.text.getAttributesAtPosition(h),i=r.text.getAttributesAtPosition(h-1),u=function(){var e,n;for(l in n=[],e=t.config.textAttributes)(f=e[l]).inheritable&&n.push(l);return n}(),i)((f=i[l])===n[l]||s.call(u,l)>=0)&&(o[l]=f);return o},l.prototype.getRangeOfCommonAttributeAtPosition=function(t,e){var n,r,o,a,s,u,l,c;return o=(s=this.locationFromPosition(e)).index,a=s.offset,c=(u=this.getTextAtIndex(o).getExpandedRangeForAttributeAtOffset(t,a))[0],r=u[1],l=this.positionFromLocation({index:o,offset:c}),n=this.positionFromLocation({index:o,offset:r}),i([l,n])},l.prototype.getBaseBlockAttributes=function(){var t,e,n,i,r,o,a;for(t=this.getBlockAtIndex(0).getAttributes(),n=i=1,a=this.getBlockCount();a>=1?a>i:i>a;n=a>=1?++i:--i)e=this.getBlockAtIndex(n).getAttributes(),o=Math.min(t.length,e.length),t=function(){var n,i,a;for(a=[],r=n=0,i=o;(i>=0?i>n:n>i)&&e[r]===t[r];r=i>=0?++n:--n)a.push(e[r]);return a}();return t},c=function(t){var e,n;return n={},(e=t.getLastAttribute())&&(n[e]=!0),n},l.prototype.getAttachmentById=function(t){var e,n,i,r;for(n=0,i=(r=this.getAttachments()).length;i>n;n++)if((e=r[n]).id===t)return e},l.prototype.getAttachmentPieces=function(){var t;return t=[],this.blockList.eachObject((function(e){var n;return n=e.text,t=t.concat(n.getAttachmentPieces())})),t},l.prototype.getAttachments=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.getAttachmentPieces()).length;e>t;t++)n=i[t],r.push(n.attachment);return r},l.prototype.getRangeOfAttachment=function(t){var e,n,r,o,a,s,u;for(o=0,n=e=0,r=(a=this.blockList.toArray()).length;r>e;n=++e){if(u=(s=a[n].text).getRangeOfAttachment(t))return i([o+u[0],o+u[1]]);o+=s.getLength()}},l.prototype.getLocationRangeOfAttachment=function(t){var e;return e=this.getRangeOfAttachment(t),this.locationRangeFromRange(e)},l.prototype.getAttachmentPieceForAttachment=function(t){var e,n,i,r;for(e=0,n=(r=this.getAttachmentPieces()).length;n>e;e++)if((i=r[e]).attachment===t)return i},l.prototype.findRangesForBlockAttribute=function(t){var e,n,i,r,o,a,s;for(o=0,a=[],n=0,i=(s=this.getBlocks()).length;i>n;n++)r=(e=s[n]).getLength(),e.hasAttribute(t)&&a.push([o,o+r]),o+=r;return a},l.prototype.findRangesForTextAttribute=function(t,e){var n,i,r,o,a,s,u,l,c,h;for(h=(null!=e?e:{}).withValue,s=0,u=[],l=[],o=function(e){return null!=h?e.getAttribute(t)===h:e.hasAttribute(t)},n=0,i=(c=this.getPieces()).length;i>n;n++)r=(a=c[n]).getLength(),o(a)&&(u[1]===s?u[1]=s+r:l.push(u=[s,s+r])),s+=r;return l},l.prototype.locationFromPosition=function(t){var e,n;return null!=(n=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t))).index?n:{index:(e=this.getBlocks()).length-1,offset:e[e.length-1].getLength()}},l.prototype.positionFromLocation=function(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)},l.prototype.locationRangeFromPosition=function(t){return i(this.locationFromPosition(t))},l.prototype.locationRangeFromRange=function(t){var e,n,r,o;if(t=i(t))return o=t[0],n=t[1],r=this.locationFromPosition(o),e=this.locationFromPosition(n),i([r,e])},l.prototype.rangeFromLocationRange=function(t){var e,n;return t=i(t),e=this.positionFromLocation(t[0]),r(t)||(n=this.positionFromLocation(t[1])),i([e,n])},l.prototype.isEqualTo=function(t){return this.blockList.isEqualTo(null!=t?t.blockList:void 0)},l.prototype.getTexts=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getBlocks()).length;n>e;e++)t=i[e],r.push(t.text);return r},l.prototype.getPieces=function(){var t,e,n,i,r;for(n=[],t=0,e=(i=this.getTexts()).length;e>t;t++)r=i[t],n.push.apply(n,r.getPieces());return n},l.prototype.getObjects=function(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())},l.prototype.toSerializableDocument=function(){var t;return t=[],this.blockList.eachObject((function(e){return t.push(e.copyWithText(e.text.toSerializableText()))})),new this.constructor(t)},l.prototype.toString=function(){return this.blockList.toString()},l.prototype.toJSON=function(){return this.blockList.toJSON()},l.prototype.toConsole=function(){var t;return JSON.stringify(function(){var e,n,i,r;for(r=[],e=0,n=(i=this.blockList.toArray()).length;n>e;e++)t=i[e],r.push(JSON.parse(t.text.toConsole()));return r}.call(this))},l}(t.Object)}.call(this),function(){t.LineBreakInsertion=function(){function t(t){var e;this.composition=t,this.document=this.composition.document,e=this.composition.getSelectedRange(),this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}return t.prototype.shouldInsertBlockBreak=function(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?0!==this.startLocation.offset:this.breaksOnReturn&&"\n"!==this.nextCharacter},t.prototype.shouldBreakFormattedBlock=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&"\n"===this.nextCharacter||"\n"===this.previousCharacter)},t.prototype.shouldDecreaseListLevel=function(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()},t.prototype.shouldPrependListItem=function(){return this.block.isListItem()&&0===this.startLocation.offset&&!this.block.isEmpty()},t.prototype.shouldRemoveLastBlockAttribute=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()},t}()}.call(this),function(){var e,n,i,r,o,a,s,u,l,c,h={}.hasOwnProperty;a=t.normalizeRange,l=t.rangesAreEqual,u=t.rangeIsCollapsed,s=t.objectsAreEqual,e=t.arrayStartsWith,c=t.summarizeArrayChange,i=t.getAllAttributeNames,r=t.getBlockConfig,o=t.getTextConfig,n=t.extend,t.Composition=function(d){function f(){this.document=new t.Document,this.attachments=[],this.currentAttributes={},this.revision=0}return function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(f,d),f.prototype.setDocument=function(t){var e;return t.isEqualTo(this.document)?void 0:(this.document=t,this.refreshAttachments(),this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeDocument?e.compositionDidChangeDocument(t):void 0)},f.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.getSelectedRange()}},f.prototype.loadSnapshot=function(e){var n,i,r,o;return n=e.document,o=e.selectedRange,null!=(i=this.delegate)&&"function"==typeof i.compositionWillLoadSnapshot&&i.compositionWillLoadSnapshot(),this.setDocument(null!=n?n:new t.Document),this.setSelection(null!=o?o:[0,0]),null!=(r=this.delegate)&&"function"==typeof r.compositionDidLoadSnapshot?r.compositionDidLoadSnapshot():void 0},f.prototype.insertText=function(t,e){var n,i,r,o;return o=(null!=e?e:{updatePosition:!0}).updatePosition,i=this.getSelectedRange(),this.setDocument(this.document.insertTextAtRange(t,i)),n=(r=i[0])+t.getLength(),o&&this.setSelection(n),this.notifyDelegateOfInsertionAtRange([r,n])},f.prototype.insertBlock=function(e){var n;return null==e&&(e=new t.Block),n=new t.Document([e]),this.insertDocument(n)},f.prototype.insertDocument=function(e){var n,i,r;return null==e&&(e=new t.Document),i=this.getSelectedRange(),this.setDocument(this.document.insertDocumentAtRange(e,i)),n=(r=i[0])+e.getLength(),this.setSelection(n),this.notifyDelegateOfInsertionAtRange([r,n])},f.prototype.insertString=function(e,n){var i,r;return i=this.getCurrentTextAttributes(),r=t.Text.textForStringWithAttributes(e,i),this.insertText(r,n)},f.prototype.insertBlockBreak=function(){var t,e,n;return e=this.getSelectedRange(),this.setDocument(this.document.insertBlockBreakAtRange(e)),t=(n=e[0])+1,this.setSelection(t),this.notifyDelegateOfInsertionAtRange([n,t])},f.prototype.insertLineBreak=function(){var e,n;return(n=new t.LineBreakInsertion(this)).shouldDecreaseListLevel()?(this.decreaseListLevel(),this.setSelection(n.startPosition)):n.shouldPrependListItem()?(e=new t.Document([n.block.copyWithoutText()]),this.insertDocument(e)):n.shouldInsertBlockBreak()?this.insertBlockBreak():n.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():n.shouldBreakFormattedBlock()?this.breakFormattedBlock(n):this.insertString("\n")},f.prototype.insertHTML=function(e){var n,i,r,o;return n=t.Document.fromHTML(e),r=this.getSelectedRange(),this.setDocument(this.document.mergeDocumentAtRange(n,r)),i=(o=r[0])+n.getLength()-1,this.setSelection(i),this.notifyDelegateOfInsertionAtRange([o,i])},f.prototype.replaceHTML=function(e){var n,i,r;return n=t.Document.fromHTML(e).copyUsingObjectsFromDocument(this.document),i=this.getLocationRange({strict:!1}),r=this.document.rangeFromLocationRange(i),this.setDocument(n),this.setSelection(r)},f.prototype.insertFile=function(t){return this.insertFiles([t])},f.prototype.insertFiles=function(e){var n,i,r,o,a,s;for(i=[],o=0,a=e.length;a>o;o++)r=e[o],(null!=(s=this.delegate)?s.compositionShouldAcceptFile(r):void 0)&&(n=t.Attachment.attachmentForFile(r),i.push(n));return this.insertAttachments(i)},f.prototype.insertAttachment=function(t){return this.insertAttachments([t])},f.prototype.insertAttachments=function(e){var n,i,r,o,a,s,u,l,c;for(l=new t.Text,o=0,a=e.length;a>o;o++)c=(n=e[o]).getType(),s=null!=(u=t.config.attachments[c])?u.presentation:void 0,r=this.getCurrentTextAttributes(),s&&(r.presentation=s),i=t.Text.textForAttachmentWithAttributes(n,r),l=l.appendText(i);return this.insertText(l)},f.prototype.shouldManageDeletingInDirection=function(t){var e;if(e=this.getLocationRange(),u(e)){if("backward"===t&&0===e[0].offset)return!0;if(this.shouldManageMovingCursorInDirection(t))return!0}else if(e[0].index!==e[1].index)return!0;return!1},f.prototype.deleteInDirection=function(t,e){var n,i,r,o,a,s,l,c;return o=(null!=e?e:{}).length,a=this.getLocationRange(),s=this.getSelectedRange(),(l=u(s))?r="backward"===t&&0===a[0].offset:c=a[0].index!==a[1].index,!(r&&this.canDecreaseBlockAttributeLevel()&&(i=this.getBlock(),i.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(s[0]),i.isEmpty()))&&(l&&(s=this.getExpandedRangeInDirection(t,{length:o}),"backward"===t&&(n=this.getAttachmentAtRange(s))),n?(this.editAttachment(n),!1):(this.setDocument(this.document.removeTextAtRange(s)),this.setSelection(s[0]),!r&&!c&&void 0))},f.prototype.moveTextFromRange=function(t){var e;return e=this.getSelectedRange()[0],this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)},f.prototype.removeAttachment=function(t){var e;return(e=this.document.getRangeOfAttachment(t))?(this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])):void 0},f.prototype.removeLastBlockAttribute=function(){var t,e,n,i;return i=(n=this.getSelectedRange())[0],e=n[1],t=this.document.getBlockAtPosition(e),this.removeCurrentAttribute(t.getLastAttribute()),this.setSelection(i)}," ",f.prototype.insertPlaceholder=function(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")},f.prototype.selectPlaceholder=function(){return null!=this.placeholderPosition?(this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+" ".length]),this.getSelectedRange()):void 0},f.prototype.forgetPlaceholder=function(){return this.placeholderPosition=null},f.prototype.hasCurrentAttribute=function(t){var e;return null!=(e=this.currentAttributes[t])&&!1!==e},f.prototype.toggleCurrentAttribute=function(t){var e;return(e=!this.currentAttributes[t])?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)},f.prototype.canSetCurrentAttribute=function(t){return r(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)},f.prototype.canSetCurrentTextAttribute=function(){var t,e,n,i;if(t=this.getSelectedDocument()){for(e=0,n=(i=t.getAttachments()).length;n>e;e++)if(!i[e].hasContent())return!1;return!0}},f.prototype.canSetCurrentBlockAttribute=function(){var t;if(t=this.getBlock())return!t.isTerminalBlock()},f.prototype.setCurrentAttribute=function(t,e){return r(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())},f.prototype.setTextAttribute=function(e,n){var i,r;if(i=this.getSelectedRange())return i[0]!==i[1]?this.setDocument(this.document.addAttributeAtRange(e,n,i)):"href"===e?(r=t.Text.textForStringWithAttributes(n,{href:n}),this.insertText(r)):void 0},f.prototype.setBlockAttribute=function(t,e){var n;if(n=this.getSelectedRange())return this.canSetCurrentAttribute(t)?(this.getBlock(),this.setDocument(this.document.applyBlockAttributeAtRange(t,e,n)),this.setSelection(n)):void 0},f.prototype.removeCurrentAttribute=function(t){return r(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())},f.prototype.removeTextAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},f.prototype.removeBlockAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},f.prototype.canDecreaseNestingLevel=function(){var t;return(null!=(t=this.getBlock())?t.getNestingLevel():void 0)>0},f.prototype.canIncreaseNestingLevel=function(){var t,n,i;if(t=this.getBlock())return null!=(i=r(t.getLastNestableAttribute()))&&i.listAttribute?(n=this.getPreviousBlock())?e(n.getListItemAttributes(),t.getListItemAttributes()):void 0:t.getNestingLevel()>0},f.prototype.decreaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))},f.prototype.increaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))},f.prototype.canDecreaseBlockAttributeLevel=function(){var t;return(null!=(t=this.getBlock())?t.getAttributeLevel():void 0)>0},f.prototype.decreaseBlockAttributeLevel=function(){var t,e;return(t=null!=(e=this.getBlock())?e.getLastAttribute():void 0)?this.removeCurrentAttribute(t):void 0},f.prototype.decreaseListLevel=function(){var t,e,n,i,r,o;for(o=this.getSelectedRange()[0],n=r=this.document.locationFromPosition(o).index,t=this.getBlock().getAttributeLevel();(e=this.document.getBlockAtIndex(n+1))&&e.isListItem()&&e.getAttributeLevel()>t;)n++;return o=this.document.positionFromLocation({index:r,offset:0}),i=this.document.positionFromLocation({index:n,offset:0}),this.setDocument(this.document.removeLastListAttributeAtRange([o,i]))},f.prototype.updateCurrentAttributes=function(){var t,e,n,r,o,a;if(a=this.getSelectedRange({ignoreLock:!0})){for(e=this.document.getCommonAttributesAtRange(a),n=0,r=(o=i()).length;r>n;n++)e[t=o[n]]||this.canSetCurrentAttribute(t)||(e[t]=!1);if(!s(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}},f.prototype.getCurrentAttributes=function(){return n.call({},this.currentAttributes)},f.prototype.getCurrentTextAttributes=function(){var t,e,n,i;for(e in t={},n=this.currentAttributes)!1!==(i=n[e])&&o(e)&&(t[e]=i);return t},f.prototype.freezeSelection=function(){return this.setCurrentAttribute("frozen",!0)},f.prototype.thawSelection=function(){return this.removeCurrentAttribute("frozen")},f.prototype.hasFrozenSelection=function(){return this.hasCurrentAttribute("frozen")},f.proxyMethod("getSelectionManager().getPointRange"),f.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),f.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),f.proxyMethod("getSelectionManager().locationIsCursorTarget"),f.proxyMethod("getSelectionManager().selectionIsExpanded"),f.proxyMethod("delegate?.getSelectionManager"),f.prototype.setSelection=function(t){var e,n;return e=this.document.locationRangeFromRange(t),null!=(n=this.delegate)?n.compositionDidRequestChangingSelectionToLocationRange(e):void 0},f.prototype.getSelectedRange=function(){var t;return(t=this.getLocationRange())?this.document.rangeFromLocationRange(t):void 0},f.prototype.setSelectedRange=function(t){var e;return e=this.document.locationRangeFromRange(t),this.getSelectionManager().setLocationRange(e)},f.prototype.getPosition=function(){var t;return(t=this.getLocationRange())?this.document.positionFromLocation(t[0]):void 0},f.prototype.getLocationRange=function(t){var e,n;return null!=(e=null!=(n=this.targetLocationRange)?n:this.getSelectionManager().getLocationRange(t))?e:a({index:0,offset:0})},f.prototype.withTargetLocationRange=function(t,e){var n;this.targetLocationRange=t;try{n=e()}finally{this.targetLocationRange=null}return n},f.prototype.withTargetRange=function(t,e){var n;return n=this.document.locationRangeFromRange(t),this.withTargetLocationRange(n,e)},f.prototype.withTargetDOMRange=function(t,e){var n;return n=this.createLocationRangeFromDOMRange(t,{strict:!1}),this.withTargetLocationRange(n,e)},f.prototype.getExpandedRangeInDirection=function(t,e){var n,i,r,o;return i=(null!=e?e:{}).length,o=(r=this.getSelectedRange())[0],n=r[1],"backward"===t?i?o-=i:o=this.translateUTF16PositionFromOffset(o,-1):i?n+=i:n=this.translateUTF16PositionFromOffset(n,1),a([o,n])},f.prototype.shouldManageMovingCursorInDirection=function(t){var e;return!!this.editingAttachment||(e=this.getExpandedRangeInDirection(t),null!=this.getAttachmentAtRange(e))},f.prototype.moveCursorInDirection=function(t){var e,n,i,r;return this.editingAttachment?i=this.document.getRangeOfAttachment(this.editingAttachment):(r=this.getSelectedRange(),i=this.getExpandedRangeInDirection(t),n=!l(r,i)),this.setSelectedRange("backward"===t?i[0]:i[1]),n&&(e=this.getAttachmentAtRange(i))?this.editAttachment(e):void 0},f.prototype.expandSelectionInDirection=function(t,e){var n,i;return n=(null!=e?e:{}).length,i=this.getExpandedRangeInDirection(t,{length:n}),this.setSelectedRange(i)},f.prototype.expandSelectionForEditing=function(){return this.hasCurrentAttribute("href")?this.expandSelectionAroundCommonAttribute("href"):void 0},f.prototype.expandSelectionAroundCommonAttribute=function(t){var e,n;return e=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(t,e),this.setSelectedRange(n)},f.prototype.selectionContainsAttachments=function(){var t;return(null!=(t=this.getSelectedAttachments())?t.length:void 0)>0},f.prototype.selectionIsInCursorTarget=function(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())},f.prototype.positionIsCursorTarget=function(t){var e;return(e=this.document.locationFromPosition(t))?this.locationIsCursorTarget(e):void 0},f.prototype.positionIsBlockBreak=function(t){var e;return null!=(e=this.document.getPieceAtPosition(t))?e.isBlockBreak():void 0},f.prototype.getSelectedDocument=function(){var t;return(t=this.getSelectedRange())?this.document.getDocumentAtRange(t):void 0},f.prototype.getSelectedAttachments=function(){var t;return null!=(t=this.getSelectedDocument())?t.getAttachments():void 0},f.prototype.getAttachments=function(){return this.attachments.slice(0)},f.prototype.refreshAttachments=function(){var t,e,n,i,r,o,a,s,u,l,h,d;for(n=this.document.getAttachments(),t=(s=c(this.attachments,n)).added,h=s.removed,this.attachments=n,i=0,o=h.length;o>i;i++)(e=h[i]).delegate=null,null!=(u=this.delegate)&&"function"==typeof u.compositionDidRemoveAttachment&&u.compositionDidRemoveAttachment(e);for(d=[],r=0,a=t.length;a>r;r++)(e=t[r]).delegate=this,d.push(null!=(l=this.delegate)&&"function"==typeof l.compositionDidAddAttachment?l.compositionDidAddAttachment(e):void 0);return d},f.prototype.attachmentDidChangeAttributes=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidEditAttachment?e.compositionDidEditAttachment(t):void 0},f.prototype.attachmentDidChangePreviewURL=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeAttachmentPreviewURL?e.compositionDidChangeAttachmentPreviewURL(t):void 0},f.prototype.editAttachment=function(t,e){var n;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,null!=(n=this.delegate)&&"function"==typeof n.compositionDidStartEditingAttachment?n.compositionDidStartEditingAttachment(this.editingAttachment,e):void 0},f.prototype.stopEditingAttachment=function(){var t;if(this.editingAttachment)return null!=(t=this.delegate)&&"function"==typeof t.compositionDidStopEditingAttachment&&t.compositionDidStopEditingAttachment(this.editingAttachment),this.editingAttachment=null},f.prototype.updateAttributesForAttachment=function(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))},f.prototype.removeAttributeForAttachment=function(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))},f.prototype.breakFormattedBlock=function(e){var n,i,r,o,a;return i=e.document,n=e.block,a=[(o=e.startPosition)-1,o],n.getBlockBreakPosition()===e.startLocation.offset?(n.breaksOnReturn()&&"\n"===e.nextCharacter?o+=1:i=i.removeTextAtRange(a),a=[o,o]):"\n"===e.nextCharacter?"\n"===e.previousCharacter?a=[o-1,o+1]:(a=[o,o+1],o+=1):e.startLocation.offset-1!=0&&(o+=1),r=new t.Document([n.removeLastAttribute().copyWithoutText()]),this.setDocument(i.insertDocumentAtRange(r,a)),this.setSelection(o)},f.prototype.getPreviousBlock=function(){var t,e;return(e=this.getLocationRange())&&(t=e[0].index)>0?this.document.getBlockAtIndex(t-1):void 0},f.prototype.getBlock=function(){var t;return(t=this.getLocationRange())?this.document.getBlockAtIndex(t[0].index):void 0},f.prototype.getAttachmentAtRange=function(e){var n;return(n=this.document.getDocumentAtRange(e)).toString()===t.OBJECT_REPLACEMENT_CHARACTER+"\n"?n.getAttachments()[0]:void 0},f.prototype.notifyDelegateOfCurrentAttributesChange=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.compositionDidChangeCurrentAttributes?t.compositionDidChangeCurrentAttributes(this.currentAttributes):void 0},f.prototype.notifyDelegateOfInsertionAtRange=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionDidPerformInsertionAtRange?e.compositionDidPerformInsertionAtRange(t):void 0},f.prototype.translateUTF16PositionFromOffset=function(t,e){var n,i;return n=(i=this.document.toUTF16String()).offsetFromUCS2Offset(t),i.offsetToUCS2Offset(n+e)},f}(t.BasicObject)}.call(this),function(){var e={}.hasOwnProperty;t.UndoManager=function(t){function n(t){this.composition=t,this.undoEntries=[],this.redoEntries=[]}var i;return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.recordUndoEntry=function(t,e){var n,r,o,a,s;return r=(a=null!=e?e:{}).context,n=a.consolidatable,o=this.undoEntries.slice(-1)[0],n&&i(o,t,r)?void 0:(s=this.createEntry({description:t,context:r}),this.undoEntries.push(s),this.redoEntries=[])},n.prototype.undo=function(){var t,e;return(e=this.undoEntries.pop())?(t=this.createEntry(e),this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)):void 0},n.prototype.redo=function(){var t,e;return(t=this.redoEntries.pop())?(e=this.createEntry(t),this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)):void 0},n.prototype.canUndo=function(){return this.undoEntries.length>0},n.prototype.canRedo=function(){return this.redoEntries.length>0},n.prototype.createEntry=function(t){var e,n,i;return n=(i=null!=t?t:{}).description,e=i.context,{description:null!=n?n.toString():void 0,context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}},i=function(t,e,n){return(null!=t?t.description:void 0)===(null!=e?e.toString():void 0)&&(null!=t?t.context:void 0)===JSON.stringify(n)},n}(t.BasicObject)}.call(this),function(){var e;t.attachmentGalleryFilter=function(t){var n;return(n=new e(t)).perform(),n.getSnapshot()},e=function(){function t(t){this.document=t.document,this.selectedRange=t.selectedRange}var e;return e="attachmentGallery","presentation","gallery",t.prototype.perform=function(){return this.removeBlockAttribute(),this.applyBlockAttribute()},t.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.selectedRange}},t.prototype.removeBlockAttribute=function(){var t,n,i,r,o;for(o=[],t=0,n=(r=this.findRangesOfBlocks()).length;n>t;t++)i=r[t],o.push(this.document=this.document.removeAttributeAtRange(e,i));return o},t.prototype.applyBlockAttribute=function(){var t,n,i,r,o,a;for(i=0,a=[],t=0,n=(o=this.findRangesOfPieces()).length;n>t;t++)(r=o[t])[1]-r[0]>1&&(r[0]+=i,r[1]+=i,"\n"!==this.document.getCharacterAtPosition(r[1])&&(this.document=this.document.insertBlockBreakAtRange(r[1]),r[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),r[1]++,i++),0!==r[0]&&"\n"!==this.document.getCharacterAtPosition(r[0]-1)&&(this.document=this.document.insertBlockBreakAtRange(r[0]),r[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),r[0]++,i++),a.push(this.document=this.document.applyBlockAttributeAtRange(e,!0,r)));return a},t.prototype.findRangesOfBlocks=function(){return this.document.findRangesForBlockAttribute(e)},t.prototype.findRangesOfPieces=function(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})},t.prototype.moveSelectedRangeForward=function(){return this.selectedRange[0]+=1,this.selectedRange[1]+=1},t}()}.call(this),function(){t.Editor=function(){function e(e,i,r){var o,a;this.composition=e,this.selectionManager=i,this.element=r,this.insertFiles=(o=this.insertFiles,a=this,function(){return o.apply(a,arguments)}),this.undoManager=new t.UndoManager(this.composition),this.filters=n.slice(0)}var n;return n=[t.attachmentGalleryFilter],e.prototype.loadDocument=function(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})},e.prototype.loadHTML=function(e){return null==e&&(e=""),this.loadDocument(t.Document.fromHTML(e,{referenceElement:this.element}))},e.prototype.loadJSON=function(e){var n,i;return n=e.document,i=e.selectedRange,n=t.Document.fromJSON(n),this.loadSnapshot({document:n,selectedRange:i})},e.prototype.loadSnapshot=function(e){return this.undoManager=new t.UndoManager(this.composition),this.composition.loadSnapshot(e)},e.prototype.getDocument=function(){return this.composition.document},e.prototype.getSelectedDocument=function(){return this.composition.getSelectedDocument()},e.prototype.getSnapshot=function(){return this.composition.getSnapshot()},e.prototype.toJSON=function(){return this.getSnapshot()},e.prototype.deleteInDirection=function(t){return this.composition.deleteInDirection(t)},e.prototype.insertAttachment=function(t){return this.composition.insertAttachment(t)},e.prototype.insertAttachments=function(t){return this.composition.insertAttachments(t)},e.prototype.insertDocument=function(t){return this.composition.insertDocument(t)},e.prototype.insertFile=function(t){return this.composition.insertFile(t)},e.prototype.insertFiles=function(t){return this.composition.insertFiles(t)},e.prototype.insertHTML=function(t){return this.composition.insertHTML(t)},e.prototype.insertString=function(t){return this.composition.insertString(t)},e.prototype.insertText=function(t){return this.composition.insertText(t)},e.prototype.insertLineBreak=function(){return this.composition.insertLineBreak()},e.prototype.getSelectedRange=function(){return this.composition.getSelectedRange()},e.prototype.getPosition=function(){return this.composition.getPosition()},e.prototype.getClientRectAtPosition=function(t){var e;return e=this.getDocument().locationRangeFromRange([t,t+1]),this.selectionManager.getClientRectAtLocationRange(e)},e.prototype.expandSelectionInDirection=function(t){return this.composition.expandSelectionInDirection(t)},e.prototype.moveCursorInDirection=function(t){return this.composition.moveCursorInDirection(t)},e.prototype.setSelectedRange=function(t){return this.composition.setSelectedRange(t)},e.prototype.activateAttribute=function(t,e){return null==e&&(e=!0),this.composition.setCurrentAttribute(t,e)},e.prototype.attributeIsActive=function(t){return this.composition.hasCurrentAttribute(t)},e.prototype.canActivateAttribute=function(t){return this.composition.canSetCurrentAttribute(t)},e.prototype.deactivateAttribute=function(t){return this.composition.removeCurrentAttribute(t)},e.prototype.canDecreaseNestingLevel=function(){return this.composition.canDecreaseNestingLevel()},e.prototype.canIncreaseNestingLevel=function(){return this.composition.canIncreaseNestingLevel()},e.prototype.decreaseNestingLevel=function(){return this.canDecreaseNestingLevel()?this.composition.decreaseNestingLevel():void 0},e.prototype.increaseNestingLevel=function(){return this.canIncreaseNestingLevel()?this.composition.increaseNestingLevel():void 0},e.prototype.canRedo=function(){return this.undoManager.canRedo()},e.prototype.canUndo=function(){return this.undoManager.canUndo()},e.prototype.recordUndoEntry=function(t,e){var n,i,r;return i=(r=null!=e?e:{}).context,n=r.consolidatable,this.undoManager.recordUndoEntry(t,{context:i,consolidatable:n})},e.prototype.redo=function(){return this.canRedo()?this.undoManager.redo():void 0},e.prototype.undo=function(){return this.canUndo()?this.undoManager.undo():void 0},e}()}.call(this),function(){var e={}.hasOwnProperty;t.ManagedAttachment=function(t){function n(t,e){var n;this.attachmentManager=t,this.attachment=e,n=this.attachment,this.id=n.id,this.file=n.file}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.remove=function(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)},n.proxyMethod("attachment.getAttribute"),n.proxyMethod("attachment.hasAttribute"),n.proxyMethod("attachment.setAttribute"),n.proxyMethod("attachment.getAttributes"),n.proxyMethod("attachment.setAttributes"),n.proxyMethod("attachment.isPending"),n.proxyMethod("attachment.isPreviewable"),n.proxyMethod("attachment.getURL"),n.proxyMethod("attachment.getHref"),n.proxyMethod("attachment.getFilename"),n.proxyMethod("attachment.getFilesize"),n.proxyMethod("attachment.getFormattedFilesize"),n.proxyMethod("attachment.getExtension"),n.proxyMethod("attachment.getContentType"),n.proxyMethod("attachment.getFile"),n.proxyMethod("attachment.setFile"),n.proxyMethod("attachment.releaseFile"),n.proxyMethod("attachment.getUploadProgress"),n.proxyMethod("attachment.setUploadProgress"),n}(t.BasicObject)}.call(this),function(){var e={}.hasOwnProperty;t.AttachmentManager=function(n){function i(t){var e,n,i;for(null==t&&(t=[]),this.managedAttachments={},n=0,i=t.length;i>n;n++)e=t[n],this.manageAttachment(e)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),i.prototype.getAttachments=function(){var t,e,n,i;for(e in i=[],n=this.managedAttachments)t=n[e],i.push(t);return i},i.prototype.manageAttachment=function(e){var n,i;return null!=(n=this.managedAttachments)[i=e.id]?n[i]:n[i]=new t.ManagedAttachment(this,e)},i.prototype.attachmentIsManaged=function(t){return t.id in this.managedAttachments},i.prototype.requestRemovalOfAttachment=function(t){var e;return this.attachmentIsManaged(t)&&null!=(e=this.delegate)&&"function"==typeof e.attachmentManagerDidRequestRemovalOfAttachment?e.attachmentManagerDidRequestRemovalOfAttachment(t):void 0},i.prototype.unmanageAttachment=function(t){var e;return e=this.managedAttachments[t.id],delete this.managedAttachments[t.id],e},i}(t.BasicObject)}.call(this),function(){var e,n,i,r,o,a,s,u,l,c,h;e=t.elementContainsNode,n=t.findChildIndexOfNode,o=t.nodeIsBlockStart,a=t.nodeIsBlockStartComment,r=t.nodeIsBlockContainer,s=t.nodeIsCursorTarget,u=t.nodeIsEmptyTextNode,l=t.nodeIsTextNode,i=t.nodeIsAttachmentElement,c=t.tagName,h=t.walkTree,t.LocationMapper=function(){function t(t){this.element=t}var d,f,p,g;return t.prototype.findLocationFromContainerAndOffset=function(t,i,r){var a,u,c,d,g,m,v;for(m=(null!=r?r:{strict:!0}).strict,u=0,c=!1,d={index:0,offset:0},(a=this.findAttachmentElementParentForNode(t))&&(t=a.parentNode,i=n(a)),v=h(this.element,{usingFilter:p});v.nextNode();){if((g=v.currentNode)===t&&l(t)){s(g)||(d.offset+=i);break}if(g.parentNode===t){if(u++===i)break}else if(!e(t,g)&&u>0)break;o(g,{strict:m})?(c&&d.index++,d.offset=0,c=!0):d.offset+=f(g)}return d},t.prototype.findContainerAndOffsetFromLocation=function(t){var e,i,a,u,c;if(0===t.index&&0===t.offset){for(e=this.element,u=0;e.firstChild;)if(e=e.firstChild,r(e)){u=1;break}return[e,u]}if(i=(c=this.findNodeAndOffsetFromLocation(t))[0],a=c[1],i){if(l(i))0===f(i)?(e=i.parentNode.parentNode,u=n(i.parentNode),s(i,{name:"right"})&&u++):(e=i,u=t.offset-a);else{if(e=i.parentNode,!o(i.previousSibling)&&!r(e))for(;i===e.lastChild&&(i=e,e=e.parentNode,!r(e)););u=n(i),0!==t.offset&&u++}return[e,u]}},t.prototype.findNodeAndOffsetFromLocation=function(t){var e,n,i,r,o,a,u,c;for(u=0,n=0,i=(c=this.getSignificantNodesForIndex(t.index)).length;i>n;n++){if(e=c[n],r=f(e),t.offset<=u+r)if(l(e)){if(o=e,a=u,t.offset===a&&s(o))break}else o||(o=e,a=u);if((u+=r)>t.offset)break}return[o,a]},t.prototype.findAttachmentElementParentForNode=function(t){for(;t&&t!==this.element;){if(i(t))return t;t=t.parentNode}},t.prototype.getSignificantNodesForIndex=function(t){var e,n,i,r,o;for(i=[],o=h(this.element,{usingFilter:d}),r=!1;o.nextNode();)if(n=o.currentNode,a(n)){if(null!=e?e++:e=0,e===t)r=!0;else if(r)break}else r&&i.push(n);return i},f=function(t){return t.nodeType===Node.TEXT_NODE?s(t)?0:t.textContent.length:"br"===c(t)||i(t)?1:0},d=function(t){return g(t)===NodeFilter.FILTER_ACCEPT?p(t):NodeFilter.FILTER_REJECT},g=function(t){return u(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},p=function(t){return i(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},t}()}.call(this),function(){var e,n,i=[].slice;e=t.getDOMRange,n=t.setDOMRange,t.PointMapper=function(){function t(){}return t.prototype.createDOMRangeFromPoint=function(t){var i,r,o,a,s,u,l,c;if(l=t.x,c=t.y,document.caretPositionFromPoint)return o=(s=document.caretPositionFromPoint(l,c)).offsetNode,r=s.offset,(i=document.createRange()).setStart(o,r),i;if(document.caretRangeFromPoint)return document.caretRangeFromPoint(l,c);if(document.body.createTextRange){a=e();try{(u=document.body.createTextRange()).moveToPoint(l,c),u.select()}catch(t){}return i=e(),n(a),i}},t.prototype.getClientRectsForDOMRange=function(t){var e;return[(e=i.call(t.getClientRects()))[0],e[e.length-1]]},t}()}.call(this),function(){var e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t.getDOMRange,t.SelectionChangeObserver=function(t){function o(){this.run=n(this.run,this),this.update=n(this.update,this),this.selectionManagers=[]}var a;return function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(o,t),o.prototype.start=function(){return this.started?void 0:(this.started=!0,"onselectionchange"in document?document.addEventListener("selectionchange",this.update,!0):this.run())},o.prototype.stop=function(){return this.started?(this.started=!1,document.removeEventListener("selectionchange",this.update,!0)):void 0},o.prototype.registerSelectionManager=function(t){return r.call(this.selectionManagers,t)<0?(this.selectionManagers.push(t),this.start()):void 0},o.prototype.unregisterSelectionManager=function(t){var e;return this.selectionManagers=function(){var n,i,r,o;for(o=[],n=0,i=(r=this.selectionManagers).length;i>n;n++)(e=r[n])!==t&&o.push(e);return o}.call(this),0===this.selectionManagers.length?this.stop():void 0},o.prototype.notifySelectionManagersOfSelectionChange=function(){var t,e,n,i,r;for(i=[],t=0,e=(n=this.selectionManagers).length;e>t;t++)r=n[t],i.push(r.selectionDidChange());return i},o.prototype.update=function(){var t;return t=e(),a(t,this.domRange)?void 0:(this.domRange=t,this.notifySelectionManagersOfSelectionChange())},o.prototype.reset=function(){return this.domRange=null,this.update()},o.prototype.run=function(){return this.started?(this.update(),requestAnimationFrame(this.run)):void 0},a=function(t,e){return(null!=t?t.startContainer:void 0)===(null!=e?e.startContainer:void 0)&&(null!=t?t.startOffset:void 0)===(null!=e?e.startOffset:void 0)&&(null!=t?t.endContainer:void 0)===(null!=e?e.endContainer:void 0)&&(null!=t?t.endOffset:void 0)===(null!=e?e.endOffset:void 0)},o}(t.BasicObject),null==t.selectionChangeObserver&&(t.selectionChangeObserver=new t.SelectionChangeObserver)}.call(this),function(){var e,n,i,r,o,a,s,u,l,c,h=function(t,e){return function(){return t.apply(e,arguments)}},d={}.hasOwnProperty;i=t.getDOMSelection,n=t.getDOMRange,c=t.setDOMRange,e=t.elementContainsNode,a=t.nodeIsCursorTarget,o=t.innerElementIsActive,r=t.handleEvent,s=t.normalizeRange,u=t.rangeIsCollapsed,l=t.rangesAreEqual,t.SelectionManager=function(f){function p(e){this.element=e,this.selectionDidChange=h(this.selectionDidChange,this),this.didMouseDown=h(this.didMouseDown,this),this.locationMapper=new t.LocationMapper(this.element),this.pointMapper=new t.PointMapper,this.lockCount=0,r("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}return function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(p,f),p.prototype.getLocationRange=function(t){var e;return null==t&&(t={}),!1===t.strict?this.createLocationRangeFromDOMRange(n(),{strict:!1}):t.ignoreLock?this.currentLocationRange:null!=(e=this.lockedLocationRange)?e:this.currentLocationRange},p.prototype.setLocationRange=function(t){var e;if(!this.lockedLocationRange)return t=s(t),(e=this.createDOMRangeFromLocationRange(t))?(c(e),this.updateCurrentLocationRange(t)):void 0},p.prototype.setLocationRangeFromPointRange=function(t){var e,n;return t=s(t),n=this.getLocationAtPoint(t[0]),e=this.getLocationAtPoint(t[1]),this.setLocationRange([n,e])},p.prototype.getClientRectAtLocationRange=function(t){var e;return(e=this.createDOMRangeFromLocationRange(t))?this.getClientRectsForDOMRange(e)[1]:void 0},p.prototype.locationIsCursorTarget=function(t){var e,n;return e=(n=this.findNodeAndOffsetFromLocation(t))[0],n[1],a(e)},p.prototype.lock=function(){return 0==this.lockCount++?(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange()):void 0},p.prototype.unlock=function(){var t;return 0==--this.lockCount&&(t=this.lockedLocationRange,this.lockedLocationRange=null,null!=t)?this.setLocationRange(t):void 0},p.prototype.clearSelection=function(){var t;return null!=(t=i())?t.removeAllRanges():void 0},p.prototype.selectionIsCollapsed=function(){var t;return!0===(null!=(t=n())?t.collapsed:void 0)},p.prototype.selectionIsExpanded=function(){return!this.selectionIsCollapsed()},p.prototype.createLocationRangeFromDOMRange=function(t,e){var n,i;if(null!=t&&this.domRangeWithinElement(t)&&(i=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e)))return t.collapsed||(n=this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e)),s([i,n])},p.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),p.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),p.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),p.proxyMethod("pointMapper.createDOMRangeFromPoint"),p.proxyMethod("pointMapper.getClientRectsForDOMRange"),p.prototype.didMouseDown=function(){return this.pauseTemporarily()},p.prototype.pauseTemporarily=function(){var t,n,i,o,a;return this.paused=!0,a=this,n=function(){var t,n;for(a.paused=!1,clearTimeout(o),t=0,n=i.length;n>t;t++)i[t].destroy();return e(document,a.element)?a.selectionDidChange():void 0},o=setTimeout(n,200),i=function(){var e,i,o,a;for(a=[],e=0,i=(o=["mousemove","keydown"]).length;i>e;e++)t=o[e],a.push(r(t,{onElement:document,withCallback:n}));return a}()},p.prototype.selectionDidChange=function(){return this.paused||o(this.element)?void 0:this.updateCurrentLocationRange()},p.prototype.updateCurrentLocationRange=function(t){var e;return(null!=t?t:t=this.createLocationRangeFromDOMRange(n()))&&!l(t,this.currentLocationRange)?(this.currentLocationRange=t,null!=(e=this.delegate)&&"function"==typeof e.locationRangeDidChange?e.locationRangeDidChange(this.currentLocationRange.slice(0)):void 0):void 0},p.prototype.createDOMRangeFromLocationRange=function(t){var e,n,i,r;return i=this.findContainerAndOffsetFromLocation(t[0]),n=u(t)?i:null!=(r=this.findContainerAndOffsetFromLocation(t[1]))?r:i,null!=i&&null!=n?((e=document.createRange()).setStart.apply(e,i),e.setEnd.apply(e,n),e):void 0},p.prototype.getLocationAtPoint=function(t){var e,n;return(e=this.createDOMRangeFromPoint(t))&&null!=(n=this.createLocationRangeFromDOMRange(e))?n[0]:void 0},p.prototype.domRangeWithinElement=function(t){return t.collapsed?e(this.element,t.startContainer):e(this.element,t.startContainer)&&e(this.element,t.endContainer)},p}(t.BasicObject)}.call(this),function(){var e,n,i,r,o={}.hasOwnProperty,a=[].slice;i=t.rangeIsCollapsed,r=t.rangesAreEqual,n=t.objectsAreEqual,e=t.getBlockConfig,t.EditorController=function(s){function u(e){var n,i;this.editorElement=e.editorElement,n=e.document,i=e.html,this.selectionManager=new t.SelectionManager(this.editorElement),this.selectionManager.delegate=this,this.composition=new t.Composition,this.composition.delegate=this,this.attachmentManager=new t.AttachmentManager(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=new(t["Level"+t.config.input.getLevel()+"InputController"])(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new t.CompositionController(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new t.ToolbarController(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new t.Editor(this.composition,this.selectionManager,this.editorElement),null!=n?this.editor.loadDocument(n):this.editor.loadHTML(i)}var l;return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(u,s),u.prototype.registerSelectionManager=function(){return t.selectionChangeObserver.registerSelectionManager(this.selectionManager)},u.prototype.unregisterSelectionManager=function(){return t.selectionChangeObserver.unregisterSelectionManager(this.selectionManager)},u.prototype.render=function(){return this.compositionController.render()},u.prototype.reparse=function(){return this.composition.replaceHTML(this.editorElement.innerHTML)},u.prototype.compositionDidChangeDocument=function(){return this.notifyEditorElement("document-change"),this.handlingInput?void 0:this.render()},u.prototype.compositionDidChangeCurrentAttributes=function(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})},u.prototype.compositionDidPerformInsertionAtRange=function(t){return this.pasting?this.pastedRange=t:void 0},u.prototype.compositionShouldAcceptFile=function(t){return this.notifyEditorElement("file-accept",{file:t})},u.prototype.compositionDidAddAttachment=function(t){var e;return e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-add",{attachment:e})},u.prototype.compositionDidEditAttachment=function(t){var e;return this.compositionController.rerenderViewForObject(t),e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")},u.prototype.compositionDidChangeAttachmentPreviewURL=function(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")},u.prototype.compositionDidRemoveAttachment=function(t){var e;return e=this.attachmentManager.unmanageAttachment(t),this.notifyEditorElement("attachment-remove",{attachment:e})},u.prototype.compositionDidStartEditingAttachment=function(t,e){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,e),this.selectionManager.setLocationRange(this.attachmentLocationRange)},u.prototype.compositionDidStopEditingAttachment=function(){return this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null},u.prototype.compositionDidRequestChangingSelectionToLocationRange=function(t){return!this.loadingSnapshot||this.isFocused()?(this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()):void 0},u.prototype.compositionWillLoadSnapshot=function(){return this.loadingSnapshot=!0},u.prototype.compositionDidLoadSnapshot=function(){return this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1},u.prototype.getSelectionManager=function(){return this.selectionManager},u.proxyMethod("getSelectionManager().setLocationRange"),u.proxyMethod("getSelectionManager().getLocationRange"),u.prototype.attachmentManagerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},u.prototype.compositionControllerWillSyncDocumentView=function(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()},u.prototype.compositionControllerDidSyncDocumentView=function(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")},u.prototype.compositionControllerDidRender=function(){return null!=this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision},u.prototype.compositionControllerDidFocus=function(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")},u.prototype.compositionControllerDidBlur=function(){return this.notifyEditorElement("blur")},u.prototype.compositionControllerDidSelectAttachment=function(t,e){return this.toolbarController.hideDialog(),this.composition.editAttachment(t,e)},u.prototype.compositionControllerDidRequestDeselectingAttachment=function(t){var e,n;return e=null!=(n=this.attachmentLocationRange)?n:this.composition.document.getLocationRangeOfAttachment(t),this.selectionManager.setLocationRange(e[1])},u.prototype.compositionControllerWillUpdateAttachment=function(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})},u.prototype.compositionControllerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},u.prototype.inputControllerWillHandleInput=function(){return this.handlingInput=!0,this.requestedRender=!1},u.prototype.inputControllerDidRequestRender=function(){return this.requestedRender=!0},u.prototype.inputControllerDidHandleInput=function(){return this.handlingInput=!1,this.requestedRender?(this.requestedRender=!1,this.render()):void 0},u.prototype.inputControllerDidAllowUnhandledInput=function(){return this.notifyEditorElement("change")},u.prototype.inputControllerDidRequestReparse=function(){return this.reparse()},u.prototype.inputControllerWillPerformTyping=function(){return this.recordTypingUndoEntry()},u.prototype.inputControllerWillPerformFormatting=function(t){return this.recordFormattingUndoEntry(t)},u.prototype.inputControllerWillCutText=function(){return this.editor.recordUndoEntry("Cut")},u.prototype.inputControllerWillPaste=function(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})},u.prototype.inputControllerDidPaste=function(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})},u.prototype.inputControllerWillMoveText=function(){return this.editor.recordUndoEntry("Move")},u.prototype.inputControllerWillAttachFiles=function(){return this.editor.recordUndoEntry("Drop Files")},u.prototype.inputControllerWillPerformUndo=function(){return this.editor.undo()},u.prototype.inputControllerWillPerformRedo=function(){return this.editor.redo()},u.prototype.inputControllerDidReceiveKeyboardCommand=function(t){return this.toolbarController.applyKeyboardCommand(t)},u.prototype.inputControllerDidStartDrag=function(){return this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()},u.prototype.inputControllerDidReceiveDragOverPoint=function(t){return this.selectionManager.setLocationRangeFromPointRange(t)},u.prototype.inputControllerDidCancelDrag=function(){return this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null},u.prototype.locationRangeDidChange=function(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!r(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")},u.prototype.toolbarDidClickButton=function(){return this.getLocationRange()?void 0:this.setLocationRange({index:0,offset:0})},u.prototype.toolbarDidInvokeAction=function(t){return this.invokeAction(t)},u.prototype.toolbarDidToggleAttribute=function(t){return this.recordFormattingUndoEntry(t),this.composition.toggleCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},u.prototype.toolbarDidUpdateAttribute=function(t,e){return this.recordFormattingUndoEntry(t),this.composition.setCurrentAttribute(t,e),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},u.prototype.toolbarDidRemoveAttribute=function(t){return this.recordFormattingUndoEntry(t),this.composition.removeCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},u.prototype.toolbarWillShowDialog=function(){return this.composition.expandSelectionForEditing(),this.freezeSelection()},u.prototype.toolbarDidShowDialog=function(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})},u.prototype.toolbarDidHideDialog=function(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})},u.prototype.freezeSelection=function(){return this.selectionFrozen?void 0:(this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render())},u.prototype.thawSelection=function(){return this.selectionFrozen?(this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()):void 0},u.prototype.actions={undo:{test:function(){return this.editor.canUndo()},perform:function(){return this.editor.undo()}},redo:{test:function(){return this.editor.canRedo()},perform:function(){return this.editor.redo()}},link:{test:function(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:function(){return!0},perform:function(){return t.config.input.pickFiles(this.editor.insertFiles)}}},u.prototype.canInvokeAction=function(t){var e,n;return!!this.actionIsExternal(t)||!!(null!=(e=this.actions[t])&&null!=(n=e.test)?n.call(this):void 0)},u.prototype.invokeAction=function(t){var e,n;return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t}):null!=(e=this.actions[t])&&null!=(n=e.perform)?n.call(this):void 0},u.prototype.actionIsExternal=function(t){return/^x-./.test(t)},u.prototype.getCurrentActions=function(){var t,e;for(t in e={},this.actions)e[t]=this.canInvokeAction(t);return e},u.prototype.updateCurrentActions=function(){var t;return t=this.getCurrentActions(),n(t,this.currentActions)?void 0:(this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions}))},u.prototype.runEditorFilters=function(){var t,e,n,i,r,o,a,s;for(s=this.composition.getSnapshot(),n=0,i=(r=this.editor.filters).length;i>n;n++)e=r[n],t=s.document,a=s.selectedRange,null==(s=null!=(o=e.call(this.editor,s))?o:{}).document&&(s.document=t),null==s.selectedRange&&(s.selectedRange=a);return l(s,this.composition.getSnapshot())?void 0:this.composition.loadSnapshot(s)},l=function(t,e){return r(t.selectedRange,e.selectedRange)&&t.document.isEqualTo(e.document)},u.prototype.updateInputElement=function(){var e,n;return e=this.compositionController.getSerializableElement(),n=t.serializeToContentType(e,"text/html"),this.editorElement.setInputElementValue(n)},u.prototype.notifyEditorElement=function(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,e)},u.prototype.removeAttachment=function(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()},u.prototype.recordFormattingUndoEntry=function(t){var n,r;return n=e(t),r=this.selectionManager.getLocationRange(),n||!i(r)?this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0}):void 0},u.prototype.recordTypingUndoEntry=function(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})},u.prototype.getUndoContext=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],[this.getLocationContext(),this.getTimeContext()].concat(a.call(t))},u.prototype.getLocationContext=function(){var t;return t=this.selectionManager.getLocationRange(),i(t)?t[0].index:t},u.prototype.getTimeContext=function(){return t.config.undoInterval>0?Math.floor((new Date).getTime()/t.config.undoInterval):0},u.prototype.isFocused=function(){var t;return this.editorElement===(null!=(t=this.editorElement.ownerDocument)?t.activeElement:void 0)},u.prototype.isFocusedInvisibly=function(){return this.isFocused()&&!this.getLocationRange()},u}(t.Controller)}.call(this),function(){var e,n,i,r,o,a,s,u,l,c,h,d,f,p,g,m,v=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t.browser,a=t.makeElement,s=t.triggerEvent,r=t.handleEvent,o=t.handleEventOnce,i=t.findClosestElementFromNode,e=t.AttachmentView.attachmentSelector,t.registerElement("trix-editor",(p=0,l=function(t){return!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t?t.focus():void 0},g=function(t){return t.hasAttribute("contenteditable")?void 0:(t.setAttribute("contenteditable",""),o("focus",{onElement:t,withCallback:function(){return c(t)}}))},c=function(t){return d(t),m(t)},d=function(t){return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("enableObjectResizing"):void 0)?(document.execCommand("enableObjectResizing",!1,!1),r("mscontrolselect",{onElement:t,preventDefault:!0})):void 0},m=function(){var e;return!("function"==typeof document.queryCommandSupported?document.queryCommandSupported("DefaultParagraphSeparator"):void 0)||"div"!==(e=t.config.blockAttributes.default.tagName)&&"p"!==e?void 0:document.execCommand("DefaultParagraphSeparator",!1,e)},u=function(t){return t.hasAttribute("role")?void 0:t.setAttribute("role","textbox")},f=function(t){var e;if(!t.hasAttribute("aria-label")&&!t.hasAttribute("aria-labelledby"))return(e=function(){var e,n;return(n=function(){var n,i,r,o;for(o=[],n=0,i=(r=t.labels).length;i>n;n++)(e=r[n]).contains(t)||o.push(e.textContent);return o}().join(" "))?t.setAttribute("aria-label",n):t.removeAttribute("aria-label")})(),r("focus",{onElement:t,withCallback:e})},h=n.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"},{defaultCSS:"%t {\n  display: block;\n}\n\n%t:empty:not(:focus)::before {\n  content: attr(placeholder);\n  color: graytext;\n  cursor: text;\n  pointer-events: none;\n}\n\n%t a[contenteditable=false] {\n  cursor: text;\n}\n\n%t img {\n  max-width: 100%;\n  height: auto;\n}\n\n%t "+e+" figcaption textarea {\n  resize: none;\n}\n\n%t "+e+" figcaption textarea.trix-autoresize-clone {\n  position: absolute;\n  left: -9999px;\n  max-height: 0px;\n}\n\n%t "+e+" figcaption[data-trix-placeholder]:empty::before {\n  content: attr(data-trix-placeholder);\n  color: graytext;\n}\n\n%t [data-trix-cursor-target] {\n  display: "+h.display+" !important;\n  width: "+h.width+" !important;\n  padding: 0 !important;\n  margin: 0 !important;\n  border: none !important;\n}\n\n%t [data-trix-cursor-target=left] {\n  vertical-align: top !important;\n  margin-left: -1px !important;\n}\n\n%t [data-trix-cursor-target=right] {\n  vertical-align: bottom !important;\n  margin-right: -1px !important;\n}",trixId:{get:function(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++p),this.trixId)}},labels:{get:function(){var t,e,n;return e=[],this.id&&this.ownerDocument&&e.push.apply(e,this.ownerDocument.querySelectorAll("label[for='"+this.id+"']")),(t=i(this,{matchingSelector:"label"}))&&((n=t.control)===this||null===n)&&e.push(t),e}},toolbarElement:{get:function(){var t,e,n;return this.hasAttribute("toolbar")?null!=(e=this.ownerDocument)?e.getElementById(this.getAttribute("toolbar")):void 0:this.parentNode?(n="trix-toolbar-"+this.trixId,this.setAttribute("toolbar",n),t=a("trix-toolbar",{id:n}),this.parentNode.insertBefore(t,this),t):void 0}},inputElement:{get:function(){var t,e,n;return this.hasAttribute("input")?null!=(n=this.ownerDocument)?n.getElementById(this.getAttribute("input")):void 0:this.parentNode?(e="trix-input-"+this.trixId,this.setAttribute("input",e),t=a("input",{type:"hidden",id:e}),this.parentNode.insertBefore(t,this.nextElementSibling),t):void 0}},editor:{get:function(){var t;return null!=(t=this.editorController)?t.editor:void 0}},name:{get:function(){var t;return null!=(t=this.inputElement)?t.name:void 0}},value:{get:function(){var t;return null!=(t=this.inputElement)?t.value:void 0},set:function(t){var e;return this.defaultValue=t,null!=(e=this.editor)?e.loadHTML(this.defaultValue):void 0}},notify:function(t,e){return this.editorController?s("trix-"+t,{onElement:this,attributes:e}):void 0},setInputElementValue:function(t){var e;return null!=(e=this.inputElement)?e.value=t:void 0},initialize:function(){return this.hasAttribute("data-trix-internal")?void 0:(g(this),u(this),f(this))},connect:function(){return this.hasAttribute("data-trix-internal")?void 0:(this.editorController||(s("trix-before-initialize",{onElement:this}),this.editorController=new t.EditorController({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame((e=this,function(){return s("trix-initialize",{onElement:e})}))),this.editorController.registerSelectionManager(),this.registerResetListener(),this.registerClickListener(),l(this));var e},disconnect:function(){var t;return null!=(t=this.editorController)&&t.unregisterSelectionManager(),this.unregisterResetListener(),this.unregisterClickListener()},registerResetListener:function(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)},unregisterResetListener:function(){return window.removeEventListener("reset",this.resetListener,!1)},registerClickListener:function(){return this.clickListener=this.clickBubbled.bind(this),window.addEventListener("click",this.clickListener,!1)},unregisterClickListener:function(){return window.removeEventListener("click",this.clickListener,!1)},resetBubbled:function(t){var e;if(!t.defaultPrevented&&t.target===(null!=(e=this.inputElement)?e.form:void 0))return this.reset()},clickBubbled:function(t){var e;if(!(t.defaultPrevented||this.contains(t.target)||!(e=i(t.target,{matchingSelector:"label"}))||v.call(this.labels,e)<0))return this.focus()},reset:function(){return this.value=this.defaultValue}}))}.call(this),function(){}.call(this)}).call(this),"object"==uc(e)&&e.exports?e.exports=t:"function"==typeof define&&n.amdO&&define(t)}.call(t)})),xc=gc((function(t,e){/*! choices.js v10.1.0 |  2022 Josh Johnson | https://github.com/jshjohnson/Choices#readme */var i,r;i=window,r=function(){return function(){var t={282:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.clearChoices=e.activateChoices=e.filterChoices=e.addChoice=void 0;var i=n(883);e.addChoice=function(t){var e=t.value,n=t.label,r=t.id,o=t.groupId,a=t.disabled,s=t.elementId,u=t.customProperties,l=t.placeholder,c=t.keyCode;return{type:i.ACTION_TYPES.ADD_CHOICE,value:e,label:n,id:r,groupId:o,disabled:a,elementId:s,customProperties:u,placeholder:l,keyCode:c}},e.filterChoices=function(t){return{type:i.ACTION_TYPES.FILTER_CHOICES,results:t}},e.activateChoices=function(t){return void 0===t&&(t=!0),{type:i.ACTION_TYPES.ACTIVATE_CHOICES,active:t}},e.clearChoices=function(){return{type:i.ACTION_TYPES.CLEAR_CHOICES}}},783:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.addGroup=void 0;var i=n(883);e.addGroup=function(t){var e=t.value,n=t.id,r=t.active,o=t.disabled;return{type:i.ACTION_TYPES.ADD_GROUP,value:e,id:n,active:r,disabled:o}}},464:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.highlightItem=e.removeItem=e.addItem=void 0;var i=n(883);e.addItem=function(t){var e=t.value,n=t.label,r=t.id,o=t.choiceId,a=t.groupId,s=t.customProperties,u=t.placeholder,l=t.keyCode;return{type:i.ACTION_TYPES.ADD_ITEM,value:e,label:n,id:r,choiceId:o,groupId:a,customProperties:s,placeholder:u,keyCode:l}},e.removeItem=function(t,e){return{type:i.ACTION_TYPES.REMOVE_ITEM,id:t,choiceId:e}},e.highlightItem=function(t,e){return{type:i.ACTION_TYPES.HIGHLIGHT_ITEM,id:t,highlighted:e}}},137:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.setIsLoading=e.resetTo=e.clearAll=void 0;var i=n(883);e.clearAll=function(){return{type:i.ACTION_TYPES.CLEAR_ALL}},e.resetTo=function(t){return{type:i.ACTION_TYPES.RESET_TO,state:t}},e.setIsLoading=function(t){return{type:i.ACTION_TYPES.SET_IS_LOADING,isLoading:t}}},373:function(t,e,n){var i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(996)),a=r(n(221)),s=n(282),u=n(783),l=n(464),c=n(137),h=n(520),d=n(883),f=n(789),p=n(799),g=n(655),m=r(n(744)),v=r(n(686)),y="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,b={},_=function(){function t(e,n){var r=this;void 0===e&&(e="[data-choice]"),void 0===n&&(n={}),void 0===n.allowHTML&&console.warn("Deprecation warning: allowHTML will default to false in a future release. To render HTML in Choices, you will need to set it to true. Setting allowHTML will suppress this message."),this.config=o.default.all([f.DEFAULT_CONFIG,t.defaults.options,n],{arrayMerge:function(t,e){return i([],e,!0)}});var a=(0,p.diff)(this.config,f.DEFAULT_CONFIG);a.length&&console.warn("Unknown config option(s) passed",a.join(", "));var s="string"==typeof e?document.querySelector(e):e;if(!(s instanceof HTMLInputElement||s instanceof HTMLSelectElement))throw TypeError("Expected one of the following types text|select-one|select-multiple");if(this._isTextElement=s.type===d.TEXT_TYPE,this._isSelectOneElement=s.type===d.SELECT_ONE_TYPE,this._isSelectMultipleElement=s.type===d.SELECT_MULTIPLE_TYPE,this._isSelectElement=this._isSelectOneElement||this._isSelectMultipleElement,this.config.searchEnabled=this._isSelectMultipleElement||this.config.searchEnabled,["auto","always"].includes("".concat(this.config.renderSelectedChoices))||(this.config.renderSelectedChoices="auto"),n.addItemFilter&&"function"!=typeof n.addItemFilter){var u=n.addItemFilter instanceof RegExp?n.addItemFilter:new RegExp(n.addItemFilter);this.config.addItemFilter=u.test.bind(u)}if(this._isTextElement?this.passedElement=new h.WrappedInput({element:s,classNames:this.config.classNames,delimiter:this.config.delimiter}):this.passedElement=new h.WrappedSelect({element:s,classNames:this.config.classNames,template:function(t){return r._templates.option(t)}}),this.initialised=!1,this._store=new m.default,this._initialState=g.defaultState,this._currentState=g.defaultState,this._prevState=g.defaultState,this._currentValue="",this._canSearch=!!this.config.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=(0,p.generateId)(this.passedElement.element,"choices-"),this._direction=this.passedElement.dir,!this._direction){var l=window.getComputedStyle(this.passedElement.element).direction;l!==window.getComputedStyle(document.documentElement).direction&&(this._direction=l)}if(this._idNames={itemChoice:"item-choice"},this._isSelectElement&&(this._presetGroups=this.passedElement.optionGroups,this._presetOptions=this.passedElement.options),this._presetChoices=this.config.choices,this._presetItems=this.config.items,this.passedElement.value&&this._isTextElement){var c=this.passedElement.value.split(this.config.delimiter);this._presetItems=this._presetItems.concat(c)}if(this.passedElement.options&&this.passedElement.options.forEach((function(t){r._presetChoices.push({value:t.value,label:t.innerHTML,selected:!!t.selected,disabled:t.disabled||t.parentNode.disabled,placeholder:""===t.value||t.hasAttribute("placeholder"),customProperties:t.dataset["custom-properties"]})})),this._render=this._render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this._onSelectKey=this._onSelectKey.bind(this),this._onEnterKey=this._onEnterKey.bind(this),this._onEscapeKey=this._onEscapeKey.bind(this),this._onDirectionKey=this._onDirectionKey.bind(this),this._onDeleteKey=this._onDeleteKey.bind(this),this.passedElement.isActive)return this.config.silent||console.warn("Trying to initialise Choices on element already initialised",{element:e}),void(this.initialised=!0);this.init()}return Object.defineProperty(t,"defaults",{get:function(){return Object.preventExtensions({get options(){return b},get templates(){return v.default}})},enumerable:!1,configurable:!0}),t.prototype.init=function(){if(!this.initialised){this._createTemplates(),this._createElements(),this._createStructure(),this._store.subscribe(this._render),this._render(),this._addEventListeners(),(!this.config.addItems||this.passedElement.element.hasAttribute("disabled"))&&this.disable(),this.initialised=!0;var t=this.config.callbackOnInit;t&&"function"==typeof t&&t.call(this)}},t.prototype.destroy=function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this.clearStore(),this._isSelectElement&&(this.passedElement.options=this._presetOptions),this._templates=v.default,this.initialised=!1)},t.prototype.enable=function(){return this.passedElement.isDisabled&&this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this},t.prototype.disable=function(){return this.passedElement.isDisabled||this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this},t.prototype.highlightItem=function(t,e){if(void 0===e&&(e=!0),!t||!t.id)return this;var n=t.id,i=t.groupId,r=void 0===i?-1:i,o=t.value,a=void 0===o?"":o,s=t.label,u=void 0===s?"":s,c=r>=0?this._store.getGroupById(r):null;return this._store.dispatch((0,l.highlightItem)(n,!0)),e&&this.passedElement.triggerEvent(d.EVENTS.highlightItem,{id:n,value:a,label:u,groupValue:c&&c.value?c.value:null}),this},t.prototype.unhighlightItem=function(t){if(!t||!t.id)return this;var e=t.id,n=t.groupId,i=void 0===n?-1:n,r=t.value,o=void 0===r?"":r,a=t.label,s=void 0===a?"":a,u=i>=0?this._store.getGroupById(i):null;return this._store.dispatch((0,l.highlightItem)(e,!1)),this.passedElement.triggerEvent(d.EVENTS.highlightItem,{id:e,value:o,label:s,groupValue:u&&u.value?u.value:null}),this},t.prototype.highlightAll=function(){var t=this;return this._store.items.forEach((function(e){return t.highlightItem(e)})),this},t.prototype.unhighlightAll=function(){var t=this;return this._store.items.forEach((function(e){return t.unhighlightItem(e)})),this},t.prototype.removeActiveItemsByValue=function(t){var e=this;return this._store.activeItems.filter((function(e){return e.value===t})).forEach((function(t){return e._removeItem(t)})),this},t.prototype.removeActiveItems=function(t){var e=this;return this._store.activeItems.filter((function(e){return e.id!==t})).forEach((function(t){return e._removeItem(t)})),this},t.prototype.removeHighlightedItems=function(t){var e=this;return void 0===t&&(t=!1),this._store.highlightedActiveItems.forEach((function(n){e._removeItem(n),t&&e._triggerChange(n.value)})),this},t.prototype.showDropdown=function(t){var e=this;return this.dropdown.isActive||requestAnimationFrame((function(){e.dropdown.show(),e.containerOuter.open(e.dropdown.distanceFromTopWindow),!t&&e._canSearch&&e.input.focus(),e.passedElement.triggerEvent(d.EVENTS.showDropdown,{})})),this},t.prototype.hideDropdown=function(t){var e=this;return this.dropdown.isActive?(requestAnimationFrame((function(){e.dropdown.hide(),e.containerOuter.close(),!t&&e._canSearch&&(e.input.removeActiveDescendant(),e.input.blur()),e.passedElement.triggerEvent(d.EVENTS.hideDropdown,{})})),this):this},t.prototype.getValue=function(t){void 0===t&&(t=!1);var e=this._store.activeItems.reduce((function(e,n){var i=t?n.value:n;return e.push(i),e}),[]);return this._isSelectOneElement?e[0]:e},t.prototype.setValue=function(t){var e=this;return this.initialised?(t.forEach((function(t){return e._setChoiceOrItem(t)})),this):this},t.prototype.setChoiceByValue=function(t){var e=this;return!this.initialised||this._isTextElement||(Array.isArray(t)?t:[t]).forEach((function(t){return e._findAndSelectChoiceByValue(t)})),this},t.prototype.setChoices=function(t,e,n,i){var r=this;if(void 0===t&&(t=[]),void 0===e&&(e="value"),void 0===n&&(n="label"),void 0===i&&(i=!1),!this.initialised)throw new ReferenceError("setChoices was called on a non-initialized instance of Choices");if(!this._isSelectElement)throw new TypeError("setChoices can't be used with INPUT based Choices");if("string"!=typeof e||!e)throw new TypeError("value parameter must be a name of 'value' field in passed objects");if(i&&this.clearChoices(),"function"==typeof t){var o=t(this);if("function"==typeof Promise&&o instanceof Promise)return new Promise((function(t){return requestAnimationFrame(t)})).then((function(){return r._handleLoadingState(!0)})).then((function(){return o})).then((function(t){return r.setChoices(t,e,n,i)})).catch((function(t){r.config.silent||console.error(t)})).then((function(){return r._handleLoadingState(!1)})).then((function(){return r}));if(!Array.isArray(o))throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(uc(o)));return this.setChoices(o,e,n,!1)}if(!Array.isArray(t))throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices");return this.containerOuter.removeLoadingState(),this._startLoading(),t.forEach((function(t){if(t.choices)r._addGroup({id:t.id?parseInt("".concat(t.id),10):null,group:t,valueKey:e,labelKey:n});else{var i=t;r._addChoice({value:i[e],label:i[n],isSelected:!!i.selected,isDisabled:!!i.disabled,placeholder:!!i.placeholder,customProperties:i.customProperties})}})),this._stopLoading(),this},t.prototype.clearChoices=function(){return this._store.dispatch((0,s.clearChoices)()),this},t.prototype.clearStore=function(){return this._store.dispatch((0,c.clearAll)()),this},t.prototype.clearInput=function(){var t=!this._isSelectOneElement;return this.input.clear(t),!this._isTextElement&&this._canSearch&&(this._isSearching=!1,this._store.dispatch((0,s.activateChoices)(!0))),this},t.prototype._render=function(){if(!this._store.isLoading()){this._currentState=this._store.state;var t=this._currentState.choices!==this._prevState.choices||this._currentState.groups!==this._prevState.groups||this._currentState.items!==this._prevState.items,e=this._isSelectElement,n=this._currentState.items!==this._prevState.items;t&&(e&&this._renderChoices(),n&&this._renderItems(),this._prevState=this._currentState)}},t.prototype._renderChoices=function(){var t=this,e=this._store,n=e.activeGroups,i=e.activeChoices,r=document.createDocumentFragment();if(this.choiceList.clear(),this.config.resetScrollPosition&&requestAnimationFrame((function(){return t.choiceList.scrollToTop()})),n.length>=1&&!this._isSearching){var o=i.filter((function(t){return!0===t.placeholder&&-1===t.groupId}));o.length>=1&&(r=this._createChoicesFragment(o,r)),r=this._createGroupsFragment(n,i,r)}else i.length>=1&&(r=this._createChoicesFragment(i,r));if(r.childNodes&&r.childNodes.length>0){var a=this._store.activeItems,s=this._canAddItem(a,this.input.value);if(s.response)this.choiceList.append(r),this._highlightChoice();else{var u=this._getTemplate("notice",s.notice);this.choiceList.append(u)}}else{var l=void 0;u=void 0,this._isSearching?(u="function"==typeof this.config.noResultsText?this.config.noResultsText():this.config.noResultsText,l=this._getTemplate("notice",u,"no-results")):(u="function"==typeof this.config.noChoicesText?this.config.noChoicesText():this.config.noChoicesText,l=this._getTemplate("notice",u,"no-choices")),this.choiceList.append(l)}},t.prototype._renderItems=function(){var t=this._store.activeItems||[];this.itemList.clear();var e=this._createItemsFragment(t);e.childNodes&&this.itemList.append(e)},t.prototype._createGroupsFragment=function(t,e,n){var i=this;return void 0===n&&(n=document.createDocumentFragment()),this.config.shouldSort&&t.sort(this.config.sorter),t.forEach((function(t){var r=function(t){return e.filter((function(e){return i._isSelectOneElement?e.groupId===t.id:e.groupId===t.id&&("always"===i.config.renderSelectedChoices||!e.selected)}))}(t);if(r.length>=1){var o=i._getTemplate("choiceGroup",t);n.appendChild(o),i._createChoicesFragment(r,n,!0)}})),n},t.prototype._createChoicesFragment=function(t,e,n){var r=this;void 0===e&&(e=document.createDocumentFragment()),void 0===n&&(n=!1);var o=this.config,a=o.renderSelectedChoices,s=o.searchResultLimit,u=o.renderChoiceLimit,l=this._isSearching?p.sortByScore:this.config.sorter,c=function(t){if("auto"!==a||r._isSelectOneElement||!t.selected){var n=r._getTemplate("choice",t,r.config.itemSelectText);e.appendChild(n)}},h=t;"auto"!==a||this._isSelectOneElement||(h=t.filter((function(t){return!t.selected})));var d=h.reduce((function(t,e){return e.placeholder?t.placeholderChoices.push(e):t.normalChoices.push(e),t}),{placeholderChoices:[],normalChoices:[]}),f=d.placeholderChoices,g=d.normalChoices;(this.config.shouldSort||this._isSearching)&&g.sort(l);var m=h.length,v=this._isSelectOneElement?i(i([],f,!0),g,!0):g;this._isSearching?m=s:u&&u>0&&!n&&(m=u);for(var y=0;y<m;y+=1)v[y]&&c(v[y]);return e},t.prototype._createItemsFragment=function(t,e){var n=this;void 0===e&&(e=document.createDocumentFragment());var i=this.config,r=i.shouldSortItems,o=i.sorter,a=i.removeItemButton;return r&&!this._isSelectOneElement&&t.sort(o),this._isTextElement?this.passedElement.value=t.map((function(t){return t.value})).join(this.config.delimiter):this.passedElement.options=t,t.forEach((function(t){var i=n._getTemplate("item",t,a);e.appendChild(i)})),e},t.prototype._triggerChange=function(t){null!=t&&this.passedElement.triggerEvent(d.EVENTS.change,{value:t})},t.prototype._selectPlaceholderChoice=function(t){this._addItem({value:t.value,label:t.label,choiceId:t.id,groupId:t.groupId,placeholder:t.placeholder}),this._triggerChange(t.value)},t.prototype._handleButtonAction=function(t,e){if(t&&e&&this.config.removeItems&&this.config.removeItemButton){var n=e.parentNode&&e.parentNode.dataset.id,i=n&&t.find((function(t){return t.id===parseInt(n,10)}));i&&(this._removeItem(i),this._triggerChange(i.value),this._isSelectOneElement&&this._store.placeholderChoice&&this._selectPlaceholderChoice(this._store.placeholderChoice))}},t.prototype._handleItemAction=function(t,e,n){var i=this;if(void 0===n&&(n=!1),t&&e&&this.config.removeItems&&!this._isSelectOneElement){var r=e.dataset.id;t.forEach((function(t){t.id!==parseInt("".concat(r),10)||t.highlighted?!n&&t.highlighted&&i.unhighlightItem(t):i.highlightItem(t)})),this.input.focus()}},t.prototype._handleChoiceAction=function(t,e){if(t&&e){var n=e.dataset.id,i=n&&this._store.getChoiceById(n);if(i){var r=t[0]&&t[0].keyCode?t[0].keyCode:void 0,o=this.dropdown.isActive;i.keyCode=r,this.passedElement.triggerEvent(d.EVENTS.choice,{choice:i}),i.selected||i.disabled||this._canAddItem(t,i.value).response&&(this._addItem({value:i.value,label:i.label,choiceId:i.id,groupId:i.groupId,customProperties:i.customProperties,placeholder:i.placeholder,keyCode:i.keyCode}),this._triggerChange(i.value)),this.clearInput(),o&&this._isSelectOneElement&&(this.hideDropdown(!0),this.containerOuter.focus())}}},t.prototype._handleBackspace=function(t){if(this.config.removeItems&&t){var e=t[t.length-1],n=t.some((function(t){return t.highlighted}));this.config.editItems&&!n&&e?(this.input.value=e.value,this.input.setWidth(),this._removeItem(e),this._triggerChange(e.value)):(n||this.highlightItem(e,!1),this.removeHighlightedItems(!0))}},t.prototype._startLoading=function(){this._store.dispatch((0,c.setIsLoading)(!0))},t.prototype._stopLoading=function(){this._store.dispatch((0,c.setIsLoading)(!1))},t.prototype._handleLoadingState=function(t){void 0===t&&(t=!0);var e=this.itemList.getChild(".".concat(this.config.classNames.placeholder));t?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?e?e.innerHTML=this.config.loadingText:(e=this._getTemplate("placeholder",this.config.loadingText))&&this.itemList.append(e):this.input.placeholder=this.config.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement?e&&(e.innerHTML=this._placeholderValue||""):this.input.placeholder=this._placeholderValue||"")},t.prototype._handleSearch=function(t){if(this.input.isFocussed){var e=this._store.choices,n=this.config,i=n.searchFloor,r=n.searchChoices,o=e.some((function(t){return!t.active}));if(null!=t&&t.length>=i){var a=r?this._searchChoices(t):0;this.passedElement.triggerEvent(d.EVENTS.search,{value:t,resultCount:a})}else o&&(this._isSearching=!1,this._store.dispatch((0,s.activateChoices)(!0)))}},t.prototype._canAddItem=function(t,e){var n=!0,i="function"==typeof this.config.addItemText?this.config.addItemText(e):this.config.addItemText;if(!this._isSelectOneElement){var r=(0,p.existsInArray)(t,e);this.config.maxItemCount>0&&this.config.maxItemCount<=t.length&&(n=!1,i="function"==typeof this.config.maxItemText?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),!this.config.duplicateItemsAllowed&&r&&n&&(n=!1,i="function"==typeof this.config.uniqueItemText?this.config.uniqueItemText(e):this.config.uniqueItemText),this._isTextElement&&this.config.addItems&&n&&"function"==typeof this.config.addItemFilter&&!this.config.addItemFilter(e)&&(n=!1,i="function"==typeof this.config.customAddItemText?this.config.customAddItemText(e):this.config.customAddItemText)}return{response:n,notice:i}},t.prototype._searchChoices=function(t){var e="string"==typeof t?t.trim():t,n="string"==typeof this._currentValue?this._currentValue.trim():this._currentValue;if(e.length<1&&e==="".concat(n," "))return 0;var r=this._store.searchableChoices,o=e,u=Object.assign(this.config.fuseOptions,{keys:i([],this.config.searchFields,!0),includeMatches:!0}),l=new a.default(r,u).search(o);return this._currentValue=e,this._highlightPosition=0,this._isSearching=!0,this._store.dispatch((0,s.filterChoices)(l)),l.length},t.prototype._addEventListeners=function(){var t=document.documentElement;t.addEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.addEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.addEventListener("mousedown",this._onMouseDown,!0),t.addEventListener("click",this._onClick,{passive:!0}),t.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:!0}),this._isSelectOneElement&&(this.containerOuter.element.addEventListener("focus",this._onFocus,{passive:!0}),this.containerOuter.element.addEventListener("blur",this._onBlur,{passive:!0})),this.input.element.addEventListener("keyup",this._onKeyUp,{passive:!0}),this.input.element.addEventListener("focus",this._onFocus,{passive:!0}),this.input.element.addEventListener("blur",this._onBlur,{passive:!0}),this.input.element.form&&this.input.element.form.addEventListener("reset",this._onFormReset,{passive:!0}),this.input.addEventListeners()},t.prototype._removeEventListeners=function(){var t=document.documentElement;t.removeEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.removeEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.removeEventListener("mousedown",this._onMouseDown,!0),t.removeEventListener("click",this._onClick),t.removeEventListener("touchmove",this._onTouchMove),this.dropdown.element.removeEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(this.containerOuter.element.removeEventListener("focus",this._onFocus),this.containerOuter.element.removeEventListener("blur",this._onBlur)),this.input.element.removeEventListener("keyup",this._onKeyUp),this.input.element.removeEventListener("focus",this._onFocus),this.input.element.removeEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()},t.prototype._onKeyDown=function(t){var e=t.keyCode,n=this._store.activeItems,i=this.input.isFocussed,r=this.dropdown.isActive,o=this.itemList.hasChildren(),a=String.fromCharCode(e),s=/[a-zA-Z0-9-_ ]/.test(a),u=d.KEY_CODES.BACK_KEY,l=d.KEY_CODES.DELETE_KEY,c=d.KEY_CODES.ENTER_KEY,h=d.KEY_CODES.A_KEY,f=d.KEY_CODES.ESC_KEY,p=d.KEY_CODES.UP_KEY,g=d.KEY_CODES.DOWN_KEY,m=d.KEY_CODES.PAGE_UP_KEY,v=d.KEY_CODES.PAGE_DOWN_KEY;switch(this._isTextElement||r||!s||(this.showDropdown(),this.input.isFocussed||(this.input.value+=a.toLowerCase())),e){case h:return this._onSelectKey(t,o);case c:return this._onEnterKey(t,n,r);case f:return this._onEscapeKey(r);case p:case m:case g:case v:return this._onDirectionKey(t,r);case l:case u:return this._onDeleteKey(t,n,i)}},t.prototype._onKeyUp=function(t){var e=t.target,n=t.keyCode,i=this.input.value,r=this._store.activeItems,o=this._canAddItem(r,i),a=d.KEY_CODES.BACK_KEY,u=d.KEY_CODES.DELETE_KEY;if(this._isTextElement)if(o.notice&&i){var l=this._getTemplate("notice",o.notice);this.dropdown.element.innerHTML=l.outerHTML,this.showDropdown(!0)}else this.hideDropdown(!0);else{var c=(n===a||n===u)&&e&&!e.value,h=!this._isTextElement&&this._isSearching,f=this._canSearch&&o.response;c&&h?(this._isSearching=!1,this._store.dispatch((0,s.activateChoices)(!0))):f&&this._handleSearch(this.input.rawValue)}this._canSearch=this.config.searchEnabled},t.prototype._onSelectKey=function(t,e){var n=t.ctrlKey,i=t.metaKey;(n||i)&&e&&(this._canSearch=!1,this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement&&this.highlightAll())},t.prototype._onEnterKey=function(t,e,n){var i=t.target,r=d.KEY_CODES.ENTER_KEY,o=i&&i.hasAttribute("data-button");if(this._isTextElement&&i&&i.value){var a=this.input.value;this._canAddItem(e,a).response&&(this.hideDropdown(!0),this._addItem({value:a}),this._triggerChange(a),this.clearInput())}if(o&&(this._handleButtonAction(e,i),t.preventDefault()),n){var s=this.dropdown.getChild(".".concat(this.config.classNames.highlightedState));s&&(e[0]&&(e[0].keyCode=r),this._handleChoiceAction(e,s)),t.preventDefault()}else this._isSelectOneElement&&(this.showDropdown(),t.preventDefault())},t.prototype._onEscapeKey=function(t){t&&(this.hideDropdown(!0),this.containerOuter.focus())},t.prototype._onDirectionKey=function(t,e){var n=t.keyCode,i=t.metaKey,r=d.KEY_CODES.DOWN_KEY,o=d.KEY_CODES.PAGE_UP_KEY,a=d.KEY_CODES.PAGE_DOWN_KEY;if(e||this._isSelectOneElement){this.showDropdown(),this._canSearch=!1;var s=n===r||n===a?1:-1,u="[data-choice-selectable]",l=void 0;if(i||n===a||n===o)l=s>0?this.dropdown.element.querySelector("".concat(u,":last-of-type")):this.dropdown.element.querySelector(u);else{var c=this.dropdown.element.querySelector(".".concat(this.config.classNames.highlightedState));l=c?(0,p.getAdjacentEl)(c,u,s):this.dropdown.element.querySelector(u)}l&&((0,p.isScrolledIntoView)(l,this.choiceList.element,s)||this.choiceList.scrollToChildElement(l,s),this._highlightChoice(l)),t.preventDefault()}},t.prototype._onDeleteKey=function(t,e,n){var i=t.target;this._isSelectOneElement||i.value||!n||(this._handleBackspace(e),t.preventDefault())},t.prototype._onTouchMove=function(){this._wasTap&&(this._wasTap=!1)},t.prototype._onTouchEnd=function(t){var e=(t||t.touches[0]).target;this._wasTap&&this.containerOuter.element.contains(e)&&((e===this.containerOuter.element||e===this.containerInner.element)&&(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown()),t.stopPropagation()),this._wasTap=!0},t.prototype._onMouseDown=function(t){var e=t.target;if(e instanceof HTMLElement){if(y&&this.choiceList.element.contains(e)){var n=this.choiceList.element.firstElementChild,i="ltr"===this._direction?t.offsetX>=n.offsetWidth:t.offsetX<n.offsetLeft;this._isScrollingOnIe=i}if(e!==this.input.element){var r=e.closest("[data-button],[data-item],[data-choice]");if(r instanceof HTMLElement){var o=t.shiftKey,a=this._store.activeItems,s=r.dataset;"button"in s?this._handleButtonAction(a,r):"item"in s?this._handleItemAction(a,r,o):"choice"in s&&this._handleChoiceAction(a,r)}t.preventDefault()}}},t.prototype._onMouseOver=function(t){var e=t.target;e instanceof HTMLElement&&"choice"in e.dataset&&this._highlightChoice(e)},t.prototype._onClick=function(t){var e=t.target;this.containerOuter.element.contains(e)?this.dropdown.isActive||this.containerOuter.isDisabled?this._isSelectOneElement&&e!==this.input.element&&!this.dropdown.element.contains(e)&&this.hideDropdown():this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),this.containerOuter.focus()):(this._store.highlightedActiveItems.length>0&&this.unhighlightAll(),this.containerOuter.removeFocusState(),this.hideDropdown(!0))},t.prototype._onFocus=function(t){var e,n=this,i=t.target;i&&this.containerOuter.element.contains(i)&&((e={})[d.TEXT_TYPE]=function(){i===n.input.element&&n.containerOuter.addFocusState()},e[d.SELECT_ONE_TYPE]=function(){n.containerOuter.addFocusState(),i===n.input.element&&n.showDropdown(!0)},e[d.SELECT_MULTIPLE_TYPE]=function(){i===n.input.element&&(n.showDropdown(!0),n.containerOuter.addFocusState())},e)[this.passedElement.element.type]()},t.prototype._onBlur=function(t){var e,n=this,i=t.target;if(i&&this.containerOuter.element.contains(i)&&!this._isScrollingOnIe){var r=this._store.activeItems.some((function(t){return t.highlighted}));((e={})[d.TEXT_TYPE]=function(){i===n.input.element&&(n.containerOuter.removeFocusState(),r&&n.unhighlightAll(),n.hideDropdown(!0))},e[d.SELECT_ONE_TYPE]=function(){n.containerOuter.removeFocusState(),(i===n.input.element||i===n.containerOuter.element&&!n._canSearch)&&n.hideDropdown(!0)},e[d.SELECT_MULTIPLE_TYPE]=function(){i===n.input.element&&(n.containerOuter.removeFocusState(),n.hideDropdown(!0),r&&n.unhighlightAll())},e)[this.passedElement.element.type]()}else this._isScrollingOnIe=!1,this.input.element.focus()},t.prototype._onFormReset=function(){this._store.dispatch((0,c.resetTo)(this._initialState))},t.prototype._highlightChoice=function(t){var e=this;void 0===t&&(t=null);var n=Array.from(this.dropdown.element.querySelectorAll("[data-choice-selectable]"));if(n.length){var i=t;Array.from(this.dropdown.element.querySelectorAll(".".concat(this.config.classNames.highlightedState))).forEach((function(t){t.classList.remove(e.config.classNames.highlightedState),t.setAttribute("aria-selected","false")})),i?this._highlightPosition=n.indexOf(i):(i=n.length>this._highlightPosition?n[this._highlightPosition]:n[n.length-1])||(i=n[0]),i.classList.add(this.config.classNames.highlightedState),i.setAttribute("aria-selected","true"),this.passedElement.triggerEvent(d.EVENTS.highlightChoice,{el:i}),this.dropdown.isActive&&(this.input.setActiveDescendant(i.id),this.containerOuter.setActiveDescendant(i.id))}},t.prototype._addItem=function(t){var e=t.value,n=t.label,i=void 0===n?null:n,r=t.choiceId,o=void 0===r?-1:r,a=t.groupId,s=void 0===a?-1:a,u=t.customProperties,c=void 0===u?{}:u,h=t.placeholder,f=void 0!==h&&h,p=t.keyCode,g=void 0===p?-1:p,m="string"==typeof e?e.trim():e,v=this._store.items,y=i||m,b=o||-1,_=s>=0?this._store.getGroupById(s):null,E=v?v.length+1:1;this.config.prependValue&&(m=this.config.prependValue+m.toString()),this.config.appendValue&&(m+=this.config.appendValue.toString()),this._store.dispatch((0,l.addItem)({value:m,label:y,id:E,choiceId:b,groupId:s,customProperties:c,placeholder:f,keyCode:g})),this._isSelectOneElement&&this.removeActiveItems(E),this.passedElement.triggerEvent(d.EVENTS.addItem,{id:E,value:m,label:y,customProperties:c,groupValue:_&&_.value?_.value:null,keyCode:g})},t.prototype._removeItem=function(t){var e=t.id,n=t.value,i=t.label,r=t.customProperties,o=t.choiceId,a=t.groupId,s=a&&a>=0?this._store.getGroupById(a):null;e&&o&&(this._store.dispatch((0,l.removeItem)(e,o)),this.passedElement.triggerEvent(d.EVENTS.removeItem,{id:e,value:n,label:i,customProperties:r,groupValue:s&&s.value?s.value:null}))},t.prototype._addChoice=function(t){var e=t.value,n=t.label,i=void 0===n?null:n,r=t.isSelected,o=void 0!==r&&r,a=t.isDisabled,u=void 0!==a&&a,l=t.groupId,c=void 0===l?-1:l,h=t.customProperties,d=void 0===h?{}:h,f=t.placeholder,p=void 0!==f&&f,g=t.keyCode,m=void 0===g?-1:g;if(null!=e){var v=this._store.choices,y=i||e,b=v?v.length+1:1,_="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(b);this._store.dispatch((0,s.addChoice)({id:b,groupId:c,elementId:_,value:e,label:y,disabled:u,customProperties:d,placeholder:p,keyCode:m})),o&&this._addItem({value:e,label:y,choiceId:b,customProperties:d,placeholder:p,keyCode:m})}},t.prototype._addGroup=function(t){var e=this,n=t.group,i=t.id,r=t.valueKey,o=void 0===r?"value":r,a=t.labelKey,s=void 0===a?"label":a,l=(0,p.isType)("Object",n)?n.choices:Array.from(n.getElementsByTagName("OPTION")),c=i||Math.floor((new Date).valueOf()*Math.random()),h=!!n.disabled&&n.disabled;l?(this._store.dispatch((0,u.addGroup)({value:n.label,id:c,active:!0,disabled:h})),l.forEach((function(t){var n=t.disabled||t.parentNode&&t.parentNode.disabled;e._addChoice({value:t[o],label:(0,p.isType)("Object",t)?t[s]:t.innerHTML,isSelected:t.selected,isDisabled:n,groupId:c,customProperties:t.customProperties,placeholder:t.placeholder})}))):this._store.dispatch((0,u.addGroup)({value:n.label,id:n.id,active:!1,disabled:n.disabled}))},t.prototype._getTemplate=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(e=this._templates[t]).call.apply(e,i([this,this.config],n,!1))},t.prototype._createTemplates=function(){var t=this.config.callbackOnCreateTemplates,e={};t&&"function"==typeof t&&(e=t.call(this,p.strToEl)),this._templates=(0,o.default)(v.default,e)},t.prototype._createElements=function(){this.containerOuter=new h.Container({element:this._getTemplate("containerOuter",this._direction,this._isSelectElement,this._isSelectOneElement,this.config.searchEnabled,this.passedElement.element.type,this.config.labelId),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.containerInner=new h.Container({element:this._getTemplate("containerInner"),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.input=new h.Input({element:this._getTemplate("input",this._placeholderValue),classNames:this.config.classNames,type:this.passedElement.element.type,preventPaste:!this.config.paste}),this.choiceList=new h.List({element:this._getTemplate("choiceList",this._isSelectOneElement)}),this.itemList=new h.List({element:this._getTemplate("itemList",this._isSelectOneElement)}),this.dropdown=new h.Dropdown({element:this._getTemplate("dropdown"),classNames:this.config.classNames,type:this.passedElement.element.type})},t.prototype._createStructure=function(){this.passedElement.conceal(),this.containerInner.wrap(this.passedElement.element),this.containerOuter.wrap(this.containerInner.element),this._isSelectOneElement?this.input.placeholder=this.config.searchPlaceholderValue||"":this._placeholderValue&&(this.input.placeholder=this._placeholderValue,this.input.setWidth()),this.containerOuter.element.appendChild(this.containerInner.element),this.containerOuter.element.appendChild(this.dropdown.element),this.containerInner.element.appendChild(this.itemList.element),this._isTextElement||this.dropdown.element.appendChild(this.choiceList.element),this._isSelectOneElement?this.config.searchEnabled&&this.dropdown.element.insertBefore(this.input.element,this.dropdown.element.firstChild):this.containerInner.element.appendChild(this.input.element),this._isSelectElement&&(this._highlightPosition=0,this._isSearching=!1,this._startLoading(),this._presetGroups.length?this._addPredefinedGroups(this._presetGroups):this._addPredefinedChoices(this._presetChoices),this._stopLoading()),this._isTextElement&&this._addPredefinedItems(this._presetItems)},t.prototype._addPredefinedGroups=function(t){var e=this,n=this.passedElement.placeholderOption;n&&n.parentNode&&"SELECT"===n.parentNode.tagName&&this._addChoice({value:n.value,label:n.innerHTML,isSelected:n.selected,isDisabled:n.disabled,placeholder:!0}),t.forEach((function(t){return e._addGroup({group:t,id:t.id||null})}))},t.prototype._addPredefinedChoices=function(t){var e=this;this.config.shouldSort&&t.sort(this.config.sorter);var n=t.some((function(t){return t.selected})),i=t.findIndex((function(t){return void 0===t.disabled||!t.disabled}));t.forEach((function(t,r){var o=t.value,a=void 0===o?"":o,s=t.label,u=t.customProperties,l=t.placeholder;if(e._isSelectElement)if(t.choices)e._addGroup({group:t,id:t.id||null});else{var c=!(!e._isSelectOneElement||n||r!==i)||t.selected,h=t.disabled;e._addChoice({value:a,label:s,isSelected:!!c,isDisabled:!!h,placeholder:!!l,customProperties:u})}else e._addChoice({value:a,label:s,isSelected:!!t.selected,isDisabled:!!t.disabled,placeholder:!!t.placeholder,customProperties:u})}))},t.prototype._addPredefinedItems=function(t){var e=this;t.forEach((function(t){"object"===uc(t)&&t.value&&e._addItem({value:t.value,label:t.label,choiceId:t.id,customProperties:t.customProperties,placeholder:t.placeholder}),"string"==typeof t&&e._addItem({value:t})}))},t.prototype._setChoiceOrItem=function(t){var e=this;({object:function(){t.value&&(e._isTextElement?e._addItem({value:t.value,label:t.label,choiceId:t.id,customProperties:t.customProperties,placeholder:t.placeholder}):e._addChoice({value:t.value,label:t.label,isSelected:!0,isDisabled:!1,customProperties:t.customProperties,placeholder:t.placeholder}))},string:function(){e._isTextElement?e._addItem({value:t}):e._addChoice({value:t,label:t,isSelected:!0,isDisabled:!1})}})[(0,p.getType)(t).toLowerCase()]()},t.prototype._findAndSelectChoiceByValue=function(t){var e=this,n=this._store.choices.find((function(n){return e.config.valueComparer(n.value,t)}));n&&!n.selected&&this._addItem({value:n.value,label:n.label,choiceId:n.id,groupId:n.groupId,customProperties:n.customProperties,placeholder:n.placeholder,keyCode:n.keyCode})},t.prototype._generatePlaceholderValue=function(){if(this._isSelectElement&&this.passedElement.placeholderOption){var t=this.passedElement.placeholderOption;return t?t.text:null}var e=this.config,n=e.placeholder,i=e.placeholderValue,r=this.passedElement.element.dataset;if(n){if(i)return i;if(r.placeholder)return r.placeholder}return null},t}();e.default=_},613:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(799),r=n(883),o=function(){function t(t){var e=t.element,n=t.type,i=t.classNames,r=t.position;this.element=e,this.classNames=i,this.type=n,this.position=r,this.isOpen=!1,this.isFlipped=!1,this.isFocussed=!1,this.isDisabled=!1,this.isLoading=!1,this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return t.prototype.addEventListeners=function(){this.element.addEventListener("focus",this._onFocus),this.element.addEventListener("blur",this._onBlur)},t.prototype.removeEventListeners=function(){this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)},t.prototype.shouldFlip=function(t){if("number"!=typeof t)return!1;var e=!1;return"auto"===this.position?e=!window.matchMedia("(min-height: ".concat(t+1,"px)")).matches:"top"===this.position&&(e=!0),e},t.prototype.setActiveDescendant=function(t){this.element.setAttribute("aria-activedescendant",t)},t.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},t.prototype.open=function(t){this.element.classList.add(this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(t)&&(this.element.classList.add(this.classNames.flippedState),this.isFlipped=!0)},t.prototype.close=function(){this.element.classList.remove(this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(this.element.classList.remove(this.classNames.flippedState),this.isFlipped=!1)},t.prototype.focus=function(){this.isFocussed||this.element.focus()},t.prototype.addFocusState=function(){this.element.classList.add(this.classNames.focusState)},t.prototype.removeFocusState=function(){this.element.classList.remove(this.classNames.focusState)},t.prototype.enable=function(){this.element.classList.remove(this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),this.type===r.SELECT_ONE_TYPE&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1},t.prototype.disable=function(){this.element.classList.add(this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),this.type===r.SELECT_ONE_TYPE&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0},t.prototype.wrap=function(t){(0,i.wrap)(t,this.element)},t.prototype.unwrap=function(t){this.element.parentNode&&(this.element.parentNode.insertBefore(t,this.element),this.element.parentNode.removeChild(this.element))},t.prototype.addLoadingState=function(){this.element.classList.add(this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0},t.prototype.removeLoadingState=function(){this.element.classList.remove(this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1},t.prototype._onFocus=function(){this.isFocussed=!0},t.prototype._onBlur=function(){this.isFocussed=!1},t}();e.default=o},217:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=t.element,n=t.type,i=t.classNames;this.element=e,this.classNames=i,this.type=n,this.isActive=!1}return Object.defineProperty(t.prototype,"distanceFromTopWindow",{get:function(){return this.element.getBoundingClientRect().bottom},enumerable:!1,configurable:!0}),t.prototype.getChild=function(t){return this.element.querySelector(t)},t.prototype.show=function(){return this.element.classList.add(this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this},t.prototype.hide=function(){return this.element.classList.remove(this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this},t}();e.default=n},520:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WrappedSelect=e.WrappedInput=e.List=e.Input=e.Container=e.Dropdown=void 0;var r=i(n(217));e.Dropdown=r.default;var o=i(n(613));e.Container=o.default;var a=i(n(11));e.Input=a.default;var s=i(n(624));e.List=s.default;var u=i(n(541));e.WrappedInput=u.default;var l=i(n(982));e.WrappedSelect=l.default},11:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(799),r=n(883),o=function(){function t(t){var e=t.element,n=t.type,i=t.classNames,r=t.preventPaste;this.element=e,this.type=n,this.classNames=i,this.preventPaste=r,this.isFocussed=this.element.isEqualNode(document.activeElement),this.isDisabled=e.disabled,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return Object.defineProperty(t.prototype,"placeholder",{set:function(t){this.element.placeholder=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return(0,i.sanitise)(this.element.value)},set:function(t){this.element.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawValue",{get:function(){return this.element.value},enumerable:!1,configurable:!0}),t.prototype.addEventListeners=function(){this.element.addEventListener("paste",this._onPaste),this.element.addEventListener("input",this._onInput,{passive:!0}),this.element.addEventListener("focus",this._onFocus,{passive:!0}),this.element.addEventListener("blur",this._onBlur,{passive:!0})},t.prototype.removeEventListeners=function(){this.element.removeEventListener("input",this._onInput),this.element.removeEventListener("paste",this._onPaste),this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)},t.prototype.enable=function(){this.element.removeAttribute("disabled"),this.isDisabled=!1},t.prototype.disable=function(){this.element.setAttribute("disabled",""),this.isDisabled=!0},t.prototype.focus=function(){this.isFocussed||this.element.focus()},t.prototype.blur=function(){this.isFocussed&&this.element.blur()},t.prototype.clear=function(t){return void 0===t&&(t=!0),this.element.value&&(this.element.value=""),t&&this.setWidth(),this},t.prototype.setWidth=function(){var t=this.element,e=t.style,n=t.value,i=t.placeholder;e.minWidth="".concat(i.length+1,"ch"),e.width="".concat(n.length+1,"ch")},t.prototype.setActiveDescendant=function(t){this.element.setAttribute("aria-activedescendant",t)},t.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},t.prototype._onInput=function(){this.type!==r.SELECT_ONE_TYPE&&this.setWidth()},t.prototype._onPaste=function(t){this.preventPaste&&t.preventDefault()},t.prototype._onFocus=function(){this.isFocussed=!0},t.prototype._onBlur=function(){this.isFocussed=!1},t}();e.default=o},624:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(883),r=function(){function t(t){var e=t.element;this.element=e,this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight}return t.prototype.clear=function(){this.element.innerHTML=""},t.prototype.append=function(t){this.element.appendChild(t)},t.prototype.getChild=function(t){return this.element.querySelector(t)},t.prototype.hasChildren=function(){return this.element.hasChildNodes()},t.prototype.scrollToTop=function(){this.element.scrollTop=0},t.prototype.scrollToChildElement=function(t,e){var n=this;if(t){var i=this.element.offsetHeight,r=this.element.scrollTop+i,o=t.offsetHeight,a=t.offsetTop+o,s=e>0?this.element.scrollTop+a-r:t.offsetTop;requestAnimationFrame((function(){n._animateScroll(s,e)}))}},t.prototype._scrollDown=function(t,e,n){var i=(n-t)/e,r=i>1?i:1;this.element.scrollTop=t+r},t.prototype._scrollUp=function(t,e,n){var i=(t-n)/e,r=i>1?i:1;this.element.scrollTop=t-r},t.prototype._animateScroll=function(t,e){var n=this,r=i.SCROLLING_SPEED,o=this.element.scrollTop,a=!1;e>0?(this._scrollDown(o,r,t),o<t&&(a=!0)):(this._scrollUp(o,r,t),o>t&&(a=!0)),a&&requestAnimationFrame((function(){n._animateScroll(t,e)}))},t}();e.default=r},730:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(799),r=function(){function t(t){var e=t.element,n=t.classNames;if(this.element=e,this.classNames=n,!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement))throw new TypeError("Invalid element passed");this.isDisabled=!1}return Object.defineProperty(t.prototype,"isActive",{get:function(){return"active"===this.element.dataset.choice},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this.element.dir},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.element.value},set:function(t){this.element.value=t},enumerable:!1,configurable:!0}),t.prototype.conceal=function(){this.element.classList.add(this.classNames.input),this.element.hidden=!0,this.element.tabIndex=-1;var t=this.element.getAttribute("style");t&&this.element.setAttribute("data-choice-orig-style",t),this.element.setAttribute("data-choice","active")},t.prototype.reveal=function(){this.element.classList.remove(this.classNames.input),this.element.hidden=!1,this.element.removeAttribute("tabindex");var t=this.element.getAttribute("data-choice-orig-style");t?(this.element.removeAttribute("data-choice-orig-style"),this.element.setAttribute("style",t)):this.element.removeAttribute("style"),this.element.removeAttribute("data-choice"),this.element.value=this.element.value},t.prototype.enable=function(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1},t.prototype.disable=function(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0},t.prototype.triggerEvent=function(t,e){(0,i.dispatchEvent)(this.element,t,e)},t}();e.default=r},541:function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=e.element,i=e.classNames,r=e.delimiter,o=t.call(this,{element:n,classNames:i})||this;return o.delimiter=r,o}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.element.value},set:function(t){this.element.setAttribute("value",t),this.element.value=t},enumerable:!1,configurable:!0}),e}(o(n(730)).default);e.default=a},982:function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=e.element,i=e.classNames,r=e.template,o=t.call(this,{element:n,classNames:i})||this;return o.template=r,o}return r(e,t),Object.defineProperty(e.prototype,"placeholderOption",{get:function(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optionGroups",{get:function(){return Array.from(this.element.getElementsByTagName("OPTGROUP"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return Array.from(this.element.options)},set:function(t){var e=this,n=document.createDocumentFragment();t.forEach((function(t){return i=t,r=e.template(i),void n.appendChild(r);var i,r})),this.appendDocFragment(n)},enumerable:!1,configurable:!0}),e.prototype.appendDocFragment=function(t){this.element.innerHTML="",this.element.appendChild(t)},e}(o(n(730)).default);e.default=a},883:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SCROLLING_SPEED=e.SELECT_MULTIPLE_TYPE=e.SELECT_ONE_TYPE=e.TEXT_TYPE=e.KEY_CODES=e.ACTION_TYPES=e.EVENTS=void 0,e.EVENTS={showDropdown:"showDropdown",hideDropdown:"hideDropdown",change:"change",choice:"choice",search:"search",addItem:"addItem",removeItem:"removeItem",highlightItem:"highlightItem",highlightChoice:"highlightChoice",unhighlightItem:"unhighlightItem"},e.ACTION_TYPES={ADD_CHOICE:"ADD_CHOICE",FILTER_CHOICES:"FILTER_CHOICES",ACTIVATE_CHOICES:"ACTIVATE_CHOICES",CLEAR_CHOICES:"CLEAR_CHOICES",ADD_GROUP:"ADD_GROUP",ADD_ITEM:"ADD_ITEM",REMOVE_ITEM:"REMOVE_ITEM",HIGHLIGHT_ITEM:"HIGHLIGHT_ITEM",CLEAR_ALL:"CLEAR_ALL",RESET_TO:"RESET_TO",SET_IS_LOADING:"SET_IS_LOADING"},e.KEY_CODES={BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34},e.TEXT_TYPE="text",e.SELECT_ONE_TYPE="select-one",e.SELECT_MULTIPLE_TYPE="select-multiple",e.SCROLLING_SPEED=4},789:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CONFIG=e.DEFAULT_CLASSNAMES=void 0;var i=n(799);e.DEFAULT_CLASSNAMES={containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",selectedState:"is-selected",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"},e.DEFAULT_CONFIG={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,addItemFilter:null,removeItems:!0,removeItemButton:!1,editItems:!1,allowHTML:!0,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sorter:i.sortByAlpha,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(t){return'Press Enter to add <b>"'.concat((0,i.sanitise)(t),'"</b>')},maxItemText:function(t){return"Only ".concat(t," values can be added")},valueComparer:function(t,e){return t===e},fuseOptions:{includeScore:!0},labelId:"",callbackOnInit:null,callbackOnCreateTemplates:null,classNames:e.DEFAULT_CLASSNAMES}},18:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},978:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},948:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},359:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},285:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},533:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},187:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(18),e),r(n(978),e),r(n(948),e),r(n(359),e),r(n(285),e),r(n(533),e),r(n(287),e),r(n(132),e),r(n(837),e),r(n(598),e),r(n(369),e),r(n(37),e),r(n(47),e),r(n(923),e),r(n(876),e)},287:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},132:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},837:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},598:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},37:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},369:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},47:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},923:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},876:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},799:function(t,e){var n;Object.defineProperty(e,"__esModule",{value:!0}),e.diff=e.cloneObject=e.existsInArray=e.dispatchEvent=e.sortByScore=e.sortByAlpha=e.strToEl=e.sanitise=e.isScrolledIntoView=e.getAdjacentEl=e.wrap=e.isType=e.getType=e.generateId=e.generateChars=e.getRandomNumber=void 0,e.getRandomNumber=function(t,e){return Math.floor(Math.random()*(e-t)+t)},e.generateChars=function(t){return Array.from({length:t},(function(){return(0,e.getRandomNumber)(0,36).toString(36)})).join("")},e.generateId=function(t,n){var i=t.id||t.name&&"".concat(t.name,"-").concat((0,e.generateChars)(2))||(0,e.generateChars)(4);return i=i.replace(/(:|\.|\[|\]|,)/g,""),i="".concat(n,"-").concat(i)},e.getType=function(t){return Object.prototype.toString.call(t).slice(8,-1)},e.isType=function(t,n){return null!=n&&(0,e.getType)(n)===t},e.wrap=function(t,e){return void 0===e&&(e=document.createElement("div")),t.parentNode&&(t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)),e.appendChild(t)},e.getAdjacentEl=function(t,e,n){void 0===n&&(n=1);for(var i="".concat(n>0?"next":"previous","ElementSibling"),r=t[i];r;){if(r.matches(e))return r;r=r[i]}return r},e.isScrolledIntoView=function(t,e,n){return void 0===n&&(n=1),!!t&&(n>0?e.scrollTop+e.offsetHeight>=t.offsetTop+t.offsetHeight:t.offsetTop>=e.scrollTop)},e.sanitise=function(t){return"string"!=typeof t?t:t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},e.strToEl=(n=document.createElement("div"),function(t){var e=t.trim();n.innerHTML=e;for(var i=n.children[0];n.firstChild;)n.removeChild(n.firstChild);return i}),e.sortByAlpha=function(t,e){var n=t.value,i=t.label,r=void 0===i?n:i,o=e.value,a=e.label,s=void 0===a?o:a;return r.localeCompare(s,[],{sensitivity:"base",ignorePunctuation:!0,numeric:!0})},e.sortByScore=function(t,e){var n=t.score,i=void 0===n?0:n,r=e.score;return i-(void 0===r?0:r)},e.dispatchEvent=function(t,e,n){void 0===n&&(n=null);var i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0});return t.dispatchEvent(i)},e.existsInArray=function(t,e,n){return void 0===n&&(n="value"),t.some((function(t){return"string"==typeof e?t[n]===e.trim():t[n]===e}))},e.cloneObject=function(t){return JSON.parse(JSON.stringify(t))},e.diff=function(t,e){var n=Object.keys(t).sort(),i=Object.keys(e).sort();return n.filter((function(t){return i.indexOf(t)<0}))}},273:function(t,e){var n=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultState=void 0,e.defaultState=[],e.default=function(t,i){switch(void 0===t&&(t=e.defaultState),void 0===i&&(i={}),i.type){case"ADD_CHOICE":var r=i,o={id:r.id,elementId:r.elementId,groupId:r.groupId,value:r.value,label:r.label||r.value,disabled:r.disabled||!1,selected:!1,active:!0,score:9999,customProperties:r.customProperties,placeholder:r.placeholder||!1};return n(n([],t,!0),[o],!1);case"ADD_ITEM":var a=i;return a.choiceId>-1?t.map((function(t){var e=t;return e.id===parseInt("".concat(a.choiceId),10)&&(e.selected=!0),e})):t;case"REMOVE_ITEM":var s=i;return s.choiceId&&s.choiceId>-1?t.map((function(t){var e=t;return e.id===parseInt("".concat(s.choiceId),10)&&(e.selected=!1),e})):t;case"FILTER_CHOICES":var u=i;return t.map((function(t){var e=t;return e.active=u.results.some((function(t){var n=t.item,i=t.score;return n.id===e.id&&(e.score=i,!0)})),e}));case"ACTIVATE_CHOICES":var l=i;return t.map((function(t){var e=t;return e.active=l.active,e}));case"CLEAR_CHOICES":return e.defaultState;default:return t}}},871:function(t,e){var n=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultState=void 0,e.defaultState=[],e.default=function(t,i){switch(void 0===t&&(t=e.defaultState),void 0===i&&(i={}),i.type){case"ADD_GROUP":var r=i;return n(n([],t,!0),[{id:r.id,value:r.value,active:r.active,disabled:r.disabled}],!1);case"CLEAR_CHOICES":return[];default:return t}}},655:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultState=void 0;var r=n(857),o=i(n(52)),a=i(n(871)),s=i(n(273)),u=i(n(502)),l=n(799);e.defaultState={groups:[],items:[],choices:[],loading:!1};var c=(0,r.combineReducers)({items:o.default,groups:a.default,choices:s.default,loading:u.default});e.default=function(t,n){var i=t;if("CLEAR_ALL"===n.type)i=e.defaultState;else if("RESET_TO"===n.type)return(0,l.cloneObject)(n.state);return c(i,n)}},52:function(t,e){var n=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultState=void 0,e.defaultState=[],e.default=function(t,i){switch(void 0===t&&(t=e.defaultState),void 0===i&&(i={}),i.type){case"ADD_ITEM":var r=i;return n(n([],t,!0),[{id:r.id,choiceId:r.choiceId,groupId:r.groupId,value:r.value,label:r.label,active:!0,highlighted:!1,customProperties:r.customProperties,placeholder:r.placeholder||!1,keyCode:null}],!1).map((function(t){var e=t;return e.highlighted=!1,e}));case"REMOVE_ITEM":return t.map((function(t){var e=t;return e.id===i.id&&(e.active=!1),e}));case"HIGHLIGHT_ITEM":var o=i;return t.map((function(t){var e=t;return e.id===o.id&&(e.highlighted=o.highlighted),e}));default:return t}}},502:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultState=void 0,e.defaultState=!1,e.default=function(t,n){return void 0===t&&(t=e.defaultState),void 0===n&&(n={}),"SET_IS_LOADING"===n.type?n.isLoading:t}},744:function(t,e,n){var i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(857),a=r(n(655)),s=function(){function t(){this._store=(0,o.createStore)(a.default,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}return t.prototype.subscribe=function(t){this._store.subscribe(t)},t.prototype.dispatch=function(t){this._store.dispatch(t)},Object.defineProperty(t.prototype,"state",{get:function(){return this._store.getState()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.state.items},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeItems",{get:function(){return this.items.filter((function(t){return!0===t.active}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"highlightedActiveItems",{get:function(){return this.items.filter((function(t){return t.active&&t.highlighted}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choices",{get:function(){return this.state.choices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeChoices",{get:function(){return this.choices.filter((function(t){return!0===t.active}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectableChoices",{get:function(){return this.choices.filter((function(t){return!0!==t.disabled}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchableChoices",{get:function(){return this.selectableChoices.filter((function(t){return!0!==t.placeholder}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholderChoice",{get:function(){return i([],this.choices,!0).reverse().find((function(t){return!0===t.placeholder}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"groups",{get:function(){return this.state.groups},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeGroups",{get:function(){var t=this.groups,e=this.choices;return t.filter((function(t){var n=!0===t.active&&!1===t.disabled,i=e.some((function(t){return!0===t.active&&!1===t.disabled}));return n&&i}),[])},enumerable:!1,configurable:!0}),t.prototype.isLoading=function(){return this.state.loading},t.prototype.getChoiceById=function(t){return this.activeChoices.find((function(e){return e.id===parseInt(t,10)}))},t.prototype.getGroupById=function(t){return this.groups.find((function(e){return e.id===t}))},t}();e.default=s},686:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={containerOuter:function(t,e,n,i,r,o,a){var s=t.classNames.containerOuter,u=Object.assign(document.createElement("div"),{className:s});return u.dataset.type=o,e&&(u.dir=e),i&&(u.tabIndex=0),n&&(u.setAttribute("role",r?"combobox":"listbox"),r&&u.setAttribute("aria-autocomplete","list")),u.setAttribute("aria-haspopup","true"),u.setAttribute("aria-expanded","false"),a&&u.setAttribute("aria-labeledby",a),u},containerInner:function(t){var e=t.classNames.containerInner;return Object.assign(document.createElement("div"),{className:e})},itemList:function(t,e){var n=t.classNames,i=n.list,r=n.listSingle,o=n.listItems;return Object.assign(document.createElement("div"),{className:"".concat(i," ").concat(e?r:o)})},placeholder:function(t,e){var n,i=t.allowHTML,r=t.classNames.placeholder;return Object.assign(document.createElement("div"),((n={className:r})[i?"innerHTML":"innerText"]=e,n))},item:function(t,e,n){var i,r,o=t.allowHTML,a=t.classNames,s=a.item,u=a.button,l=a.highlightedState,c=a.itemSelectable,h=a.placeholder,d=e.id,f=e.value,p=e.label,g=e.customProperties,m=e.active,v=e.disabled,y=e.highlighted,b=e.placeholder,_=Object.assign(document.createElement("div"),((i={className:s})[o?"innerHTML":"innerText"]=p,i));if(Object.assign(_.dataset,{item:"",id:d,value:f,customProperties:g}),m&&_.setAttribute("aria-selected","true"),v&&_.setAttribute("aria-disabled","true"),b&&_.classList.add(h),_.classList.add(y?l:c),n){v&&_.classList.remove(c),_.dataset.deletable="";var E="Remove item",x=Object.assign(document.createElement("button"),((r={type:"button",className:u})[o?"innerHTML":"innerText"]=E,r));x.setAttribute("aria-label","".concat(E,": '").concat(f,"'")),x.dataset.button="",_.appendChild(x)}return _},choiceList:function(t,e){var n=t.classNames.list,i=Object.assign(document.createElement("div"),{className:n});return e||i.setAttribute("aria-multiselectable","true"),i.setAttribute("role","listbox"),i},choiceGroup:function(t,e){var n,i=t.allowHTML,r=t.classNames,o=r.group,a=r.groupHeading,s=r.itemDisabled,u=e.id,l=e.value,c=e.disabled,h=Object.assign(document.createElement("div"),{className:"".concat(o," ").concat(c?s:"")});return h.setAttribute("role","group"),Object.assign(h.dataset,{group:"",id:u,value:l}),c&&h.setAttribute("aria-disabled","true"),h.appendChild(Object.assign(document.createElement("div"),((n={className:a})[i?"innerHTML":"innerText"]=l,n))),h},choice:function(t,e,n){var i,r=t.allowHTML,o=t.classNames,a=o.item,s=o.itemChoice,u=o.itemSelectable,l=o.selectedState,c=o.itemDisabled,h=o.placeholder,d=e.id,f=e.value,p=e.label,g=e.groupId,m=e.elementId,v=e.disabled,y=e.selected,b=e.placeholder,_=Object.assign(document.createElement("div"),((i={id:m})[r?"innerHTML":"innerText"]=p,i.className="".concat(a," ").concat(s),i));return y&&_.classList.add(l),b&&_.classList.add(h),_.setAttribute("role",g&&g>0?"treeitem":"option"),Object.assign(_.dataset,{choice:"",id:d,value:f,selectText:n}),v?(_.classList.add(c),_.dataset.choiceDisabled="",_.setAttribute("aria-disabled","true")):(_.classList.add(u),_.dataset.choiceSelectable=""),_},input:function(t,e){var n=t.classNames,i=n.input,r=n.inputCloned,o=Object.assign(document.createElement("input"),{type:"search",name:"search_terms",className:"".concat(i," ").concat(r),autocomplete:"off",autocapitalize:"off",spellcheck:!1});return o.setAttribute("role","textbox"),o.setAttribute("aria-autocomplete","list"),o.setAttribute("aria-label",e),o},dropdown:function(t){var e=t.classNames,n=e.list,i=e.listDropdown,r=document.createElement("div");return r.classList.add(n,i),r.setAttribute("aria-expanded","false"),r},notice:function(t,e,n){var i,r=t.allowHTML,o=t.classNames,a=o.item,s=o.itemChoice,u=o.noResults,l=o.noChoices;void 0===n&&(n="");var c=[a,s];return"no-choices"===n?c.push(l):"no-results"===n&&c.push(u),Object.assign(document.createElement("div"),((i={})[r?"innerHTML":"innerText"]=e,i.className=c.join(" "),i))},option:function(t){var e=t.label,n=t.value,i=t.customProperties,r=t.active,o=t.disabled,a=new Option(e,n,!1,r);return i&&(a.dataset.customProperties="".concat(i)),a.disabled=!!o,a}};e.default=n},996:function(t){var e=function(t){return function(t){return!!t&&"object"===uc(t)}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===n}(t)}(t)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(t,e){return!1!==e.clone&&e.isMergeableObject(t)?u((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function r(t,e,n){return t.concat(e).map((function(t){return i(t,n)}))}function o(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function a(t,e){try{return e in t}catch(t){return!1}}function s(t,e,n){var r={};return n.isMergeableObject(t)&&o(t).forEach((function(e){r[e]=i(t[e],n)})),o(e).forEach((function(o){(function(t,e){return a(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(a(t,o)&&n.isMergeableObject(e[o])?r[o]=function(t,e){if(!e.customMerge)return u;var n=e.customMerge(t);return"function"==typeof n?n:u}(o,n)(t[o],e[o],n):r[o]=i(e[o],n))})),r}function u(t,n,o){(o=o||{}).arrayMerge=o.arrayMerge||r,o.isMergeableObject=o.isMergeableObject||e,o.cloneUnlessOtherwiseSpecified=i;var a=Array.isArray(n);return a===Array.isArray(t)?a?o.arrayMerge(t,n,o):s(t,n,o):i(n,o)}u.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return u(t,n,e)}),{})};var l=u;t.exports=l},221:function(t,e,n){function i(t){return Array.isArray?Array.isArray(t):"[object Array]"===c(t)}function r(t){return"string"==typeof t}function o(t){return"number"==typeof t}function a(t){return!0===t||!1===t||function(t){return s(t)&&null!==t}(t)&&"[object Boolean]"==c(t)}function s(t){return"object"===uc(t)}function u(t){return null!=t}function l(t){return!t.trim().length}function c(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.r(e),n.d(e,{default:function(){return at}});var h=function(t){return"Invalid value for key ".concat(t)},d=function(t){return"Pattern length exceeds max of ".concat(t,".")},f=Object.prototype.hasOwnProperty,p=function(){function t(e){var n=this;nc(this,t),this._keys=[],this._keyMap={};var i=0;e.forEach((function(t){var e=g(t);i+=e.weight,n._keys.push(e),n._keyMap[e.id]=e,i+=e.weight})),this._keys.forEach((function(t){t.weight/=i}))}return rc(t,[{key:"get",value:function(t){return this._keyMap[t]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),t}();function g(t){var e=null,n=null,o=null,a=1;if(r(t)||i(t))o=t,e=m(t),n=v(t);else{if(!f.call(t,"name"))throw new Error(function(t){return"Missing ".concat(t," property in key")}("name"));var s=t.name;if(o=s,f.call(t,"weight")&&(a=t.weight)<=0)throw new Error(function(t){return"Property 'weight' in key '".concat(t,"' must be a positive integer")}(s));e=m(s),n=v(s)}return{path:e,id:n,weight:a,src:o}}function m(t){return i(t)?t:t.split(".")}function v(t){return i(t)?t.join("."):t}var y={useExtendedSearch:!1,getFn:function(t,e){var n=[],s=!1;return function t(e,l,c){if(u(e))if(l[c]){var h=e[l[c]];if(!u(h))return;if(c===l.length-1&&(r(h)||o(h)||a(h)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(h));else if(i(h)){s=!0;for(var d=0,f=h.length;d<f;d+=1)t(h[d],l,c+1)}else l.length&&t(h,l,c+1)}else n.push(e)}(t,r(e)?e.split("."):e,0),s?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},b=tc(tc(tc(tc({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(t,e){return t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1}}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),y),_=/[^ ]+/g;function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=new Map,i=Math.pow(10,e);return{get:function(e){var r=e.match(_).length;if(n.has(r))return n.get(r);var o=1/Math.pow(r,.5*t),a=parseFloat(Math.round(o*i)/i);return n.set(r,a),a},clear:function(){n.clear()}}}var x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getFn,i=void 0===n?b.getFn:n,r=e.fieldNormWeight,o=void 0===r?b.fieldNormWeight:r;nc(this,t),this.norm=E(o,3),this.getFn=i,this.isCreated=!1,this.setIndexRecords()}return rc(t,[{key:"setSources",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=t}},{key:"setIndexRecords",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=t}},{key:"setKeys",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach((function(e,n){t._keysMap[e.id]=n}))}},{key:"create",value:function(){var t=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,r(this.docs[0])?this.docs.forEach((function(e,n){t._addString(e,n)})):this.docs.forEach((function(e,n){t._addObject(e,n)})),this.norm.clear())}},{key:"add",value:function(t){var e=this.size();r(t)?this._addString(t,e):this._addObject(t,e)}},{key:"removeAt",value:function(t){this.records.splice(t,1);for(var e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}},{key:"getValueForItemAtKeyId",value:function(t,e){return t[this._keysMap[e]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(t,e){if(u(t)&&!l(t)){var n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}}},{key:"_addObject",value:function(t,e){var n=this,o={i:e,$:{}};this.keys.forEach((function(e,a){var s=n.getFn(t,e.path);if(u(s))if(i(s))!function(){for(var t=[],e=[{nestedArrIndex:-1,value:s}];e.length;){var c=e.pop(),h=c.nestedArrIndex,d=c.value;if(u(d))if(r(d)&&!l(d)){var f={v:d,i:h,n:n.norm.get(d)};t.push(f)}else i(d)&&d.forEach((function(t,n){e.push({nestedArrIndex:n,value:t})}))}o.$[a]=t}();else if(!l(s)){var c={v:s,n:n.norm.get(s)};o.$[a]=c}})),this.records.push(o)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),t}();function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.getFn,r=void 0===i?b.getFn:i,o=n.fieldNormWeight,a=void 0===o?b.fieldNormWeight:o,s=new x({getFn:r,fieldNormWeight:a});return s.setKeys(t.map(g)),s.setSources(e),s.create(),s}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.errors,i=void 0===n?0:n,r=e.currentLocation,o=void 0===r?0:r,a=e.expectedLocation,s=void 0===a?0:a,u=e.distance,l=void 0===u?b.distance:u,c=e.ignoreLocation,h=void 0===c?b.ignoreLocation:c,d=i/t.length;if(h)return d;var f=Math.abs(s-o);return l?d+f/l:f?1:d}function D(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.minMatchCharLength,n=[],i=-1,r=-1,o=0,a=t.length;o<a;o+=1){var s=t[o];s&&-1===i?i=o:s||-1===i||((r=o-1)-i+1>=e&&n.push([i,r]),i=-1)}return t[o-1]&&o-i>=e&&n.push([i,o-1]),n}var C=32;function T(t){for(var e={},n=0,i=t.length;n<i;n+=1){var r=t.charAt(n);e[r]=(e[r]||0)|1<<i-n-1}return e}var k=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.location,o=void 0===r?b.location:r,a=i.threshold,s=void 0===a?b.threshold:a,u=i.distance,l=void 0===u?b.distance:u,c=i.includeMatches,h=void 0===c?b.includeMatches:c,d=i.findAllMatches,f=void 0===d?b.findAllMatches:d,p=i.minMatchCharLength,g=void 0===p?b.minMatchCharLength:p,m=i.isCaseSensitive,v=void 0===m?b.isCaseSensitive:m,y=i.ignoreLocation,_=void 0===y?b.ignoreLocation:y;if(nc(this,t),this.options={location:o,threshold:s,distance:l,includeMatches:h,findAllMatches:f,minMatchCharLength:g,isCaseSensitive:v,ignoreLocation:_},this.pattern=v?e:e.toLowerCase(),this.chunks=[],this.pattern.length){var E=function(t,e){n.chunks.push({pattern:t,alphabet:T(t),startIndex:e})},x=this.pattern.length;if(x>C){for(var w=0,A=x%C,D=x-A;w<D;)E(this.pattern.substr(w,C),w),w+=C;if(A){var k=x-C;E(this.pattern.substr(k),k)}}else E(this.pattern,0)}}return rc(t,[{key:"searchIn",value:function(t){var e=this.options,n=e.isCaseSensitive,i=e.includeMatches;if(n||(t=t.toLowerCase()),this.pattern===t){var r={isMatch:!0,score:0};return i&&(r.indices=[[0,t.length-1]]),r}var o=this.options,a=o.location,s=o.distance,u=o.threshold,l=o.findAllMatches,c=o.minMatchCharLength,h=o.ignoreLocation,f=[],p=0,g=!1;this.chunks.forEach((function(e){var n=e.pattern,r=e.alphabet,o=e.startIndex,m=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.location,o=void 0===r?b.location:r,a=i.distance,s=void 0===a?b.distance:a,u=i.threshold,l=void 0===u?b.threshold:u,c=i.findAllMatches,h=void 0===c?b.findAllMatches:c,f=i.minMatchCharLength,p=void 0===f?b.minMatchCharLength:f,g=i.includeMatches,m=void 0===g?b.includeMatches:g,v=i.ignoreLocation,y=void 0===v?b.ignoreLocation:v;if(e.length>C)throw new Error(d(C));for(var _,E=e.length,x=t.length,w=Math.max(0,Math.min(o,x)),T=l,k=w,S=p>1||m,I=S?Array(x):[];(_=t.indexOf(e,k))>-1;){var O=A(e,{currentLocation:_,expectedLocation:w,distance:s,ignoreLocation:y});if(T=Math.min(O,T),k=_+E,S)for(var M=0;M<E;)I[_+M]=1,M+=1}k=-1;for(var R=[],L=1,P=E+x,F=1<<E-1,N=0;N<E;N+=1){for(var B=0,j=P;B<j;)A(e,{errors:N,currentLocation:w+j,expectedLocation:w,distance:s,ignoreLocation:y})<=T?B=j:P=j,j=Math.floor((P-B)/2+B);P=j;var V=Math.max(1,w-j+1),z=h?x:Math.min(w+j,x)+E,U=Array(z+2);U[z+1]=(1<<N)-1;for(var G=z;G>=V;G-=1){var W=G-1,H=n[t.charAt(W)];if(S&&(I[W]=+!!H),U[G]=(U[G+1]<<1|1)&H,N&&(U[G]|=(R[G+1]|R[G])<<1|1|R[G+1]),U[G]&F&&(L=A(e,{errors:N,currentLocation:W,expectedLocation:w,distance:s,ignoreLocation:y}))<=T){if(T=L,(k=W)<=w)break;V=Math.max(1,2*w-k)}}if(A(e,{errors:N+1,currentLocation:w,expectedLocation:w,distance:s,ignoreLocation:y})>T)break;R=U}var q={isMatch:k>=0,score:Math.max(.001,L)};if(S){var $=D(I,p);$.length?m&&(q.indices=$):q.isMatch=!1}return q}(t,n,r,{location:a+o,distance:s,threshold:u,findAllMatches:l,minMatchCharLength:c,includeMatches:i,ignoreLocation:h}),v=m.isMatch,y=m.score,_=m.indices;v&&(g=!0),p+=y,v&&_&&(f=[].concat(Jl(f),Jl(_)))}));var m={isMatch:g,score:g?p/this.chunks.length:1};return g&&i&&(m.indices=f),m}}]),t}(),S=function(){function t(e){nc(this,t),this.pattern=e}return rc(t,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(t){return I(t,this.multiRegex)}},{key:"isSingleMatch",value:function(t){return I(t,this.singleRegex)}}]),t}();function I(t,e){var n=t.match(e);return n?n[1]:null}var O=function(t){Hl(n,t);var e=$l(n);function n(t){return nc(this,n),e.call(this,t)}return rc(n,[{key:"search",value:function(t){var e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),n}(S),M=function(t){Hl(n,t);var e=$l(n);function n(t){return nc(this,n),e.call(this,t)}return rc(n,[{key:"search",value:function(t){var e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),n}(S),R=function(t){Hl(n,t);var e=$l(n);function n(t){return nc(this,n),e.call(this,t)}return rc(n,[{key:"search",value:function(t){var e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),n}(S),L=function(t){Hl(n,t);var e=$l(n);function n(t){return nc(this,n),e.call(this,t)}return rc(n,[{key:"search",value:function(t){var e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),n}(S),P=function(t){Hl(n,t);var e=$l(n);function n(t){return nc(this,n),e.call(this,t)}return rc(n,[{key:"search",value:function(t){var e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),n}(S),F=function(t){Hl(n,t);var e=$l(n);function n(t){return nc(this,n),e.call(this,t)}return rc(n,[{key:"search",value:function(t){var e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),n}(S),N=function(t){Hl(n,t);var e=$l(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.location,a=void 0===o?b.location:o,s=r.threshold,u=void 0===s?b.threshold:s,l=r.distance,c=void 0===l?b.distance:l,h=r.includeMatches,d=void 0===h?b.includeMatches:h,f=r.findAllMatches,p=void 0===f?b.findAllMatches:f,g=r.minMatchCharLength,m=void 0===g?b.minMatchCharLength:g,v=r.isCaseSensitive,y=void 0===v?b.isCaseSensitive:v,_=r.ignoreLocation,E=void 0===_?b.ignoreLocation:_;return nc(this,n),(i=e.call(this,t))._bitapSearch=new k(t,{location:a,threshold:u,distance:c,includeMatches:d,findAllMatches:p,minMatchCharLength:m,isCaseSensitive:y,ignoreLocation:E}),i}return rc(n,[{key:"search",value:function(t){return this._bitapSearch.searchIn(t)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),n}(S),B=function(t){Hl(n,t);var e=$l(n);function n(t){return nc(this,n),e.call(this,t)}return rc(n,[{key:"search",value:function(t){for(var e,n=0,i=[],r=this.pattern.length;(e=t.indexOf(this.pattern,n))>-1;)n=e+r,i.push([e,n-1]);var o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),n}(S),j=[O,B,R,L,F,P,M,N],V=j.length,z=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.split("|").map((function(t){for(var n=t.trim().split(z).filter((function(t){return t&&!!t.trim()})),i=[],r=0,o=n.length;r<o;r+=1){for(var a=n[r],s=!1,u=-1;!s&&++u<V;){var l=j[u],c=l.isMultiMatch(a);c&&(i.push(new l(c,e)),s=!0)}if(!s)for(u=-1;++u<V;){var h=j[u],d=h.isSingleMatch(a);if(d){i.push(new h(d,e));break}}}return i}))}var G=new Set([N.type,B.type]),W=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.isCaseSensitive,r=void 0===i?b.isCaseSensitive:i,o=n.includeMatches,a=void 0===o?b.includeMatches:o,s=n.minMatchCharLength,u=void 0===s?b.minMatchCharLength:s,l=n.ignoreLocation,c=void 0===l?b.ignoreLocation:l,h=n.findAllMatches,d=void 0===h?b.findAllMatches:h,f=n.location,p=void 0===f?b.location:f,g=n.threshold,m=void 0===g?b.threshold:g,v=n.distance,y=void 0===v?b.distance:v;nc(this,t),this.query=null,this.options={isCaseSensitive:r,includeMatches:a,minMatchCharLength:u,findAllMatches:d,ignoreLocation:c,location:p,threshold:m,distance:y},this.pattern=r?e:e.toLowerCase(),this.query=U(this.pattern,this.options)}return rc(t,[{key:"searchIn",value:function(t){var e=this.query;if(!e)return{isMatch:!1,score:1};var n=this.options,i=n.includeMatches;t=n.isCaseSensitive?t:t.toLowerCase();for(var r=0,o=[],a=0,s=0,u=e.length;s<u;s+=1){var l=e[s];o.length=0,r=0;for(var c=0,h=l.length;c<h;c+=1){var d=l[c],f=d.search(t),p=f.isMatch,g=f.indices,m=f.score;if(!p){a=0,r=0,o.length=0;break}if(r+=1,a+=m,i){var v=d.constructor.type;G.has(v)?o=[].concat(Jl(o),Jl(g)):o.push(g)}}if(r){var y={isMatch:!0,score:a/r};return i&&(y.indices=o),y}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(t,e){return e.useExtendedSearch}}]),t}(),H=[];function q(t,e){for(var n=0,i=H.length;n<i;n+=1){var r=H[n];if(r.condition(t,e))return new r(t,e)}return new k(t,e)}var $="$and",Y="$or",X="$path",K="$val",Z=function(t){return!(!t[$]&&!t[Y])},J=function(t){return!!t[X]},Q=function(t){return!i(t)&&s(t)&&!Z(t)},tt=function(t){return ec({},$,Object.keys(t).map((function(e){return ec({},e,t[e])})))};function et(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.auto,a=void 0===o||o,s=function t(n){var o=Object.keys(n),s=J(n);if(!s&&o.length>1&&!Z(n))return t(tt(n));if(Q(n)){var u=s?n[X]:o[0],l=s?n[K]:n[u];if(!r(l))throw new Error(h(u));var c={keyId:v(u),pattern:l};return a&&(c.searcher=q(l,e)),c}var d={children:[],operator:o[0]};return o.forEach((function(e){var r=n[e];i(r)&&r.forEach((function(e){d.children.push(t(e))}))})),d};return Z(t)||(t=tt(t)),s(t)}function nt(t,e){var n=e.ignoreFieldNorm,i=void 0===n?b.ignoreFieldNorm:n;t.forEach((function(t){var e=1;t.matches.forEach((function(t){var n=t.key,r=t.norm,o=t.score,a=n?n.weight:null;e*=Math.pow(0===o&&a?Number.EPSILON:o,(a||1)*(i?1:r))})),t.score=e}))}function it(t,e){var n=t.matches;e.matches=[],u(n)&&n.forEach((function(t){if(u(t.indices)&&t.indices.length){var n={indices:t.indices,value:t.value};t.key&&(n.key=t.key.src),t.idx>-1&&(n.refIndex=t.idx),e.matches.push(n)}}))}function rt(t,e){e.score=t.score}function ot(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.includeMatches,r=void 0===i?b.includeMatches:i,o=n.includeScore,a=void 0===o?b.includeScore:o,s=[];return r&&s.push(it),a&&s.push(rt),t.map((function(t){var n=t.idx,i={item:e[n],refIndex:n};return s.length&&s.forEach((function(e){e(t,i)})),i}))}var at=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;nc(this,t),this.options=tc(tc({},b),n),this.options.useExtendedSearch,this._keyStore=new p(this.options.keys),this.setCollection(e,i)}return rc(t,[{key:"setCollection",value:function(t,e){if(this._docs=t,e&&!(e instanceof x))throw new Error("Incorrect 'index' type");this._myIndex=e||w(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}},{key:"add",value:function(t){u(t)&&(this._docs.push(t),this._myIndex.add(t))}},{key:"remove",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!1},e=[],n=0,i=this._docs.length;n<i;n+=1){var r=this._docs[n];t(r,n)&&(this.removeAt(n),n-=1,i-=1,e.push(r))}return e}},{key:"removeAt",value:function(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.limit,i=void 0===n?-1:n,a=this.options,s=a.includeMatches,u=a.includeScore,l=a.shouldSort,c=a.sortFn,h=a.ignoreFieldNorm,d=r(t)?r(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return nt(d,{ignoreFieldNorm:h}),l&&d.sort(c),o(i)&&i>-1&&(d=d.slice(0,i)),ot(d,this._docs,{includeMatches:s,includeScore:u})}},{key:"_searchStringList",value:function(t){var e=q(t,this.options),n=this._myIndex.records,i=[];return n.forEach((function(t){var n=t.v,r=t.i,o=t.n;if(u(n)){var a=e.searchIn(n),s=a.isMatch,l=a.score,c=a.indices;s&&i.push({item:n,idx:r,matches:[{score:l,value:n,norm:o,indices:c}]})}})),i}},{key:"_searchLogical",value:function(t){var e=this,n=et(t,this.options),i=function t(n,i,r){if(!n.children){var o=n.keyId,a=n.searcher,s=e._findMatches({key:e._keyStore.get(o),value:e._myIndex.getValueForItemAtKeyId(i,o),searcher:a});return s&&s.length?[{idx:r,item:i,matches:s}]:[]}for(var u=[],l=0,c=n.children.length;l<c;l+=1){var h=t(n.children[l],i,r);if(h.length)u.push.apply(u,Jl(h));else if(n.operator===$)return[]}return u},r=this._myIndex.records,o={},a=[];return r.forEach((function(t){var e=t.$,r=t.i;if(u(e)){var s=i(n,e,r);s.length&&(o[r]||(o[r]={idx:r,item:e,matches:[]},a.push(o[r])),s.forEach((function(t){var e,n=t.matches;(e=o[r].matches).push.apply(e,Jl(n))})))}})),a}},{key:"_searchObjectList",value:function(t){var e=this,n=q(t,this.options),i=this._myIndex,r=i.keys,o=i.records,a=[];return o.forEach((function(t){var i=t.$,o=t.i;if(u(i)){var s=[];r.forEach((function(t,r){s.push.apply(s,Jl(e._findMatches({key:t,value:i[r],searcher:n})))})),s.length&&a.push({idx:o,item:i,matches:s})}})),a}},{key:"_findMatches",value:function(t){var e=t.key,n=t.value,r=t.searcher;if(!u(n))return[];var o=[];if(i(n))n.forEach((function(t){var n=t.v,i=t.i,a=t.n;if(u(n)){var s=r.searchIn(n),l=s.isMatch,c=s.score,h=s.indices;l&&o.push({score:c,key:e,value:n,idx:i,norm:a,indices:h})}}));else{var a=n.v,s=n.n,l=r.searchIn(a),c=l.isMatch,h=l.score,d=l.indices;c&&o.push({score:h,key:e,value:a,norm:s,indices:d})}return o}}]),t}();at.version="6.5.3",at.createIndex=w,at.parseIndex=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getFn,i=void 0===n?b.getFn:n,r=e.fieldNormWeight,o=void 0===r?b.fieldNormWeight:r,a=t.keys,s=t.records,u=new x({getFn:i,fieldNormWeight:o});return u.setKeys(a),u.setIndexRecords(s),u},at.config=b,at.parseQuery=et,function(){H.push.apply(H,arguments)}(W)},857:function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}n.r(e),n.d(e,{__DO_NOT_USE__ActionTypes:function(){return l},applyMiddleware:function(){return m},bindActionCreators:function(){return p},combineReducers:function(){return d},compose:function(){return g},createStore:function(){return h}});var s="function"==typeof Symbol&&Symbol.observable||"@@observable",u=function(){return Math.random().toString(36).substring(7).split("").join(".")},l={INIT:"@@redux/INIT"+u(),REPLACE:"@@redux/REPLACE"+u(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+u()}};function c(t){if("object"!==uc(t)||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function h(t,e,n){var i;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(a(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(a(1));return n(h)(t,e)}if("function"!=typeof t)throw new Error(a(2));var r=t,o=e,u=[],d=u,f=!1;function p(){d===u&&(d=u.slice())}function g(){if(f)throw new Error(a(3));return o}function m(t){if("function"!=typeof t)throw new Error(a(4));if(f)throw new Error(a(5));var e=!0;return p(),d.push(t),function(){if(e){if(f)throw new Error(a(6));e=!1,p();var n=d.indexOf(t);d.splice(n,1),u=null}}}function v(t){if(!c(t))throw new Error(a(7));if(void 0===t.type)throw new Error(a(8));if(f)throw new Error(a(9));try{f=!0,o=r(o,t)}finally{f=!1}for(var e=u=d,n=0;n<e.length;n++)(0,e[n])();return t}function y(t){if("function"!=typeof t)throw new Error(a(10));r=t,v({type:l.REPLACE})}function b(){var t,e=m;return t={subscribe:function(t){if("object"!==uc(t)||null===t)throw new Error(a(11));function n(){t.next&&t.next(g())}return n(),{unsubscribe:e(n)}}},t[s]=function(){return this},t}return v({type:l.INIT}),(i={dispatch:v,subscribe:m,getState:g,replaceReducer:y})[s]=b,i}function d(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var r=e[i];"function"==typeof t[r]&&(n[r]=t[r])}var o,s=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:l.INIT}))throw new Error(a(12));if(void 0===n(void 0,{type:l.PROBE_UNKNOWN_ACTION()}))throw new Error(a(13))}))}(n)}catch(t){o=t}return function(t,e){if(void 0===t&&(t={}),o)throw o;for(var i=!1,r={},u=0;u<s.length;u++){var l=s[u],c=n[l],h=t[l],d=c(h,e);if(void 0===d)throw e&&e.type,new Error(a(14));r[l]=d,i=i||d!==h}return(i=i||s.length!==Object.keys(t).length)?r:t}}function f(t,e){return function(){return e(t.apply(this,arguments))}}function p(t,e){if("function"==typeof t)return f(t,e);if("object"!==uc(t)||null===t)throw new Error(a(16));var n={};for(var i in t){var r=t[i];"function"==typeof r&&(n[i]=f(r,e))}return n}function g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function m(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),i=function(){throw new Error(a(15))},r={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=e.map((function(t){return t(r)}));return i=g.apply(void 0,s)(n.dispatch),o(o({},n),{},{dispatch:i})}}}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i,r,o={};return i=n(373),r=n.n(i),n(187),n(883),n(789),n(686),o.default=r(),o=o.default}()},"object"===uc(t)&&"object"===uc(e)?e.exports=r():"function"==typeof define&&n.amdO?define([],r):"object"===uc(t)?t.Choices=r():i.Choices=r()})),wc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t>n?n:t<e?e:t},Ac=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.pow(10,e);return Math.round(n*t)/n},Dc={grad:.9,turn:360,rad:360/(2*Math.PI)},Cc=function(t){return"#"===t[0]&&(t=t.substr(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}:{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:1}},Tc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"deg";return Number(t)*(Dc[e]||1)},kc=function(t){var e=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(t);return e?Sc({h:Tc(e[1],e[2]),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)}):{h:0,s:0,v:0,a:1}},Sc=function(t){var e=t.h,n=t.s,i=t.l;return{h:e,s:(n*=(i<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:t.a}},Ic=function(t){var e=t.h,n=t.s,i=t.v,r=t.a,o=(200-n)*i/100;return{h:Ac(e),s:Ac(o>0&&o<200?n*i/100/(o<=100?o:200-o)*100:0),l:Ac(o/2),a:Ac(r,2)}},Oc=function(t){var e=Ic(t),n=e.h,i=e.s,r=e.l;return"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")},Mc=function(t){var e=Ic(t),n=e.h,i=e.s,r=e.l,o=e.a;return"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(o,")")},Rc=function(t){var e=t.h,n=t.s,i=t.v,r=t.a;e=e/360*6,n/=100,i/=100;var o=Math.floor(e),a=i*(1-n),s=i*(1-(e-o)*n),u=i*(1-(1-e+o)*n),l=o%6;return{r:Ac(255*[i,s,a,a,u,i][l]),g:Ac(255*[u,i,i,s,a,a][l]),b:Ac(255*[a,a,u,i,i,s][l]),a:Ac(r,2)}},Lc=function(t){var e=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(t);return e?Bc({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):{h:0,s:0,v:0,a:1}},Pc=Lc,Fc=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Nc=function(t){var e=t.r,n=t.g,i=t.b;return"#"+Fc(e)+Fc(n)+Fc(i)},Bc=function(t){var e=t.r,n=t.g,i=t.b,r=t.a,o=Math.max(e,n,i),a=o-Math.min(e,n,i),s=a?o===e?(n-i)/a:o===n?2+(i-e)/a:4+(e-n)/a:0;return{h:Ac(60*(s<0?s+6:s)),s:Ac(o?a/o*100:0),v:Ac(o/255*100),a:r}},jc=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0},Vc=function(t,e){return t.replace(/\s/g,"")===e.replace(/\s/g,"")},zc={},Uc=function(t){var e=zc[t];return e||((e=document.createElement("template")).innerHTML=t,zc[t]=e),e},Gc=function(t,e,n){t.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:n}))},Wc=!1,Hc=function(t){return"touches"in t},qc=function(t,e){var n=Hc(e)?e.touches[0]:e,i=t.el.getBoundingClientRect();Gc(t.el,"move",t.getMove({x:wc((n.pageX-(i.left+window.pageXOffset))/i.width),y:wc((n.pageY-(i.top+window.pageYOffset))/i.height)}))},$c=function(){function t(e,n,i,r){nc(this,t);var o=Uc('<div role="slider" tabindex="0" part="'.concat(n,'" ').concat(i,'><div part="').concat(n,'-pointer"></div></div>'));e.appendChild(o.content.cloneNode(!0));var a=e.querySelector("[part=".concat(n,"]"));a.addEventListener("mousedown",this),a.addEventListener("touchstart",this),a.addEventListener("keydown",this),this.el=a,this.xy=r,this.nodes=[a.firstChild,a]}return rc(t,[{key:"dragging",set:function(t){var e=t?document.addEventListener:document.removeEventListener;e(Wc?"touchmove":"mousemove",this),e(Wc?"touchend":"mouseup",this)}},{key:"handleEvent",value:function(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!function(t){return!(Wc&&!Hc(t)||(Wc||(Wc=Hc(t)),0))}(t)||!Wc&&0!=t.button)return;this.el.focus(),qc(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),qc(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":!function(t,e){var n=e.keyCode;n>40||t.xy&&n<37||n<33||(e.preventDefault(),Gc(t.el,"move",t.getMove({x:39===n?.01:37===n?-.01:34===n?.05:33===n?-.05:35===n?1:36===n?-1:0,y:40===n?.01:38===n?-.01:0},!0)))}(this,t)}}},{key:"style",value:function(t){var e=this;t.forEach((function(t,n){for(var i in t)e.nodes[n].style.setProperty(i,t[i])}))}}]),t}(),Yc=function(t){Hl(n,t);var e=$l(n);function n(t){return nc(this,n),e.call(this,t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}return rc(n,[{key:"update",value:function(t){var e=t.h;this.h=e,this.style([{left:"".concat(e/360*100,"%"),color:Oc({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow","".concat(Ac(e)))}},{key:"getMove",value:function(t,e){return{h:e?wc(this.h+360*t.x,0,360):360*t.x}}}]),n}($c),Xc=function(t){Hl(n,t);var e=$l(n);function n(t){return nc(this,n),e.call(this,t,"saturation",'aria-label="Color"',!0)}return rc(n,[{key:"update",value:function(t){this.hsva=t,this.style([{top:"".concat(100-t.v,"%"),left:"".concat(t.s,"%"),color:Oc(t)},{"background-color":Oc({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext","Saturation ".concat(Ac(t.s),"%, Brightness ").concat(Ac(t.v),"%"))}},{key:"getMove",value:function(t,e){return{s:e?wc(this.hsva.s+100*t.x,0,100):100*t.x,v:e?wc(this.hsva.v-100*t.y,0,100):Math.round(100-100*t.y)}}}]),n}($c),Kc=Symbol("same"),Zc=Symbol("color"),Jc=Symbol("hsva"),Qc=Symbol("change"),th=Symbol("update"),eh=Symbol("parts"),nh=Symbol("css"),ih=Symbol("sliders"),rh=function(t){Hl(n,t);var e=$l(n);function n(){var t;nc(this,n),t=e.call(this);var i=Uc("<style>".concat(t[nh].join(""),"</style>")),r=t.attachShadow({mode:"open"});return r.appendChild(i.content.cloneNode(!0)),r.addEventListener("move",Xl(t)),t[eh]=t[ih].map((function(t){return new t(r)})),t}return rc(n,[{key:nh,get:function(){return[":host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{display:block;content:'';position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}","[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}","[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}"]}},{key:ih,get:function(){return[Xc,Yc]}},{key:"color",get:function(){return this[Zc]}},{key:"color",set:function(t){if(!this[Kc](t)){var e=this.colorModel.toHsva(t);this[th](e),this[Qc](t)}}},{key:"connectedCallback",value:function(){if(this.hasOwnProperty("color")){var t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}},{key:"attributeChangedCallback",value:function(t,e,n){var i=this.colorModel.fromAttr(n);this[Kc](i)||(this.color=i)}},{key:"handleEvent",value:function(t){var e,n=this[Jc],i=tc(tc({},n),t.detail);this[th](i),jc(i,n)||this[Kc](e=this.colorModel.fromHsva(i))||this[Qc](e)}},{key:Kc,value:function(t){return this.color&&this.colorModel.equal(t,this.color)}},{key:th,value:function(t){this[Jc]=t,this[eh].forEach((function(e){return e.update(t)}))}},{key:Qc,value:function(t){this[Zc]=t,Gc(this,"color-changed",{value:t})}}],[{key:"observedAttributes",get:function(){return["color"]}}]),n}(Gl(HTMLElement)),oh={defaultColor:"#000",toHsva:function(t){return Bc(Cc(t))},fromHsva:function(t){return Nc(Rc(t))},equal:function(t,e){return t.toLowerCase()===e.toLowerCase()||jc(Cc(t),Cc(e))},fromAttr:function(t){return t}},ah=function(t){Hl(n,t);var e=$l(n);function n(){return nc(this,n),e.apply(this,arguments)}return rc(n)}(function(t){Hl(n,t);var e=$l(n);function n(){return nc(this,n),e.apply(this,arguments)}return rc(n,[{key:"colorModel",get:function(){return oh}}]),n}(rh));customElements.define("hex-color-picker",ah);var sh={defaultColor:"hsl(0, 0%, 0%)",toHsva:kc,fromHsva:Oc,equal:Vc,fromAttr:function(t){return t}},uh=function(t){Hl(n,t);var e=$l(n);function n(){return nc(this,n),e.apply(this,arguments)}return rc(n)}(function(t){Hl(n,t);var e=$l(n);function n(){return nc(this,n),e.apply(this,arguments)}return rc(n,[{key:"colorModel",get:function(){return sh}}]),n}(rh));customElements.define("hsl-string-color-picker",uh);var lh={defaultColor:"rgb(0, 0, 0)",toHsva:Pc,fromHsva:function(t){var e=Rc(t),n=e.r,i=e.g,r=e.b;return"rgb(".concat(n,", ").concat(i,", ").concat(r,")")},equal:Vc,fromAttr:function(t){return t}},ch=function(t){Hl(n,t);var e=$l(n);function n(){return nc(this,n),e.apply(this,arguments)}return rc(n)}(function(t){Hl(n,t);var e=$l(n);function n(){return nc(this,n),e.apply(this,arguments)}return rc(n,[{key:"colorModel",get:function(){return lh}}]),n}(rh));customElements.define("rgb-string-color-picker",ch);var hh=function(t){Hl(n,t);var e=$l(n);function n(t){return nc(this,n),e.call(this,t,"alpha",'aria-label="Alpha" aria-valuemin="0" aria-valuemax="1"',!1)}return rc(n,[{key:"update",value:function(t){this.hsva=t;var e=Mc(tc(tc({},t),{},{a:0})),n=Mc(tc(tc({},t),{},{a:1})),i=100*t.a;this.style([{left:"".concat(i,"%"),color:Mc(t)},{"--gradient":"linear-gradient(90deg, ".concat(e,", ").concat(n)}]);var r=Ac(i);this.el.setAttribute("aria-valuenow","".concat(r)),this.el.setAttribute("aria-valuetext","".concat(r,"%"))}},{key:"getMove",value:function(t,e){return{a:e?wc(this.hsva.a+t.x):t.x}}}]),n}($c),dh={defaultColor:"rgba(0, 0, 0, 1)",toHsva:Lc,fromHsva:function(t){var e=Rc(t),n=e.r,i=e.g,r=e.b,o=e.a;return"rgba(".concat(n,", ").concat(i,", ").concat(r,", ").concat(o,")")},equal:Vc,fromAttr:function(t){return t}},fh=function(t){Hl(n,t);var e=$l(n);function n(){return nc(this,n),e.apply(this,arguments)}return rc(n)}(function(t){Hl(n,t);var e=$l(n);function n(){return nc(this,n),e.apply(this,arguments)}return rc(n,[{key:"colorModel",get:function(){return dh}}]),n}(function(t){Hl(n,t);var e=$l(n);function n(){return nc(this,n),e.apply(this,arguments)}return rc(n,[{key:nh,get:function(){return[].concat(Jl(zl(Zl(n.prototype),nh,this)),['[part=alpha]{flex:0 0 24px}[part=alpha]::after{display:block;content:\'\';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;background-image:var(--gradient);box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part^=alpha]{background-color:#fff;background-image:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>\')}[part=alpha-pointer]{top:50%}'])}},{key:ih,get:function(){return[].concat(Jl(zl(Zl(n.prototype),ih,this)),[hh])}}]),n}(rh)));customElements.define("rgba-string-color-picker",fh);var ph=function(t){t.data("colorPickerFormComponent",(function(t){var e=t.isAutofocused,n=t.isDisabled;return{isOpen:!1,state:t.state,init:function(){var t=this;null!==this.state&&""!==this.state&&this.setState(this.state),e&&this.openPicker(),this.$refs.input.addEventListener("change",(function(e){t.setState(e.target.value)})),this.$refs.picker.addEventListener("color-changed",(function(e){t.setState(e.detail.value)}))},openPicker:function(){n||(this.isOpen=!0)},closePicker:function(){this.isOpen=!1},setState:function(t){this.state=t,this.$refs.input.value=t,this.$refs.picker.color=t}}}))},gh=1e3,mh=6e4,vh=36e5,yh="millisecond",bh="second",_h="minute",Eh="hour",xh="day",wh="week",Ah="month",Dh="quarter",Ch="year",Th="date",kh="Invalid Date",Sh=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ih=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Oh={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Mh=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},Rh={s:Mh,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),r=n%60;return(e<=0?"+":"-")+Mh(i,2,"0")+":"+Mh(r,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),r=e.clone().add(i,Ah),o=n-r<0,a=e.clone().add(i+(o?-1:1),Ah);return+(-(i+(n-r)/(o?r-a:a-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:Ah,y:Ch,w:wh,d:xh,D:Th,h:Eh,m:_h,s:bh,ms:yh,Q:Dh}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},Lh="en",Ph={};Ph[Lh]=Oh;var Fh=function(t){return t instanceof Vh},Nh=function t(e,n,i){var r;if(!e)return Lh;if("string"==typeof e){var o=e.toLowerCase();Ph[o]&&(r=o),n&&(Ph[o]=n,r=o);var a=e.split("-");if(!r&&a.length>1)return t(a[0])}else{var s=e.name;Ph[s]=e,r=s}return!i&&r&&(Lh=r),r||!i&&Lh},Bh=function(t,e){if(Fh(t))return t.clone();var n="object"===uc(e)?e:{};return n.date=t,n.args=arguments,new Vh(n)},jh=Rh;jh.l=Nh,jh.i=Fh,jh.w=function(t,e){return Bh(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var Vh=function(){function t(t){this.$L=Nh(t.locale,null,!0),this.parse(t)}var e=t.prototype;return e.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(jh.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(Sh);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},e.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},e.$utils=function(){return jh},e.isValid=function(){return!(this.$d.toString()===kh)},e.isSame=function(t,e){var n=Bh(t);return this.startOf(e)<=n&&n<=this.endOf(e)},e.isAfter=function(t,e){return Bh(t)<this.startOf(e)},e.isBefore=function(t,e){return this.endOf(e)<Bh(t)},e.$g=function(t,e,n){return jh.u(t)?this[e]:this.set(n,t)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,e){var n=this,i=!!jh.u(e)||e,r=jh.p(t),o=function(t,e){var r=jh.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return i?r:r.endOf(xh)},a=function(t,e){return jh.w(n.toDate()[t].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},s=this.$W,u=this.$M,l=this.$D,c="set"+(this.$u?"UTC":"");switch(r){case Ch:return i?o(1,0):o(31,11);case Ah:return i?o(1,u):o(0,u+1);case wh:var h=this.$locale().weekStart||0,d=(s<h?s+7:s)-h;return o(i?l-d:l+(6-d),u);case xh:case Th:return a(c+"Hours",0);case Eh:return a(c+"Minutes",1);case _h:return a(c+"Seconds",2);case bh:return a(c+"Milliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,e){var n,i=jh.p(t),r="set"+(this.$u?"UTC":""),o=(n={},n[xh]=r+"Date",n[Th]=r+"Date",n[Ah]=r+"Month",n[Ch]=r+"FullYear",n[Eh]=r+"Hours",n[_h]=r+"Minutes",n[bh]=r+"Seconds",n[yh]=r+"Milliseconds",n)[i],a=i===xh?this.$D+(e-this.$W):e;if(i===Ah||i===Ch){var s=this.clone().set(Th,1);s.$d[o](a),s.init(),this.$d=s.set(Th,Math.min(this.$D,s.daysInMonth())).$d}else o&&this.$d[o](a);return this.init(),this},e.set=function(t,e){return this.clone().$set(t,e)},e.get=function(t){return this[jh.p(t)]()},e.add=function(t,e){var n,i=this;t=Number(t);var r=jh.p(e),o=function(e){var n=Bh(i);return jh.w(n.date(n.date()+Math.round(e*t)),i)};if(r===Ah)return this.set(Ah,this.$M+t);if(r===Ch)return this.set(Ch,this.$y+t);if(r===xh)return o(1);if(r===wh)return o(7);var a=(n={},n[_h]=mh,n[Eh]=vh,n[bh]=gh,n)[r]||1,s=this.$d.getTime()+t*a;return jh.w(s,this)},e.subtract=function(t,e){return this.add(-1*t,e)},e.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||kh;var i=t||"YYYY-MM-DDTHH:mm:ssZ",r=jh.z(this),o=this.$H,a=this.$m,s=this.$M,u=n.weekdays,l=n.months,c=function(t,n,r,o){return t&&(t[n]||t(e,i))||r[n].slice(0,o)},h=function(t){return jh.s(o%12||12,t,"0")},d=n.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:jh.s(s+1,2,"0"),MMM:c(n.monthsShort,s,l,3),MMMM:c(l,s),D:this.$D,DD:jh.s(this.$D,2,"0"),d:String(this.$W),dd:c(n.weekdaysMin,this.$W,u,2),ddd:c(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:jh.s(o,2,"0"),h:h(1),hh:h(2),a:d(o,a,!0),A:d(o,a,!1),m:String(a),mm:jh.s(a,2,"0"),s:String(this.$s),ss:jh.s(this.$s,2,"0"),SSS:jh.s(this.$ms,3,"0"),Z:r};return i.replace(Ih,(function(t,e){return e||f[t]||r.replace(":","")}))},e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},e.diff=function(t,e,n){var i,r=jh.p(e),o=Bh(t),a=(o.utcOffset()-this.utcOffset())*mh,s=this-o,u=jh.m(this,o);return u=(i={},i[Ch]=u/12,i[Ah]=u,i[Dh]=u/3,i[wh]=(s-a)/6048e5,i[xh]=(s-a)/864e5,i[Eh]=s/vh,i[_h]=s/mh,i[bh]=s/gh,i)[r]||s,n?u:jh.a(u)},e.daysInMonth=function(){return this.endOf(Ah).$D},e.$locale=function(){return Ph[this.$L]},e.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=Nh(t,e,!0);return i&&(n.$L=i),n},e.clone=function(){return jh.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},t}(),zh=Vh.prototype;Bh.prototype=zh,[["$ms",yh],["$s",bh],["$m",_h],["$H",Eh],["$W",xh],["$M",Ah],["$y",Ch],["$D",Th]].forEach((function(t){zh[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),Bh.extend=function(t,e){return t.$i||(t(e,Vh,Bh),t.$i=!0),Bh},Bh.locale=Nh,Bh.isDayjs=Fh,Bh.unix=function(t){return Bh(1e3*t)},Bh.en=Ph[Lh],Bh.Ls=Ph,Bh.p={};var Uh=Bh,Gh=mc(vc()),Wh=mc(yc()),Hh=mc(bc()),qh=mc(_c());Uh.extend(Gh.default),Uh.extend(Wh.default),Uh.extend(Hh.default),Uh.extend(qh.default),Uh.extend((function(t,e,n){var i=[];n.addLocaleListeners=function(t){return i.push(t)},n.onLocaleUpdated=function(){i.forEach((function(t){return t()}))},n.updateLocale=function(t){n.locale(t),n.onLocaleUpdated()}})),window.dayjs=Uh;var $h=function(t){t.data("dateTimePickerFormComponent",(function(t){var e=t.displayFormat,n=t.firstDayOfWeek,i=t.isAutofocused,r=t.state,o=Uh.tz.guess();return{daysInFocusedMonth:[],displayText:"",emptyDaysInFocusedMonth:[],focusedDate:null,focusedMonth:null,focusedYear:null,hour:null,isClearingState:!1,minute:null,open:!1,second:null,state:r,dayLabels:[],months:[],init:function(){var t,e,n,r,a,s,u,l=this;this.focusedDate=Uh().tz(o);var c=null!==(t=this.getSelectedDate())&&void 0!==t?t:Uh().tz(o).hour(0).minute(0).second(0);(null!==this.getMaxDate()&&c.isAfter(this.getMaxDate())||null!==this.getMinDate()&&c.isBefore(this.getMinDate()))&&(c=null),this.hour=null!==(e=null===(n=c)||void 0===n?void 0:n.hour())&&void 0!==e?e:0,this.minute=null!==(r=null===(a=c)||void 0===a?void 0:a.minute())&&void 0!==r?r:0,this.second=null!==(s=null===(u=c)||void 0===u?void 0:u.second())&&void 0!==s?s:0,this.setDisplayText(),this.setMonths(),this.setDayLabels(),i&&this.$nextTick((function(){return l.openPicker()})),Uh.addLocaleListeners((function(){l.setDisplayText(),l.setMonths(),l.setDayLabels()})),this.$watch("focusedMonth",(function(){l.focusedMonth=+l.focusedMonth,l.focusedDate.month()!==l.focusedMonth&&(l.focusedDate=l.focusedDate.month(l.focusedMonth))})),this.$watch("focusedYear",(function(){var t,e;if((null===(t=l.focusedYear)||void 0===t?void 0:t.length)>4&&(l.focusedYear=l.focusedYear.substring(0,4)),l.focusedYear&&4===(null===(e=l.focusedYear)||void 0===e?void 0:e.length)){var n=+l.focusedYear;Number.isInteger(n)||(n=Uh().tz(o).year(),l.focusedYear=n),l.focusedDate.year()!==n&&(l.focusedDate=l.focusedDate.year(n))}})),this.$watch("focusedDate",(function(){var t=l.focusedDate.month(),e=l.focusedDate.year();l.focusedMonth!==t&&(l.focusedMonth=t),l.focusedYear!==e&&(l.focusedYear=e),l.setupDaysGrid(),l.$nextTick((function(){l.evaluatePosition()}))})),this.$watch("hour",(function(){var t,e,n=+l.hour;if(Number.isInteger(n)?l.hour=n>23?0:n<0?23:n:l.hour=0,!l.isClearingState){var i=null!==(t=l.getSelectedDate())&&void 0!==t?t:l.focusedDate;l.setState(i.hour(null!==(e=l.hour)&&void 0!==e?e:0))}})),this.$watch("minute",(function(){var t,e,n=+l.minute;if(Number.isInteger(n)?l.minute=n>59?0:n<0?59:n:l.minute=0,!l.isClearingState){var i=null!==(t=l.getSelectedDate())&&void 0!==t?t:l.focusedDate;l.setState(i.minute(null!==(e=l.minute)&&void 0!==e?e:0))}})),this.$watch("second",(function(){var t,e,n=+l.second;if(Number.isInteger(n)?l.second=n>59?0:n<0?59:n:l.second=0,!l.isClearingState){var i=null!==(t=l.getSelectedDate())&&void 0!==t?t:l.focusedDate;l.setState(i.second(null!==(e=l.second)&&void 0!==e?e:0))}})),this.$watch("state",(function(){var t,e,n,i,r,o;if(void 0!==l.state){var a=l.getSelectedDate();null!==l.getMaxDate()&&a.isAfter(l.getMaxDate())&&(a=null),null!==l.getMinDate()&&a.isBefore(l.getMinDate())&&(a=null);var s=null!==(t=null===(e=a)||void 0===e?void 0:e.hour())&&void 0!==t?t:0;l.hour!==s&&(l.hour=s);var u=null!==(n=null===(i=a)||void 0===i?void 0:i.minute())&&void 0!==n?n:0;l.minute!==u&&(l.minute=u);var c=null!==(r=null===(o=a)||void 0===o?void 0:o.second())&&void 0!==r?r:0;l.second!==c&&(l.second=c),l.setDisplayText()}}))},clearState:function(){var t=this;this.isClearingState=!0,this.setState(null),this.closePicker(),this.$nextTick((function(){return t.isClearingState=!1}))},closePicker:function(){this.open=!1},dateIsDisabled:function(t){return!(!this.getMaxDate()||!t.isAfter(this.getMaxDate()))||!(!this.getMinDate()||!t.isBefore(this.getMinDate()))},dayIsDisabled:function(t){var e;return null!==(e=this.focusedDate)&&void 0!==e||(this.focusedDate=Uh().tz(o)),this.dateIsDisabled(this.focusedDate.date(t))},dayIsSelected:function(t){var e,n=this.getSelectedDate();return null!==n&&(null!==(e=this.focusedDate)&&void 0!==e||(this.focusedDate=Uh().tz(o)),n.date()===t&&n.month()===this.focusedDate.month()&&n.year()===this.focusedDate.year())},dayIsToday:function(t){var e,n=Uh().tz(o);return null!==(e=this.focusedDate)&&void 0!==e||(this.focusedDate=n),n.date()===t&&n.month()===this.focusedDate.month()&&n.year()===this.focusedDate.year()},evaluatePosition:function(){for(var t=window.innerHeight-this.$refs.button.offsetHeight,e=this.$refs.button;e;)t-=e.offsetTop,e=e.offsetParent;this.$refs.picker.offsetHeight<=t?this.$refs.picker.style.bottom="auto":this.$refs.picker.style.bottom="".concat(this.$refs.button.offsetHeight,"px")},focusPreviousDay:function(){var t;null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=Uh().tz(o)),this.focusedDate=this.focusedDate.subtract(1,"day")},focusPreviousWeek:function(){var t;null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=Uh().tz(o)),this.focusedDate=this.focusedDate.subtract(1,"week")},focusNextDay:function(){var t;null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=Uh().tz(o)),this.focusedDate=this.focusedDate.add(1,"day")},focusNextWeek:function(){var t;null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=Uh().tz(o)),this.focusedDate=this.focusedDate.add(1,"week")},getDayLabels:function(){var t=Uh.weekdaysShort();return 0===n?t:[].concat(Jl(t.slice(n)),Jl(t.slice(0,n)))},getMaxDate:function(){var t=Uh(this.$refs.maxDate.value);return t.isValid()?t:null},getMinDate:function(){var t=Uh(this.$refs.minDate.value);return t.isValid()?t:null},getSelectedDate:function(){if(void 0===this.state)return null;var t=Uh(this.state);return t.isValid()?t:null},openPicker:function(){var t,e,n=this;this.focusedDate=null!==(t=null!==(e=this.getSelectedDate())&&void 0!==e?e:this.getMinDate())&&void 0!==t?t:Uh().tz(o),this.setupDaysGrid(),this.open=!0,this.$nextTick((function(){n.evaluatePosition()}))},selectDate:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&this.setFocusedDay(e),null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=Uh().tz(o)),this.setState(this.focusedDate)},setDisplayText:function(){this.displayText=this.getSelectedDate()?this.getSelectedDate().format(e):""},setMonths:function(){this.months=Uh.months()},setDayLabels:function(){this.dayLabels=this.getDayLabels()},setupDaysGrid:function(){var t;null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=Uh().tz(o)),this.emptyDaysInFocusedMonth=Array.from({length:this.focusedDate.date(8-n).day()},(function(t,e){return e+1})),this.daysInFocusedMonth=Array.from({length:this.focusedDate.daysInMonth()},(function(t,e){return e+1}))},setFocusedDay:function(t){var e;this.focusedDate=(null!==(e=this.focusedDate)&&void 0!==e?e:Uh().tz(o)).date(t)},setState:function(t){var e,n,i;if(null===t)return this.state=null,void this.setDisplayText();this.dateIsDisabled(t)||(this.state=t.hour(null!==(e=this.hour)&&void 0!==e?e:0).minute(null!==(n=this.minute)&&void 0!==n?n:0).second(null!==(i=this.second)&&void 0!==i?i:0).format("YYYY-MM-DD HH:mm:ss"),this.setDisplayText())},togglePickerVisibility:function(){this.open?this.closePicker():this.openPicker()}}}))},Yh={};!function(t,e){for(var n in e)cc(t,n,{get:e[n],enumerable:!0})}(Yh,{FileOrigin:function(){return yv},FileStatus:function(){return vv},OptionTypes:function(){return bv},Status:function(){return mv},create:function(){return _v},destroy:function(){return Ev},find:function(){return wv},getOptions:function(){return Dv},parse:function(){return xv},registerPlugin:function(){return Av},setOptions:function(){return Cv},supported:function(){return fv}});
=======
class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],o=e.duration;r.forEach((i=>i({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=kn.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o,a=r.length-1,s=!1;for(;a>=0;--a)o=r[a],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),s=!0):(r[a]=r[r.length-1],r.pop());s&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const jo="transparent",zo={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=lr(t||jo),r=i.valid&&lr(e||jo);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class Ho{constructor(t,e,n,i){const r=e[n];i=Fr([t.to,i,r,t.from]);const o=Fr([t.from,r,i]);this._active=!0,this._fn=t.fn||zo[t.type||typeof o],this._easing=Si[t.easing]||Si.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Fr([t.to,e,i,t.from]),this._from=Fr([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let s;if(this._active=r!==a&&(o||e<n),!this._active)return this._target[i]=a,void this._notify(!0);e<0?this._target[i]=r:(s=e/n%2,s=o&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[i]=this._fn(r,a,s))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}pr.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Vo=Object.keys(pr.animation);pr.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),pr.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),pr.describe("animations",{_fallback:"animation"}),pr.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class Wo{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Pn(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((n=>{const i=t[n];if(!Pn(i))return;const r={};for(const t of Vo)r[t]=i[t];(Rn(i.properties)&&i.properties||[n]).forEach((t=>{t!==n&&e.has(t)||e.set(t,r)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let e=0;e<i.length;e++){const r=t[i[e]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let s;for(s=o.length-1;s>=0;--s){const l=o[s];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const u=e[l];let c=r[l];const h=n.get(l);if(c){if(h&&c.active()){c.update(h,u,a);continue}c.cancel()}h&&h.duration?(r[l]=c=new Ho(h,t,l,u),i.push(c)):t[l]=u}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Bo.add(this._chart,n),!0):void 0}}function Uo(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:i?o:r,end:i?r:o}}function Go(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,o;for(r=0,o=i.length;r<o;++r)n.push(i[r].index);return n}function qo(t,e,n,i={}){const r=t.keys,o="single"===i.mode;let a,s,l,u;if(null!==e){for(a=0,s=r.length;a<s;++a){if(l=+r[a],l===n){if(i.all)continue;break}u=t.values[l],Fn(u)&&(o||0===e||ci(e)===ci(u))&&(e+=u)}return e}}function $o(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Yo(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Xo(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function Ko(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:o,vScale:a,index:s}=i,l=o.axis,u=a.axis,c=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(o,a,i),h=e.length;let d;for(let t=0;t<h;++t){const n=e[t],{[l]:o,[u]:h}=n;d=(n._stacks||(n._stacks={}))[u]=Yo(r,c,o),d[s]=h,d._top=Xo(d,a,!0,i.type),d._bottom=Xo(d,a,!1,i.type)}}function Zo(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function Jo(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n]}}}const Qo=t=>"reset"===t||"none"===t,ta=(t,e)=>e?t:Object.assign({},t);class ea{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=$o(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Jo(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=Bn(n.xAxisID,Zo(t,"x")),o=e.yAxisID=Bn(n.yAxisID,Zo(t,"y")),a=e.rAxisID=Bn(n.rAxisID,Zo(t,"r")),s=e.indexAxis,l=e.iAxisID=i(s,r,o,a),u=e.vAxisID=i(s,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Vr(this._data,this),t._stacked&&Jo(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Pn(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i],n[i]={x:o,y:t[o]};return n}(e);else if(n!==e){if(n){Vr(n,this);const t=this._cachedMeta;Jo(t),t._parsed=[]}e&&Object.isExtensible(e)&&(r=this,(i=e)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),Hr.forEach((t=>{const e="_onData"+Zn(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...t){const r=n.apply(this,t);return i._chartjs.listeners.forEach((n=>{"function"==typeof n[e]&&n[e](...t)})),r}})})))),this._syncList=[],this._data=e}var i,r}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=$o(e.vScale,e),e.stack!==n.stack&&(i=!0,Jo(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&Ko(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,a=r.axis;let s,l,u,c=0===t&&e===i.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,u=i;else{u=Rn(i[t])?this.parseArrayData(n,i,t,e):Pn(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===l[a]||h&&l[a]<h[a];for(s=0;s<e;++s)n._parsed[s+t]=l=u[s],c&&(r()&&(c=!1),h=l);n._sorted=c}o&&Ko(this,u)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:o}=t,a=r.axis,s=o.axis,l=r.getLabels(),u=r===o,c=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,c[h]={[a]:u||r.parse(l[f],f),[s]:o.parse(e[f],f)};return c}parseArrayData(t,e,n,i){const{xScale:r,yScale:o}=t,a=new Array(i);let s,l,u,c;for(s=0,l=i;s<l;++s)u=s+n,c=e[u],a[s]={x:r.parse(c[0],u),y:o.parse(c[1],u)};return a}parseObjectData(t,e,n,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l=new Array(i);let u,c,h,d;for(u=0,c=i;u<c;++u)h=u+n,d=e[h],l[u]={x:r.parse(Kn(d,a),h),y:o.parse(Kn(d,s),h)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,o=e[t.axis];return qo({keys:Go(i,!0),values:e._stacks[t.axis]},o,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let o=null===r?NaN:r;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,o=qo(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,o=i.length,a=this._getOtherScale(t),s=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Go(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:c}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=i[h];const e=d[a.axis];return!Fn(d[t.axis])||u>e||c<e}for(h=0;h<o&&(f()||(this.updateRangeFromParsed(l,t,d,s),!r));++h);if(r)for(h=o-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,t,d,s);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],Fn(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return Pn(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(Bn(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=Uo(t,n),r=Uo(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,o=[],a=this._drawStart||0,s=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(t,r,a,s),u=a;u<a+s;++u){const e=i[u];e.hidden||(e.active&&l?o.push(e):e.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return Nr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return Nr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,r=this._cachedDataOpts,o=t+"-"+e,a=r[o],s=this.enableOptionSharing&&Jn(n);if(a)return ta(a,s);const l=this.chart.config,u=l.datasetElementScopeKeys(this._type,t),c=i?[`${t}Hover`,"hover",t,""]:[t,""],h=l.getOptionScopes(this.getDataset(),u),d=Object.keys(pr.elements[t]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,i)),c);return f.$shared&&(f.$shared=s,r[o]=Object.freeze(ta(f,s))),f}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let s;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),o=i.getOptionScopes(this.getDataset(),r);s=i.createResolver(o,this.getContext(t,n,e))}const l=new Wo(i,s&&s.animations);return s&&s._cacheable&&(r[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Qo(t)||this.chart._animationsDisabled}updateElement(t,e,n,i){Qo(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!Qo(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const i=n.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,n=!0){const i=this._cachedMeta,r=i.data,o=t+e;let a;const s=t=>{for(t.length+=e,a=t.length-1;a>=o;a--)t[a]=t[a-e]};for(s(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&Jo(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function na(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=Wr(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,r,o,a,s=e._length;const l=()=>{32767!==o&&-32768!==o&&(Jn(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=n.length;i<r;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=e.ticks.length;i<r;++i)o=e.getPixelForTick(i),l();return s}function ia(t,e,n,i){return Rn(t)?function(t,e,n,i){const r=n.parse(t[0],i),o=n.parse(t[1],i),a=Math.min(r,o),s=Math.max(r,o);let l=a,u=s;Math.abs(a)>Math.abs(s)&&(l=s,u=a),e[n.axis]=u,e._custom={barStart:l,barEnd:u,start:r,end:o,min:a,max:s}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function ra(t,e,n,i){const r=t.iScale,o=t.vScale,a=r.getLabels(),s=r===o,l=[];let u,c,h,d;for(u=n,c=n+i;u<c;++u)d=e[u],h={},h[r.axis]=s||r.parse(a[u],u),l.push(ia(d,h,o,u));return l}function oa(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function aa(t,e,n,i){let r=e.borderSkipped;const o={};if(!r)return void(t.borderSkipped=o);const{start:a,end:s,reverse:l,top:u,bottom:c}=function(t){let e,n,i,r,o;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:n,end:i,reverse:e,top:r,bottom:o}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=u:(n._bottom||0)===i?r=c:(o[sa(c,a,s,l)]=!0,r=u)),o[sa(r,a,s,l)]=!0,t.borderSkipped=o}function sa(t,e,n,i){var r,o,a;return i?(a=n,t=la(t=(r=t)===(o=e)?a:r===a?o:r,n,e)):t=la(t,e,n),t}function la(t,e,n){return"start"===t?e:"end"===t?n:t}function ua(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}ea.defaults={},ea.prototype.datasetElementType=null,ea.prototype.dataElementType=null;class ca extends ea{parsePrimitiveData(t,e,n,i){return ra(t,e,n,i)}parseArrayData(t,e,n,i){return ra(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l="x"===r.axis?a:s,u="x"===o.axis?a:s,c=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=e[h],f={},f[r.axis]=r.parse(Kn(p,l),h),c.push(ia(Kn(p,u),f,o,h));return c}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),o=r._custom,a=oa(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:o,_cachedMeta:{vScale:a}}=this,s=a.getBasePixel(),l=a.isHorizontal(),u=this._getRuler(),c=this.resolveDataElementOptions(e,i),h=this.getSharedOptions(c),d=this.includeOptions(i,h);this.updateSharedOptions(h,i,c);for(let c=e;c<e+n;c++){const e=this.getParsed(c),n=r||Ln(e[a.axis])?{base:s,head:s}:this._calculateBarValuePixels(c),f=this._calculateBarIndexPixels(c,u),p=(e._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||oa(e._custom)||o===p._top||o===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(g.options=h||this.resolveDataElementOptions(c,t[c].active?"active":i));const m=g.options||t[c].options;aa(g,m,p,o),ua(g,m,u.ratio),this.updateElement(t[c],c,g,i)}}_getStacks(t,e){const n=this._cachedMeta.iScale,i=n.getMatchingVisibleMetas(this._type),r=n.options.stacked,o=i.length,a=[];let s,l;for(s=0;s<o;++s)if(l=i[s],l.controller.options.grouped){if(void 0!==e){const t=l.controller.getParsed(e)[l.controller._cachedMeta.vScale.axis];if(Ln(t)||isNaN(t))continue}if((!1===r||-1===a.indexOf(l.stack)||void 0===r&&void 0===l.stack)&&a.push(l.stack),l.index===t)break}return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||na(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n},options:{base:i,minBarLength:r}}=this,o=i||0,a=this.getParsed(t),s=a._custom,l=oa(s);let u,c,h=a[e.axis],d=0,f=n?this.applyStack(e,a,n):h;f!==h&&(d=f-h,f=h),l&&(h=s.barStart,f=s.barEnd-s.barStart,0!==h&&ci(h)!==ci(s.barEnd)&&(d=0),d+=h);const p=Ln(i)||l?d:i;let g=e.getPixelForValue(p);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(d+f):g,c=u-g,Math.abs(c)<r&&(c=function(t,e,n){return 0!==t?ci(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(c,e,o)*r,h===o&&(g-=c/2),u=g+c),g===e.getPixelForValue(o)){const t=ci(c)*e.getLineWidthForValue(o)/2;g+=t,c-=t}return{size:c,base:g,head:u,center:u+c/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,o=Bn(i.maxBarThickness,1/0);let a,s;if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,l="flex"===i.barThickness?function(t,e,n,i){const r=e.pixels,o=r[t];let a=t>0?r[t-1]:null,s=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;null===a&&(a=o-(null===s?e.end-e.start:s-o)),null===s&&(s=o+o-a);const u=o-(o-Math.min(a,s))/2*l;return{chunk:Math.abs(s-a)/2*l/i,ratio:n.barPercentage,start:u}}(t,e,i,n):function(t,e,n,i){const r=n.barThickness;let o,a;return Ln(r)?(o=e.min*n.categoryPercentage,a=n.barPercentage):(o=r*i,a=1),{chunk:o/i,ratio:a,start:e.pixels[t]-o/2}}(t,e,i,n),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=l.start+l.chunk*u+l.chunk/2,s=Math.min(o,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),s=Math.min(o,e.min*e.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null!==this.getParsed(r)[e.axis]&&n[r].draw(this._ctx)}}ca.id="bar",ca.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},ca.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class ha extends ea{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let t=0;t<r.length;t++)r[t]._custom=this.resolveDataElementOptions(t+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=Bn(i[2],this.resolveDataElementOptions(t+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=Bn(i&&i.r&&+i.r,this.resolveDataElementOptions(t+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:n,yScale:i}=e,r=this.getParsed(t),o=n.getLabelForValue(r.x),a=i.getLabelForValue(r.y),s=r._custom;return{label:e.label,value:"("+o+", "+a+(s?", "+s:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:a}=this._cachedMeta,s=this.resolveDataElementOptions(e,i),l=this.getSharedOptions(s),u=this.includeOptions(i,l),c=o.axis,h=a.axis;for(let s=e;s<e+n;s++){const e=t[s],n=!r&&this.getParsed(s),l={},d=l[c]=r?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),f=l[h]=r?a.getBasePixel():a.getPixelForValue(n[h]);l.skip=isNaN(d)||isNaN(f),u&&(l.options=this.resolveDataElementOptions(s,e.active?"active":i),r&&(l.options.radius=0)),this.updateElement(e,s,l,i)}this.updateSharedOptions(l,i,s)}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=Bn(n&&n._custom,r),i}}ha.id="bubble",ha.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},ha.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class da extends ea{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,o,a=t=>+n[t];if(Pn(n[t])){const{key:t="value"}=this._parsing;a=e=>+Kn(n[e],t)}for(r=t,o=t+e;r<o;++r)i._parsed[r]=a(r)}}_getRotation(){return gi(this.options.rotation-90)}_getCircumference(){return gi(this.options.circumference)}_getRotationExtents(){let t=ni,e=-ni;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),s=Math.min((l=this.options.cutout,u=a,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:l/u),1);var l,u;const c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let i=1,r=1,o=0,a=0;if(e<ni){const s=t,l=s+e,u=Math.cos(s),c=Math.sin(s),h=Math.cos(l),d=Math.sin(l),f=(t,e,i)=>Ei(t,s,l,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>Ei(t,s,l,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,u,h),m=f(ai,c,d),v=p(ei,u,h),y=p(ei+ai,c,d);i=(g-v)/2,r=(m-y)/2,o=-(g+v)/2,a=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:a}}(d,h,s),v=(n.width-o)/f,y=(n.height-o)/p,b=Math.max(Math.min(v,y)/2,0),x=jn(this.options.radius,b),_=(x-Math.max(x*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,i.total=this.calculateTotal(),this.outerRadius=x-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/ni)}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,a=o.chartArea,s=o.options.animation,l=(a.left+a.right)/2,u=(a.top+a.bottom)/2,c=r&&s.animateScale,h=c?0:this.innerRadius,d=c?0:this.outerRadius,f=this.resolveDataElementOptions(e,i),p=this.getSharedOptions(f),g=this.includeOptions(i,p);let m,v=this._getRotation();for(m=0;m<e;++m)v+=this._circumference(m,r);for(m=e;m<e+n;++m){const e=this._circumference(m,r),n=t[m],o={x:l+this.offsetX,y:u+this.offsetY,startAngle:v,endAngle:v+e,circumference:e,outerRadius:d,innerRadius:h};g&&(o.options=p||this.resolveDataElementOptions(m,n.active?"active":i)),v+=e,this.updateElement(n,m,o,i)}this.updateSharedOptions(p,i,f)}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?ni*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=ko(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,o,a,s;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),t=o.data,a=o.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)s=a.resolveDataElementOptions(i),"inner"!==s.borderAlign&&(e=Math.max(e,s.borderWidth||0,s.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Bn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}da.id="doughnut",da.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},da.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},da.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const r=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return Rn(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}};class fa extends ea{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:s}=function(t,e,n){const i=e.length;let r=0,o=i;if(t._sorted){const{iScale:a,_parsed:s}=t,l=a.axis,{min:u,max:c,minDefined:h,maxDefined:d}=a.getUserBounds();h&&(r=wi(Math.min(jr(s,a.axis,u).lo,n?i:jr(e,l,a.getPixelForValue(u)).lo),0,i-1)),o=d?wi(Math.max(jr(s,a.axis,c).hi+1,n?0:jr(e,l,a.getPixelForValue(c)).hi+1),r,i)-r:i-r}return{start:r,count:o}}(e,i,o);this._drawStart=a,this._drawCount=s,function(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),o}(e)&&(a=0,s=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},t),this.updateElements(i,a,s,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:a,_stacked:s,_dataset:l}=this._cachedMeta,u=this.resolveDataElementOptions(e,i),c=this.getSharedOptions(u),h=this.includeOptions(i,c),d=o.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=di(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let y=e>0&&this.getParsed(e-1);for(let u=e;u<e+n;++u){const e=t[u],n=this.getParsed(u),p=v?e:{},b=Ln(n[f]),x=p[d]=o.getPixelForValue(n[d],u),_=p[f]=r||b?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,n,s):n[f],u);p.skip=isNaN(x)||isNaN(_)||b,p.stop=u>0&&n[d]-y[d]>m,g&&(p.parsed=n,p.raw=l.data[u]),h&&(p.options=c||this.resolveDataElementOptions(u,e.active?"active":i)),v||this.updateElement(e,u,p,i),y=n}this.updateSharedOptions(c,i,u)}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}fa.id="line",fa.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},fa.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class pa extends ea{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=ko(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),o=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,a=this.getDataset(),s=o.options.animation,l=this._cachedMeta.rScale,u=l.xCenter,c=l.yCenter,h=l.getIndexAngle(0)-.5*ei;let d,f=h;const p=360/this.countVisibleElements();for(d=0;d<e;++d)f+=this._computeAngle(d,i,p);for(d=e;d<e+n;d++){const e=t[d];let n=f,g=f+this._computeAngle(d,i,p),m=o.getDataVisibility(d)?l.getDistanceFromCenterForValue(a.data[d]):0;f=g,r&&(s.animateScale&&(m=0),s.animateRotate&&(n=g=h));const v={x:u,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:g,options:this.resolveDataElementOptions(d,e.active?"active":i)};this.updateElement(e,d,v,i)}}countVisibleElements(){const t=this.getDataset(),e=this._cachedMeta;let n=0;return e.data.forEach(((e,i)=>{!isNaN(t.data[i])&&this.chart.getDataVisibility(i)&&n++})),n}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?gi(this.resolveDataElementOptions(t,e).angle||n):0}}pa.id="polarArea",pa.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},pa.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const r=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class ga extends da{}ga.id="pie",ga.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class ma extends ea{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this.getDataset(),o=this._cachedMeta.rScale,a="reset"===i;for(let s=e;s<e+n;s++){const e=t[s],n=this.resolveDataElementOptions(s,e.active?"active":i),l=o.getPointPositionForValue(s,r.data[s]),u=a?o.xCenter:l.x,c=a?o.yCenter:l.y,h={x:u,y:c,angle:l.angle,skip:isNaN(u)||isNaN(c),options:n};this.updateElement(e,s,h,i)}}}ma.id="radar",ma.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},ma.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class va extends fa{}va.id="scatter",va.defaults={showLine:!1,fill:!1},va.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var ya=Object.freeze({__proto__:null,BarController:ca,BubbleController:ha,DoughnutController:da,LineController:fa,PolarAreaController:pa,PieController:ga,RadarController:ma,ScatterController:va});function ba(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class xa{constructor(t){this.options=t||{}}formats(){return ba()}parse(t,e){return ba()}format(t,e){return ba()}add(t,e,n){return ba()}diff(t,e,n){return ba()}startOf(t,e,n){return ba()}endOf(t,e){return ba()}}xa.override=function(t){Object.assign(xa.prototype,t)};var _a={_date:xa};function Ea(t,e){return"native"in t?{x:t.x,y:t.y}:vo(t,e)}function wa(t,e,n,i){const{controller:r,data:o,_sorted:a}=t,s=r._cachedMeta.iScale;if(s&&e===s.axis&&"r"!==e&&a&&o.length){const t=s._reversePixels?zr:jr;if(!i)return t(o,e,n);if(r._sharedOptions){const i=o[0],r="function"==typeof i.getRange&&i.getRange(e);if(r){const i=t(o,e,n-r),a=t(o,e,n+r);return{lo:i.lo,hi:a.hi}}}}return{lo:0,hi:o.length-1}}function Aa(t,e,n,i,r){const o=t.getSortedVisibleDatasetMetas(),a=n[e];for(let t=0,n=o.length;t<n;++t){const{index:n,data:s}=o[t],{lo:l,hi:u}=wa(o[t],e,a,r);for(let t=l;t<=u;++t){const e=s[t];e.skip||i(e,n,t)}}}function Da(t,e,n,i){const r=[];if(!xr(e,t.chartArea,t._minPadding))return r;return Aa(t,n,e,(function(t,n,o){t.inRange(e.x,e.y,i)&&r.push({element:t,datasetIndex:n,index:o})}),!0),r}function Ca(t,e,n,i,r){let o=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,o=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(n);let s=Number.POSITIVE_INFINITY;return Aa(t,n,e,(function(n,l,u){const c=n.inRange(e.x,e.y,r);if(i&&!c)return;const h=n.getCenterPoint(r);if(!xr(h,t.chartArea,t._minPadding)&&!c)return;const d=a(e,h);d<s?(o=[{element:n,datasetIndex:l,index:u}],s=d):d===s&&o.push({element:n,datasetIndex:l,index:u})})),o}function ka(t,e,n,i,r){return xr(e,t.chartArea,t._minPadding)?"r"!==n||i?Ca(t,e,n,i,r):function(t,e,n,i){let r=[];return Aa(t,n,e,(function(t,n,o){const{startAngle:a,endAngle:s}=t.getProps(["startAngle","endAngle"],i),{angle:l}=yi(t,{x:e.x,y:e.y});Ei(l,a,s)&&r.push({element:t,datasetIndex:n,index:o})})),r}(t,e,n,r):[]}function Sa(t,e,n,i){const r=Ea(e,t),o=[],a=n.axis,s="x"===a?"inXRange":"inYRange";let l=!1;return function(t,e){const n=t.getSortedVisibleDatasetMetas();let i,r,o;for(let t=0,a=n.length;t<a;++t){({index:i,data:r}=n[t]);for(let t=0,n=r.length;t<n;++t)o=r[t],o.skip||e(o,i,t)}}(t,((t,e,n)=>{t[s](r[a],i)&&o.push({element:t,datasetIndex:e,index:n}),t.inRange(r.x,r.y,i)&&(l=!0)})),n.intersect&&!l?[]:o}var Ta={modes:{index(t,e,n,i){const r=Ea(e,t),o=n.axis||"x",a=n.intersect?Da(t,r,o,i):ka(t,r,o,!1,i),s=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&s.push({element:n,datasetIndex:t.index,index:e})})),s):[]},dataset(t,e,n,i){const r=Ea(e,t),o=n.axis||"xy";let a=n.intersect?Da(t,r,o,i):ka(t,r,o,!1,i);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,i)=>Da(t,Ea(e,t),n.axis||"xy",i),nearest:(t,e,n,i)=>ka(t,Ea(e,t),n.axis||"xy",n.intersect,i),x:(t,e,n,i)=>Sa(t,e,{axis:"x",intersect:n.intersect},i),y:(t,e,n,i)=>Sa(t,e,{axis:"y",intersect:n.intersect},i)}};const Oa=["left","top","right","bottom"];function Ia(t,e){return t.filter((t=>t.pos===e))}function Ma(t,e){return t.filter((t=>-1===Oa.indexOf(t.pos)&&t.box.axis===e))}function La(t,e){return t.sort(((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function Ra(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!Oa.includes(i))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let o,a,s;for(o=0,a=t.length;o<a;++o){s=t[o];const{fullSize:a}=s.box,l=n[s.stack],u=l&&s.stackWeight/l.weight;s.horizontal?(s.width=u?u*i:a&&e.availableWidth,s.height=r):(s.width=i,s.height=u?u*r:a&&e.availableHeight)}return n}function Pa(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Fa(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Na(t,e,n,i){const{pos:r,box:o}=n,a=t.maxPadding;if(!Pn(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?o.height:o.width),n.size=e.size/e.count,t[r]+=n.size}o.getPadding&&Fa(a,o.getPadding());const s=Math.max(0,e.outerWidth-Pa(a,t,"left","right")),l=Math.max(0,e.outerHeight-Pa(a,t,"top","bottom")),u=s!==t.w,c=l!==t.h;return t.w=s,t.h=l,n.horizontal?{same:u,other:c}:{same:c,other:u}}function Ba(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}return i(t?["left","right"]:["top","bottom"])}function ja(t,e,n,i){const r=[];let o,a,s,l,u,c;for(o=0,a=t.length,u=0;o<a;++o){s=t[o],l=s.box,l.update(s.width||e.w,s.height||e.h,Ba(s.horizontal,e));const{same:a,other:h}=Na(e,n,s,i);u|=a&&r.length,c=c||h,l.fullSize||r.push(s)}return u&&ja(r,e,n,i)||c}function za(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Ha(t,e,n,i){const r=n.padding;let{x:o,y:a}=e;for(const s of t){const t=s.box,l=i[s.stack]||{count:1,placed:0,weight:1},u=s.stackWeight/l.weight||1;if(s.horizontal){const i=e.w*u,o=l.size||t.height;Jn(l.start)&&(a=l.start),t.fullSize?za(t,r.left,a,n.outerWidth-r.right-r.left,o):za(t,e.left+l.placed,a,i,o),l.start=a,l.placed+=i,a=t.bottom}else{const i=e.h*u,a=l.size||t.width;Jn(l.start)&&(o=l.start),t.fullSize?za(t,o,r.top,a,n.outerHeight-r.bottom-r.top):za(t,o,e.top+l.placed,a,i),l.start=o,l.placed+=i,o=t.right}}e.x=o,e.y=a}pr.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Va={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Rr(t.options.layout.padding),o=Math.max(e-r.width,0),a=Math.max(n-r.height,0),s=function(t){const e=function(t){const e=[];let n,i,r,o,a,s;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:o,options:{stack:a,stackWeight:s=1}}=r),e.push({index:n,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&o+a,stackWeight:s});return e}(t),n=La(e.filter((t=>t.box.fullSize)),!0),i=La(Ia(e,"left"),!0),r=La(Ia(e,"right")),o=La(Ia(e,"top"),!0),a=La(Ia(e,"bottom")),s=Ma(e,"x"),l=Ma(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:r.concat(l).concat(a).concat(s),chartArea:Ia(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:o.concat(a).concat(s)}}(t.boxes),l=s.vertical,u=s.horizontal;Hn(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const c=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/c,hBoxMaxHeight:a/2}),d=Object.assign({},r);Fa(d,Rr(i));const f=Object.assign({maxPadding:d,w:o,h:a,x:r.left,y:r.top},r),p=Ra(l.concat(u),h);ja(s.fullSize,f,h,p),ja(l,f,h,p),ja(u,f,h,p)&&ja(l,f,h,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Ha(s.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Ha(s.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Hn(s.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class Wa{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class Ua extends Wa{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ga={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},qa=t=>null===t||""===t;const $a=!!_o&&{passive:!0};function Ya(t,e,n){t.canvas.removeEventListener(e,n,$a)}function Xa(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Ka(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||Xa(n.addedNodes,i),e=e&&!Xa(n.removedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function Za(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||Xa(n.removedNodes,i),e=e&&!Xa(n.addedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const Ja=new Map;let Qa=0;function ts(){const t=window.devicePixelRatio;t!==Qa&&(Qa=t,Ja.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function es(t,e,n){const i=t.canvas,r=i&&ho(i);if(!r)return;const o=Sn(((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()}),window),a=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||o(n,i)}));return a.observe(r),function(t,e){Ja.size||window.addEventListener("resize",ts),Ja.set(t,e)}(t,o),a}function ns(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Ja.delete(t),Ja.size||window.removeEventListener("resize",ts)}(t)}function is(t,e,n){const i=t.canvas,r=Sn((e=>{null!==t.ctx&&n(function(t,e){const n=Ga[t.type]||t.type,{x:i,y:r}=vo(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,n){t.addEventListener(e,n,$a)}(i,e,r),r}class rs extends Wa{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t.$chartjs={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",qa(r)){const e=Eo(t,"width");void 0!==e&&(t.width=e)}if(qa(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Eo(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const n=e.$chartjs.initial;["height","width"].forEach((t=>{const i=n[t];Ln(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:Ka,detach:Za,resize:es}[e]||is;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:ns,detach:ns,resize:ns}[e]||Ya)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return bo(t,e,n,i)}isAttached(t){const e=ho(t);return!(!e||!e.isConnected)}}class os{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return di(this.x)&&di(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}os.defaults={},os.defaultRoutes=void 0;const as={values:t=>Rn(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const a=ui(Math.abs(o)),s=Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),ko(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=t/Math.pow(10,Math.floor(ui(t)));return 1===i||2===i||5===i?as.numeric.call(this,t,e,n):""}};var ss={formatters:as};function ls(t,e){const n=t.options.ticks,i=n.maxTicksLimit||function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],o=r.length,a=r[0],s=r[o-1],l=[];if(o>i)return function(t,e,n,i){let r,o=0,a=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===a&&(e.push(t[r]),o++,a=n[o*i])}(e,l,r,o/i),l;const u=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const o=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(i);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>r)return e}return Math.max(r,1)}(r,e,i);if(o>0){let t,n;const i=o>1?Math.round((s-a)/(o-1)):null;for(us(e,l,u,Ln(i)?0:a-i,a),t=0,n=o-1;t<n;t++)us(e,l,u,r[t],r[t+1]);return us(e,l,u,s,Ln(i)?e.length:s+i),l}return us(e,l,u),l}function us(t,e,n,i,r){const o=Bn(i,0),a=Math.min(Bn(r,t.length),t.length);let s,l,u,c=0;for(n=Math.ceil(n),r&&(s=r-i,n=s/Math.floor(s/n)),u=o;u<0;)c++,u=Math.round(o+c*n);for(l=Math.max(o,0);l<a;l++)l===u&&(e.push(t[l]),c++,u=Math.round(o+c*n))}pr.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ss.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),pr.route("scale.ticks","color","","color"),pr.route("scale.grid","color","","borderColor"),pr.route("scale.grid","borderColor","","borderColor"),pr.route("scale.title","color","","color"),pr.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),pr.describe("scales",{_fallback:"scale"}),pr.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const cs=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n;function hs(t,e){const n=[],i=t.length/e,r=t.length;let o=0;for(;o<r;o+=i)n.push(t[Math.floor(o)]);return n}function ds(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),o=t._startPixel,a=t._endPixel,s=1e-6;let l,u=t.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(u-o,a-u):0===e?(t.getPixelForTick(1)-u)/2:(u-t.getPixelForTick(r-1))/2,u+=r<e?l:-l,u<o-s||u>a+s)))return u}function fs(t){return t.drawTicks?t.tickLength:0}function ps(t,e){if(!t.display)return 0;const n=Pr(t.font,e),i=Rr(t.padding);return(Rn(t.text)?t.text.length:1)*n.lineHeight+i.height}function gs(t,e,n){let i=Tn(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class ms extends os{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=Nn(t,Number.POSITIVE_INFINITY),e=Nn(e,Number.NEGATIVE_INFINITY),n=Nn(n,Number.POSITIVE_INFINITY),i=Nn(i,Number.NEGATIVE_INFINITY),{min:Nn(t,n),max:Nn(e,i),minDefined:Fn(t),maxDefined:Fn(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:o}=this.getUserBounds();if(r&&o)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let s=0,l=a.length;s<l;++s)e=a[s].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),o||(i=Math.max(i,e.max));return n=o&&n>i?i:n,i=r&&n>i?n:i,{min:Nn(n,Nn(i,n)),max:Nn(i,Nn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){zn(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:r}=t,o=jn(e,(r-i)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(i,-Math.abs(o)),max:a(r,o)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=a<this.ticks.length;this._convertTicksToLabels(s?hs(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=ls(this,this.ticks),this._labelSizes=null),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){zn(this.options.afterUpdate,[this])}beforeSetDimensions(){zn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){zn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),zn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){zn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=zn(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){zn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){zn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,i=e.minRotation||0,r=e.maxRotation;let o,a,s,l=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const u=this._getLabelSizes(),c=u.widest.width,h=u.highest.height,d=wi(this.chart.width-c,0,this.maxWidth);o=t.offset?this.maxWidth/n:d/(n-1),c+6>o&&(o=d/(n-(t.offset?.5:1)),a=this.maxHeight-fs(t.grid)-e.padding-ps(t.title,this.chart.options.font),s=Math.sqrt(c*c+h*h),l=mi(Math.min(Math.asin(wi((u.highest.height+6)/o,-1,1)),Math.asin(wi(a/s,-1,1))-Math.asin(wi(h/s,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){zn(this.options.afterCalculateLabelRotation,[this])}beforeFit(){zn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=ps(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=fs(r)+o):(t.height=this.maxHeight,t.width=fs(r)+o),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:o}=this._getLabelSizes(),s=2*n.padding,l=gi(this.labelRotation),u=Math.cos(l),c=Math.sin(l);if(a){const e=n.mirror?0:c*r.width+u*o.height;t.height=Math.min(this.maxHeight,t.height+e+s)}else{const e=n.mirror?0:u*r.width+c*o.height;t.width=Math.min(this.maxWidth,t.width+e+s)}this._calculatePadding(e,i,c,u)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:o},position:a}=this.options,s=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,h=0;s?l?(c=i*t.width,h=n*e.height):(c=n*t.height,h=i*e.width):"start"===r?h=e.width:"end"===r?c=t.width:(c=t.width/2,h=e.width/2),this.paddingLeft=Math.max((c-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-u+o)*this.width/(this.width-u),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+o,this.paddingBottom=i+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){zn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Ln(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=hs(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:i}=this,r=[],o=[];let a,s,l,u,c,h,d,f,p,g,m,v=0,y=0;for(a=0;a<e;++a){if(u=t[a].label,c=this._resolveTickFontOptions(a),n.font=h=c.string,d=i[h]=i[h]||{data:{},gc:[]},f=c.lineHeight,p=g=0,Ln(u)||Rn(u)){if(Rn(u))for(s=0,l=u.length;s<l;++s)m=u[s],Ln(m)||Rn(m)||(p=gr(n,d.data,d.gc,p,m),g+=f)}else p=gr(n,d.data,d.gc,p,u),g=f;r.push(p),o.push(g),v=Math.max(p,v),y=Math.max(g,y)}!function(t,e){Hn(t,(t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}}))}(i,e);const b=r.indexOf(v),x=o.indexOf(y),_=t=>({width:r[t]||0,height:o[t]||0});return{first:_(0),last:_(e-1),widest:_(b),highest:_(x),widths:r,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return wi(this._alignToPixels?vr(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Nr(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Nr(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=gi(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,s=r?r.highest.height+o:0;return this.isHorizontal()?s*n>a*i?a/n:s/i:s*i<a*n?s/n:a/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:o}=i,a=r.offset,s=this.isHorizontal(),l=this.ticks.length+(a?1:0),u=fs(r),c=[],h=r.setContext(this.getContext()),d=h.drawBorder?h.borderWidth:0,f=d/2,p=function(t){return vr(n,t,d)};let g,m,v,y,b,x,_,E,w,A,D,C;if("top"===o)g=p(this.bottom),x=this.bottom-u,E=g-f,A=p(t.top)+f,C=t.bottom;else if("bottom"===o)g=p(this.top),A=t.top,C=p(t.bottom)-f,x=g+f,E=this.top+u;else if("left"===o)g=p(this.right),b=this.right-u,_=g-f,w=p(t.left)+f,D=t.right;else if("right"===o)g=p(this.left),w=t.left,D=p(t.right)-f,b=g+f,_=this.left+u;else if("x"===e){if("center"===o)g=p((t.top+t.bottom)/2+.5);else if(Pn(o)){const t=Object.keys(o)[0],e=o[t];g=p(this.chart.scales[t].getPixelForValue(e))}A=t.top,C=t.bottom,x=g+f,E=x+u}else if("y"===e){if("center"===o)g=p((t.left+t.right)/2);else if(Pn(o)){const t=Object.keys(o)[0],e=o[t];g=p(this.chart.scales[t].getPixelForValue(e))}b=g-f,_=b-u,w=t.left,D=t.right}const k=Bn(i.ticks.maxTicksLimit,l),S=Math.max(1,Math.ceil(l/k));for(m=0;m<l;m+=S){const t=r.setContext(this.getContext(m)),e=t.lineWidth,i=t.color,o=r.borderDash||[],l=t.borderDashOffset,u=t.tickWidth,h=t.tickColor,d=t.tickBorderDash||[],f=t.tickBorderDashOffset;v=ds(this,m,a),void 0!==v&&(y=vr(n,v,e),s?b=_=w=D=y:x=E=A=C=y,c.push({tx1:b,ty1:x,tx2:_,ty2:E,x1:w,y1:A,x2:D,y2:C,width:e,color:i,borderDash:o,borderDashOffset:l,tickWidth:u,tickColor:h,tickBorderDash:d,tickBorderDashOffset:f}))}return this._ticksLength=l,this._borderValue=g,c}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:s,crossAlign:l,padding:u,mirror:c}=r,h=fs(n.grid),d=h+u,f=c?-u:d,p=-gi(this.labelRotation),g=[];let m,v,y,b,x,_,E,w,A,D,C,k,S="middle";if("top"===i)_=this.bottom-f,E=this._getXAxisLabelAlignment();else if("bottom"===i)_=this.top+f,E=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(h);E=t.textAlign,x=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(h);E=t.textAlign,x=t.x}else if("x"===e){if("center"===i)_=(t.top+t.bottom)/2+d;else if(Pn(i)){const t=Object.keys(i)[0],e=i[t];_=this.chart.scales[t].getPixelForValue(e)+d}E=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)x=(t.left+t.right)/2-d;else if(Pn(i)){const t=Object.keys(i)[0],e=i[t];x=this.chart.scales[t].getPixelForValue(e)}E=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===s?S="top":"end"===s&&(S="bottom"));const T=this._getLabelSizes();for(m=0,v=a.length;m<v;++m){y=a[m],b=y.label;const t=r.setContext(this.getContext(m));w=this.getPixelForTick(m)+r.labelOffset,A=this._resolveTickFontOptions(m),D=A.lineHeight,C=Rn(b)?b.length:1;const e=C/2,n=t.color,s=t.textStrokeColor,u=t.textStrokeWidth;let h;if(o?(x=w,k="top"===i?"near"===l||0!==p?-C*D+D/2:"center"===l?-T.highest.height/2-e*D+D:-T.highest.height+D/2:"near"===l||0!==p?D/2:"center"===l?T.highest.height/2-e*D:T.highest.height-C*D,c&&(k*=-1)):(_=w,k=(1-C)*D/2),t.showLabelBackdrop){const e=Rr(t.backdropPadding),n=T.heights[m],i=T.widths[m];let r=_+k-e.top,o=x-e.left;switch(S){case"middle":r-=n/2;break;case"bottom":r-=n}switch(E){case"center":o-=i/2;break;case"right":o-=i}h={left:o,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({rotation:p,label:b,font:A,color:n,strokeColor:s,strokeWidth:u,textOffset:k,textAlign:E,textBaseline:S,translation:[x,_],backdrop:h})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-gi(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align&&(n="right"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=t+r,a=this._getLabelSizes().widest.width;let s,l;return"left"===e?i?(l=this.right+r,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l+=a)):(l=this.right-o,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l=this.left)):"right"===e?i?(l=this.left+r,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l-=a)):(l=this.left+o,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l=this.right)):s="right",{textAlign:s,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const t=i[r];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,i=n.setContext(this.getContext()),r=n.drawBorder?i.borderWidth:0;if(!r)return;const o=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let s,l,u,c;this.isHorizontal()?(s=vr(t,this.left,r)-r/2,l=vr(t,this.right,o)+o/2,u=c=a):(u=vr(t,this.top,r)-r/2,c=vr(t,this.bottom,o)+o/2,s=l=a),e.save(),e.lineWidth=i.borderWidth,e.strokeStyle=i.borderColor,e.beginPath(),e.moveTo(s,u),e.lineTo(l,c),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&_r(e,n);const i=this._labelItems||(this._labelItems=this._computeLabelItems(t));let r,o;for(r=0,o=i.length;r<o;++r){const t=i[r],n=t.font,o=t.label;t.backdrop&&(e.fillStyle=t.backdrop.color,e.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),Dr(e,o,0,t.textOffset,n,t)}n&&Er(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=Pr(n.font),o=Rr(n.padding),a=n.align;let s=r.lineHeight/2;"bottom"===e||"center"===e||Pn(e)?(s+=o.bottom,Rn(n.text)&&(s+=r.lineHeight*(n.text.length-1))):s+=o.top;const{titleX:l,titleY:u,maxWidth:c,rotation:h}=function(t,e,n,i){const{top:r,left:o,bottom:a,right:s,chart:l}=t,{chartArea:u,scales:c}=l;let h,d,f,p=0;const g=a-r,m=s-o;if(t.isHorizontal()){if(d=On(i,o,s),Pn(n)){const t=Object.keys(n)[0],i=n[t];f=c[t].getPixelForValue(i)+g-e}else f="center"===n?(u.bottom+u.top)/2+g-e:cs(t,n,e);h=s-o}else{if(Pn(n)){const t=Object.keys(n)[0],i=n[t];d=c[t].getPixelForValue(i)-m+e}else d="center"===n?(u.left+u.right)/2-m+e:cs(t,n,e);f=On(i,a,r),p="left"===n?-ai:ai}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,s,e,a);Dr(t,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:h,textAlign:gs(a,e,i),textBaseline:"middle",translation:[l,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Bn(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===ms.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const o=e[r];o[n]!==this.id||t&&o.type!==t||i.push(o)}return i}_resolveTickFontOptions(t){return Pr(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class vs{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=qn(Object.create(null),[n?pr.get(n):{},pr.get(e),t.defaults]);pr.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),r=i.pop(),o=[t].concat(i).join("."),a=e[n].split("."),s=a.pop(),l=a.join(".");pr.route(o,r,l,s)}))}(e,t.defaultRoutes);t.descriptors&&pr.describe(e,t.descriptors)}(t,o,n),this.override&&pr.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in pr[i]&&(delete pr[i][n],this.override&&delete cr[n])}}var ys=new class{constructor(){this.controllers=new vs(ea,"datasets",!0),this.elements=new vs(os,"elements"),this.plugins=new vs(Object,"plugins"),this.scales=new vs(ms,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):Hn(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=Zn(t);zn(n["before"+i],[],n),e[t](n),zn(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}};class bs{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===zn(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){Ln(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=Bn(n.options&&n.options.plugins,{}),r=function(t){const e=[],n=Object.keys(ys.plugins.items);for(let t=0;t<n.length;t++)e.push(ys.getPlugin(n[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const n=i[t];-1===e.indexOf(n)&&e.push(n)}return e}(n);return!1!==i||e?function(t,e,n,i){const r=[],o=t.getContext();for(let a=0;a<e.length;a++){const s=e[a],l=xs(n[s.id],i);null!==l&&r.push({plugin:s,options:_s(t.config,s,l,o)})}return r}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function xs(t,e){return e||!1!==t?!0===t?{}:t:null}function _s(t,e,n,i){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(n,r);return t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Es(t,e){const n=pr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function ws(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(n=e.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.charAt(0).toLowerCase();var n}function As(t){const e=t.options||(t.options={});e.plugins=Bn(e.plugins,{}),e.scales=function(t,e){const n=cr[t.type]||{scales:{}},i=e.scales||{},r=Es(t.type,e),o=Object.create(null),a=Object.create(null);return Object.keys(i).forEach((t=>{const e=i[t];if(!Pn(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const s=ws(t,e),l=function(t,e){return t===e?"_index_":"_value_"}(s,r),u=n.scales||{};o[s]=o[s]||t,a[t]=$n(Object.create(null),[{axis:s},e,u[s],u[l]])})),t.data.datasets.forEach((n=>{const r=n.type||t.type,s=n.indexAxis||Es(r,e),l=(cr[r]||{}).scales||{};Object.keys(l).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,s),r=n[e+"AxisID"]||o[e]||e;a[r]=a[r]||Object.create(null),$n(a[r],[{axis:e},i[r],l[t]])}))})),Object.keys(a).forEach((t=>{const e=a[t];$n(e,[pr.scales[e.type],pr.scale])})),a}(t,e)}function Ds(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Cs=new Map,ks=new Set;function Ss(t,e){let n=Cs.get(t);return n||(n=e(),Cs.set(t,n),ks.add(n)),n}const Ts=(t,e,n)=>{const i=Kn(e,n);void 0!==i&&t.add(i)};class Os{constructor(t){this._config=function(t){return(t=t||{}).data=Ds(t.data),As(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ds(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),As(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ss(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Ss(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Ss(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Ss(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,o=this._cachedScopes(t,n),a=o.get(e);if(a)return a;const s=new Set;e.forEach((e=>{t&&(s.add(t),e.forEach((e=>Ts(s,t,e)))),e.forEach((t=>Ts(s,i,t))),e.forEach((t=>Ts(s,cr[r]||{},t))),e.forEach((t=>Ts(s,pr,t))),e.forEach((t=>Ts(s,hr,t)))}));const l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),ks.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,cr[e]||{},pr.datasets[e]||{},{type:e},pr,hr]}resolveNamedOptions(t,e,n,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Is(this._resolverCache,t,i);let s=o;if(function(t,e){const{isScriptable:n,isIndexable:i}=qr(t);for(const r of e){const e=n(r),o=i(r),a=(o||e)&&t[r];if(e&&(Qn(a)||Ms(a))||o&&Rn(a))return!0}return!1}(o,e)){r.$shared=!1;s=Gr(o,n=Qn(n)?n():n,this.createResolver(t,n,a))}for(const t of e)r[t]=s[t];return r}createResolver(t,e,n=[""],i){const{resolver:r}=Is(this._resolverCache,t,n);return Pn(e)?Gr(r,e,void 0,i):r}}function Is(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let o=i.get(r);if(!o){o={resolver:Ur(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(r,o)}return o}const Ms=t=>Pn(t)&&Object.getOwnPropertyNames(t).reduce(((e,n)=>e||Qn(t[n])),!1);const Ls=["top","bottom","left","right","chartArea"];function Rs(t,e){return"top"===t||"bottom"===t||-1===Ls.indexOf(t)&&"x"===e}function Ps(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Fs(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),zn(n&&n.onComplete,[t],e)}function Ns(t){const e=t.chart,n=e.options.animation;zn(n&&n.onProgress,[t],e)}function Bs(t){return co()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const js={},zs=t=>{const e=Bs(t);return Object.values(js).filter((t=>t.canvas===e)).pop()};function Hs(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}class Vs{constructor(t,e){const n=this.config=new Os(e),i=Bs(t),r=zs(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!co()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Ua:rs}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,o.aspectRatio),s=a&&a.canvas,l=s&&s.height,u=s&&s.width;this.id=Mn(),this.ctx=a,this.canvas=s,this.width=u,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bs,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}((t=>this.update(t)),o.resizeDelay||0),this._dataChanges=[],js[this.id]=this,a&&s?(Bo.listen(this,"complete",Fs),Bo.listen(this,"progress",Ns),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return Ln(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xo(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return yr(this.canvas,this.ctx),this}stop(){return Bo.stop(this),this}resize(t,e){Bo.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,xo(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),zn(n.onResize,[this,o],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){Hn(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let r=[];e&&(r=r.concat(Object.keys(e).map((t=>{const n=e[t],i=ws(t,n),r="r"===i,o="x"===i;return{options:n,dposition:r?"chartArea":o?"bottom":"left",dtype:r?"radialLinear":o?"category":"linear"}})))),Hn(r,(e=>{const r=e.options,o=r.id,a=ws(o,r),s=Bn(r.type,e.dtype);void 0!==r.position&&Rs(r.position,a)===Rs(e.dposition)||(r.position=e.dposition),i[o]=!0;let l=null;if(o in n&&n[o].type===s)l=n[o];else{l=new(ys.getScale(s))({id:o,type:s,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,t)})),Hn(i,((t,e)=>{t||delete n[e]})),Hn(n,(t=>{Va.configure(this,t,t.options),Va.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(Ps("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const o=i.type||this.config.type;if(r.type&&r.type!==o&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=o,r.indexAxis=i.indexAxis||Es(o,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=ys.getController(o),{datasetElementType:i,dataElementType:a}=pr.datasets[o];Object.assign(e.prototype,{dataElementType:ys.getElement(a),datasetElementType:i&&ys.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Hn(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(n),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||Hn(r,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ps("z","_idx"));const{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Hn(this.scales,(t=>{Va.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);ti(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){Hs(t,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let t=1;t<e;t++)if(!ti(i,n(t)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Va.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Hn(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Qn(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Bo.has(this)?this.attached&&!Bo.running(this)&&Bo.start(this):(this.draw(),Fs({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,r=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(i&&_r(e,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),t.controller.draw(),i&&Er(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}getElementsAtEventForMode(t,e,n,i){const r=Ta.modes[e];return"function"==typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Nr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);Jn(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Bo.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),yr(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete js[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};Hn(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Hn(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},Hn(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,o,a,s;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,s=t.length;a<s;++a){o=t[a];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}));!Vn(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=r(e,t),a=n?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:xr(t,this.chartArea,this._minPadding)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,o=e,a=this._getActiveElements(t,i,n,o),s=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,s);n&&(this._lastEvent=null,zn(r.onHover,[t,a,this],this),s&&zn(r.onClick,[t,a,this],this));const u=!Vn(a,i);return(u||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=l,u}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}const Ws=()=>Hn(Vs.instances,(t=>t._plugins.invalidate())),Us=!0;function Gs(t,e,n){const{startAngle:i,pixelMargin:r,x:o,y:a,outerRadius:s,innerRadius:l}=e;let u=r/s;t.beginPath(),t.arc(o,a,s,i-u,n+u),l>r?(u=r/l,t.arc(o,a,l,n+u,i-u,!0)):t.arc(o,a,r,n+ai,i-ai),t.closePath(),t.clip()}function qs(t,e,n,i){const r=Ir(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(n-e)/2,a=Math.min(o,i*e/2),s=t=>{const e=(n-Math.min(o,t))*i/2;return wi(t,0,Math.min(o,e))};return{outerStart:s(r.outerStart),outerEnd:s(r.outerEnd),innerStart:wi(r.innerStart,0,a),innerEnd:wi(r.innerEnd,0,a)}}function $s(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Ys(t,e,n,i,r){const{x:o,y:a,startAngle:s,pixelMargin:l,innerRadius:u}=e,c=Math.max(e.outerRadius+i+n-l,0),h=u>0?u+i+n+l:0;let d=0;const f=r-s;if(i){const t=((u>0?u-i:0)+(c>0?c-i:0))/2;d=(f-(0!==t?f*t/(t+i):f))/2}const p=(f-Math.max(.001,f*c-n/ei)/c)/2,g=s+p+d,m=r-p-d,{outerStart:v,outerEnd:y,innerStart:b,innerEnd:x}=qs(e,h,c,m-g),_=c-v,E=c-y,w=g+v/_,A=m-y/E,D=h+b,C=h+x,k=g+b/D,S=m-x/C;if(t.beginPath(),t.arc(o,a,c,w,A),y>0){const e=$s(E,A,o,a);t.arc(e.x,e.y,y,A,m+ai)}const T=$s(C,m,o,a);if(t.lineTo(T.x,T.y),x>0){const e=$s(C,S,o,a);t.arc(e.x,e.y,x,m+ai,S+Math.PI)}if(t.arc(o,a,h,m-x/h,g+b/h,!0),b>0){const e=$s(D,k,o,a);t.arc(e.x,e.y,b,k+Math.PI,g-ai)}const O=$s(_,g,o,a);if(t.lineTo(O.x,O.y),v>0){const e=$s(_,w,o,a);t.arc(e.x,e.y,v,g-ai,w)}t.closePath()}function Xs(t,e,n,i,r){const{options:o}=e,{borderWidth:a,borderJoinStyle:s}=o,l="inner"===o.borderAlign;a&&(l?(t.lineWidth=2*a,t.lineJoin=s||"round"):(t.lineWidth=a,t.lineJoin=s||"bevel"),e.fullCircles&&function(t,e,n){const{x:i,y:r,startAngle:o,pixelMargin:a,fullCircles:s}=e,l=Math.max(e.outerRadius-a,0),u=e.innerRadius+a;let c;for(n&&Gs(t,e,o+ni),t.beginPath(),t.arc(i,r,u,o+ni,o,!0),c=0;c<s;++c)t.stroke();for(t.beginPath(),t.arc(i,r,l,o,o+ni),c=0;c<s;++c)t.stroke()}(t,e,l),l&&Gs(t,e,r),Ys(t,e,n,i,r),t.stroke())}Object.defineProperties(Vs,{defaults:{enumerable:Us,value:pr},instances:{enumerable:Us,value:js},overrides:{enumerable:Us,value:cr},registry:{enumerable:Us,value:ys},version:{enumerable:Us,value:"3.7.1"},getChart:{enumerable:Us,value:zs},register:{enumerable:Us,value:(...t)=>{ys.add(...t),Ws()}},unregister:{enumerable:Us,value:(...t)=>{ys.remove(...t),Ws()}}});class Ks extends os{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:o}=yi(i,{x:t,y:e}),{startAngle:a,endAngle:s,innerRadius:l,outerRadius:u,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=this.options.spacing/2,d=Bn(c,s-a)>=ni||Ei(r,a,s),f=Ai(o,l+h,u+h);return d&&f}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:s,spacing:l}=this.options,u=(i+r)/2,c=(o+a+l+s)/2;return{x:e+Math.cos(u)*c,y:n+Math.sin(u)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/2,r=(e.spacing||0)/2;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>ni?Math.floor(n/ni):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let o=0;if(i){o=i/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*o,Math.sin(e)*o),this.circumference>=ei&&(o=i)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const a=function(t,e,n,i){const{fullCircles:r,startAngle:o,circumference:a}=e;let s=e.endAngle;if(r){Ys(t,e,n,i,o+ni);for(let e=0;e<r;++e)t.fill();isNaN(a)||(s=o+a%ni,a%ni==0&&(s+=ni))}return Ys(t,e,n,i,s),t.fill(),s}(t,this,o,r);Xs(t,this,o,r,a),t.restore()}}function Zs(t,e,n=e){t.lineCap=Bn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Bn(n.borderDash,e.borderDash)),t.lineDashOffset=Bn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Bn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Bn(n.borderWidth,e.borderWidth),t.strokeStyle=Bn(n.borderColor,e.borderColor)}function Js(t,e,n){t.lineTo(n.x,n.y)}function Qs(t,e,n={}){const i=t.length,{start:r=0,end:o=i-1}=n,{start:a,end:s}=e,l=Math.max(r,a),u=Math.min(o,s),c=r<a&&o<a||r>s&&o>s;return{count:i,start:l,loop:e.loop,ilen:u<l&&!c?i+u-l:u-l}}function tl(t,e,n,i){const{points:r,options:o}=e,{count:a,start:s,loop:l,ilen:u}=Qs(r,n,i),c=function(t){return t.stepped?wr:t.tension||"monotone"===t.cubicInterpolationMode?Ar:Js}(o);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=u;++h)d=r[(s+(g?u-h:h))%a],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):c(t,f,d,g,o.stepped),f=d);return l&&(d=r[(s+(g?u:0))%a],c(t,f,d,g,o.stepped)),!!l}function el(t,e,n,i){const r=e.points,{count:o,start:a,ilen:s}=Qs(r,n,i),{move:l=!0,reverse:u}=i||{};let c,h,d,f,p,g,m=0,v=0;const y=t=>(a+(u?s-t:t))%o,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(h=r[y(0)],t.moveTo(h.x,h.y)),c=0;c<=s;++c){if(h=r[y(c)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(v*m+e)/++v):(b(),t.lineTo(e,n),d=i,v=0,f=p=n),g=n}b()}function nl(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?el:tl}Ks.id="arc",Ks.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Ks.defaultRoutes={backgroundColor:"backgroundColor"};const il="function"==typeof Path2D;function rl(t,e,n,i){il&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Zs(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:o}=e,a=nl(e);for(const s of r)Zs(t,o,s.style),t.beginPath(),a(t,e,s,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class ol extends os{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;uo(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const o=!!t._loop,{start:a,end:s}=function(t,e,n,i){let r=0,o=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(o+=r);o>r&&t[o%e].skip;)o--;return o%=e,{start:r,end:o}}(n,r,o,i);return Po(t,!0===i?[{start:a,end:s,loop:o}]:function(t,e,n,i){const r=t.length,o=[];let a,s=e,l=t[e];for(a=e+1;a<=n;++a){const n=t[a%r];n.skip||n.stop?l.skip||(i=!1,o.push({start:e%r,end:(a-1)%r,loop:i}),e=s=n.stop?a:null):(s=a,l.skip&&(e=a)),l=n}return null!==s&&o.push({start:e%r,end:s%r,loop:i}),o}(n,a,s<a?s+r:s,!!t._fullLoop&&0===a&&s===r-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,o=Ro(this,{property:e,start:i,end:i});if(!o.length)return;const a=[],s=function(t){return t.stepped?Ao:t.tension||"monotone"===t.cubicInterpolationMode?Do:wo}(n);let l,u;for(l=0,u=o.length;l<u;++l){const{start:u,end:c}=o[l],h=r[u],d=r[c];if(h===d){a.push(h);continue}const f=s(h,d,Math.abs((i-h[e])/(d[e]-h[e])),n.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return nl(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=nl(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)o&=r(t,this,a,{start:e,end:e+n-1});return!!o}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),rl(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function al(t,e,n,i){const r=t.options,{[n]:o}=t.getProps([n],i);return Math.abs(e-o)<r.radius+r.hitRadius}ol.id="line",ol.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},ol.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},ol.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class sl extends os{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return al(this,t,"x",e)}inYRange(t,e){return al(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!xr(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,br(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function ll(t,e){const{x:n,y:i,base:r,width:o,height:a}=t.getProps(["x","y","base","width","height"],e);let s,l,u,c,h;return t.horizontal?(h=a/2,s=Math.min(n,r),l=Math.max(n,r),u=i-h,c=i+h):(h=o/2,s=n-h,l=n+h,u=Math.min(i,r),c=Math.max(i,r)),{left:s,top:u,right:l,bottom:c}}function ul(t,e,n,i){return t?0:wi(e,n,i)}function cl(t){const e=ll(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,o=Mr(i);return{t:ul(r.top,o.top,0,n),r:ul(r.right,o.right,0,e),b:ul(r.bottom,o.bottom,0,n),l:ul(r.left,o.left,0,e)}}(t,n/2,i/2),o=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,o=Lr(r),a=Math.min(e,n),s=t.borderSkipped,l=i||Pn(r);return{topLeft:ul(!l||s.top||s.left,o.topLeft,0,a),topRight:ul(!l||s.top||s.right,o.topRight,0,a),bottomLeft:ul(!l||s.bottom||s.left,o.bottomLeft,0,a),bottomRight:ul(!l||s.bottom||s.right,o.bottomRight,0,a)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function hl(t,e,n,i){const r=null===e,o=null===n,a=t&&!(r&&o)&&ll(t,i);return a&&(r||Ai(e,a.left,a.right))&&(o||Ai(n,a.top,a.bottom))}function dl(t,e){t.rect(e.x,e.y,e.w,e.h)}function fl(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-i,a=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+o,h:t.h+a,radius:t.radius}}sl.id="point",sl.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},sl.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class pl extends os{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=cl(this),a=(s=o.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?kr:dl;var s;t.save(),o.w===r.w&&o.h===r.h||(t.beginPath(),a(t,fl(o,e,r)),t.clip(),a(t,fl(r,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,fl(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return hl(this,t,e,n)}inXRange(t,e){return hl(this,t,null,e)}inYRange(t,e){return hl(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}pl.id="bar",pl.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},pl.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var gl=Object.freeze({__proto__:null,ArcElement:Ks,LineElement:ol,PointElement:sl,BarElement:pl});function ml(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function vl(t){t.data.datasets.forEach((t=>{ml(t)}))}var yl={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void vl(t);const i=t.width;t.data.datasets.forEach(((e,r)=>{const{_data:o,indexAxis:a}=e,s=t.getDatasetMeta(r),l=o||e.data;if("y"===Fr([a,t.options.indexAxis]))return;if("line"!==s.type)return;const u=t.scales[s.xAxisID];if("linear"!==u.type&&"time"!==u.type)return;if(t.options.parsing)return;let{start:c,count:h}=function(t,e){const n=e.length;let i,r=0;const{iScale:o}=t,{min:a,max:s,minDefined:l,maxDefined:u}=o.getUserBounds();return l&&(r=wi(jr(e,o.axis,a).lo,0,n-1)),i=u?wi(jr(e,o.axis,s).hi+1,r,n)-r:n-r,{start:r,count:i}}(s,l);if(h<=(n.threshold||4*i))return void ml(e);let d;switch(Ln(o)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":d=function(t,e,n,i,r){const o=r.samples||i;if(o>=n)return t.slice(e,e+n);const a=[],s=(n-2)/(o-2);let l=0;const u=e+n-1;let c,h,d,f,p,g=e;for(a[l++]=t[g],c=0;c<o-2;c++){let i,r=0,o=0;const u=Math.floor((c+1)*s)+1+e,m=Math.min(Math.floor((c+2)*s)+1,n)+e,v=m-u;for(i=u;i<m;i++)r+=t[i].x,o+=t[i].y;r/=v,o/=v;const y=Math.floor(c*s)+1+e,b=Math.min(Math.floor((c+1)*s)+1,n)+e,{x,y:_}=t[g];for(d=f=-1,i=y;i<b;i++)f=.5*Math.abs((x-r)*(t[i].y-_)-(x-t[i].x)*(o-_)),f>d&&(d=f,h=t[i],p=i);a[l++]=h,g=p}return a[l++]=t[u],a}(l,c,h,i,n);break;case"min-max":d=function(t,e,n,i){let r,o,a,s,l,u,c,h,d,f,p=0,g=0;const m=[],v=e+n-1,y=t[e].x,b=t[v].x-y;for(r=e;r<e+n;++r){o=t[r],a=(o.x-y)/b*i,s=o.y;const e=0|a;if(e===l)s<d?(d=s,u=r):s>f&&(f=s,c=r),p=(g*p+o.x)/++g;else{const n=r-1;if(!Ln(u)&&!Ln(c)){const e=Math.min(u,c),i=Math.max(u,c);e!==h&&e!==n&&m.push({...t[e],x:p}),i!==h&&i!==n&&m.push({...t[i],x:p})}r>0&&n!==h&&m.push(t[n]),m.push(o),l=e,g=0,d=f=s,u=c=h=r}}return m}(l,c,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=d}))},destroy(t){vl(t)}};function bl(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=Bn(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(Pn(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return Fn(r)&&Math.floor(r)===r?("-"!==i[0]&&"+"!==i[0]||(r=e+r),!(r===e||r<0||r>=n)&&r):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}class xl{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:o}=this;return e=e||{start:0,end:ni},t.arc(i,r,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function _l(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,o=[],a=i.reverse?e.max:e.min,s=i.reverse?e.min:e.max;let l,u,c;if(c="start"===n?a:"end"===n?s:Pn(n)?n.value:e.getBaseValue(),i.grid.circular)return u=e.getPointPositionForValue(0,a),new xl({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(c)});for(l=0;l<r;++l)o.push(e.getPointPositionForValue(l,c));return o}(t):function(t){const{scale:e={},fill:n}=t;let i,r=null;return"start"===n?r=e.bottom:"end"===n?r=e.top:Pn(n)?r=e.getPixelForValue(n.value):e.getBasePixel&&(r=e.getBasePixel()),Fn(r)?(i=e.isHorizontal(),{x:i?r:null,y:i?null:r}):null}(t)}function El(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function wl(t,e,n){const i=[];for(let r=0;r<n.length;r++){const o=n[r],{first:a,last:s,point:l}=Al(o,e,"x");if(!(!l||a&&s))if(a)i.unshift(l);else if(t.push(l),!s)break}t.push(...i)}function Al(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],o=t.segments,a=t.points;let s=!1,l=!1;for(let t=0;t<o.length;t++){const e=o[t],i=a[e.start][n],u=a[e.end][n];if(Ai(r,i,u)){s=r===i,l=r===u;break}}return{first:s,last:l,point:i}}function Dl(t){const{chart:e,fill:n,line:i}=t;if(Fn(n))return function(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,r=[],o=i.segments,a=i.points,s=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let t=0;t<i.length;t++){const r=i[t];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}(e,n);s.push(Cl({x:null,y:e.bottom},i));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)wl(r,a[t],s)}return new ol({points:r,options:{}})}(t);if("shape"===n)return!0;const r=_l(t);return r instanceof xl?r:Cl(r,i)}function Cl(t,e){let n=[],i=!1;return Rn(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=El(t,e,r);const a=r[t],s=r[e];null!==i?(o.push({x:a.x,y:i}),o.push({x:s.x,y:i})):null!==n&&(o.push({x:n,y:a.y}),o.push({x:n,y:s.y}))})),o}(t,e),n.length?new ol({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function kl(t,e,n){let i=t[e].fill;const r=[e];let o;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!Fn(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function Sl(t,e,n){const{segments:i,points:r}=e;let o=!0,a=!1;t.beginPath();for(const s of i){const{start:i,end:l}=s,u=r[i],c=r[El(i,l,r)];o?(t.moveTo(u.x,u.y),o=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,s,{move:a}),a?t.closePath():t.lineTo(c.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Tl(t,e,n,i){if(i)return;let r=e[t],o=n[t];return"angle"===t&&(r=_i(r),o=_i(o)),{property:t,start:r,end:o}}function Ol(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function Il(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:o,start:a,end:s}=n||{};"x"===o&&(t.beginPath(),t.rect(a,i,s-a,r-i),t.clip())}function Ml(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}function Ll(t,e){const{line:n,target:i,property:r,color:o,scale:a}=e,s=function(t,e,n){const i=t.segments,r=t.points,o=e.points,a=[];for(const t of i){let{start:i,end:s}=t;s=El(i,s,r);const l=Tl(n,r[i],r[s],t.loop);if(!e.segments){a.push({source:t,target:l,start:r[i],end:r[s]});continue}const u=Ro(e,l);for(const e of u){const i=Tl(n,o[e.start],o[e.end],e.loop),s=Lo(t,r,i);for(const t of s)a.push({source:t,target:e,start:{[n]:Ol(l,i,"start",Math.max)},end:{[n]:Ol(l,i,"end",Math.min)}})}}return a}(n,i,r);for(const{source:e,target:l,start:u,end:c}of s){const{style:{backgroundColor:s=o}={}}=e,h=!0!==i;t.save(),t.fillStyle=s,Il(t,a,h&&Tl(r,u,c)),t.beginPath();const d=!!n.pathSegment(t,e);let f;if(h){d?t.closePath():Ml(t,i,c,r);const e=!!i.pathSegment(t,l,{move:d,reverse:!0});f=d&&e,f||Ml(t,i,u,r)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function Rl(t,e,n){const i=Dl(e),{line:r,scale:o,axis:a}=e,s=r.options,l=s.fill,u=s.backgroundColor,{above:c=u,below:h=u}=l||{};i&&r.points.length&&(_r(t,n),function(t,e){const{line:n,target:i,above:r,below:o,area:a,scale:s}=e,l=n._loop?"angle":e.axis;t.save(),"x"===l&&o!==r&&(Sl(t,i,a.top),Ll(t,{line:n,target:i,color:r,scale:s,property:l}),t.restore(),t.save(),Sl(t,i,a.bottom)),Ll(t,{line:n,target:i,color:o,scale:s,property:l}),t.restore()}(t,{line:r,target:i,above:c,below:h,area:n,scale:o,axis:a}),Er(t))}var Pl={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let o,a,s,l;for(a=0;a<i;++a)o=t.getDatasetMeta(a),s=o.dataset,l=null,s&&s.options&&s instanceof ol&&(l={visible:t.isDatasetVisible(a),index:a,fill:bl(s,a,i),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:s}),o.$filler=l,r.push(l);for(a=0;a<i;++a)l=r[a],l&&!1!==l.fill&&(l.fill=kl(r,a,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;n&&(n.line.updateControlPoints(o,n.axis),i&&Rl(t.ctx,n,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&Rl(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;i&&!1!==i.fill&&"beforeDatasetDraw"===n.drawTime&&Rl(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Fl=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class Nl extends os{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=zn(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=Pr(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:s}=Fl(n,r);let l,u;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,r,a,s)+10):(u=this.maxHeight,l=this._fitCols(o,r,a,s)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a;let c=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-u;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+r.measureText(t.text).width;(0===f||l[l.length-1]+p+2*a>o)&&(c+=u,l[l.length-(f>0?0:1)]=0,d+=u,h++),s[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+a})),c}_fitCols(t,e,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-t;let c=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((t,o)=>{const g=n+e/2+r.measureText(t.text).width;o>0&&d+i+2*a>u&&(c+=h+a,l.push({width:h,height:d}),f+=h+a,p++,h=d=0),s[o]={left:f,top:d,col:p,width:g,height:i},h=Math.max(h,g),d+=i+a})),c+=h,l.push({width:h,height:d}),c}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,o=So(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=On(n,this.left+i,this.right-this.lineWidths[r]);for(const s of e)r!==s.row&&(r=s.row,a=On(n,this.left+i,this.right-this.lineWidths[r])),s.top+=this.top+t+i,s.left=o.leftForLtr(o.x(a),s.width),a+=s.width+i}else{let r=0,a=On(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const s of e)s.col!==r&&(r=s.col,a=On(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),s.top=a,s.left+=this.left+i,s.left=o.leftForLtr(o.x(s.left),s.width),a+=s.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;_r(t,this),this._draw(),Er(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:o}=t,a=pr.color,s=So(t.rtl,this.left,this.width),l=Pr(o.font),{color:u,padding:c}=o,h=l.size,d=h/2;let f;this.drawTitle(),i.textAlign=s.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=Fl(o,h),v=this.isHorizontal(),y=this._computeTitleHeight();f=v?{x:On(r,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:On(r,this.top+y+c,this.bottom-e[0].height),line:0},To(this.ctx,t.textDirection);const b=m+c;this.legendItems.forEach(((x,_)=>{i.strokeStyle=x.fontColor||u,i.fillStyle=x.fontColor||u;const E=i.measureText(x.text).width,w=s.textAlign(x.textAlign||(x.textAlign=o.textAlign)),A=p+d+E;let D=f.x,C=f.y;s.setWidth(this.width),v?_>0&&D+A+c>this.right&&(C=f.y+=b,f.line++,D=f.x=On(r,this.left+c,this.right-n[f.line])):_>0&&C+b>this.bottom&&(D=f.x=D+e[f.line].width+c,f.line++,C=f.y=On(r,this.top+y+c,this.bottom-e[f.line].height));!function(t,e,n){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();const r=Bn(n.lineWidth,1);if(i.fillStyle=Bn(n.fillStyle,a),i.lineCap=Bn(n.lineCap,"butt"),i.lineDashOffset=Bn(n.lineDashOffset,0),i.lineJoin=Bn(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Bn(n.strokeStyle,a),i.setLineDash(Bn(n.lineDash,[])),o.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},a=s.xPlus(t,p/2);br(i,o,a,e+d)}else{const o=e+Math.max((h-g)/2,0),a=s.leftForLtr(t,p),l=Lr(n.borderRadius);i.beginPath(),Object.values(l).some((t=>0!==t))?kr(i,{x:a,y:o,w:p,h:g,radius:l}):i.rect(a,o,p,g),i.fill(),0!==r&&i.stroke()}i.restore()}(s.x(D),C,x),D=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(w,D+p+d,v?D+A:this.right,t.rtl),function(t,e,n){Dr(i,n.text,t,e+m/2,l,{strikethrough:n.hidden,textAlign:s.textAlign(n.textAlign)})}(s.x(D),C,x),v?f.x+=A+c:f.y+=b})),Oo(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Pr(e.font),i=Rr(e.padding);if(!e.display)return;const r=So(t.rtl,this.left,this.width),o=this.ctx,a=e.position,s=n.size/2,l=i.top+s;let u,c=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+l,c=On(t.align,c,this.right-h);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);u=l+On(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=On(a,c,c+h);o.textAlign=r.textAlign(Tn(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,Dr(o,e.text,d,u,n)}_computeTitleHeight(){const t=this.options.title,e=Pr(t.font),n=Rr(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(Ai(t,this.left,this.right)&&Ai(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Ai(t,i.left,i.left+i.width)&&Ai(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if("mousemove"===t&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type){const o=this._hoveredItem,a=(r=n,null!==(i=o)&&null!==r&&i.datasetIndex===r.datasetIndex&&i.index===r.index);o&&!a&&zn(e.onLeave,[t,o,this],this),this._hoveredItem=n,n&&!a&&zn(e.onHover,[t,n,this],this)}else n&&zn(e.onClick,[t,n,this],this);var i,r}}var Bl={id:"legend",_element:Nl,start(t,e,n){const i=t.legend=new Nl({ctx:t.ctx,options:n,chart:t});Va.configure(t,i,n),Va.addBox(t,i)},stop(t){Va.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Va.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:o}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const a=t.controller.getStyle(n?0:void 0),s=Rr(a.borderWidth);return{text:e[t.index].label,fillStyle:a.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(s.width+s.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:r||a.textAlign,borderRadius:0,datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class jl extends os{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=Rn(n.text)?n.text.length:1;this._padding=Rr(n.padding);const r=i*Pr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:o}=this,a=o.align;let s,l,u,c=0;return this.isHorizontal()?(l=On(a,n,r),u=e+t,s=r-n):("left"===o.position?(l=n+t,u=On(a,i,e),c=-.5*ei):(l=r-t,u=On(a,e,i),c=.5*ei),s=i-e),{titleX:l,titleY:u,maxWidth:s,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Pr(e.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:o,maxWidth:a,rotation:s}=this._drawArgs(i);Dr(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:s,textAlign:Tn(e.align),textBaseline:"middle",translation:[r,o]})}}var zl={id:"title",_element:jl,start(t,e,n){!function(t,e){const n=new jl({ctx:t.ctx,options:e,chart:t});Va.configure(t,n,e),Va.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;Va.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Va.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hl=new WeakMap;var Vl={id:"subtitle",start(t,e,n){const i=new jl({ctx:t.ctx,options:n,chart:t});Va.configure(t,i,n),Va.addBox(t,i),Hl.set(t,i)},stop(t){Va.removeBox(t,Hl.get(t)),Hl.delete(t)},beforeUpdate(t,e,n){const i=Hl.get(t);Va.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Wl={average(t){if(!t.length)return!1;let e,n,i=0,r=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i+=t.x,r+=t.y,++o}}return{x:i/o,y:r/o}},nearest(t,e){if(!t.length)return!1;let n,i,r,o=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=bi(e,i.getCenterPoint());t<s&&(s=t,r=i)}}if(r){const t=r.tooltipPosition();o=t.x,a=t.y}return{x:o,y:a}}};function Ul(t,e){return e&&(Rn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Gl(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function ql(t,e){const{element:n,datasetIndex:i,index:r}=e,o=t.getDatasetMeta(i).controller,{label:a,value:s}=o.getLabelAndValue(r);return{chart:t,label:a,parsed:o.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:s,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function $l(t,e){const n=t.chart.ctx,{body:i,footer:r,title:o}=t,{boxWidth:a,boxHeight:s}=e,l=Pr(e.bodyFont),u=Pr(e.titleFont),c=Pr(e.footerFont),h=o.length,d=r.length,f=i.length,p=Rr(e.padding);let g=p.height,m=0,v=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){g+=f*(e.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*c.lineHeight+(d-1)*e.footerSpacing);let y=0;const b=function(t){m=Math.max(m,n.measureText(t).width+y)};return n.save(),n.font=u.string,Hn(t.title,b),n.font=l.string,Hn(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?a+2+e.boxPadding:0,Hn(i,(t=>{Hn(t.before,b),Hn(t.lines,b),Hn(t.after,b)})),y=0,n.font=c.string,Hn(t.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function Yl(t,e,n,i){const{x:r,width:o}=n,{width:a,chartArea:{left:s,right:l}}=t;let u="center";return"center"===i?u=r<=(s+l)/2?"left":"right":r<=o/2?u="left":r>=a-o/2&&(u="right"),function(t,e,n,i){const{x:r,width:o}=i,a=n.caretSize+n.caretPadding;return"left"===t&&r+o+a>e.width||"right"===t&&r-o-a<0||void 0}(u,t,e,n)&&(u="center"),u}function Xl(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||Yl(t,e,n,i),yAlign:i}}function Kl(t,e,n,i){const{caretSize:r,caretPadding:o,cornerRadius:a}=t,{xAlign:s,yAlign:l}=n,u=r+o,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:f}=Lr(a);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,s);const g=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,l,u);return"center"===l?"left"===s?p+=u:"right"===s&&(p-=u):"left"===s?p-=Math.max(c,d)+r:"right"===s&&(p+=Math.max(h,f)+r),{x:wi(p,0,i.width-e.width),y:wi(g,0,i.height-e.height)}}function Zl(t,e,n){const i=Rr(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function Jl(t){return Ul([],Gl(t))}function Ql(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}class tu extends os{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new Wo(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Nr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=n.beforeTitle.apply(this,[t]),r=n.title.apply(this,[t]),o=n.afterTitle.apply(this,[t]);let a=[];return a=Ul(a,Gl(i)),a=Ul(a,Gl(r)),a=Ul(a,Gl(o)),a}getBeforeBody(t,e){return Jl(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:n}=e,i=[];return Hn(t,(t=>{const e={before:[],lines:[],after:[]},r=Ql(n,t);Ul(e.before,Gl(r.beforeLabel.call(this,t))),Ul(e.lines,r.label.call(this,t)),Ul(e.after,Gl(r.afterLabel.call(this,t))),i.push(e)})),i}getAfterBody(t,e){return Jl(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:n}=e,i=n.beforeFooter.apply(this,[t]),r=n.footer.apply(this,[t]),o=n.afterFooter.apply(this,[t]);let a=[];return a=Ul(a,Gl(i)),a=Ul(a,Gl(r)),a=Ul(a,Gl(o)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],o=[];let a,s,l=[];for(a=0,s=e.length;a<s;++a)l.push(ql(this.chart,e[a]));return t.filter&&(l=l.filter(((e,i,r)=>t.filter(e,i,r,n)))),t.itemSort&&(l=l.sort(((e,i)=>t.itemSort(e,i,n)))),Hn(l,(e=>{const n=Ql(t.callbacks,e);i.push(n.labelColor.call(this,e)),r.push(n.labelPointStyle.call(this,e)),o.push(n.labelTextColor.call(this,e))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(i.length){const t=Wl[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=$l(this,n),a=Object.assign({},t,e),s=Xl(this.chart,n,a),l=Kl(n,a,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,r={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:s,topRight:l,bottomLeft:u,bottomRight:c}=Lr(a),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,v,y,b,x;return"center"===r?(b=d+p/2,"left"===i?(g=h,m=g-o,y=b+o,x=b-o):(g=h+f,m=g+o,y=b-o,x=b+o),v=g):(m="left"===i?h+Math.max(s,u)+o:"right"===i?h+f-Math.max(l,c)-o:this.caretX,"top"===r?(y=d,b=y-o,g=m-o,v=m+o):(y=d+p,b=y+o,g=m+o,v=m-o),x=y),{x1:g,x2:m,x3:v,y1:y,y2:b,y3:x}}drawTitle(t,e,n){const i=this.title,r=i.length;let o,a,s;if(r){const l=So(n.rtl,this.x,this.width);for(t.x=Zl(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",o=Pr(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,s=0;s<r;++s)e.fillText(i[s],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,s+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:s,boxWidth:l,boxPadding:u}=r,c=Pr(r.bodyFont),h=Zl(this,"left",r),d=i.x(h),f=s<c.lineHeight?(c.lineHeight-s)/2:0,p=e.y+f;if(r.usePointStyle){const e={radius:Math.min(l,s)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(d,l)+l/2,u=p+s/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,br(t,e,n,u),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,br(t,e,n,u)}else{t.lineWidth=o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=i.leftForLtr(d,l-u),n=i.leftForLtr(i.xPlus(d,1),l-u-2),a=Lr(o.borderRadius);Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=r.multiKeyBackground,kr(t,{x:e,y:p,w:l,h:s,radius:a}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),kr(t,{x:n,y:p+1,w:l-2,h:s-2,radius:a}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,p,l,s),t.strokeRect(e,p,l,s),t.fillStyle=o.backgroundColor,t.fillRect(n,p+1,l-2,s-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:s,boxWidth:l,boxPadding:u}=n,c=Pr(n.bodyFont);let h=c.lineHeight,d=0;const f=So(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+r},g=f.textAlign(o);let m,v,y,b,x,_,E;for(e.textAlign=o,e.textBaseline="middle",e.font=c.string,t.x=Zl(this,g,n),e.fillStyle=n.bodyColor,Hn(this.beforeBody,p),d=a&&"right"!==g?"center"===o?l/2+u:l+2+u:0,b=0,_=i.length;b<_;++b){for(m=i[b],v=this.labelTextColors[b],e.fillStyle=v,Hn(m.before,p),y=m.lines,a&&y.length&&(this._drawColorBox(e,t,b,f,n),h=Math.max(c.lineHeight,s)),x=0,E=y.length;x<E;++x)p(y[x]),h=c.lineHeight;Hn(m.after,p)}d=0,h=c.lineHeight,Hn(this.afterBody,p),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let o,a;if(r){const s=So(n.rtl,this.x,this.width);for(t.x=Zl(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=s.textAlign(n.footerAlign),e.textBaseline="middle",o=Pr(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],s.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:o}=this,{x:a,y:s}=t,{width:l,height:u}=n,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:f}=Lr(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+c,s),"top"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+l-h,s),e.quadraticCurveTo(a+l,s,a+l,s+h),"center"===o&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(a+l,s+u-f),e.quadraticCurveTo(a+l,s+u,a+l-f,s+u),"bottom"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+d,s+u),e.quadraticCurveTo(a,s+u,a,s+u-d),"center"===o&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(a,s+c),e.quadraticCurveTo(a,s,a+c,s),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=Wl[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=$l(this,t),a=Object.assign({},n,this._size),s=Xl(e,t,a),l=Kl(t,a,s,e);i._to===l.x&&r._to===l.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Rr(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),To(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),Oo(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),r=!Vn(n,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,n),a=this._positionChanged(o,t),s=e||!Vn(o,r)||a;return s&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e;const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,o=Wl[r.position].call(this,t,e);return!1!==o&&(n!==o.x||i!==o.y)}}tu.positioners=Wl;var eu={id:"tooltip",_element:tu,positioners:Wl,afterInit(t,e,n){n&&(t.tooltip=new tu({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip,n={tooltip:e};!1!==t.notifyPlugins("beforeTooltipDraw",n)&&(e&&e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n))},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:In,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:In,beforeBody:In,beforeLabel:In,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ln(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:In,afterBody:In,beforeFooter:In,footer:In,afterFooter:In}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},nu=Object.freeze({__proto__:null,Decimation:yl,Filler:Pl,Legend:Bl,SubTitle:Vl,Title:zl,Tooltip:eu});function iu(t,e,n,i){const r=t.indexOf(e);if(-1===r)return((t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i);return r!==t.lastIndexOf(e)?n:r}class ru extends ms{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ln(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:wi(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:iu(n,t,Bn(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)i.push({value:n});return i}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function ou(t,e){const n=[],{bounds:i,step:r,min:o,max:a,precision:s,count:l,maxTicks:u,maxDigits:c,includeBounds:h}=t,d=r||1,f=u-1,{min:p,max:g}=e,m=!Ln(o),v=!Ln(a),y=!Ln(l),b=(g-p)/(c+1);let x,_,E,w,A=hi((g-p)/f/d)*d;if(A<1e-14&&!m&&!v)return[{value:p},{value:g}];w=Math.ceil(g/A)-Math.floor(p/A),w>f&&(A=hi(w*A/f/d)*d),Ln(s)||(x=Math.pow(10,s),A=Math.ceil(A*x)/x),"ticks"===i?(_=Math.floor(p/A)*A,E=Math.ceil(g/A)*A):(_=p,E=g),m&&v&&r&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-o)/r,A/1e3)?(w=Math.round(Math.min((a-o)/A,u)),A=(a-o)/w,_=o,E=a):y?(_=m?o:_,E=v?a:E,w=l-1,A=(E-_)/w):(w=(E-_)/A,w=fi(w,Math.round(w),A/1e3)?Math.round(w):Math.ceil(w));const D=Math.max(vi(A),vi(_));x=Math.pow(10,Ln(s)?D:s),_=Math.round(_*x)/x,E=Math.round(E*x)/x;let C=0;for(m&&(h&&_!==o?(n.push({value:o}),_<o&&C++,fi(Math.round((_+C*A)*x)/x,o,au(o,b,t))&&C++):_<o&&C++);C<w;++C)n.push({value:Math.round((_+C*A)*x)/x});return v&&h&&E!==a?n.length&&fi(n[n.length-1].value,a,au(a,b,t))?n[n.length-1].value=a:n.push({value:a}):v&&E!==a||n.push({value:E}),n}function au(t,e,{horizontal:n,minRotation:i}){const r=gi(i),o=(n?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}ru.id="category",ru.defaults={ticks:{callback:ru.prototype.getLabelForValue}};class su extends ms{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ln(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=t=>i=e?i:t,a=t=>r=n?r:t;if(t){const t=ci(i),e=ci(r);t<0&&e<0?a(0):t>0&&e>0&&o(0)}if(i===r){let e=1;(r>=Number.MAX_SAFE_INTEGER||i<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*r)),a(r+e),t||o(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=ou({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&pi(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return ko(t,this.chart.options.locale,this.options.ticks.format)}}class lu extends su{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Fn(t)?t:0,this.max=Fn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=gi(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function uu(t){return 1===t/Math.pow(10,Math.floor(ui(t)))}lu.id="linear",lu.defaults={ticks:{callback:ss.formatters.numeric}};class cu extends ms{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=su.prototype.parse.apply(this,[t,e]);if(0!==n)return Fn(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Fn(t)?Math.max(0,t):null,this.max=Fn(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,o=t=>i=e?i:t,a=(t,e)=>Math.pow(10,Math.floor(ui(t))+e);n===i&&(n<=0?(r(1),o(10)):(r(a(n,-1)),o(a(i,1)))),n<=0&&r(a(i,-1)),i<=0&&o(a(n,1)),this._zero&&this.min!==this._suggestedMin&&n===a(this.min,0)&&r(a(n,-1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=function(t,e){const n=Math.floor(ui(e.max)),i=Math.ceil(e.max/Math.pow(10,n)),r=[];let o=Nn(t.min,Math.pow(10,Math.floor(ui(e.min)))),a=Math.floor(ui(o)),s=Math.floor(o/Math.pow(10,a)),l=a<0?Math.pow(10,Math.abs(a)):1;do{r.push({value:o,major:uu(o)}),++s,10===s&&(s=1,++a,l=a>=0?1:l),o=Math.round(s*Math.pow(10,a)*l)/l}while(a<n||a===n&&s<i);const u=Nn(t.max,o);return r.push({value:u,major:uu(o)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&pi(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":ko(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=ui(t),this._valueRange=ui(this.max)-ui(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ui(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function hu(t){const e=t.ticks;if(e.display&&t.display){const t=Rr(e.backdropPadding);return Bn(e.font&&e.font.size,pr.font.size)+t.height}return 0}function du(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function fu(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],o=t._pointLabels.length,a=t.options.pointLabels,s=a.centerPointLabels?ei/o:0;for(let h=0;h<o;h++){const o=a.setContext(t.getPointLabelContext(h));r[h]=o.padding;const d=t.getPointPosition(h,t.drawingArea+r[h],s),f=Pr(o.font),p=(l=t.ctx,u=f,c=Rn(c=t._pointLabels[h])?c:[c],{w:mr(l,u.string,c),h:c.length*u.lineHeight});i[h]=p;const g=_i(t.getIndexAngle(h)+s),m=Math.round(mi(g));pu(n,e,g,du(m,d.x,p.w,0,180),du(m,d.y,p.h,90,270))}var l,u,c;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],r=t._pointLabels.length,o=t.options,a=hu(o)/2,s=t.drawingArea,l=o.pointLabels.centerPointLabels?ei/r:0;for(let o=0;o<r;o++){const r=t.getPointPosition(o,s+a+n[o],l),u=Math.round(mi(_i(r.angle+ai))),c=e[o],h=vu(r.y,c.h,u),d=gu(u),f=mu(r.x,c.w,d);i.push({x:r.x,y:h,textAlign:d,left:f,top:h,right:f+c.w,bottom:h+c.h})}return i}(t,i,r)}function pu(t,e,n,i,r){const o=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let s=0,l=0;i.start<e.l?(s=(e.l-i.start)/o,t.l=Math.min(t.l,e.l-s)):i.end>e.r&&(s=(i.end-e.r)/o,t.r=Math.max(t.r,e.r+s)),r.start<e.t?(l=(e.t-r.start)/a,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function gu(t){return 0===t||180===t?"center":t<180?"left":"right"}function mu(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function vu(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function yu(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,ni);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let o=1;o<i;o++)n=t.getPointPosition(o,e),r.lineTo(n.x,n.y)}}cu.id="logarithmic",cu.defaults={ticks:{callback:ss.formatters.logarithmic,major:{enabled:!0}}};class bu extends su{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Rr(hu(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Fn(t)&&!isNaN(t)?t:0,this.max=Fn(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/hu(this.options))}generateTickLabels(t){su.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=zn(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?fu(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return _i(t*(ni/(this._pointLabels.length||1))+gi(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Ln(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ln(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Nr(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-ai+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),yu(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i}=e,r=this._pointLabels.length;let o,a,s;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=i.setContext(t.getPointLabelContext(r)),o=Pr(e.font),{x:a,y:s,textAlign:l,left:u,top:c,right:h,bottom:d}=t._pointLabelItems[r],{backdropColor:f}=e;if(!Ln(f)){const t=Rr(e.backdropPadding);n.fillStyle=f,n.fillRect(u-t.left,c-t.top,h-u+t.width,d-c+t.height)}Dr(n,t._pointLabels[r],a,s+o.lineHeight/2,o,{color:e.color,textAlign:l,textBaseline:"middle"})}}(this,r),i.display&&this.ticks.forEach(((t,e)=>{if(0!==e){a=this.getDistanceFromCenterForValue(t.value);!function(t,e,n,i){const r=t.ctx,o=e.circular,{color:a,lineWidth:s}=e;!o&&!i||!a||!s||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=s,r.setLineDash(e.borderDash),r.lineDashOffset=e.borderDashOffset,r.beginPath(),yu(t,n,o,i),r.closePath(),r.stroke(),r.restore())}(this,i.setContext(this.getContext(e-1)),a,r)}})),n.display){for(t.save(),o=r-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:l}=i;l&&r&&(t.lineWidth=l,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),s=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(s.x,s.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,a)=>{if(0===a&&!e.reverse)return;const s=n.setContext(this.getContext(a)),l=Pr(s.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),s.showLabelBackdrop){t.font=l.string,o=t.measureText(i.label).width,t.fillStyle=s.backdropColor;const e=Rr(s.backdropPadding);t.fillRect(-o/2-e.left,-r-l.size/2-e.top,o+e.width,l.size+e.height)}Dr(t,i.label,0,-r,l,{color:s.color})})),t.restore()}drawTitle(){}}bu.id="radialLinear",bu.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ss.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},bu.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},bu.descriptors={angleLines:{_fallback:"grid"}};const xu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_u=Object.keys(xu);function Eu(t,e){return t-e}function wu(t,e){if(Ln(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:o}=t._parseOpts;let a=e;return"function"==typeof i&&(a=i(a)),Fn(a)||(a="string"==typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!di(o)&&!0!==o?n.startOf(a,r):n.startOf(a,"isoWeek",o)),+a)}function Au(t,e,n,i){const r=_u.length;for(let o=_u.indexOf(t);o<r-1;++o){const t=xu[_u[o]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return _u[o]}return _u[r-1]}function Du(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=Br(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function Cu(t,e,n){const i=[],r={},o=e.length;let a,s;for(a=0;a<o;++a)s=e[a],r[s]=a,i.push({value:s,major:!1});return 0!==o&&n?function(t,e,n,i){const r=t._adapter,o=+r.startOf(e[0].value,i),a=e[e.length-1].value;let s,l;for(s=o;s<=a;s=+r.add(s,1,i))l=n[s],l>=0&&(e[l].major=!0);return e}(t,i,r,n):i}class ku extends ms{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const n=t.time||(t.time={}),i=this._adapter=new _a._date(t.adapters.date);$n(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:wu(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function s(t){o||isNaN(t.min)||(i=Math.min(i,t.min)),a||isNaN(t.max)||(r=Math.max(r,t.max))}o&&a||(s(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||s(this.getMinMax(!1))),i=Fn(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=Fn(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=function(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(i,r,this.max);return this._unit=e.unit||(n.autoSkip?Au(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let o=_u.length-1;o>=_u.indexOf(n);o--){const n=_u[o];if(xu[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return _u[n?_u.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=_u.indexOf(t)+1,n=_u.length;e<n;++e)if(xu[_u[e]].common)return _u[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&o.reverse(),Cu(this,o,this._majorUnit)}initOffsets(t){let e,n,i=0,r=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),r=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=wi(i,0,o),r=wi(r,0,o),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||Au(r.minUnit,e,n,this._getLabelCapacity(e)),a=Bn(r.stepSize,1),s="week"===o&&r.isoWeekday,l=di(s)||!0===s,u={};let c,h,d=e;if(l&&(d=+t.startOf(d,"isoWeek",s)),d=+t.startOf(d,l?"day":o),t.diff(n,e,o)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+o);const f="data"===i.ticks.source&&this.getDataTimestamps();for(c=d,h=0;c<n;c=+t.add(c,a,o),h++)Du(u,c,f);return c!==n&&"ticks"!==i.bounds&&1!==h||Du(u,c,f),Object.keys(u).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}_tickFormatFunction(t,e,n,i){const r=this.options,o=r.time.displayFormats,a=this._unit,s=this._majorUnit,l=a&&o[a],u=s&&o[s],c=n[e],h=s&&u&&c&&c.major,d=this._adapter.format(t,i||(h?u:l)),f=r.ticks.callback;return f?zn(f,[d,e,n],this):d}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=gi(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Cu(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(wu(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Wr(t.sort(Eu))}}function Su(t,e,n){let i,r,o,a,s=0,l=t.length-1;n?(e>=t[s].pos&&e<=t[l].pos&&({lo:s,hi:l}=jr(t,"pos",e)),({pos:i,time:o}=t[s]),({pos:r,time:a}=t[l])):(e>=t[s].time&&e<=t[l].time&&({lo:s,hi:l}=jr(t,"time",e)),({time:i,pos:o}=t[s]),({time:r,pos:a}=t[l]));const u=r-i;return u?o+(a-o)*(e-i)/u:o}ku.id="time",ku.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class Tu extends ku{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Su(e,this.min),this._tableRange=Su(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let o,a,s,l,u;for(o=0,a=t.length;o<a;++o)l=t[o],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],s=i[o-1],l=i[o],Math.round((u+s)/2)!==l&&r.push({time:l,pos:o/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Su(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Su(this._table,n*this._tableRange+this._minPos,!0)}}Tu.id="timeseries",Tu.defaults=ku.defaults;const Ou=[ya,gl,nu,Object.freeze({__proto__:null,CategoryScale:ru,LinearScale:lu,LogarithmicScale:cu,RadialLinearScale:bu,TimeScale:ku,TimeSeriesScale:Tu})];Vs.register(...Ou);const Iu=Vs;function Mu(t,e,n){if(-1===t.indexOf(e))return n;const i=t[t.indexOf(e)+1];if(!i)return n;if("duration"===e){let t=i.match(/([0-9]+)ms/);if(t)return t[1]}if("min"===e){let t=i.match(/([0-9]+)px/);if(t)return t[1]}return i}var Lu=function(t){function e(e,{modifiers:n}){let i=Mu(n,"duration",250)/1e3,r=Mu(n,"min",0),o=!n.includes("min");e._x_isShown||(e.style.height=`${r}px`),!e._x_isShown&&o&&(e.hidden=!0),e._x_isShown||(e.style.overflow="hidden");let a=(e,n)=>{let i=t.setStyles(e,n);return n.height?()=>{}:i},s={transitionProperty:"height",transitionDuration:`${i}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};e._x_transition={in(n=(()=>{}),i=(()=>{})){o&&(e.hidden=!1),o&&(e.style.display=null);let a=e.getBoundingClientRect().height;e.style.height="auto";let l=e.getBoundingClientRect().height;a===l&&(a=r),t.transition(e,t.setStyles,{during:s,start:{height:a+"px"},end:{height:l+"px"}},(()=>e._x_isShown=!0),(()=>{e.style.height==`${l}px`&&(e.style.overflow=null)}))},out(n=(()=>{}),i=(()=>{})){let l=e.getBoundingClientRect().height;t.transition(e,a,{during:s,start:{height:l+"px"},end:{height:r+"px"}},(()=>e.style.overflow="hidden"),(()=>{e._x_isShown=!1,e.style.height==`${r}px`&&o&&(e.style.display="none",e.hidden=!0)}))}}}t.directive("collapse",e),e.inline=(t,{modifiers:e})=>{e.includes("min")&&(t._x_doShow=()=>{},t._x_doHide=()=>{})}},Ru=n(757),Pu=n.n(Ru),Fu=["query","success","failure"];function Nu(t,e,n,i,r,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,r)}function Bu(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){Nu(o,i,r,a,s,"next",t)}function s(t){Nu(o,i,r,a,s,"throw",t)}a(void 0)}))}}function ju(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zu(){return zu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=Hu(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},zu.apply(this,arguments)}function Hu(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ku(t)););return t}function Vu(t){var e="function"==typeof Map?new Map:void 0;return Vu=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Wu(t,arguments,Ku(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Gu(n,t)},Vu(t)}function Wu(t,e,n){return Wu=Xu()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&Gu(r,n.prototype),r},Wu.apply(null,arguments)}function Uu(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gu(t,e)}function Gu(t,e){return Gu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Gu(t,e)}function qu(t){var e=Xu();return function(){var n,i=Ku(t);if(e){var r=Ku(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return $u(this,n)}}function $u(t,e){if(e&&("object"===lc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yu(t)}function Yu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Ku(t){return Ku=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ku(t)}function Zu(t){return function(t){if(Array.isArray(t))return sc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ac(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ju(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Qu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ju(Object(n),!0).forEach((function(e){tc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ju(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ec(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nc(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ic(t,e,n){return e&&nc(t.prototype,e),n&&nc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(t,e)||ac(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ac(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ac(t,e){if(t){if("string"==typeof t)return sc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sc(t,e):void 0}}function sc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function lc(t){return lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lc(t)}var uc=Object.create,cc=Object.defineProperty,hc=Object.getPrototypeOf,dc=Object.prototype.hasOwnProperty,fc=Object.getOwnPropertyNames,pc=Object.getOwnPropertyDescriptor,gc=function(t){return cc(t,"__esModule",{value:!0})},mc=function(t,e){return function(){return e||t((e={exports:{}}).exports,e),e.exports}},vc=function(t,e){for(var n in e)cc(t,n,{get:e[n],enumerable:!0})},yc=function(t){return function(t,e,n){if(e&&"object"===lc(e)||"function"==typeof e){var i,r=oc(fc(e));try{var o=function(){var r=i.value;dc.call(t,r)||"default"===r||cc(t,r,{get:function(){return e[r]},enumerable:!(n=pc(e,r))||n.enumerable})};for(r.s();!(i=r.n()).done;)o()}catch(t){r.e(t)}finally{r.f()}}return t}(gc(cc(null!=t?uc(hc(t)):{},"default",t&&t.__esModule&&"default"in t?{get:function(){return t.default},enumerable:!0}:{value:t,enumerable:!0})),t)},bc=mc((function(t,e){var i,r;i=t,r=function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,i=/\d\d?/,r=/\d*[^\s\d-_:/()]+/,o={},a=function(t){return(t=+t)+(t>68?1900:2e3)},s=function(t){return function(e){this[t]=+e}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(t){if(!t)return 0;if("Z"===t)return 0;var e=t.match(/([+-]|\d\d)/g),n=60*e[1]+(+e[2]||0);return 0===n?0:"+"===e[0]?-n:n}(t)}],u=function(t){var e=o[t];return e&&(e.indexOf?e:e.s.concat(e.f))},c=function(t,e){var n,i=o.meridiem;if(i){for(var r=1;r<=24;r+=1)if(t.indexOf(i(r,0,e))>-1){n=r>12;break}}else n=t===(e?"pm":"PM");return n},h={A:[r,function(t){this.afternoon=c(t,!1)}],a:[r,function(t){this.afternoon=c(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[n,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[i,s("seconds")],ss:[i,s("seconds")],m:[i,s("minutes")],mm:[i,s("minutes")],H:[i,s("hours")],h:[i,s("hours")],HH:[i,s("hours")],hh:[i,s("hours")],D:[i,s("day")],DD:[n,s("day")],Do:[r,function(t){var e=o.ordinal,n=t.match(/\d+/);if(this.day=n[0],e)for(var i=1;i<=31;i+=1)e(i).replace(/\[|\]/g,"")===t&&(this.day=i)}],M:[i,s("month")],MM:[n,s("month")],MMM:[r,function(t){var e=u("months"),n=(u("monthsShort")||e.map((function(t){return t.slice(0,3)}))).indexOf(t)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[r,function(t){var e=u("months").indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,s("year")],YY:[n,function(t){this.year=a(t)}],YYYY:[/\d{4}/,s("year")],Z:l,ZZ:l};return function(n,i,r){r.p.customParseFormat=!0,n&&n.parseTwoDigitYear&&(a=n.parseTwoDigitYear);var s=i.prototype,l=s.parse;s.parse=function(n){var i=n.date,a=n.utc,s=n.args;this.$u=a;var u=s[1];if("string"==typeof u){var c=!0===s[2],d=!0===s[3],f=c||d,p=s[2];d&&(p=s[2]),o=this.$locale(),!c&&p&&(o=r.Ls[p]),this.$d=function(n,i,r){try{if(["x","X"].indexOf(i)>-1)return new Date(("X"===i?1e3:1)*n);var a=function(n){var i,r;i=n,r=o&&o.formats;for(var a=(n=i.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,n,i){var o=i&&i.toUpperCase();return n||r[i]||t[i]||r[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))}))).match(e),s=a.length,l=0;l<s;l+=1){var u=a[l],c=h[u],d=c&&c[0],f=c&&c[1];a[l]=f?{regex:d,parser:f}:u.replace(/^\[|\]$/g,"")}return function(t){for(var e={},n=0,i=0;n<s;n+=1){var r=a[n];if("string"==typeof r)i+=r.length;else{var o=r.regex,l=r.parser,u=t.slice(i),c=o.exec(u)[0];l.call(e,c),t=t.replace(c,"")}}return function(t){var e=t.afternoon;if(void 0!==e){var n=t.hours;e?n<12&&(t.hours+=12):12===n&&(t.hours=0),delete t.afternoon}}(e),e}}(i)(n),s=a.year,l=a.month,u=a.day,c=a.hours,d=a.minutes,f=a.seconds,p=a.milliseconds,g=a.zone,m=new Date,v=u||(s||l?1:m.getDate()),y=s||m.getFullYear(),b=0;s&&!l||(b=l>0?l-1:m.getMonth());var x=c||0,_=d||0,E=f||0,w=p||0;return g?new Date(Date.UTC(y,b,v,x,_,E,w+60*g.offset*1e3)):r?new Date(Date.UTC(y,b,v,x,_,E,w)):new Date(y,b,v,x,_,E,w)}catch(t){return new Date("")}}(i,u,a),this.init(),p&&!0!==p&&(this.$L=this.locale(p).$L),f&&i!=this.format(u)&&(this.$d=new Date("")),o={}}else if(u instanceof Array)for(var g=u.length,m=1;m<=g;m+=1){s[1]=u[m-1];var v=r.apply(this,s);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}m===g&&(this.$d=new Date(""))}else l.call(this,n)}}},"object"==lc(t)&&void 0!==e?e.exports=r():"function"==typeof define&&n.amdO?define(r):(i="undefined"!=typeof globalThis?globalThis:i||self).dayjs_plugin_customParseFormat=r()})),xc=mc((function(t,e){var i,r;i=t,r=function(){return function(t,e,n){var i=e.prototype,r=function(t){return t&&(t.indexOf?t:t.s)},o=function(t,e,n,i,o){var a=t.name?t:t.$locale(),s=r(a[e]),l=r(a[n]),u=s||l.map((function(t){return t.slice(0,i)}));if(!o)return u;var c=a.weekStart;return u.map((function(t,e){return u[(e+(c||0))%7]}))},a=function(){return n.Ls[n.locale()]},s=function(t,e){return t.formats[e]||t.formats[e.toUpperCase()].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))},l=function(){var t=this;return{months:function(e){return e?e.format("MMMM"):o(t,"months")},monthsShort:function(e){return e?e.format("MMM"):o(t,"monthsShort","months",3)},firstDayOfWeek:function(){return t.$locale().weekStart||0},weekdays:function(e){return e?e.format("dddd"):o(t,"weekdays")},weekdaysMin:function(e){return e?e.format("dd"):o(t,"weekdaysMin","weekdays",2)},weekdaysShort:function(e){return e?e.format("ddd"):o(t,"weekdaysShort","weekdays",3)},longDateFormat:function(e){return s(t.$locale(),e)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return l.bind(this)()},n.localeData=function(){var t=a();return{firstDayOfWeek:function(){return t.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(e){return s(t,e)},meridiem:t.meridiem,ordinal:t.ordinal}},n.months=function(){return o(a(),"months")},n.monthsShort=function(){return o(a(),"monthsShort","months",3)},n.weekdays=function(t){return o(a(),"weekdays",null,null,t)},n.weekdaysShort=function(t){return o(a(),"weekdaysShort","weekdays",3,t)},n.weekdaysMin=function(t){return o(a(),"weekdaysMin","weekdays",2,t)}}},"object"==lc(t)&&void 0!==e?e.exports=r():"function"==typeof define&&n.amdO?define(r):(i="undefined"!=typeof globalThis?globalThis:i||self).dayjs_plugin_localeData=r()})),_c=mc((function(t,e){var i,r;i=t,r=function(){var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(n,i,r){var o,a=function(t,n,i){void 0===i&&(i={});var r=new Date(t);return function(t,n){void 0===n&&(n={});var i=n.timeZoneName||"short",r=t+"|"+i,o=e[r];return o||(o=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:i}),e[r]=o),o}(n,i).formatToParts(r)},s=function(e,n){for(var i=a(e,n),o=[],s=0;s<i.length;s+=1){var l=i[s],u=l.type,c=l.value,h=t[u];h>=0&&(o[h]=parseInt(c,10))}var d=o[3],f=24===d?0:d,p=o[0]+"-"+o[1]+"-"+o[2]+" "+f+":"+o[4]+":"+o[5]+":000",g=+e;return(r.utc(p).valueOf()-(g-=g%1e3))/6e4},l=i.prototype;l.tz=function(t,e){void 0===t&&(t=o);var n=this.utcOffset(),i=this.toDate(),a=i.toLocaleString("en-US",{timeZone:t}),s=Math.round((i-new Date(a))/1e3/60),l=r(a).$set("millisecond",this.$ms).utcOffset(15*-Math.round(i.getTimezoneOffset()/15)-s,!0);if(e){var u=l.utcOffset();l=l.add(n-u,"minute")}return l.$x.$timezone=t,l},l.offsetName=function(t){var e=this.$x.$timezone||r.tz.guess(),n=a(this.valueOf(),e,{timeZoneName:t}).find((function(t){return"timezonename"===t.type.toLowerCase()}));return n&&n.value};var u=l.startOf;l.startOf=function(t,e){if(!this.$x||!this.$x.$timezone)return u.call(this,t,e);var n=r(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return u.call(n,t,e).tz(this.$x.$timezone,!0)},r.tz=function(t,e,n){var i=n&&e,a=n||e||o,l=s(+r(),a);if("string"!=typeof t)return r(t).tz(a);var u=function(t,e,n){var i=t-60*e*1e3,r=s(i,n);if(e===r)return[i,e];var o=s(i-=60*(r-e)*1e3,n);return r===o?[i,r]:[t-60*Math.min(r,o)*1e3,Math.max(r,o)]}(r.utc(t,i).valueOf(),l,a),c=u[0],h=u[1],d=r(c).utcOffset(h);return d.$x.$timezone=a,d},r.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},r.tz.setDefault=function(t){o=t}}},"object"==lc(t)&&void 0!==e?e.exports=r():"function"==typeof define&&n.amdO?define(r):(i="undefined"!=typeof globalThis?globalThis:i||self).dayjs_plugin_timezone=r()})),Ec=mc((function(t,e){var i,r;i=t,r=function(){var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(i,r,o){var a=r.prototype;o.utc=function(t){var e={date:t,utc:!0,args:arguments};return new r(e)},a.utc=function(e){var n=o(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),s.call(this,t)};var l=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else l.call(this)};var u=a.utcOffset;a.utcOffset=function(i,r){var o=this.$utils().u;if(o(i))return this.$u?0:o(this.$offset)?u.call(this):this.$offset;if("string"==typeof i&&null===(i=function(t){void 0===t&&(t="");var i=t.match(e);if(!i)return null;var r=(""+i[0]).match(n)||["-",0,0],o=r[0],a=60*+r[1]+ +r[2];return 0===a?0:"+"===o?a:-a}(i)))return this;var a=Math.abs(i)<=16?60*i:i,s=this;if(r)return s.$offset=a,s.$u=0===i,s;if(0!==i){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(a+l,t)).$offset=a,s.$x.$localOffset=l}else s=this.utc();return s};var c=a.format;a.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,e)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var h=a.toDate;a.toDate=function(t){return"s"===t&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var d=a.diff;a.diff=function(t,e,n){if(t&&this.$u===t.$u)return d.call(this,t,e,n);var i=this.local(),r=o(t).local();return d.call(i,r,e,n)}}},"object"==lc(t)&&void 0!==e?e.exports=r():"function"==typeof define&&n.amdO?define(r):(i="undefined"!=typeof globalThis?globalThis:i||self).dayjs_plugin_utc=r()})),wc=mc((function(t,e){var i,r;i=t,r=function(){var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),i=/MSIE \d/.test(t),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),a=i||r||o,s=a&&(i?document.documentMode||6:+(o||r)[1]),l=!o&&/WebKit\//.test(t),u=l&&/Qt\/\d+\.\d+/.test(t),c=!o&&/Chrome\//.test(t),h=/Opera\//.test(t),d=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),p=/PhantomJS/.test(t),g=d&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),m=/Android/.test(t),v=g||m||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),y=g||/Mac/.test(e),b=/\bCrOS\b/.test(t),x=/win/i.test(e),_=h&&t.match(/Version\/(\d*\.\d*)/);_&&(_=Number(_[1])),_&&_>=15&&(h=!1,l=!0);var E=y&&(u||h&&(null==_||_<12.11)),w=n||a&&s>=9;function A(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var D,C=function(t,e){var n=t.className,i=A(e).exec(n);if(i){var r=n.slice(i.index+i[0].length);t.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function k(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function S(t,e){return k(t).appendChild(e)}function T(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)r.appendChild(e[o]);return r}function O(t,e,n,i){var r=T(t,e,n,i);return r.setAttribute("role","presentation"),r}function I(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function M(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function L(t,e){var n=t.className;A(e).test(n)||(t.className+=(n?" ":"")+e)}function R(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)n[i]&&!A(n[i]).test(e)&&(e+=" "+n[i]);return e}D=document.createRange?function(t,e,n,i){var r=document.createRange();return r.setEnd(i||t,n),r.setStart(t,e),r}:function(t,e,n){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(t){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i};var P=function(t){t.select()};function F(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function N(t,e,n){for(var i in e||(e={}),t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function B(t,e,n,i,r){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=i||0,a=r||0;;){var s=t.indexOf("\t",o);if(s<0||s>=e)return a+(e-o);a+=s-o,a+=n-a%n,o=s+1}}g?P=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:a&&(P=function(t){try{t.select()}catch(t){}});var j=function(){this.id=null,this.f=null,this.time=0,this.handler=F(this.onTimeout,this)};function z(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}j.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},j.prototype.set=function(t,e){this.f=e;var n=+new Date+t;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=n)};var H={toString:function(){return"CodeMirror.Pass"}},V={scroll:!1},W={origin:"*mouse"},U={origin:"+move"};function G(t,e,n){for(var i=0,r=0;;){var o=t.indexOf("\t",i);-1==o&&(o=t.length);var a=o-i;if(o==t.length||r+a>=e)return i+Math.min(a,e-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=e)return i}}var q=[""];function $(t){for(;q.length<=t;)q.push(Y(q)+" ");return q[t]}function Y(t){return t[t.length-1]}function X(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function K(){}function Z(t,e){var n;return Object.create?n=Object.create(t):(K.prototype=t,n=new K),e&&N(e,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Q(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||J.test(t))}function tt(t,e){return e?!!(e.source.indexOf("\\w")>-1&&Q(t))||e.test(t):Q(t)}function et(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var nt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function it(t){return t.charCodeAt(0)>=768&&nt.test(t)}function rt(t,e,n){for(;(n<0?e>0:e<t.length)&&it(t.charAt(e));)e+=n;return e}function ot(t,e,n){for(var i=e>n?-1:1;;){if(e==n)return e;var r=(e+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==e)return t(o)?e:n;t(o)?n=o:e=o+i}}var at=null;function st(t,e,n){var i;at=null;for(var r=0;r<t.length;++r){var o=t[r];if(o.from<e&&o.to>e)return r;o.to==e&&(o.from!=o.to&&"before"==n?i=r:at=r),o.from==e&&(o.from!=o.to&&"before"!=n?i=r:at=r)}return null!=i?i:at}var lt=function(){var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,n=/[LRr]/,i=/[Lb1n]/,r=/[1n]/;function o(t,e,n){this.level=t,this.from=e,this.to=n}return function(a,s){var l="ltr"==s?"L":"R";if(0==a.length||"ltr"==s&&!t.test(a))return!1;for(var u,c=a.length,h=[],d=0;d<c;++d)h.push((u=a.charCodeAt(d))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L");for(var f=0,p=l;f<c;++f){var g=h[f];"m"==g?h[f]=p:p=g}for(var m=0,v=l;m<c;++m){var y=h[m];"1"==y&&"r"==v?h[m]="n":n.test(y)&&(v=y,"r"==y&&(h[m]="R"))}for(var b=1,x=h[0];b<c-1;++b){var _=h[b];"+"==_&&"1"==x&&"1"==h[b+1]?h[b]="1":","!=_||x!=h[b+1]||"1"!=x&&"n"!=x||(h[b]=x),x=_}for(var E=0;E<c;++E){var w=h[E];if(","==w)h[E]="N";else if("%"==w){var A=void 0;for(A=E+1;A<c&&"%"==h[A];++A);for(var D=E&&"!"==h[E-1]||A<c&&"1"==h[A]?"1":"N",C=E;C<A;++C)h[C]=D;E=A-1}}for(var k=0,S=l;k<c;++k){var T=h[k];"L"==S&&"1"==T?h[k]="L":n.test(T)&&(S=T)}for(var O=0;O<c;++O)if(e.test(h[O])){var I=void 0;for(I=O+1;I<c&&e.test(h[I]);++I);for(var M="L"==(O?h[O-1]:l),L=M==("L"==(I<c?h[I]:l))?M?"L":"R":l,R=O;R<I;++R)h[R]=L;O=I-1}for(var P,F=[],N=0;N<c;)if(i.test(h[N])){var B=N;for(++N;N<c&&i.test(h[N]);++N);F.push(new o(0,B,N))}else{var j=N,z=F.length,H="rtl"==s?1:0;for(++N;N<c&&"L"!=h[N];++N);for(var V=j;V<N;)if(r.test(h[V])){j<V&&(F.splice(z,0,new o(1,j,V)),z+=H);var W=V;for(++V;V<N&&r.test(h[V]);++V);F.splice(z,0,new o(2,W,V)),z+=H,j=V}else++V;j<N&&F.splice(z,0,new o(1,j,N))}return"ltr"==s&&(1==F[0].level&&(P=a.match(/^\s+/))&&(F[0].from=P[0].length,F.unshift(new o(0,0,P[0].length))),1==Y(F).level&&(P=a.match(/\s+$/))&&(Y(F).to-=P[0].length,F.push(new o(0,c-P[0].length,c)))),"rtl"==s?F.reverse():F}}();function ut(t,e){var n=t.order;return null==n&&(n=t.order=lt(t.text,e)),n}var ct=[],ht=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});i[e]=(i[e]||ct).concat(n)}};function dt(t,e){return t._handlers&&t._handlers[e]||ct}function ft(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers,r=i&&i[e];if(r){var o=z(r,n);o>-1&&(i[e]=r.slice(0,o).concat(r.slice(o+1)))}}}function pt(t,e){var n=dt(t,e);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function gt(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),pt(t,n||e.type,t,e),_t(e)||e.codemirrorIgnore}function mt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==z(n,e[i])&&n.push(e[i])}function vt(t,e){return dt(t,e).length>0}function yt(t){t.prototype.on=function(t,e){ht(this,t,e)},t.prototype.off=function(t,e){ft(this,t,e)}}function bt(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function xt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function _t(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Et(t){bt(t),xt(t)}function wt(t){return t.target||t.srcElement}function At(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),y&&t.ctrlKey&&1==e&&(e=3),e}var Dt,Ct,kt=function(){if(a&&s<9)return!1;var t=T("div");return"draggable"in t||"dragDrop"in t}();function St(t){if(null==Dt){var e=T("span","");S(t,T("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Dt=e.offsetWidth<=1&&e.offsetHeight>2&&!(a&&s<8))}var n=Dt?T("span",""):T("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Tt(t){if(null!=Ct)return Ct;var e=S(t,document.createTextNode("AA")),n=D(e,0,1).getBoundingClientRect(),i=D(e,1,2).getBoundingClientRect();return k(t),!(!n||n.left==n.right)&&(Ct=i.right-n.right<3)}var Ot,It=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),e+=a+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)},Mt=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Lt="oncopy"in(Ot=T("div"))||(Ot.setAttribute("oncopy","return;"),"function"==typeof Ot.oncopy),Rt=null,Pt={},Ft={};function Nt(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Pt[t]=e}function Bt(t){if("string"==typeof t&&Ft.hasOwnProperty(t))t=Ft[t];else if(t&&"string"==typeof t.name&&Ft.hasOwnProperty(t.name)){var e=Ft[t.name];"string"==typeof e&&(e={name:e}),(t=Z(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Bt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Bt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function jt(t,e){e=Bt(e);var n=Pt[e.name];if(!n)return jt(t,"text/plain");var i=n(t,e);if(zt.hasOwnProperty(e.name)){var r=zt[e.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=e.name,e.helperType&&(i.helperType=e.helperType),e.modeProps)for(var a in e.modeProps)i[a]=e.modeProps[a];return i}var zt={};function Ht(t,e){N(e,zt.hasOwnProperty(t)?zt[t]:zt[t]={})}function Vt(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Wt(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function Ut(t,e,n){return!t.startState||t.startState(e,n)}var Gt=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function qt(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(e<o){n=r;break}e-=o}return n.lines[e]}function $t(t,e,n){var i=[],r=e.line;return t.iter(e.line,n.line+1,(function(t){var o=t.text;r==n.line&&(o=o.slice(0,n.ch)),r==e.line&&(o=o.slice(e.ch)),i.push(o),++r})),i}function Yt(t,e,n){var i=[];return t.iter(e,n,(function(t){i.push(t.text)})),i}function Xt(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function Kt(t){if(null==t.parent)return null;for(var e=t.parent,n=z(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var r=0;i.children[r]!=e;++r)n+=i.children[r].chunkSize();return n+e.first}function Zt(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var r=t.children[i],o=r.height;if(e<o){t=r;continue t}e-=o,n+=r.chunkSize()}return n}while(!t.lines);for(var a=0;a<t.lines.length;++a){var s=t.lines[a].height;if(e<s)break;e-=s}return n+a}function Jt(t,e){return e>=t.first&&e<t.first+t.size}function Qt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function te(t,e,n){if(void 0===n&&(n=null),!(this instanceof te))return new te(t,e,n);this.line=t,this.ch=e,this.sticky=n}function ee(t,e){return t.line-e.line||t.ch-e.ch}function ne(t,e){return t.sticky==e.sticky&&0==ee(t,e)}function ie(t){return te(t.line,t.ch)}function re(t,e){return ee(t,e)<0?e:t}function oe(t,e){return ee(t,e)<0?t:e}function ae(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function se(t,e){if(e.line<t.first)return te(t.first,0);var n=t.first+t.size-1;return e.line>n?te(n,qt(t,n).text.length):function(t,e){var n=t.ch;return null==n||n>e?te(t.line,e):n<0?te(t.line,0):t}(e,qt(t,e.line).text.length)}function le(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=se(t,e[i]);return n}Gt.prototype.eol=function(){return this.pos>=this.string.length},Gt.prototype.sol=function(){return this.pos==this.lineStart},Gt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Gt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Gt.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Gt.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Gt.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Gt.prototype.skipToEnd=function(){this.pos=this.string.length},Gt.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Gt.prototype.backUp=function(t){this.pos-=t},Gt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=B(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Gt.prototype.indentation=function(){return B(this.string,null,this.tabSize)-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Gt.prototype.match=function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var r=function(t){return n?t.toLowerCase():t};if(r(this.string.substr(this.pos,t.length))==r(t))return!1!==e&&(this.pos+=t.length),!0},Gt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Gt.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Gt.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Gt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var ue=function(t,e){this.state=t,this.lookAhead=e},ce=function(t,e,n,i){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function he(t,e,n,i){var r=[t.state.modeGen],o={};xe(t,e.text,t.doc.mode,n,(function(t,e){return r.push(t,e)}),o,i);for(var a=n.state,s=function(i){n.baseTokens=r;var s=t.state.overlays[i],l=1,u=0;n.state=!0,xe(t,e.text,s.mode,n,(function(t,e){for(var n=l;u<t;){var i=r[l];i>t&&r.splice(l,1,t,r[l+1],i),l+=2,u=Math.min(t,i)}if(e)if(s.opaque)r.splice(n,l-n,t,"overlay "+e),l=n+2;else for(;n<l;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+e}}),o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},l=0;l<t.state.overlays.length;++l)s(l);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function de(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=fe(t,Kt(e)),r=e.text.length>t.options.maxHighlightLength&&Vt(t.doc.mode,i.state),o=he(t,e,i);r&&(i.state=r),e.stateAfter=i.save(!r),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function fe(t,e,n){var i=t.doc,r=t.display;if(!i.mode.startState)return new ce(i,!0,e);var o=function(t,e,n){for(var i,r,o=t.doc,a=n?-1:e-(t.doc.mode.innerMode?1e3:100),s=e;s>a;--s){if(s<=o.first)return o.first;var l=qt(o,s-1),u=l.stateAfter;if(u&&(!n||s+(u instanceof ue?u.lookAhead:0)<=o.modeFrontier))return s;var c=B(l.text,null,t.options.tabSize);(null==r||i>c)&&(r=s-1,i=c)}return r}(t,e,n),a=o>i.first&&qt(i,o-1).stateAfter,s=a?ce.fromSaved(i,a,o):new ce(i,Ut(i.mode),o);return i.iter(o,e,(function(n){pe(t,n.text,s);var i=s.line;n.stateAfter=i==e-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?s.save():null,s.nextLine()})),n&&(i.modeFrontier=s.line),s}function pe(t,e,n,i){var r=t.doc.mode,o=new Gt(e,t.options.tabSize,n);for(o.start=o.pos=i||0,""==e&&ge(r,n.state);!o.eol();)me(r,o,n.state),o.start=o.pos}function ge(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Wt(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function me(t,e,n,i){for(var r=0;r<10;r++){i&&(i[0]=Wt(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}ce.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},ce.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},ce.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ce.fromSaved=function(t,e,n){return e instanceof ue?new ce(t,Vt(t.mode,e.state),n,e.lookAhead):new ce(t,Vt(t.mode,e),n)},ce.prototype.save=function(t){var e=!1!==t?Vt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ue(e,this.maxLookAhead):e};var ve=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function ye(t,e,n,i){var r,o,a=t.doc,s=a.mode,l=qt(a,(e=se(a,e)).line),u=fe(t,e.line,n),c=new Gt(l.text,t.options.tabSize,u);for(i&&(o=[]);(i||c.pos<e.ch)&&!c.eol();)c.start=c.pos,r=me(s,c,u.state),i&&o.push(new ve(c,r,Vt(a.mode,u.state)));return i?o:new ve(c,r,u.state)}function be(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(e[i])||(e[i]+=" "+n[2])}return t}function xe(t,e,n,i,r,o,a){var s=n.flattenSpans;null==s&&(s=t.options.flattenSpans);var l,u=0,c=null,h=new Gt(e,t.options.tabSize,i),d=t.options.addModeClass&&[null];for(""==e&&be(ge(n,i.state),o);!h.eol();){if(h.pos>t.options.maxHighlightLength?(s=!1,a&&pe(t,e,i,h.pos),h.pos=e.length,l=null):l=be(me(n,h,i.state,d),o),d){var f=d[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!s||c!=l){for(;u<h.start;)r(u=Math.min(h.start,u+5e3),c);c=l}h.start=h.pos}for(;u<h.pos;){var p=Math.min(h.pos,u+5e3);r(p,c),u=p}}var _e=!1,Ee=!1;function we(t,e,n){this.marker=t,this.from=e,this.to=n}function Ae(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function De(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Ce(t,e){if(e.full)return null;var n=Jt(t,e.from.line)&&qt(t,e.from.line).markedSpans,i=Jt(t,e.to.line)&&qt(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,o=e.to.ch,a=0==ee(e.from,e.to),s=function(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e)||o.from==e&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=e:o.to>e);(i||(i=[])).push(new we(a,o.from,s?null:o.to))}}return i}(n,r,a),l=function(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=e:o.to>e)||o.from==e&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e);(i||(i=[])).push(new we(a,s?null:o.from-e,null==o.to?null:o.to-e))}}return i}(i,o,a),u=1==e.text.length,c=Y(e.text).length+(u?r:0);if(s)for(var h=0;h<s.length;++h){var d=s[h];if(null==d.to){var f=Ae(l,d.marker);f?u&&(d.to=null==f.to?null:f.to+c):d.to=r}}if(l)for(var p=0;p<l.length;++p){var g=l[p];null!=g.to&&(g.to+=c),null==g.from?Ae(s,g.marker)||(g.from=c,u&&(s||(s=[])).push(g)):(g.from+=c,u&&(s||(s=[])).push(g))}s&&(s=ke(s)),l&&l!=s&&(l=ke(l));var m=[s];if(!u){var v,y=e.text.length-2;if(y>0&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(v||(v=[])).push(new we(s[b].marker,null,null));for(var x=0;x<y;++x)m.push(v);m.push(l)}return m}function ke(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Se(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Te(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Oe(t){return t.inclusiveLeft?-1:0}function Ie(t){return t.inclusiveRight?1:0}function Me(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),r=e.find(),o=ee(i.from,r.from)||Oe(t)-Oe(e);if(o)return-o;var a=ee(i.to,r.to)||Ie(t)-Ie(e);return a||e.id-t.id}function Le(t,e){var n,i=Ee&&t.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(e?r.from:r.to)&&(!n||Me(n,r.marker)<0)&&(n=r.marker);return n}function Re(t){return Le(t,!0)}function Pe(t){return Le(t,!1)}function Fe(t,e){var n,i=Ee&&t.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||Me(n,o.marker)<0)&&(n=o.marker)}return n}function Ne(t,e,n,i,r){var o=qt(t,e),a=Ee&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var u=l.marker.find(0),c=ee(u.from,n)||Oe(l.marker)-Oe(r),h=ee(u.to,i)||Ie(l.marker)-Ie(r);if(!(c>=0&&h<=0||c<=0&&h>=0)&&(c<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?ee(u.to,n)>=0:ee(u.to,n)>0)||c>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?ee(u.from,i)<=0:ee(u.from,i)<0)))return!0}}}function Be(t){for(var e;e=Re(t);)t=e.find(-1,!0).line;return t}function je(t,e){var n=qt(t,e),i=Be(n);return n==i?e:Kt(i)}function ze(t,e){if(e>t.lastLine())return e;var n,i=qt(t,e);if(!He(t,i))return e;for(;n=Pe(i);)i=n.find(1,!0).line;return Kt(i)+1}function He(t,e){var n=Ee&&e.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Ve(t,e,i))return!0}}function Ve(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return Ve(t,i.line,Ae(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var r=void 0,o=0;o<e.markedSpans.length;++o)if((r=e.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ve(t,e,r))return!0}function We(t){for(var e=0,n=(t=Be(t)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==t)break;e+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;e+=s.height}return e}function Ue(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=Re(i);){var r=e.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=t;e=Pe(i);){var o=e.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function Ge(t){var e=t.display,n=t.doc;e.maxLine=qt(n,n.first),e.maxLineLength=Ue(e.maxLine),e.maxLineChanged=!0,n.iter((function(t){var n=Ue(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)}))}var qe=function(t,e,n){this.text=t,Te(this,e),this.height=n?n(this):1};function $e(t){t.parent=null,Se(t)}qe.prototype.lineNo=function(){return Kt(this)},yt(qe);var Ye={},Xe={};function Ke(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Xe:Ye;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Ze(t,e){var n=O("span",null,null,l?"padding-right: .1px":null),i={pre:O("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var o=r?e.rest[r-1]:e.line,a=void 0;i.pos=0,i.addToken=Qe,Tt(t.display.measure)&&(a=ut(o,t.doc.direction))&&(i.addToken=tn(i.addToken,a)),i.map=[],nn(o,i,de(t,o,e!=t.display.externalMeasured&&Kt(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=R(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=R(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(St(t.display.measure))),0==r?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(l){var s=i.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return pt(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=R(i.pre.className,i.textClass||"")),i}function Je(t){var e=T("span","","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Qe(t,e,n,i,r,o,l){if(e){var u,c=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,i="",r=0;r<t.length;r++){var o=t.charAt(r);" "!=o||!n||r!=t.length-1&&32!=t.charCodeAt(r+1)||(o=""),i+=o,n=" "==o}return i}(e,t.trailingSpace):e,h=t.cm.state.specialChars,d=!1;if(h.test(e)){u=document.createDocumentFragment();for(var f=0;;){h.lastIndex=f;var p=h.exec(e),g=p?p.index-f:e.length-f;if(g){var m=document.createTextNode(c.slice(f,f+g));a&&s<9?u.appendChild(T("span",[m])):u.appendChild(m),t.map.push(t.pos,t.pos+g,m),t.col+=g,t.pos+=g}if(!p)break;f+=g+1;var v=void 0;if("\t"==p[0]){var y=t.cm.options.tabSize,b=y-t.col%y;(v=u.appendChild(T("span",$(b),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),t.col+=b}else"\r"==p[0]||"\n"==p[0]?((v=u.appendChild(T("span","\r"==p[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",p[0]),t.col+=1):((v=t.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),a&&s<9?u.appendChild(T("span",[v])):u.appendChild(v),t.col+=1);t.map.push(t.pos,t.pos+1,v),t.pos++}}else t.col+=e.length,u=document.createTextNode(c),t.map.push(t.pos,t.pos+e.length,u),a&&s<9&&(d=!0),t.pos+=e.length;if(t.trailingSpace=32==c.charCodeAt(e.length-1),n||i||r||d||o||l){var x=n||"";i&&(x+=i),r&&(x+=r);var _=T("span",[u],x,o);if(l)for(var E in l)l.hasOwnProperty(E)&&"style"!=E&&"class"!=E&&_.setAttribute(E,l[E]);return t.content.appendChild(_)}t.content.appendChild(u)}}function tn(t,e){return function(n,i,r,o,a,s,l){r=r?r+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+i.length;;){for(var h=void 0,d=0;d<e.length&&!((h=e[d]).to>u&&h.from<=u);d++);if(h.to>=c)return t(n,i,r,o,a,s,l);t(n,i.slice(0,h.to-u),r,o,null,s,l),o=null,i=i.slice(h.to-u),u=h.to}}}function en(t,e,n,i){var r=!i&&n.widgetNode;r&&t.map.push(t.pos,t.pos+e,r),!i&&t.cm.display.input.needsContentAttribute&&(r||(r=t.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(t.cm.display.input.setUneditable(r),t.content.appendChild(r)),t.pos+=e,t.trailingSpace=!1}function nn(t,e,n){var i=t.markedSpans,r=t.text,o=0;if(i)for(var a,s,l,u,c,h,d,f=r.length,p=0,g=1,m="",v=0;;){if(v==p){l=u=c=s="",d=null,h=null,v=1/0;for(var y=[],b=void 0,x=0;x<i.length;++x){var _=i[x],E=_.marker;if("bookmark"==E.type&&_.from==p&&E.widgetNode)y.push(E);else if(_.from<=p&&(null==_.to||_.to>p||E.collapsed&&_.to==p&&_.from==p)){if(null!=_.to&&_.to!=p&&v>_.to&&(v=_.to,u=""),E.className&&(l+=" "+E.className),E.css&&(s=(s?s+";":"")+E.css),E.startStyle&&_.from==p&&(c+=" "+E.startStyle),E.endStyle&&_.to==v&&(b||(b=[])).push(E.endStyle,_.to),E.title&&((d||(d={})).title=E.title),E.attributes)for(var w in E.attributes)(d||(d={}))[w]=E.attributes[w];E.collapsed&&(!h||Me(h.marker,E)<0)&&(h=_)}else _.from>p&&v>_.from&&(v=_.from)}if(b)for(var A=0;A<b.length;A+=2)b[A+1]==v&&(u+=" "+b[A]);if(!h||h.from==p)for(var D=0;D<y.length;++D)en(e,0,y[D]);if(h&&(h.from||0)==p){if(en(e,(null==h.to?f+1:h.to)-p,h.marker,null==h.from),null==h.to)return;h.to==p&&(h=!1)}}if(p>=f)break;for(var C=Math.min(f,v);;){if(m){var k=p+m.length;if(!h){var S=k>C?m.slice(0,C-p):m;e.addToken(e,S,a?a+l:l,c,p+S.length==v?u:"",s,d)}if(k>=C){m=m.slice(C-p),p=C;break}p=k,c=""}m=r.slice(o,o=n[g++]),a=Ke(n[g++],e.cm.options)}}else for(var T=1;T<n.length;T+=2)e.addToken(e,r.slice(o,o=n[T]),Ke(n[T+1],e.cm.options))}function rn(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=Pe(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}(e),this.size=this.rest?Kt(Y(this.rest))-n+1:1,this.node=this.text=null,this.hidden=He(t,e)}function on(t,e,n){for(var i,r=[],o=e;o<n;o=i){var a=new rn(t.doc,qt(t.doc,o),o);i=o+a.size,r.push(a)}return r}var an=null,sn=null;function ln(t,e){var n=dt(t,e);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);an?i=an.delayedCallbacks:sn?i=sn:(i=sn=[],setTimeout(un,0));for(var o=function(t){i.push((function(){return n[t].apply(null,r)}))},a=0;a<n.length;++a)o(a)}}function un(){var t=sn;sn=null;for(var e=0;e<t.length;++e)t[e]()}function cn(t,e,n,i){for(var r=0;r<e.changes.length;r++){var o=e.changes[r];"text"==o?fn(t,e):"gutter"==o?gn(t,e,n,i):"class"==o?pn(t,e):"widget"==o&&mn(t,e,i)}e.changes=null}function hn(t){return t.node==t.text&&(t.node=T("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),a&&s<8&&(t.node.style.zIndex=2)),t.node}function dn(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Ze(t,e)}function fn(t,e){var n=e.text.className,i=dn(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,pn(t,e)):n&&(e.text.className=n)}function pn(t,e){!function(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var i=hn(e);e.background=i.insertBefore(T("div",null,n),i.firstChild),t.display.input.setUneditable(e.background)}}(t,e),e.line.wrapClass?hn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function gn(t,e,n,i){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var r=hn(e);e.gutterBackground=T("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),r.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var a=hn(e),s=e.gutter=T("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(s.setAttribute("aria-hidden","true"),t.display.input.setUneditable(s),a.insertBefore(s,e.text),e.line.gutterClass&&(s.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=s.appendChild(T("div",Qt(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<t.display.gutterSpecs.length;++l){var u=t.display.gutterSpecs[l].className,c=o.hasOwnProperty(u)&&o[u];c&&s.appendChild(T("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[u]+"px; width: "+i.gutterWidth[u]+"px"))}}}function mn(t,e,n){e.alignable&&(e.alignable=null);for(var i=A("CodeMirror-linewidget"),r=e.node.firstChild,o=void 0;r;r=o)o=r.nextSibling,i.test(r.className)&&e.node.removeChild(r);yn(t,e,n)}function vn(t,e,n,i){var r=dn(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),pn(t,e),gn(t,e,n,i),yn(t,e,i),e.node}function yn(t,e,n){if(bn(t,e.line,e,n,!0),e.rest)for(var i=0;i<e.rest.length;i++)bn(t,e.rest[i],e,n,!1)}function bn(t,e,n,i,r){if(e.widgets)for(var o=hn(n),a=0,s=e.widgets;a<s.length;++a){var l=s[a],u=T("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),xn(l,u,n,i),t.display.input.setUneditable(u),r&&l.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),ln(l,"redraw")}}function xn(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function _n(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!I(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),S(e.display.measure,T("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function En(t,e){for(var n=wt(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function wn(t){return t.lineSpace.offsetTop}function An(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Dn(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=S(t.measure,T("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(t.cachedPaddingH=i),i}function Cn(t){return 50-t.display.nativeBarWidth}function kn(t){return t.display.scroller.clientWidth-Cn(t)-t.display.barWidth}function Sn(t){return t.display.scroller.clientHeight-Cn(t)-t.display.barHeight}function Tn(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var r=0;r<t.rest.length;r++)if(Kt(t.rest[r])>n)return{map:t.measure.maps[r],cache:t.measure.caches[r],before:!0}}}function On(t,e,n,i){return Ln(t,Mn(t,e),n,i)}function In(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[ci(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Mn(t,e){var n=Kt(e),i=In(t,n);i&&!i.text?i=null:i&&i.changes&&(cn(t,i,n,oi(t)),t.curOp.forceUpdate=!0),i||(i=function(t,e){var n=Kt(e=Be(e)),i=t.display.externalMeasured=new rn(t.doc,e,n);i.lineN=n;var r=i.built=Ze(t,i);return i.text=r.pre,S(t.display.lineMeasure,r.pre),i}(t,e));var r=Tn(i,e,n);return{line:e,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Ln(t,e,n,i,r){e.before&&(n=-1);var o,l=n+(i||"");return e.cache.hasOwnProperty(l)?o=e.cache[l]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,n){var i=t.options.lineWrapping,r=i&&kn(t);if(!e.measure.heights||i&&e.measure.width!=r){var o=e.measure.heights=[];if(i){e.measure.width=r;for(var a=e.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],u=a[s+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),o=function(t,e,n,i){var r,o=Fn(e.map,n,i),l=o.node,u=o.start,c=o.end,h=o.collapse;if(3==l.nodeType){for(var d=0;d<4;d++){for(;u&&it(e.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+c<o.coverEnd&&it(e.line.text.charAt(o.coverStart+c));)++c;if((r=a&&s<9&&0==u&&c==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Nn(D(l,u,c).getClientRects(),i)).left||r.right||0==u)break;c=u,u-=1,h="right"}a&&s<11&&(r=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=Rt)return Rt;var e=S(t,T("span","x")),n=e.getBoundingClientRect(),i=D(e,0,1).getBoundingClientRect();return Rt=Math.abs(n.left-i.left)>1}(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*i,bottom:e.bottom*i}}(t.display.measure,r))}else{var f;u>0&&(h=i="right"),r=t.options.lineWrapping&&(f=l.getClientRects()).length>1?f["right"==i?f.length-1:0]:l.getBoundingClientRect()}if(a&&s<9&&!u&&(!r||!r.left&&!r.right)){var p=l.parentNode.getClientRects()[0];r=p?{left:p.left,right:p.left+ri(t.display),top:p.top,bottom:p.bottom}:Pn}for(var g=r.top-e.rect.top,m=r.bottom-e.rect.top,v=(g+m)/2,y=e.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var x=b?y[b-1]:0,_=y[b],E={left:("right"==h?r.right:r.left)-e.rect.left,right:("left"==h?r.left:r.right)-e.rect.left,top:x,bottom:_};return r.left||r.right||(E.bogus=!0),t.options.singleCursorHeightPerLine||(E.rtop=g,E.rbottom=m),E}(t,e,n,i),o.bogus||(e.cache[l]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var Rn,Pn={left:0,right:0,top:0,bottom:0};function Fn(t,e,n){for(var i,r,o,a,s,l,u=0;u<t.length;u+=3)if(s=t[u],l=t[u+1],e<s?(r=0,o=1,a="left"):e<l?o=1+(r=e-s):(u==t.length-3||e==l&&t[u+3]>e)&&(r=(o=l-s)-1,e>=l&&(a="right")),null!=r){if(i=t[u+2],s==l&&n==(i.insertLeft?"left":"right")&&(a=n),"left"==n&&0==r)for(;u&&t[u-2]==t[u-3]&&t[u-1].insertLeft;)i=t[2+(u-=3)],a="left";if("right"==n&&r==l-s)for(;u<t.length-3&&t[u+3]==t[u+4]&&!t[u+5].insertLeft;)i=t[(u+=3)+2],a="right";break}return{node:i,start:r,end:o,collapse:a,coverStart:s,coverEnd:l}}function Nn(t,e){var n=Pn;if("left"==e)for(var i=0;i<t.length&&(n=t[i]).left==n.right;i++);else for(var r=t.length-1;r>=0&&(n=t[r]).left==n.right;r--);return n}function Bn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function jn(t){t.display.externalMeasure=null,k(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Bn(t.display.view[e])}function zn(t){jn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Hn(){return c&&m?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Vn(){return c&&m?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Wn(t){var e=Be(t).widgets,n=0;if(e)for(var i=0;i<e.length;++i)e[i].above&&(n+=_n(e[i]));return n}function Un(t,e,n,i,r){if(!r){var o=Wn(e);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var a=We(e);if("local"==i?a+=wn(t.display):a-=t.display.viewOffset,"page"==i||"window"==i){var s=t.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==i?0:Vn());var l=s.left+("window"==i?0:Hn());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function Gn(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;if("page"==n)i-=Hn(),r-=Vn();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var a=t.display.lineSpace.getBoundingClientRect();return{left:i-a.left,top:r-a.top}}function qn(t,e,n,i,r){return i||(i=qt(t.doc,e.line)),Un(t,i,On(t,i,e.ch,r),n)}function $n(t,e,n,i,r,o){function a(e,a){var s=Ln(t,r,e,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,Un(t,i,s,n)}i=i||qt(t.doc,e.line),r||(r=Mn(t,i));var s=ut(i,t.doc.direction),l=e.ch,u=e.sticky;if(l>=i.text.length?(l=i.text.length,u="before"):l<=0&&(l=0,u="after"),!s)return a("before"==u?l-1:l,"before"==u);function c(t,e,n){return a(n?t-1:t,1==s[e].level!=n)}var h=st(s,l,u),d=at,f=c(l,h,"before"==u);return null!=d&&(f.other=c(l,d,"before"!=u)),f}function Yn(t,e){var n=0;e=se(t.doc,e),t.options.lineWrapping||(n=ri(t.display)*e.ch);var i=qt(t.doc,e.line),r=We(i)+wn(t.display);return{left:n,right:n,top:r,bottom:r+i.height}}function Xn(t,e,n,i,r){var o=te(t,e,n);return o.xRel=r,i&&(o.outside=i),o}function Kn(t,e,n){var i=t.doc;if((n+=t.display.viewOffset)<0)return Xn(i.first,0,null,-1,-1);var r=Zt(i,n),o=i.first+i.size-1;if(r>o)return Xn(i.first+i.size-1,qt(i,o).text.length,null,1,1);e<0&&(e=0);for(var a=qt(i,r);;){var s=ti(t,a,r,e,n),l=Fe(a,s.ch+(s.xRel>0||s.outside>0?1:0));if(!l)return s;var u=l.find(1);if(u.line==r)return u;a=qt(i,r=u.line)}}function Zn(t,e,n,i){i-=Wn(e);var r=e.text.length,o=ot((function(e){return Ln(t,n,e-1).bottom<=i}),r,0);return{begin:o,end:r=ot((function(e){return Ln(t,n,e).top>i}),o,r)}}function Jn(t,e,n,i){return n||(n=Mn(t,e)),Zn(t,e,n,Un(t,e,Ln(t,n,i),"line").top)}function Qn(t,e,n,i){return!(t.bottom<=n)&&(t.top>n||(i?t.left:t.right)>e)}function ti(t,e,n,i,r){r-=We(e);var o=Mn(t,e),a=Wn(e),s=0,l=e.text.length,u=!0,c=ut(e,t.doc.direction);if(c){var h=(t.options.lineWrapping?ni:ei)(t,e,n,o,c,i,r);s=(u=1!=h.level)?h.from:h.to-1,l=u?h.to:h.from-1}var d,f,p=null,g=null,m=ot((function(e){var n=Ln(t,o,e);return n.top+=a,n.bottom+=a,!!Qn(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(p=e,g=n),!0)}),s,l),v=!1;if(g){var y=i-g.left<g.right-i,b=y==u;m=p+(b?0:1),f=b?"after":"before",d=y?g.left:g.right}else{u||m!=l&&m!=s||m++,f=0==m?"after":m==e.text.length?"before":Ln(t,o,m-(u?1:0)).bottom+a<=r==u?"after":"before";var x=$n(t,te(n,m,f),"line",e,o);d=x.left,v=r<x.top?-1:r>=x.bottom?1:0}return Xn(n,m=rt(e.text,m,1),f,v,i-d)}function ei(t,e,n,i,r,o,a){var s=ot((function(s){var l=r[s],u=1!=l.level;return Qn($n(t,te(n,u?l.to:l.from,u?"before":"after"),"line",e,i),o,a,!0)}),0,r.length-1),l=r[s];if(s>0){var u=1!=l.level,c=$n(t,te(n,u?l.from:l.to,u?"after":"before"),"line",e,i);Qn(c,o,a,!0)&&c.top>a&&(l=r[s-1])}return l}function ni(t,e,n,i,r,o,a){var s=Zn(t,e,i,a),l=s.begin,u=s.end;/\s/.test(e.text.charAt(u-1))&&u--;for(var c=null,h=null,d=0;d<r.length;d++){var f=r[d];if(!(f.from>=u||f.to<=l)){var p=Ln(t,i,1!=f.level?Math.min(u,f.to)-1:Math.max(l,f.from)).right,g=p<o?o-p+1e9:p-o;(!c||h>g)&&(c=f,h=g)}}return c||(c=r[r.length-1]),c.from<l&&(c={from:l,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function ii(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Rn){Rn=T("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)Rn.appendChild(document.createTextNode("x")),Rn.appendChild(T("br"));Rn.appendChild(document.createTextNode("x"))}S(t.measure,Rn);var n=Rn.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),k(t.measure),n||1}function ri(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=T("span","xxxxxxxxxx"),n=T("pre",[e],"CodeMirror-line-like");S(t.measure,n);var i=e.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(t.cachedCharWidth=r),r||10}function oi(t){for(var e=t.display,n={},i={},r=e.gutters.clientLeft,o=e.gutters.firstChild,a=0;o;o=o.nextSibling,++a){var s=t.display.gutterSpecs[a].className;n[s]=o.offsetLeft+o.clientLeft+r,i[s]=o.clientWidth}return{fixedPos:ai(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function ai(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function si(t){var e=ii(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/ri(t.display)-3);return function(r){if(He(t.doc,r))return 0;var o=0;if(r.widgets)for(var a=0;a<r.widgets.length;a++)r.widgets[a].height&&(o+=r.widgets[a].height);return n?o+(Math.ceil(r.text.length/i)||1)*e:o+e}}function li(t){var e=t.doc,n=si(t);e.iter((function(t){var e=n(t);e!=t.height&&Xt(t,e)}))}function ui(t,e,n,i){var r=t.display;if(!n&&"true"==wt(e).getAttribute("cm-not-content"))return null;var o,a,s=r.lineSpace.getBoundingClientRect();try{o=e.clientX-s.left,a=e.clientY-s.top}catch(t){return null}var l,u=Kn(t,o,a);if(i&&u.xRel>0&&(l=qt(t.doc,u.line).text).length==u.ch){var c=B(l,l.length,t.options.tabSize)-l.length;u=te(u.line,Math.max(0,Math.round((o-Dn(t.display).left)/ri(t.display))-c))}return u}function ci(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,i=0;i<n.length;i++)if((e-=n[i].size)<0)return i}function hi(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||(i=0);var r=t.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)Ee&&je(t.doc,e)<r.viewTo&&fi(t);else if(n<=r.viewFrom)Ee&&ze(t.doc,n+i)>r.viewFrom?fi(t):(r.viewFrom+=i,r.viewTo+=i);else if(e<=r.viewFrom&&n>=r.viewTo)fi(t);else if(e<=r.viewFrom){var o=pi(t,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):fi(t)}else if(n>=r.viewTo){var a=pi(t,e,e,-1);a?(r.view=r.view.slice(0,a.index),r.viewTo=a.lineN):fi(t)}else{var s=pi(t,e,e,-1),l=pi(t,n,n+i,1);s&&l?(r.view=r.view.slice(0,s.index).concat(on(t,s.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=i):fi(t)}var u=r.externalMeasured;u&&(n<u.lineN?u.lineN+=i:e<u.lineN+u.size&&(r.externalMeasured=null))}function di(t,e,n){t.curOp.viewChanged=!0;var i=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var o=i.view[ci(t,e)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==z(a,n)&&a.push(n)}}}function fi(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function pi(t,e,n,i){var r,o=ci(t,e),a=t.display.view;if(!Ee||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var s=t.display.viewFrom,l=0;l<o;l++)s+=a[l].size;if(s!=e){if(i>0){if(o==a.length-1)return null;r=s+a[o].size-e,o++}else r=s-e;e+=r,n+=r}for(;je(t.doc,n)!=n;){if(o==(i<0?0:a.length-1))return null;n+=i*a[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function gi(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var r=e[i];r.hidden||r.node&&!r.changes||++n}return n}function mi(t){t.display.input.showSelection(t.display.input.prepareSelection())}function vi(t,e){void 0===e&&(e=!0);var n=t.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),a=t.options.$customCursor;a&&(e=!0);for(var s=0;s<n.sel.ranges.length;s++)if(e||s!=n.sel.primIndex){var l=n.sel.ranges[s];if(!(l.from().line>=t.display.viewTo||l.to().line<t.display.viewFrom)){var u=l.empty();if(a){var c=a(t,l);c&&yi(t,c,r)}else(u||t.options.showCursorWhenSelecting)&&yi(t,l.head,r);u||xi(t,l,o)}}return i}function yi(t,e,n){var i=$n(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),r=n.appendChild(T("div","","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var o=qn(t,e,"div",null,null),a=o.right-o.left;r.style.width=(a>0?a:t.defaultCharWidth())+"px"}if(i.other){var s=n.appendChild(T("div","","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=i.other.left+"px",s.style.top=i.other.top+"px",s.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function bi(t,e){return t.top-e.top||t.left-e.left}function xi(t,e,n){var i=t.display,r=t.doc,o=document.createDocumentFragment(),a=Dn(t.display),s=a.left,l=Math.max(i.sizerWidth,kn(t)-i.sizer.offsetLeft)-a.right,u="ltr"==r.direction;function c(t,e,n,i){e<0&&(e=0),e=Math.round(e),i=Math.round(i),o.appendChild(T("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?l-t:n)+"px;\n                             height: "+(i-e)+"px"))}function h(e,n,i){var o,a,h=qt(r,e),d=h.text.length;function f(n,i){return qn(t,te(e,n),"div",h,i)}function p(e,n,i){var r=Jn(t,h,null,e),o="ltr"==n==("after"==i)?"left":"right";return f("after"==i?r.begin:r.end-(/\s/.test(h.text.charAt(r.end-1))?2:1),o)[o]}var g=ut(h,r.direction);return function(t,e,n,i){if(!t)return i(e,n,"ltr",0);for(var r=!1,o=0;o<t.length;++o){var a=t[o];(a.from<n&&a.to>e||e==n&&a.to==e)&&(i(Math.max(a.from,e),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),r=!0)}r||i(e,n,"ltr")}(g,n||0,null==i?d:i,(function(t,e,r,h){var m="ltr"==r,v=f(t,m?"left":"right"),y=f(e-1,m?"right":"left"),b=null==n&&0==t,x=null==i&&e==d,_=0==h,E=!g||h==g.length-1;if(y.top-v.top<=3){var w=(u?x:b)&&E,A=(u?b:x)&&_?s:(m?v:y).left,D=w?l:(m?y:v).right;c(A,v.top,D-A,v.bottom)}else{var C,k,S,T;m?(C=u&&b&&_?s:v.left,k=u?l:p(t,r,"before"),S=u?s:p(e,r,"after"),T=u&&x&&E?l:y.right):(C=u?p(t,r,"before"):s,k=!u&&b&&_?l:v.right,S=!u&&x&&E?s:y.left,T=u?p(e,r,"after"):l),c(C,v.top,k-C,v.bottom),v.bottom<y.top&&c(s,v.bottom,null,y.top),c(S,y.top,T-S,y.bottom)}(!o||bi(v,o)<0)&&(o=v),bi(y,o)<0&&(o=y),(!a||bi(v,a)<0)&&(a=v),bi(y,a)<0&&(a=y)})),{start:o,end:a}}var d=e.from(),f=e.to();if(d.line==f.line)h(d.line,d.ch,f.ch);else{var p=qt(r,d.line),g=qt(r,f.line),m=Be(p)==Be(g),v=h(d.line,d.ch,m?p.text.length+1:null).end,y=h(f.line,m?0:null,f.ch).start;m&&(v.top<y.top-2?(c(v.right,v.top,null,v.bottom),c(s,y.top,y.left,y.bottom)):c(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&c(s,v.bottom,null,y.top)}n.appendChild(o)}function _i(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval((function(){t.hasFocus()||Di(t),e.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Ei(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||Ai(t))}function wi(t){t.state.delayingBlurEvent=!0,setTimeout((function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&Di(t))}),100)}function Ai(t,e){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(pt(t,"focus",t,e),t.state.focused=!0,L(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),l&&setTimeout((function(){return t.display.input.reset(!0)}),20)),t.display.input.receivedFocus()),_i(t))}function Di(t,e){t.state.delayingBlurEvent||(t.state.focused&&(pt(t,"blur",t,e),t.state.focused=!1,C(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.display.shift=!1)}),150))}function Ci(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=Math.max(0,e.scroller.getBoundingClientRect().top),r=e.lineDiv.getBoundingClientRect().top,o=0,l=0;l<e.view.length;l++){var u=e.view[l],c=t.options.lineWrapping,h=void 0,d=0;if(!u.hidden){if(r+=u.line.height,a&&s<8){var f=u.node.offsetTop+u.node.offsetHeight;h=f-n,n=f}else{var p=u.node.getBoundingClientRect();h=p.bottom-p.top,!c&&u.text.firstChild&&(d=u.text.firstChild.getBoundingClientRect().right-p.left-1)}var g=u.line.height-h;if((g>.005||g<-.005)&&(r<i&&(o-=g),Xt(u.line,h),ki(u.line),u.rest))for(var m=0;m<u.rest.length;m++)ki(u.rest[m]);if(d>t.display.sizerWidth){var v=Math.ceil(d/ri(t.display));v>t.display.maxLineLength&&(t.display.maxLineLength=v,t.display.maxLine=u.line,t.display.maxLineChanged=!0)}}}Math.abs(o)>2&&(e.scroller.scrollTop+=o)}function ki(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function Si(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-wn(t));var r=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,o=Zt(e,i),a=Zt(e,r);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=Zt(e,We(qt(e,s))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=a&&(o=Zt(e,We(qt(e,l))-t.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function Ti(t,e){var n=t.display,i=ii(t.display);e.top<0&&(e.top=0);var r=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=Sn(t),a={};e.bottom-e.top>o&&(e.bottom=e.top+o);var s=t.doc.height+An(n),l=e.top<i,u=e.bottom>s-i;if(e.top<r)a.scrollTop=l?0:e.top;else if(e.bottom>r+o){var c=Math.min(e.top,(u?s:e.bottom)-o);c!=r&&(a.scrollTop=c)}var h=t.options.fixedGutter?0:n.gutters.offsetWidth,d=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft-h,f=kn(t)-n.gutters.offsetWidth,p=e.right-e.left>f;return p&&(e.right=e.left+f),e.left<10?a.scrollLeft=0:e.left<d?a.scrollLeft=Math.max(0,e.left+h-(p?0:10)):e.right>f+d-3&&(a.scrollLeft=e.right+(p?0:10)-f),a}function Oi(t,e){null!=e&&(Li(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Ii(t){Li(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Mi(t,e,n){null==e&&null==n||Li(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Li(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Ri(t,Yn(t,e.from),Yn(t,e.to),e.margin))}function Ri(t,e,n,i){var r=Ti(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-i,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+i});Mi(t,r.scrollLeft,r.scrollTop)}function Pi(t,e){Math.abs(t.doc.scrollTop-e)<2||(n||lr(t,{top:e}),Fi(t,e,!0),n&&lr(t),ir(t,100))}function Fi(t,e,n){e=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e)),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function Ni(t,e,n,i){e=Math.max(0,Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!i||(t.doc.scrollLeft=e,hr(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Bi(t){var e=t.display,n=e.gutters.offsetWidth,i=Math.round(t.doc.height+An(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Cn(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}var ji=function(t,e,n){this.cm=n;var i=this.vert=T("div",[T("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=T("div",[T("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,t(i),t(r),ht(i,"scroll",(function(){i.clientHeight&&e(i.scrollTop,"vertical")})),ht(r,"scroll",(function(){r.clientWidth&&e(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,a&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ji.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0";var r=t.viewHeight-(e?i:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+r)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:e?i:0}},ji.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ji.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ji.prototype.zeroWidthHack=function(){var t=y&&!f?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new j,this.disableVert=new j},ji.prototype.enableZeroWidthBar=function(t,e,n){t.style.pointerEvents="auto",e.set(1e3,(function i(){var r=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,i)}))},ji.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var zi=function(){};function Hi(t,e){e||(e=Bi(t));var n=t.display.barWidth,i=t.display.barHeight;Vi(t,e);for(var r=0;r<4&&n!=t.display.barWidth||i!=t.display.barHeight;r++)n!=t.display.barWidth&&t.options.lineWrapping&&Ci(t),Vi(t,Bi(t)),n=t.display.barWidth,i=t.display.barHeight}function Vi(t,e){var n=t.display,i=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}zi.prototype.update=function(){return{bottom:0,right:0}},zi.prototype.setScrollLeft=function(){},zi.prototype.setScrollTop=function(){},zi.prototype.clear=function(){};var Wi={native:ji,null:zi};function Ui(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&C(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Wi[t.options.scrollbarStyle]((function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),ht(e,"mousedown",(function(){t.state.focused&&setTimeout((function(){return t.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,n){"horizontal"==n?Ni(t,e):Pi(t,e)}),t),t.display.scrollbars.addClass&&L(t.display.wrapper,t.display.scrollbars.addClass)}var Gi=0;function qi(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Gi,markArrays:null},e=t.curOp,an?an.ops.push(e):e.ownsGroup=an={ops:[e],delayedCallbacks:[]}}function $i(t){var e=t.curOp;e&&function(t,e){var n=t.ownsGroup;if(n)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var i=0;i<t.ops.length;i++){var r=t.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<e.length)}(n)}finally{an=null,e(n)}}(e,(function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)Yi(e[n]);for(var i=0;i<e.length;i++)Xi(e[i]);for(var r=0;r<e.length;r++)Ki(e[r]);for(var o=0;o<e.length;o++)Zi(e[o]);for(var a=0;a<e.length;a++)Ji(e[a])}(t)}))}function Yi(t){var e=t.cm,n=e.display;!function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Cn(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Cn(t)+"px",e.scrollbarsClipped=!0)}(e),t.updateMaxLine&&Ge(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new or(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Xi(t){t.updatedDisplay=t.mustUpdate&&ar(t.cm,t.update)}function Ki(t){var e=t.cm,n=e.display;t.updatedDisplay&&Ci(e),t.barMeasure=Bi(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=On(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+Cn(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-kn(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function Zi(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Ni(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==M();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&Hi(e,t.barMeasure),t.updatedDisplay&&cr(e,t.barMeasure),t.selectionChanged&&_i(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&Ei(t.cm)}function Ji(t){var e=t.cm,n=e.display,i=e.doc;if(t.updatedDisplay&&sr(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Fi(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&Ni(e,t.scrollLeft,!0,!0),t.scrollToPos){var r=function(t,e,n,i){var r;null==i&&(i=0),t.options.lineWrapping||e!=n||(n="before"==e.sticky?te(e.line,e.ch+1,"before"):e,e=e.ch?te(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e);for(var o=0;o<5;o++){var a=!1,s=$n(t,e),l=n&&n!=e?$n(t,n):s,u=Ti(t,r={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-i,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+i}),c=t.doc.scrollTop,h=t.doc.scrollLeft;if(null!=u.scrollTop&&(Pi(t,u.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(a=!0)),null!=u.scrollLeft&&(Ni(t,u.scrollLeft),Math.abs(t.doc.scrollLeft-h)>1&&(a=!0)),!a)break}return r}(e,se(i,t.scrollToPos.from),se(i,t.scrollToPos.to),t.scrollToPos.margin);!function(t,e){if(!gt(t,"scrollCursorIntoView")){var n=t.display,i=n.sizer.getBoundingClientRect(),r=null;if(e.top+i.top<0?r=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!p){var o=T("div","",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-wn(t.display))+"px;\n                         height: "+(e.bottom-e.top+Cn(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(r),t.display.lineSpace.removeChild(o)}}}(e,r)}var o=t.maybeHiddenMarkers,a=t.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||pt(o[s],"hide");if(a)for(var l=0;l<a.length;++l)a[l].lines.length&&pt(a[l],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&pt(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function Qi(t,e){if(t.curOp)return e();qi(t);try{return e()}finally{$i(t)}}function tr(t,e){return function(){if(t.curOp)return e.apply(t,arguments);qi(t);try{return e.apply(t,arguments)}finally{$i(t)}}}function er(t){return function(){if(this.curOp)return t.apply(this,arguments);qi(this);try{return t.apply(this,arguments)}finally{$i(this)}}}function nr(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);qi(e);try{return t.apply(this,arguments)}finally{$i(e)}}}function ir(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,F(rr,t))}function rr(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,i=fe(t,e.highlightFrontier),r=[];e.iter(i.line,Math.min(e.first+e.size,t.display.viewTo+500),(function(o){if(i.line>=t.display.viewFrom){var a=o.styles,s=o.text.length>t.options.maxHighlightLength?Vt(e.mode,i.state):null,l=he(t,o,i,!0);s&&(i.state=s),o.styles=l.styles;var u=o.styleClasses,c=l.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var h=!a||a.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),d=0;!h&&d<a.length;++d)h=a[d]!=o.styles[d];h&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=t.options.maxHighlightLength&&pe(t,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return ir(t,t.options.workDelay),!0})),e.highlightFrontier=i.line,e.modeFrontier=Math.max(e.modeFrontier,i.line),r.length&&Qi(t,(function(){for(var e=0;e<r.length;e++)di(t,r[e],"text")}))}}var or=function(t,e,n){var i=t.display;this.viewport=e,this.visible=Si(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=kn(t),this.force=n,this.dims=oi(t),this.events=[]};function ar(t,e){var n=t.display,i=t.doc;if(e.editorIsHidden)return fi(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==gi(t))return!1;dr(t)&&(fi(t),e.dims=oi(t));var r=i.first+i.size,o=Math.max(e.visible.from-t.options.viewportMargin,i.first),a=Math.min(r,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(r,n.viewTo)),Ee&&(o=je(t.doc,o),a=ze(t.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;!function(t,e,n){var i=t.display;0==i.view.length||e>=i.viewTo||n<=i.viewFrom?(i.view=on(t,e,n),i.viewFrom=e):(i.viewFrom>e?i.view=on(t,e,i.viewFrom).concat(i.view):i.viewFrom<e&&(i.view=i.view.slice(ci(t,e))),i.viewFrom=e,i.viewTo<n?i.view=i.view.concat(on(t,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,ci(t,n)))),i.viewTo=n}(t,o,a),n.viewOffset=We(qt(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var u=gi(t);if(!s&&0==u&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function(t){if(t.hasFocus())return null;var e=M();if(!e||!I(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&I(t.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(t);return u>4&&(n.lineDiv.style.display="none"),function(t,e,n){var i=t.display,r=t.options.lineNumbers,o=i.lineDiv,a=o.firstChild;function s(e){var n=e.nextSibling;return l&&y&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var u=i.view,c=i.viewFrom,h=0;h<u.length;h++){var d=u[h];if(d.hidden);else if(d.node&&d.node.parentNode==o){for(;a!=d.node;)a=s(a);var f=r&&null!=e&&e<=c&&d.lineNumber;d.changes&&(z(d.changes,"gutter")>-1&&(f=!1),cn(t,d,c,n)),f&&(k(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(Qt(t.options,c)))),a=d.node.nextSibling}else{var p=vn(t,d,c,n);o.insertBefore(p,a)}c+=d.size}for(;a;)a=s(a)}(t,n.updateLineNumbers,e.dims),u>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(t){if(t&&t.activeElt&&t.activeElt!=M()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&I(document.body,t.anchorNode)&&I(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}(c),k(n.cursorDiv),k(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,ir(t,400)),n.updateLineNumbers=null,!0}function sr(t,e){for(var n=e.viewport,i=!0;;i=!1){if(i&&t.options.lineWrapping&&e.oldDisplayWidth!=kn(t))i&&(e.visible=Si(t.display,t.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(t.doc.height+An(t.display)-Sn(t),n.top)}),e.visible=Si(t.display,t.doc,n),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!ar(t,e))break;Ci(t);var r=Bi(t);mi(t),Hi(t,r),cr(t,r),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function lr(t,e){var n=new or(t,e);if(ar(t,n)){Ci(t),sr(t,n);var i=Bi(t);mi(t),Hi(t,i),cr(t,i),n.finish()}}function ur(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px",ln(t,"gutterChanged",t)}function cr(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Cn(t)+"px"}function hr(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=ai(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,o=i+"px",a=0;a<n.length;a++)if(!n[a].hidden){t.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=i+r+"px")}}function dr(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=Qt(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(T("div",[T("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,a=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-a)+1,i.lineNumWidth=i.lineNumInnerWidth+a,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",ur(t.display),!0}return!1}function fr(t,e){for(var n=[],i=!1,r=0;r<t.length;r++){var o=t[r],a=null;if("string"!=typeof o&&(a=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!e)continue;i=!0}n.push({className:o,style:a})}return e&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function pr(t){var e=t.gutters,n=t.gutterSpecs;k(e),t.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,a=r.style,s=e.appendChild(T("div",null,"CodeMirror-gutter "+o));a&&(s.style.cssText=a),"CodeMirror-linenumbers"==o&&(t.lineGutter=s,s.style.width=(t.lineNumWidth||1)+"px")}e.style.display=n.length?"":"none",ur(t)}function gr(t){pr(t.display),hi(t),hr(t)}function mr(t,e,i,r){var o=this;this.input=i,o.scrollbarFiller=T("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=T("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=O("div",null,"CodeMirror-code"),o.selectionDiv=T("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=T("div",null,"CodeMirror-cursors"),o.measure=T("div",null,"CodeMirror-measure"),o.lineMeasure=T("div",null,"CodeMirror-measure"),o.lineSpace=O("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var u=O("div",[o.lineSpace],"CodeMirror-lines");o.mover=T("div",[u],null,"position: relative"),o.sizer=T("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=T("div",null,null,"position: absolute; height: 50px; width: 1px;"),o.gutters=T("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=T("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=T("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),o.wrapper.setAttribute("translate","no"),a&&s<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||n&&v||(o.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(o.wrapper):t(o.wrapper)),o.viewFrom=o.viewTo=e.first,o.reportedViewFrom=o.reportedViewTo=e.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=fr(r.gutters,r.lineNumbers),pr(o),i.init(o)}or.prototype.signal=function(t,e){vt(t,e)&&this.events.push(arguments)},or.prototype.finish=function(){for(var t=0;t<this.events.length;t++)pt.apply(null,this.events[t])};var vr=0,yr=null;function br(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function xr(t){var e=br(t);return e.x*=yr,e.y*=yr,e}function _r(t,e){var i=br(e),r=i.x,o=i.y,a=yr;0===e.deltaMode&&(r=e.deltaX,o=e.deltaY,a=1);var s=t.display,u=s.scroller,c=u.scrollWidth>u.clientWidth,d=u.scrollHeight>u.clientHeight;if(r&&c||o&&d){if(o&&y&&l)t:for(var f=e.target,p=s.view;f!=u;f=f.parentNode)for(var g=0;g<p.length;g++)if(p[g].node==f){t.display.currentWheelTarget=f;break t}if(r&&!n&&!h&&null!=a)return o&&d&&Pi(t,Math.max(0,u.scrollTop+o*a)),Ni(t,Math.max(0,u.scrollLeft+r*a)),(!o||o&&d)&&bt(e),void(s.wheelStartX=null);if(o&&null!=a){var m=o*a,v=t.doc.scrollTop,b=v+s.wrapper.clientHeight;m<0?v=Math.max(0,v+m-50):b=Math.min(t.doc.height,b+m+50),lr(t,{top:v,bottom:b})}vr<20&&0!==e.deltaMode&&(null==s.wheelStartX?(s.wheelStartX=u.scrollLeft,s.wheelStartY=u.scrollTop,s.wheelDX=r,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var t=u.scrollLeft-s.wheelStartX,e=u.scrollTop-s.wheelStartY,n=e&&s.wheelDY&&e/s.wheelDY||t&&s.wheelDX&&t/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(yr=(yr*vr+n)/(vr+1),++vr)}}),200)):(s.wheelDX+=r,s.wheelDY+=o))}}a?yr=-.53:n?yr=15:c?yr=-.7:d&&(yr=-1/3);var Er=function(t,e){this.ranges=t,this.primIndex=e};Er.prototype.primary=function(){return this.ranges[this.primIndex]},Er.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],i=t.ranges[e];if(!ne(n.anchor,i.anchor)||!ne(n.head,i.head))return!1}return!0},Er.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new wr(ie(this.ranges[e].anchor),ie(this.ranges[e].head));return new Er(t,this.primIndex)},Er.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},Er.prototype.contains=function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(ee(e,i.from())>=0&&ee(t,i.to())<=0)return n}return-1};var wr=function(t,e){this.anchor=t,this.head=e};function Ar(t,e,n){var i=t&&t.options.selectionsMayTouch,r=e[n];e.sort((function(t,e){return ee(t.from(),e.from())})),n=z(e,r);for(var o=1;o<e.length;o++){var a=e[o],s=e[o-1],l=ee(s.to(),a.from());if(i&&!a.empty()?l>0:l>=0){var u=oe(s.from(),a.from()),c=re(s.to(),a.to()),h=s.empty()?a.from()==a.head:s.from()==s.head;o<=n&&--n,e.splice(--o,2,new wr(h?c:u,h?u:c))}}return new Er(e,n)}function Dr(t,e){return new Er([new wr(t,e||t)],0)}function Cr(t){return t.text?te(t.from.line+t.text.length-1,Y(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function kr(t,e){if(ee(t,e.from)<0)return t;if(ee(t,e.to)<=0)return Cr(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=Cr(e).ch-e.to.ch),te(n,i)}function Sr(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var r=t.sel.ranges[i];n.push(new wr(kr(r.anchor,e),kr(r.head,e)))}return Ar(t.cm,n,t.sel.primIndex)}function Tr(t,e,n){return t.line==e.line?te(n.line,t.ch-e.ch+n.ch):te(n.line+(t.line-e.line),t.ch)}function Or(t){t.doc.mode=jt(t.options,t.doc.modeOption),Ir(t)}function Ir(t){t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ir(t,100),t.state.modeGen++,t.curOp&&hi(t)}function Mr(t,e){return 0==e.from.ch&&0==e.to.ch&&""==Y(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Lr(t,e,n,i){function r(t){return n?n[t]:null}function o(t,n,r){!function(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Se(t),Te(t,n);var r=i?i(t):1;r!=t.height&&Xt(t,r)}(t,n,r,i),ln(t,"change",t,e)}function a(t,e){for(var n=[],o=t;o<e;++o)n.push(new qe(u[o],r(o),i));return n}var s=e.from,l=e.to,u=e.text,c=qt(t,s.line),h=qt(t,l.line),d=Y(u),f=r(u.length-1),p=l.line-s.line;if(e.full)t.insert(0,a(0,u.length)),t.remove(u.length,t.size-u.length);else if(Mr(t,e)){var g=a(0,u.length-1);o(h,h.text,f),p&&t.remove(s.line,p),g.length&&t.insert(s.line,g)}else if(c==h)if(1==u.length)o(c,c.text.slice(0,s.ch)+d+c.text.slice(l.ch),f);else{var m=a(1,u.length-1);m.push(new qe(d+c.text.slice(l.ch),f,i)),o(c,c.text.slice(0,s.ch)+u[0],r(0)),t.insert(s.line+1,m)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+h.text.slice(l.ch),r(0)),t.remove(s.line+1,p);else{o(c,c.text.slice(0,s.ch)+u[0],r(0)),o(h,d+h.text.slice(l.ch),f);var v=a(1,u.length-1);p>1&&t.remove(s.line+1,p-1),t.insert(s.line+1,v)}ln(t,"change",t,e)}function Rr(t,e,n){!function t(i,r,o){if(i.linked)for(var a=0;a<i.linked.length;++a){var s=i.linked[a];if(s.doc!=r){var l=o&&s.sharedHist;n&&!l||(e(s.doc,l),t(s.doc,i,l))}}}(t,null,!0)}function Pr(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,li(t),Or(t),Fr(t),t.options.direction=e.direction,t.options.lineWrapping||Ge(t),t.options.mode=e.modeOption,hi(t)}function Fr(t){("rtl"==t.doc.direction?L:C)(t.display.lineDiv,"CodeMirror-rtl")}function Nr(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function Br(t,e){var n={from:ie(e.from),to:Cr(e),text:$t(t,e.from,e.to)};return Wr(t,n,e.from.line,e.to.line+1),Rr(t,(function(t){return Wr(t,n,e.from.line,e.to.line+1)}),!0),n}function jr(t){for(;t.length&&Y(t).ranges;)t.pop()}function zr(t,e,n,i){var r=t.history;r.undone.length=0;var o,a,s=+new Date;if((r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&r.lastModTime>s-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(o=function(t,e){return e?(jr(t.done),Y(t.done)):t.done.length&&!Y(t.done).ranges?Y(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),Y(t.done)):void 0}(r,r.lastOp==i)))a=Y(o.changes),0==ee(e.from,e.to)&&0==ee(e.from,a.to)?a.to=Cr(e):o.changes.push(Br(t,e));else{var l=Y(r.done);for(l&&l.ranges||Vr(t.sel,r.done),o={changes:[Br(t,e)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=e.origin,a||pt(t,"historyAdded")}function Hr(t,e,n,i){var r=t.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||function(t,e,n,i){var r=e.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,o,Y(r.done),e))?r.done[r.done.length-1]=e:Vr(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&jr(r.undone)}function Vr(t,e){var n=Y(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Wr(t,e,n,i){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),(function(n){n.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=n.markedSpans),++o}))}function Ur(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Gr(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=[],r=0;r<e.text.length;++r)i.push(Ur(n[r]));return i}(t,e),i=Ce(t,e);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],a=i[r];if(o&&a)t:for(var s=0;s<a.length;++s){for(var l=a[s],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue t;o.push(l)}else a&&(n[r]=a)}return n}function qr(t,e,n){for(var i=[],r=0;r<t.length;++r){var o=t[r];if(o.ranges)i.push(n?Er.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var u=a[l],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),e)for(var h in u)(c=h.match(/^spans_(\d+)$/))&&z(e,Number(c[1]))>-1&&(Y(s)[h]=u[h],delete u[h])}}}return i}function $r(t,e,n,i){if(i){var r=t.anchor;if(n){var o=ee(e,r)<0;o!=ee(n,r)<0?(r=e,e=n):o!=ee(e,n)<0&&(e=n)}return new wr(r,e)}return new wr(n||e,e)}function Yr(t,e,n,i,r){null==r&&(r=t.cm&&(t.cm.display.shift||t.extend)),Qr(t,new Er([$r(t.sel.primary(),e,n,r)],0),i)}function Xr(t,e,n){for(var i=[],r=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)i[o]=$r(t.sel.ranges[o],e[o],null,r);Qr(t,Ar(t.cm,i,t.sel.primIndex),n)}function Kr(t,e,n,i){var r=t.sel.ranges.slice(0);r[e]=n,Qr(t,Ar(t.cm,r,t.sel.primIndex),i)}function Zr(t,e,n,i){Qr(t,Dr(e,n),i)}function Jr(t,e,n){var i=t.history.done,r=Y(i);r&&r.ranges?(i[i.length-1]=e,to(t,e,n)):Qr(t,e,n)}function Qr(t,e,n){to(t,e,n),Hr(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function to(t,e,n){(vt(t,"beforeSelectionChange")||t.cm&&vt(t.cm,"beforeSelectionChange"))&&(e=function(t,e,n){var i={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new wr(se(t,e[n].anchor),se(t,e[n].head))},origin:n&&n.origin};return pt(t,"beforeSelectionChange",t,i),t.cm&&pt(t.cm,"beforeSelectionChange",t.cm,i),i.ranges!=e.ranges?Ar(t.cm,i.ranges,i.ranges.length-1):e}(t,e,n));var i=n&&n.bias||(ee(e.primary().head,t.sel.primary().head)<0?-1:1);eo(t,io(t,e,i,!0)),n&&!1===n.scroll||!t.cm||"nocursor"==t.cm.getOption("readOnly")||Ii(t.cm)}function eo(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,mt(t.cm)),ln(t,"cursorActivity",t))}function no(t){eo(t,io(t,t.sel,null,!1))}function io(t,e,n,i){for(var r,o=0;o<e.ranges.length;o++){var a=e.ranges[o],s=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],l=oo(t,a.anchor,s&&s.anchor,n,i),u=oo(t,a.head,s&&s.head,n,i);(r||l!=a.anchor||u!=a.head)&&(r||(r=e.ranges.slice(0,o)),r[o]=new wr(l,u))}return r?Ar(t.cm,r,e.primIndex):e}function ro(t,e,n,i,r){var o=qt(t,e.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker,u="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,c="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==s.from||(u?s.from<=e.ch:s.from<e.ch))&&(null==s.to||(c?s.to>=e.ch:s.to>e.ch))){if(r&&(pt(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var h=l.find(i<0?1:-1),d=void 0;if((i<0?c:u)&&(h=ao(t,h,-i,h&&h.line==e.line?o:null)),h&&h.line==e.line&&(d=ee(h,n))&&(i<0?d<0:d>0))return ro(t,h,e,i,r)}var f=l.find(i<0?-1:1);return(i<0?u:c)&&(f=ao(t,f,i,f.line==e.line?o:null)),f?ro(t,f,e,i,r):null}}return e}function oo(t,e,n,i,r){var o=i||1,a=ro(t,e,n,o,r)||!r&&ro(t,e,n,o,!0)||ro(t,e,n,-o,r)||!r&&ro(t,e,n,-o,!0);return a||(t.cantEdit=!0,te(t.first,0))}function ao(t,e,n,i){return n<0&&0==e.ch?e.line>t.first?se(t,te(e.line-1)):null:n>0&&e.ch==(i||qt(t,e.line)).text.length?e.line<t.first+t.size-1?te(e.line+1,0):null:new te(e.line,e.ch+n)}function so(t){t.setSelection(te(t.firstLine(),0),te(t.lastLine()),V)}function lo(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(e,n,r,o){e&&(i.from=se(t,e)),n&&(i.to=se(t,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),pt(t,"beforeChange",t,i),t.cm&&pt(t.cm,"beforeChange",t.cm,i),i.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function uo(t,e,n){if(t.cm){if(!t.cm.curOp)return tr(t.cm,uo)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(vt(t,"beforeChange")||t.cm&&vt(t.cm,"beforeChange"))||(e=lo(t,e,!0))){var i=_e&&!n&&function(t,e,n){var i=null;if(t.iter(e.line,n.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=z(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:e,to:n}],o=0;o<i.length;++o)for(var a=i[o],s=a.find(0),l=0;l<r.length;++l){var u=r[l];if(!(ee(u.to,s.from)<0||ee(u.from,s.to)>0)){var c=[l,1],h=ee(u.from,s.from),d=ee(u.to,s.to);(h<0||!a.inclusiveLeft&&!h)&&c.push({from:u.from,to:s.from}),(d>0||!a.inclusiveRight&&!d)&&c.push({from:s.to,to:u.to}),r.splice.apply(r,c),l+=c.length-3}}return r}(t,e.from,e.to);if(i)for(var r=i.length-1;r>=0;--r)co(t,{from:i[r].from,to:i[r].to,text:r?[""]:e.text,origin:e.origin});else co(t,e)}}function co(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ee(e.from,e.to)){var n=Sr(t,e);zr(t,e,n,t.cm?t.cm.curOp.id:NaN),po(t,e,n,Ce(t,e));var i=[];Rr(t,(function(t,n){n||-1!=z(i,t.history)||(yo(t.history,e),i.push(t.history)),po(t,e,null,Ce(t,e))}))}}function ho(t,e,n){var i=t.cm&&t.cm.state.suppressEdits;if(!i||n){for(var r,o=t.history,a=t.sel,s="undo"==e?o.done:o.undone,l="undo"==e?o.undone:o.done,u=0;u<s.length&&(r=s[u],n?!r.ranges||r.equals(t.sel):r.ranges);u++);if(u!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=s.pop()).ranges){if(i)return void s.push(r);break}if(Vr(r,l),n&&!r.equals(t.sel))return void Qr(t,r,{clearRedo:!1});a=r}var c=[];Vr(a,l),l.push({changes:c,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var h=vt(t,"beforeChange")||t.cm&&vt(t.cm,"beforeChange"),d=function(n){var i=r.changes[n];if(i.origin=e,h&&!lo(t,i,!1))return s.length=0,{};c.push(Br(t,i));var o=n?Sr(t,i):Y(s);po(t,i,o,Gr(t,i)),!n&&t.cm&&t.cm.scrollIntoView({from:i.from,to:Cr(i)});var a=[];Rr(t,(function(t,e){e||-1!=z(a,t.history)||(yo(t.history,i),a.push(t.history)),po(t,i,null,Gr(t,i))}))},f=r.changes.length-1;f>=0;--f){var p=d(f);if(p)return p.v}}}}function fo(t,e){if(0!=e&&(t.first+=e,t.sel=new Er(X(t.sel.ranges,(function(t){return new wr(te(t.anchor.line+e,t.anchor.ch),te(t.head.line+e,t.head.ch))})),t.sel.primIndex),t.cm)){hi(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)di(t.cm,i,"gutter")}}function po(t,e,n,i){if(t.cm&&!t.cm.curOp)return tr(t.cm,po)(t,e,n,i);if(e.to.line<t.first)fo(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);fo(t,r),e={from:te(t.first,0),to:te(e.to.line+r,e.to.ch),text:[Y(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:te(o,qt(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=$t(t,e.from,e.to),n||(n=Sr(t,e)),t.cm?function(t,e,n){var i=t.doc,r=t.display,o=e.from,a=e.to,s=!1,l=o.line;t.options.lineWrapping||(l=Kt(Be(qt(i,o.line))),i.iter(l,a.line+1,(function(t){if(t==r.maxLine)return s=!0,!0}))),i.sel.contains(e.from,e.to)>-1&&mt(t),Lr(i,e,n,si(t)),t.options.lineWrapping||(i.iter(l,o.line+e.text.length,(function(t){var e=Ue(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,s=!1)})),s&&(t.curOp.updateMaxLine=!0)),function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,i=e-1;i>n;i--){var r=qt(t,i).stateAfter;if(r&&(!(r instanceof ue)||i+r.lookAhead<e)){n=i+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}}(i,o.line),ir(t,400);var u=e.text.length-(a.line-o.line)-1;e.full?hi(t):o.line!=a.line||1!=e.text.length||Mr(t.doc,e)?hi(t,o.line,a.line+1,u):di(t,o.line,"text");var c=vt(t,"changes"),h=vt(t,"change");if(h||c){var d={from:o,to:a,text:e.text,removed:e.removed,origin:e.origin};h&&ln(t,"change",t,d),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}(t.cm,e,i):Lr(t,e,i),to(t,n,V),t.cantEdit&&oo(t,te(t.firstLine(),0))&&(t.cantEdit=!1)}}function go(t,e,n,i,r){var o;i||(i=n),ee(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof e&&(e=t.splitLines(e)),uo(t,{from:n,to:i,text:e,origin:r})}function mo(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function vo(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r],a=!0;if(o.ranges){o.copied||((o=t[r]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)mo(o.ranges[s].anchor,e,n,i),mo(o.ranges[s].head,e,n,i)}else{for(var l=0;l<o.changes.length;++l){var u=o.changes[l];if(n<u.from.line)u.from=te(u.from.line+i,u.from.ch),u.to=te(u.to.line+i,u.to.ch);else if(e<=u.to.line){a=!1;break}}a||(t.splice(0,r+1),r=0)}}}function yo(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;vo(t.done,n,i,r),vo(t.undone,n,i,r)}function bo(t,e,n,i){var r=e,o=e;return"number"==typeof e?o=qt(t,ae(t,e)):r=Kt(e),null==r?null:(i(o,r)&&t.cm&&di(t.cm,r,n),o)}function xo(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function _o(t){this.children=t;for(var e=0,n=0,i=0;i<t.length;++i){var r=t[i];e+=r.chunkSize(),n+=r.height,r.parent=this}this.size=e,this.height=n,this.parent=null}wr.prototype.from=function(){return oe(this.anchor,this.head)},wr.prototype.to=function(){return re(this.anchor,this.head)},wr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},xo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;n<i;++n){var r=this.lines[n];this.height-=r.height,$e(r),ln(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0;i<e.length;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;t<i;++t)if(n(this.lines[t]))return!0}},_o.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(t<r){var o=Math.min(e,r-t),a=i.height;if(i.removeInner(t,o),this.height-=a-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof xo))){var s=[];this.collapse(s),this.children=[new xo(s)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<=o){if(r.insertInner(t,e,n),r.lines&&r.lines.length>50){for(var a=r.lines.length%25+25,s=a;s<r.lines.length;){var l=new xo(r.lines.slice(s,s+=25));r.height-=l.height,this.children.splice(++i,0,l),l.parent=this}r.lines=r.lines.slice(0,a),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new _o(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=z(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var i=new _o(t.children);i.parent=t,t.children=[i,e],t=i}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<o){var a=Math.min(e,o-t);if(r.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=o}}};var Eo=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=t,this.node=e};function wo(t,e,n){We(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Oi(t,n)}Eo.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,i=Kt(n);if(null!=i&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(n.widgets=null);var o=_n(this);Xt(n,Math.max(0,n.height-o)),t&&(Qi(t,(function(){wo(t,n,-o),di(t,i,"widget")})),ln(t,"lineWidgetCleared",t,this,i))}},Eo.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=_n(this)-e;r&&(He(this.doc,i)||Xt(i,i.height+r),n&&Qi(n,(function(){n.curOp.forceUpdate=!0,wo(n,i,r),ln(n,"lineWidgetChanged",n,t,Kt(i))})))},yt(Eo);var Ao=0,Do=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++Ao};function Co(t,e,n,i,r){if(i&&i.shared)return function(t,e,n,i,r){(i=N(i)).shared=!1;var o=[Co(t,e,n,i,r)],a=o[0],s=i.widgetNode;return Rr(t,(function(t){s&&(i.widgetNode=s.cloneNode(!0)),o.push(Co(t,se(t,e),se(t,n),i,r));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;a=Y(o)})),new ko(o,a)}(t,e,n,i,r);if(t.cm&&!t.cm.curOp)return tr(t.cm,Co)(t,e,n,i,r);var o=new Do(t,r),a=ee(e,n);if(i&&N(i,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=O("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Ne(t,e.line,e,n,o)||e.line!=n.line&&Ne(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ee=!0}o.addToHistory&&zr(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var s,l=e.line,u=t.cm;if(t.iter(l,n.line+1,(function(i){u&&o.collapsed&&!u.options.lineWrapping&&Be(i)==u.display.maxLine&&(s=!0),o.collapsed&&l!=e.line&&Xt(i,0),function(t,e,n){var i=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));i&&t.markedSpans&&i.has(t.markedSpans)?t.markedSpans.push(e):(t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],i&&i.add(t.markedSpans)),e.marker.attachLine(t)}(i,new we(o,l==e.line?e.ch:null,l==n.line?n.ch:null),t.cm&&t.cm.curOp),++l})),o.collapsed&&t.iter(e.line,n.line+1,(function(e){He(t,e)&&Xt(e,0)})),o.clearOnEnter&&ht(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(_e=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++Ao,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)hi(u,e.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=e.line;c<=n.line;c++)di(u,c,"text");o.atomic&&no(u.doc),ln(u,"markerAdded",u,o)}return o}Do.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&qi(t),vt(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Ae(a.markedSpans,this);t&&!this.collapsed?di(t,Kt(a),"text"):t&&(null!=s.to&&(r=Kt(a)),null!=s.from&&(i=Kt(a))),a.markedSpans=De(a.markedSpans,s),null==s.from&&this.collapsed&&!He(this.doc,a)&&t&&Xt(a,ii(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var u=Be(this.lines[l]),c=Ue(u);c>t.display.maxLineLength&&(t.display.maxLine=u,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&hi(t,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&no(t.doc)),t&&ln(t,"markerCleared",t,this,i,r),e&&$i(t),this.parent&&this.parent.clear()}},Do.prototype.find=function(t,e){var n,i;null==t&&"bookmark"==this.type&&(t=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],a=Ae(o.markedSpans,this);if(null!=a.from&&(n=te(e?o:Kt(o),a.from),-1==t))return n;if(null!=a.to&&(i=te(e?o:Kt(o),a.to),1==t))return i}return n&&{from:n,to:i}},Do.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,i=this.doc.cm;e&&i&&Qi(i,(function(){var r=e.line,o=Kt(e.line),a=In(i,o);if(a&&(Bn(a),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!He(n.doc,r)&&null!=n.height){var s=n.height;n.height=null;var l=_n(n)-s;l&&Xt(r,r.height+l)}ln(i,"markerChanged",i,t)}))},Do.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=z(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Do.prototype.detachLine=function(t){if(this.lines.splice(z(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},yt(Do);var ko=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function So(t){return t.findMarks(te(t.first,0),t.clipPos(te(t.lastLine())),(function(t){return t.parent}))}function To(t){for(var e=function(e){var n=t[e],i=[n.primary.doc];Rr(n.primary.doc,(function(t){return i.push(t)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==z(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<t.length;n++)e(n)}ko.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ln(this,"clear")}},ko.prototype.find=function(t,e){return this.primary.find(t,e)},yt(ko);var Oo=0,Io=function t(e,n,i,r,o){if(!(this instanceof t))return new t(e,n,i,r,o);null==i&&(i=0),_o.call(this,[new xo([new qe("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var a=te(i,0);this.sel=Dr(a),this.history=new Nr(null),this.id=++Oo,this.modeOption=n,this.lineSep=r,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Lr(this,{from:a,to:a,text:e}),Qr(this,Dr(a),V)};(Io.prototype=Z(_o.prototype,{constructor:Io,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Yt(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:nr((function(t){var e=te(this.first,0),n=this.first+this.size-1;uo(this,{from:e,to:te(n,qt(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Mi(this.cm,0,0),Qr(this,Dr(e),V)})),replaceRange:function(t,e,n,i){go(this,t,e=se(this,e),n=n?se(this,n):e,i)},getRange:function(t,e,n){var i=$t(this,se(this,t),se(this,e));return!1===n?i:""===n?i.join(""):i.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(Jt(this,t))return qt(this,t)},getLineNumber:function(t){return Kt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=qt(this,t)),Be(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return se(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:nr((function(t,e,n){Zr(this,se(this,"number"==typeof t?te(t,e||0):t),null,n)})),setSelection:nr((function(t,e,n){Zr(this,se(this,t),se(this,e||t),n)})),extendSelection:nr((function(t,e,n){Yr(this,se(this,t),e&&se(this,e),n)})),extendSelections:nr((function(t,e){Xr(this,le(this,t),e)})),extendSelectionsBy:nr((function(t,e){Xr(this,le(this,X(this.sel.ranges,t)),e)})),setSelections:nr((function(t,e,n){if(t.length){for(var i=[],r=0;r<t.length;r++)i[r]=new wr(se(this,t[r].anchor),se(this,t[r].head||t[r].anchor));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Qr(this,Ar(this.cm,i,e),n)}})),addSelection:nr((function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new wr(se(this,t),se(this,e||t))),Qr(this,Ar(this.cm,i,i.length-1),n)})),getSelection:function(t){for(var e,n=this.sel.ranges,i=0;i<n.length;i++){var r=$t(this,n[i].from(),n[i].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=$t(this,n[i].from(),n[i].to());!1!==t&&(r=r.join(t||this.lineSeparator())),e[i]=r}return e},replaceSelection:function(t,e,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:nr((function(t,e,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var a=r.ranges[o];i[o]={from:a.from(),to:a.to(),text:this.splitLines(t[o]),origin:n}}for(var s=e&&"end"!=e&&function(t,e,n){for(var i=[],r=te(t.first,0),o=r,a=0;a<e.length;a++){var s=e[a],l=Tr(s.from,r,o),u=Tr(Cr(s),r,o);if(r=s.to,o=u,"around"==n){var c=t.sel.ranges[a],h=ee(c.head,c.anchor)<0;i[a]=new wr(h?u:l,h?l:u)}else i[a]=new wr(l,l)}return new Er(i,t.sel.primIndex)}(this,i,e),l=i.length-1;l>=0;l--)uo(this,i[l]);s?Jr(this,s):this.cm&&Ii(this.cm)})),undo:nr((function(){ho(this,"undo")})),redo:nr((function(){ho(this,"redo")})),undoSelection:nr((function(){ho(this,"undo",!0)})),redoSelection:nr((function(){ho(this,"redo",!0)})),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var r=0;r<t.undone.length;r++)t.undone[r].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){var t=this;this.history=new Nr(this.history),Rr(this,(function(e){return e.history=t.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:qr(this.history.done),undone:qr(this.history.undone)}},setHistory:function(t){var e=this.history=new Nr(this.history);e.done=qr(t.done.slice(0),null,!0),e.undone=qr(t.undone.slice(0),null,!0)},setGutterMarker:nr((function(t,e,n){return bo(this,t,"gutter",(function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&et(i)&&(t.gutterMarkers=null),!0}))})),clearGutter:nr((function(t){var e=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[t]&&bo(e,n,"gutter",(function(){return n.gutterMarkers[t]=null,et(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(t){var e;if("number"==typeof t){if(!Jt(this,t))return null;if(e=t,!(t=qt(this,t)))return null}else if(null==(e=Kt(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:nr((function(t,e,n){return bo(this,t,"gutter"==e?"gutter":"class",(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[i]){if(A(n).test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0}))})),removeLineClass:nr((function(t,e,n){return bo(this,t,"gutter"==e?"gutter":"class",(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",r=t[i];if(!r)return!1;if(null==n)t[i]=null;else{var o=r.match(A(n));if(!o)return!1;var a=o.index+o[0].length;t[i]=r.slice(0,o.index)+(o.index&&a!=r.length?" ":"")+r.slice(a)||null}return!0}))})),addLineWidget:nr((function(t,e,n){return function(t,e,n,i){var r=new Eo(t,n,i),o=t.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),bo(t,e,"widget",(function(e){var n=e.widgets||(e.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length,Math.max(0,r.insertAt)),0,r),r.line=e,o&&!He(t,e)){var i=We(e)<t.scrollTop;Xt(e,e.height+_n(r)),i&&Oi(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&ln(o,"lineWidgetAdded",o,r,"number"==typeof e?e:Kt(e)),r}(this,t,e,n)})),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return Co(this,se(this,t),se(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return Co(this,t=se(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=qt(this,(t=se(this,t)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,n){t=se(this,t),e=se(this,e);var i=[],r=t.line;return this.iter(t.line,e.line+1,(function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&r==t.line&&t.ch>=l.to||null==l.from&&r!=t.line||null!=l.from&&r==e.line&&l.from>=e.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r})),i},getAllMarks:function(){var t=[];return this.iter((function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)})),t},posFromIndex:function(t){var e,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>t)return e=t,!0;t-=o,++n})),se(this,te(n,e))},indexFromPos:function(t){var e=(t=se(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,(function(t){e+=t.text.length+n})),e},copy:function(t){var e=new Io(Yt(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new Io(Yt(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=i.find(),o=t.clipPos(r.from),a=t.clipPos(r.to);if(ee(o,a)){var s=Co(t,o,a,i.primary,i.primary.type);i.markers.push(s),s.parent=i}}}(i,So(this)),i},unlinkDoc:function(t){if(t instanceof ka&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e)if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),To(So(this));break}if(t.history==this.history){var n=[t.id];Rr(t,(function(t){return n.push(t.id)}),!0),t.history=new Nr(null),t.history.done=qr(this.history.done,n),t.history.undone=qr(this.history.undone,n)}},iterLinkedDocs:function(t){Rr(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):It(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:nr((function(t){var e;"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter((function(t){return t.order=null})),this.cm&&Qi(e=this.cm,(function(){Fr(e),hi(e)})))}))})).eachLine=Io.prototype.iter;var Mo=0;function Lo(t){var e=this;if(Ro(e),!gt(e,t)&&!En(e.display,t)){bt(t),a&&(Mo=+new Date);var n=ui(e,t,!0),i=t.dataTransfer.files;if(n&&!e.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),s=0,l=function(){++s==r&&tr(e,(function(){var t={from:n=se(e.doc,n),to:n,text:e.doc.splitLines(o.filter((function(t){return null!=t})).join(e.doc.lineSeparator())),origin:"paste"};uo(e.doc,t),Jr(e.doc,Dr(se(e.doc,n),se(e.doc,Cr(t))))}))()},u=function(t,n){if(e.options.allowDropFileTypes&&-1==z(e.options.allowDropFileTypes,t.type))l();else{var i=new FileReader;i.onerror=function(){return l()},i.onload=function(){var t=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(t)||(o[n]=t),l()},i.readAsText(t)}},c=0;c<i.length;c++)u(i[c],c);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout((function(){return e.display.input.focus()}),20);try{var h=t.dataTransfer.getData("Text");if(h){var d;if(e.state.draggingText&&!e.state.draggingText.copy&&(d=e.listSelections()),to(e.doc,Dr(n,n)),d)for(var f=0;f<d.length;++f)go(e.doc,"",d[f].anchor,d[f].head,"drag");e.replaceSelection(h,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Ro(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Po(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<e.length;i++){var r=e[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var e=0;e<n.length;e++)t(n[e])}))}}var Fo=!1;function No(){var t;Fo||(ht(window,"resize",(function(){null==t&&(t=setTimeout((function(){t=null,Po(Bo)}),100))})),ht(window,"blur",(function(){return Po(Di)})),Fo=!0)}function Bo(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var jo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},zo=0;zo<10;zo++)jo[zo+48]=jo[zo+96]=String(zo);for(var Ho=65;Ho<=90;Ho++)jo[Ho]=String.fromCharCode(Ho);for(var Vo=1;Vo<=12;Vo++)jo[Vo+111]=jo[Vo+63235]="F"+Vo;var Wo={};function Uo(t){var e,n,i,r,o=t.split(/-(?!$)/);t=o[o.length-1];for(var a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))r=!0;else if(/^a(lt)?$/i.test(s))e=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);i=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),r&&(t="Cmd-"+t),i&&(t="Shift-"+t),t}function Go(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete t[n];continue}for(var r=X(n.split(" "),Uo),o=0;o<r.length;o++){var a=void 0,s=void 0;o==r.length-1?(s=r.join(" "),a=i):(s=r.slice(0,o+1).join(" "),a="...");var l=e[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else e[s]=a}delete t[n]}for(var u in e)t[u]=e[u];return t}function qo(t,e,n,i){var r=(e=Ko(e)).call?e.call(t,i):e[t];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return qo(t,e.fallthrough,n,i);for(var o=0;o<e.fallthrough.length;o++){var a=qo(t,e.fallthrough[o],n,i);if(a)return a}}}function $o(t){var e="string"==typeof t?t:jo[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Yo(t,e,n){var i=t;return e.altKey&&"Alt"!=i&&(t="Alt-"+t),(E?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(t="Ctrl-"+t),(E?e.ctrlKey:e.metaKey)&&"Mod"!=i&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=i&&(t="Shift-"+t),t}function Xo(t,e){if(h&&34==t.keyCode&&t.char)return!1;var n=jo[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),Yo(n,t,e))}function Ko(t){return"string"==typeof t?Wo[t]:t}function Zo(t,e){for(var n=t.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=e(n[r]);i.length&&ee(o.from,Y(i).to)<=0;){var a=i.pop();if(ee(a.from,o.from)<0){o.from=a.from;break}}i.push(o)}Qi(t,(function(){for(var e=i.length-1;e>=0;e--)go(t.doc,"",i[e].from,i[e].to,"+delete");Ii(t)}))}function Jo(t,e,n){var i=rt(t.text,e+n,n);return i<0||i>t.text.length?null:i}function Qo(t,e,n){var i=Jo(t,e.ch,n);return null==i?null:new te(e.line,i,n<0?"after":"before")}function ta(t,e,n,i,r){if(t){"rtl"==e.doc.direction&&(r=-r);var o=ut(n,e.doc.direction);if(o){var a,s=r<0?Y(o):o[0],l=r<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==e.doc.direction){var u=Mn(e,n);a=r<0?n.text.length-1:0;var c=Ln(e,u,a).top;a=ot((function(t){return Ln(e,u,t).top==c}),r<0==(1==s.level)?s.from:s.to-1,a),"before"==l&&(a=Jo(n,a,1))}else a=r<0?s.to:s.from;return new te(i,a,l)}}return new te(i,r<0?n.text.length:0,r<0?"before":"after")}Wo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Wo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Wo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Wo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Wo.default=y?Wo.macDefault:Wo.pcDefault;var ea={selectAll:so,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),V)},killLine:function(t){return Zo(t,(function(e){if(e.empty()){var n=qt(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:te(e.head.line+1,0)}:{from:e.head,to:te(e.head.line,n)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){return Zo(t,(function(e){return{from:te(e.from().line,0),to:se(t.doc,te(e.to().line+1,0))}}))},delLineLeft:function(t){return Zo(t,(function(t){return{from:te(t.from().line,0),to:t.from()}}))},delWrappedLineLeft:function(t){return Zo(t,(function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}}))},delWrappedLineRight:function(t){return Zo(t,(function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:i}}))},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(te(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(te(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy((function(e){return na(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy((function(e){return ia(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy((function(e){return function(t,e){var n=qt(t.doc,e),i=function(t){for(var e;e=Pe(t);)t=e.find(1,!0).line;return t}(n);return i!=n&&(e=Kt(i)),ta(!0,t,n,e,-1)}(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")}),U)},goLineLeft:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")}),U)},goLineLeftSmart:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return i.ch<t.getLine(i.line).search(/\S/)?ia(t,e.head):i}),U)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),a=B(t.getLine(o.line),o.ch,i);e.push($(i-a%i))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Qi(t,(function(){for(var e=t.listSelections(),n=[],i=0;i<e.length;i++)if(e[i].empty()){var r=e[i].head,o=qt(t.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new te(r.line,r.ch-1)),r.ch>0)r=new te(r.line,r.ch+1),t.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),te(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var a=qt(t.doc,r.line-1).text;a&&(r=new te(r.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+a.charAt(a.length-1),te(r.line-1,a.length-1),r,"+transpose"))}n.push(new wr(r,r))}t.setSelections(n)}))},newlineAndIndent:function(t){return Qi(t,(function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var i=0;i<e.length;i++)t.indentLine(e[i].from().line,null,!0);Ii(t)}))},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function na(t,e){var n=qt(t.doc,e),i=Be(n);return i!=n&&(e=Kt(i)),ta(!0,t,i,e,1)}function ia(t,e){var n=na(t,e.line),i=qt(t.doc,n.line),r=ut(i,t.doc.direction);if(!r||0==r[0].level){var o=Math.max(n.ch,i.text.search(/\S/)),a=e.line==n.line&&e.ch<=o&&e.ch;return te(n.line,a?0:o,n.sticky)}return n}function ra(t,e,n){if("string"==typeof e&&!(e=ea[e]))return!1;t.display.input.ensurePolled();var i=t.display.shift,r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),r=e(t)!=H}finally{t.display.shift=i,t.state.suppressEdits=!1}return r}var oa=new j;function aa(t,e,n,i){var r=t.state.keySeq;if(r){if($o(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:oa.set(50,(function(){t.state.keySeq==r&&(t.state.keySeq=null,t.display.input.reset())})),sa(t,r+" "+e,n,i))return!0}return sa(t,e,n,i)}function sa(t,e,n,i){var r=function(t,e,n){for(var i=0;i<t.state.keyMaps.length;i++){var r=qo(e,t.state.keyMaps[i],n,t);if(r)return r}return t.options.extraKeys&&qo(e,t.options.extraKeys,n,t)||qo(e,t.options.keyMap,n,t)}(t,e,i);return"multi"==r&&(t.state.keySeq=e),"handled"==r&&ln(t,"keyHandled",t,e,n),"handled"!=r&&"multi"!=r||(bt(n),_i(t)),!!r}function la(t,e){var n=Xo(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?aa(t,"Shift-"+n,e,(function(e){return ra(t,e,!0)}))||aa(t,n,e,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return ra(t,e)})):aa(t,n,e,(function(e){return ra(t,e)})))}var ua=null;function ca(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||(e.curOp.focus=M(),gt(e,t)))){a&&s<11&&27==t.keyCode&&(t.returnValue=!1);var i=t.keyCode;e.display.shift=16==i||t.shiftKey;var r=la(e,t);h&&(ua=r?i:null,r||88!=i||Lt||!(y?t.metaKey:t.ctrlKey)||e.replaceSelection("",null,"cut")),n&&!y&&!r&&46==i&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=i||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(C(e,"CodeMirror-crosshair"),ft(document,"keyup",n),ft(document,"mouseover",n))}L(e,"CodeMirror-crosshair"),ht(document,"keyup",n),ht(document,"mouseover",n)}(e)}}function ha(t){16==t.keyCode&&(this.doc.sel.shift=!1),gt(this,t)}function da(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||En(e.display,t)||gt(e,t)||t.ctrlKey&&!t.altKey||y&&t.metaKey)){var n=t.keyCode,i=t.charCode;if(h&&n==ua)return ua=null,void bt(t);if(!h||t.which&&!(t.which<10)||!la(e,t)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(function(t,e,n){return aa(t,"'"+n+"'",e,(function(e){return ra(t,e,!0)}))}(e,t,r)||e.display.input.onKeyPress(t))}}}var fa,pa,ga=function(t,e,n){this.time=t,this.pos=e,this.button=n};function ma(t){var e=this,n=e.display;if(!(gt(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,En(n,t))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!ba(e,t)){var i=ui(e,t),r=At(t),o=i?function(t,e){var n=+new Date;return pa&&pa.compare(n,t,e)?(fa=pa=null,"triple"):fa&&fa.compare(n,t,e)?(pa=new ga(n,t,e),fa=null,"double"):(fa=new ga(n,t,e),pa=null,"single")}(i,r):"single";window.focus(),1==r&&e.state.selectingText&&e.state.selectingText(t),i&&function(t,e,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),aa(t,Yo(o=(1==e?"Left":2==e?"Middle":"Right")+o,r),r,(function(e){if("string"==typeof e&&(e=ea[e]),!e)return!1;var i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),i=e(t,n)!=H}finally{t.state.suppressEdits=!1}return i}))}(e,r,i,o,t)||(1==r?i?function(t,e,n,i){a?setTimeout(F(Ei,t),0):t.curOp.focus=M();var r,o=function(t,e,n){var i=t.getOption("configureMouse"),r=i?i(t,e,n):{};if(null==r.unit){var o=b?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==e?"char":"double"==e?"word":"line"}return(null==r.extend||t.doc.extend)&&(r.extend=t.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=y?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(y?n.altKey:n.ctrlKey)),r}(t,n,i),u=t.doc.sel;t.options.dragDrop&&kt&&!t.isReadOnly()&&"single"==n&&(r=u.contains(e))>-1&&(ee((r=u.ranges[r]).from(),e)<0||e.xRel>0)&&(ee(r.to(),e)>0||e.xRel<0)?function(t,e,n,i){var r=t.display,o=!1,u=tr(t,(function(e){l&&(r.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:wi(t)),ft(r.wrapper.ownerDocument,"mouseup",u),ft(r.wrapper.ownerDocument,"mousemove",c),ft(r.scroller,"dragstart",h),ft(r.scroller,"drop",u),o||(bt(e),i.addNew||Yr(t.doc,n,null,null,i.extend),l&&!d||a&&9==s?setTimeout((function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()}),20):r.input.focus())})),c=function(t){o=o||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},h=function(){return o=!0};l&&(r.scroller.draggable=!0),t.state.draggingText=u,u.copy=!i.moveOnDrag,ht(r.wrapper.ownerDocument,"mouseup",u),ht(r.wrapper.ownerDocument,"mousemove",c),ht(r.scroller,"dragstart",h),ht(r.scroller,"drop",u),t.state.delayingBlurEvent=!0,setTimeout((function(){return r.input.focus()}),20),r.scroller.dragDrop&&r.scroller.dragDrop()}(t,i,e,o):function(t,e,n,i){a&&wi(t);var r=t.display,o=t.doc;bt(e);var s,l,u=o.sel,c=u.ranges;if(i.addNew&&!i.extend?(l=o.sel.contains(n),s=l>-1?c[l]:new wr(n,n)):(s=o.sel.primary(),l=o.sel.primIndex),"rectangle"==i.unit)i.addNew||(s=new wr(n,n)),n=ui(t,e,!0,!0),l=-1;else{var h=va(t,n,i.unit);s=i.extend?$r(s,h.anchor,h.head,i.extend):h}i.addNew?-1==l?(l=c.length,Qr(o,Ar(t,c.concat([s]),l),{scroll:!1,origin:"*mouse"})):c.length>1&&c[l].empty()&&"char"==i.unit&&!i.extend?(Qr(o,Ar(t,c.slice(0,l).concat(c.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),u=o.sel):Kr(o,l,s,W):(l=0,Qr(o,new Er([s],0),W),u=o.sel);var d=n;function f(e){if(0!=ee(d,e))if(d=e,"rectangle"==i.unit){for(var r=[],a=t.options.tabSize,c=B(qt(o,n.line).text,n.ch,a),h=B(qt(o,e.line).text,e.ch,a),f=Math.min(c,h),p=Math.max(c,h),g=Math.min(n.line,e.line),m=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=m;g++){var v=qt(o,g).text,y=G(v,f,a);f==p?r.push(new wr(te(g,y),te(g,y))):v.length>y&&r.push(new wr(te(g,y),te(g,G(v,p,a))))}r.length||r.push(new wr(n,n)),Qr(o,Ar(t,u.ranges.slice(0,l).concat(r),l),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b,x=s,_=va(t,e,i.unit),E=x.anchor;ee(_.anchor,E)>0?(b=_.head,E=oe(x.from(),_.anchor)):(b=_.anchor,E=re(x.to(),_.head));var w=u.ranges.slice(0);w[l]=function(t,e){var n=e.anchor,i=e.head,r=qt(t.doc,n.line);if(0==ee(n,i)&&n.sticky==i.sticky)return e;var o=ut(r);if(!o)return e;var a=st(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return e;var l,u=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==u||u==o.length)return e;if(i.line!=n.line)l=(i.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var c=st(o,i.ch,i.sticky),h=c-a||(i.ch-n.ch)*(1==s.level?-1:1);l=c==u-1||c==u?h<0:h>0}var d=o[u+(l?-1:0)],f=l==(1==d.level),p=f?d.from:d.to,g=f?"after":"before";return n.ch==p&&n.sticky==g?e:new wr(new te(n.line,p,g),i)}(t,new wr(se(o,E),b)),Qr(o,Ar(t,w,l),W)}}var p=r.wrapper.getBoundingClientRect(),g=0;function m(e){var n=++g,a=ui(t,e,!0,"rectangle"==i.unit);if(a)if(0!=ee(a,d)){t.curOp.focus=M(),f(a);var s=Si(r,o);(a.line>=s.to||a.line<s.from)&&setTimeout(tr(t,(function(){g==n&&m(e)})),150)}else{var l=e.clientY<p.top?-20:e.clientY>p.bottom?20:0;l&&setTimeout(tr(t,(function(){g==n&&(r.scroller.scrollTop+=l,m(e))})),50)}}function v(e){t.state.selectingText=!1,g=1/0,e&&(bt(e),r.input.focus()),ft(r.wrapper.ownerDocument,"mousemove",y),ft(r.wrapper.ownerDocument,"mouseup",b),o.history.lastSelOrigin=null}var y=tr(t,(function(t){0!==t.buttons&&At(t)?m(t):v(t)})),b=tr(t,v);t.state.selectingText=b,ht(r.wrapper.ownerDocument,"mousemove",y),ht(r.wrapper.ownerDocument,"mouseup",b)}(t,i,e,o)}(e,i,o,t):wt(t)==n.scroller&&bt(t):2==r?(i&&Yr(e.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(w?e.display.input.onContextMenu(t):wi(e)))}}function va(t,e,n){if("char"==n)return new wr(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new wr(te(e.line,0),se(t.doc,te(e.line+1,0)));var i=n(t,e);return new wr(i.from,i.to)}function ya(t,e,n,i){var r,o;if(e.touches)r=e.touches[0].clientX,o=e.touches[0].clientY;else try{r=e.clientX,o=e.clientY}catch(t){return!1}if(r>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&bt(e);var a=t.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!vt(t,n))return _t(e);o-=s.top-a.viewOffset;for(var l=0;l<t.display.gutterSpecs.length;++l){var u=a.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=r)return pt(t,n,t,Zt(t.doc,o),t.display.gutterSpecs[l].className,e),_t(e)}}function ba(t,e){return ya(t,e,"gutterClick",!0)}function xa(t,e){En(t.display,e)||function(t,e){return!!vt(t,"gutterContextMenu")&&ya(t,e,"gutterContextMenu",!1)}(t,e)||gt(t,e,"contextmenu")||w||t.display.input.onContextMenu(e)}function _a(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),zn(t)}ga.prototype.compare=function(t,e,n){return this.time+400>t&&0==ee(e,this.pos)&&n==this.button};var Ea={toString:function(){return"CodeMirror.Init"}},wa={},Aa={};function Da(t,e,n){if(!e!=!(n&&n!=Ea)){var i=t.display.dragFunctions,r=e?ht:ft;r(t.display.scroller,"dragstart",i.start),r(t.display.scroller,"dragenter",i.enter),r(t.display.scroller,"dragover",i.over),r(t.display.scroller,"dragleave",i.leave),r(t.display.scroller,"drop",i.drop)}}function Ca(t){t.options.lineWrapping?(L(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(C(t.display.wrapper,"CodeMirror-wrap"),Ge(t)),li(t),hi(t),zn(t),setTimeout((function(){return Hi(t)}),100)}function ka(t,e){var n=this;if(!(this instanceof ka))return new ka(t,e);this.options=e=e?N(e):{},N(wa,e,!1);var i=e.value;"string"==typeof i?i=new Io(i,e.mode,null,e.lineSeparator,e.direction):e.mode&&(i.modeOption=e.mode),this.doc=i;var r=new ka.inputStyles[e.inputStyle](this),o=this.display=new mr(t,i,r,e);for(var u in o.wrapper.CodeMirror=this,_a(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ui(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new j,keySeq:null,specialChars:null},e.autofocus&&!v&&o.input.focus(),a&&s<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(t){var e=t.display;ht(e.scroller,"mousedown",tr(t,ma)),ht(e.scroller,"dblclick",a&&s<11?tr(t,(function(e){if(!gt(t,e)){var n=ui(t,e);if(n&&!ba(t,e)&&!En(t.display,e)){bt(e);var i=t.findWordAt(n);Yr(t.doc,i.anchor,i.head)}}})):function(e){return gt(t,e)||bt(e)}),ht(e.scroller,"contextmenu",(function(e){return xa(t,e)})),ht(e.input.getField(),"contextmenu",(function(n){e.scroller.contains(n.target)||xa(t,n)}));var n,i={end:0};function r(){e.activeTouch&&(n=setTimeout((function(){return e.activeTouch=null}),1e3),(i=e.activeTouch).end=+new Date)}function o(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function l(t,e){if(null==e.left)return!0;var n=e.left-t.left,i=e.top-t.top;return n*n+i*i>400}ht(e.scroller,"touchstart",(function(r){if(!gt(t,r)&&!o(r)&&!ba(t,r)){e.input.ensurePolled(),clearTimeout(n);var a=+new Date;e.activeTouch={start:a,moved:!1,prev:a-i.end<=300?i:null},1==r.touches.length&&(e.activeTouch.left=r.touches[0].pageX,e.activeTouch.top=r.touches[0].pageY)}})),ht(e.scroller,"touchmove",(function(){e.activeTouch&&(e.activeTouch.moved=!0)})),ht(e.scroller,"touchend",(function(n){var i=e.activeTouch;if(i&&!En(e,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o,a=t.coordsChar(e.activeTouch,"page");o=!i.prev||l(i,i.prev)?new wr(a,a):!i.prev.prev||l(i,i.prev.prev)?t.findWordAt(a):new wr(te(a.line,0),se(t.doc,te(a.line+1,0))),t.setSelection(o.anchor,o.head),t.focus(),bt(n)}r()})),ht(e.scroller,"touchcancel",r),ht(e.scroller,"scroll",(function(){e.scroller.clientHeight&&(Pi(t,e.scroller.scrollTop),Ni(t,e.scroller.scrollLeft,!0),pt(t,"scroll",t))})),ht(e.scroller,"mousewheel",(function(e){return _r(t,e)})),ht(e.scroller,"DOMMouseScroll",(function(e){return _r(t,e)})),ht(e.wrapper,"scroll",(function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0})),e.dragFunctions={enter:function(e){gt(t,e)||Et(e)},over:function(e){gt(t,e)||(function(t,e){var n=ui(t,e);if(n){var i=document.createDocumentFragment();yi(t,n,i),t.display.dragCursor||(t.display.dragCursor=T("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),S(t.display.dragCursor,i)}}(t,e),Et(e))},start:function(e){return function(t,e){if(a&&(!t.state.draggingText||+new Date-Mo<100))Et(e);else if(!gt(t,e)&&!En(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!d)){var n=T("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}(t,e)},drop:tr(t,Lo),leave:function(e){gt(t,e)||Ro(t)}};var u=e.input.getField();ht(u,"keyup",(function(e){return ha.call(t,e)})),ht(u,"keydown",tr(t,ca)),ht(u,"keypress",tr(t,da)),ht(u,"focus",(function(e){return Ai(t,e)})),ht(u,"blur",(function(e){return Di(t,e)}))}(this),No(),qi(this),this.curOp.forceUpdate=!0,Pr(this,i),e.autofocus&&!v||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&Ai(n)}),20):Di(this),Aa)Aa.hasOwnProperty(u)&&Aa[u](this,e[u],Ea);dr(this),e.finishInit&&e.finishInit(this);for(var c=0;c<Sa.length;++c)Sa[c](this);$i(this),l&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}ka.defaults=wa,ka.optionHandlers=Aa;var Sa=[];function Ta(t,e,n,i){var r,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=fe(t,e).state:n="prev");var a=t.options.tabSize,s=qt(o,e),l=B(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(i||/\S/.test(s.text)){if("smart"==n&&((u=o.mode.indent(r,s.text.slice(c.length),s.text))==H||u>150)){if(!i)return;n="prev"}}else u=0,n="not";"prev"==n?u=e>o.first?B(qt(o,e-1).text,null,a):0:"add"==n?u=l+t.options.indentUnit:"subtract"==n?u=l-t.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var h="",d=0;if(t.options.indentWithTabs)for(var f=Math.floor(u/a);f;--f)d+=a,h+="\t";if(d<u&&(h+=$(u-d)),h!=c)return go(o,h,te(e,0),te(e,c.length),"+input"),s.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==e&&g.head.ch<c.length){var m=te(e,c.length);Kr(o,p,new wr(m,m));break}}}ka.defineInitHook=function(t){return Sa.push(t)};var Oa=null;function Ia(t){Oa=t}function Ma(t,e,n,i,r){var o=t.doc;t.display.shift=!1,i||(i=o.sel);var a=+new Date-200,s="paste"==r||t.state.pasteIncoming>a,l=It(e),u=null;if(s&&i.ranges.length>1)if(Oa&&Oa.text.join("\n")==e){if(i.ranges.length%Oa.text.length==0){u=[];for(var c=0;c<Oa.text.length;c++)u.push(o.splitLines(Oa.text[c]))}}else l.length==i.ranges.length&&t.options.pasteLinesPerSelection&&(u=X(l,(function(t){return[t]})));for(var h=t.curOp.updateInput,d=i.ranges.length-1;d>=0;d--){var f=i.ranges[d],p=f.from(),g=f.to();f.empty()&&(n&&n>0?p=te(p.line,p.ch-n):t.state.overwrite&&!s?g=te(g.line,Math.min(qt(o,g.line).text.length,g.ch+Y(l).length)):s&&Oa&&Oa.lineWise&&Oa.text.join("\n")==l.join("\n")&&(p=g=te(p.line,0)));var m={from:p,to:g,text:u?u[d%u.length]:l,origin:r||(s?"paste":t.state.cutIncoming>a?"cut":"+input")};uo(t.doc,m),ln(t,"inputRead",t,m)}e&&!s&&Ra(t,e),Ii(t),t.curOp.updateInput<2&&(t.curOp.updateInput=h),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function La(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||!e.hasFocus()||Qi(e,(function(){return Ma(e,n,0,null,"paste")})),!0}function Ra(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=t.getModeAt(r.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(e.indexOf(o.electricChars.charAt(s))>-1){a=Ta(t,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(qt(t.doc,r.head.line).text.slice(0,r.head.ch))&&(a=Ta(t,r.head.line,"smart"));a&&ln(t,"electricInput",t,r.head.line)}}}function Pa(t){for(var e=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var r=t.doc.sel.ranges[i].head.line,o={anchor:te(r,0),head:te(r+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function Fa(t,e,n,i){t.setAttribute("autocorrect",n?"":"off"),t.setAttribute("autocapitalize",i?"":"off"),t.setAttribute("spellcheck",!!e)}function Na(){var t=T("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),e=T("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?t.style.width="1000px":t.setAttribute("wrap","off"),g&&(t.style.border="1px solid black"),Fa(t),e}function Ba(t,e,n,i,r){var o=e,a=n,s=qt(t,e.line),l=r&&"rtl"==t.direction?-n:n;function u(o){var a,u;if("codepoint"==i){var c=s.text.charCodeAt(e.ch+(n>0?0:-1));if(isNaN(c))a=null;else{var h=n>0?c>=55296&&c<56320:c>=56320&&c<57343;a=new te(e.line,Math.max(0,Math.min(s.text.length,e.ch+n*(h?2:1))),-n)}}else a=r?function(t,e,n,i){var r=ut(e,t.doc.direction);if(!r)return Qo(e,n,i);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=st(r,n.ch,n.sticky),a=r[o];if("ltr"==t.doc.direction&&a.level%2==0&&(i>0?a.to>n.ch:a.from<n.ch))return Qo(e,n,i);var s,l=function(t,n){return Jo(e,t instanceof te?t.ch:t,n)},u=function(n){return t.options.lineWrapping?(s=s||Mn(t,e),Jn(t,e,s,n)):{begin:0,end:e.text.length}},c=u("before"==n.sticky?l(n,-1):n.ch);if("rtl"==t.doc.direction||1==a.level){var h=1==a.level==i<0,d=l(n,h?1:-1);if(null!=d&&(h?d<=a.to&&d<=c.end:d>=a.from&&d>=c.begin)){var f=h?"before":"after";return new te(n.line,d,f)}}var p=function(t,e,i){for(var o=function(t,e){return e?new te(n.line,l(t,1),"before"):new te(n.line,t,"after")};t>=0&&t<r.length;t+=e){var a=r[t],s=e>0==(1!=a.level),u=s?i.begin:l(i.end,-1);if(a.from<=u&&u<a.to)return o(u,s);if(u=s?a.from:l(a.to,-1),i.begin<=u&&u<i.end)return o(u,s)}},g=p(o+i,i,c);if(g)return g;var m=i>0?c.end:l(c.begin,-1);return null==m||i>0&&m==e.text.length||!(g=p(i>0?0:r.length-1,i,u(m)))?null:g}(t.cm,s,e,n):Qo(s,e,n);if(null==a){if(o||(u=e.line+l)<t.first||u>=t.first+t.size||(e=new te(u,e.ch,e.sticky),!(s=qt(t,u))))return!1;e=ta(r,t.cm,s,e.line,l)}else e=a;return!0}if("char"==i||"codepoint"==i)u();else if("column"==i)u(!0);else if("word"==i||"group"==i)for(var c=null,h="group"==i,d=t.cm&&t.cm.getHelper(e,"wordChars"),f=!0;!(n<0)||u(!f);f=!1){var p=s.text.charAt(e.ch)||"\n",g=tt(p,d)?"w":h&&"\n"==p?"n":!h||/\s/.test(p)?null:"p";if(!h||f||g||(g="s"),c&&c!=g){n<0&&(n=1,u(),e.sticky="after");break}if(g&&(c=g),n>0&&!u(!f))break}var m=oo(t,e,o,a,!0);return ne(o,m)&&(m.hitSide=!0),m}function ja(t,e,n,i){var r,o,a=t.doc,s=e.left;if("page"==i){var l=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(l-.5*ii(t.display),3);r=(n>0?e.bottom:e.top)+n*u}else"line"==i&&(r=n>0?e.bottom+3:e.top-3);for(;(o=Kn(t,s,r)).outside;){if(n<0?r<=0:r>=a.height){o.hitSide=!0;break}r+=5*n}return o}var za=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new j,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ha(t,e){var n=In(t,e.line);if(!n||n.hidden)return null;var i=qt(t.doc,e.line),r=Tn(n,i,e.line),o=ut(i,t.doc.direction),a="left";o&&(a=st(o,e.ch)%2?"right":"left");var s=Fn(r.map,e.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function Va(t,e){return e&&(t.bad=!0),t}function Wa(t,e,n){var i;if(e==t.display.lineDiv){if(!(i=t.display.lineDiv.childNodes[n]))return Va(t.clipPos(te(t.display.viewTo-1)),!0);e=null,n=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var r=0;r<t.display.view.length;r++){var o=t.display.view[r];if(o.node==i)return Ua(o,e,n)}}function Ua(t,e,n){var i=t.text.firstChild,r=!1;if(!e||!I(i,e))return Va(te(Kt(t.line),0),!0);if(e==i&&(r=!0,e=i.childNodes[n],n=0,!e)){var o=t.rest?Y(t.rest):t.line;return Va(te(Kt(o),o.text.length),r)}var a=3==e.nodeType?e:null,s=e;for(a||1!=e.childNodes.length||3!=e.firstChild.nodeType||(a=e.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=i;)s=s.parentNode;var l=t.measure,u=l.maps;function c(e,n,i){for(var r=-1;r<(u?u.length:0);r++)for(var o=r<0?l.map:u[r],a=0;a<o.length;a+=3){var s=o[a+2];if(s==e||s==n){var c=Kt(r<0?t.line:t.rest[r]),h=o[a]+i;return(i<0||s!=e)&&(h=o[a+(i?1:0)]),te(c,h)}}}var h=c(a,s,n);if(h)return Va(h,r);for(var d=s.nextSibling,f=a?a.nodeValue.length-n:0;d;d=d.nextSibling){if(h=c(d,d.firstChild,0))return Va(te(h.line,h.ch-f),r);f+=d.textContent.length}for(var p=s.previousSibling,g=n;p;p=p.previousSibling){if(h=c(p,p.firstChild,-1))return Va(te(h.line,h.ch+g),r);g+=p.textContent.length}}za.prototype.init=function(t){var e=this,n=this,i=n.cm,r=n.div=t.lineDiv;function o(t){for(var e=t.target;e;e=e.parentNode){if(e==r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(e.className))break}return!1}function a(t){if(o(t)&&!gt(i,t)){if(i.somethingSelected())Ia({lineWise:!1,text:i.getSelections()}),"cut"==t.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var e=Pa(i);Ia({lineWise:!0,text:e.text}),"cut"==t.type&&i.operation((function(){i.setSelections(e.ranges,0,V),i.replaceSelection("",null,"cut")}))}if(t.clipboardData){t.clipboardData.clearData();var a=Oa.text.join("\n");if(t.clipboardData.setData("Text",a),t.clipboardData.getData("Text")==a)return void t.preventDefault()}var s=Na(),l=s.firstChild;i.display.lineSpace.insertBefore(s,i.display.lineSpace.firstChild),l.value=Oa.text.join("\n");var u=M();P(l),setTimeout((function(){i.display.lineSpace.removeChild(s),u.focus(),u==r&&n.showPrimarySelection()}),50)}}r.contentEditable=!0,Fa(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),ht(r,"paste",(function(t){!o(t)||gt(i,t)||La(t,i)||s<=11&&setTimeout(tr(i,(function(){return e.updateFromDOM()})),20)})),ht(r,"compositionstart",(function(t){e.composing={data:t.data,done:!1}})),ht(r,"compositionupdate",(function(t){e.composing||(e.composing={data:t.data,done:!1})})),ht(r,"compositionend",(function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)})),ht(r,"touchstart",(function(){return n.forceCompositionEnd()})),ht(r,"input",(function(){e.composing||e.readFromDOMSoon()})),ht(r,"copy",a),ht(r,"cut",a)},za.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},za.prototype.prepareSelection=function(){var t=vi(this.cm,!1);return t.focus=M()==this.div,t},za.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},za.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},za.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,i=e.doc.sel.primary(),r=i.from(),o=i.to();if(e.display.viewTo==e.display.viewFrom||r.line>=e.display.viewTo||o.line<e.display.viewFrom)t.removeAllRanges();else{var a=Wa(e,t.anchorNode,t.anchorOffset),s=Wa(e,t.focusNode,t.focusOffset);if(!a||a.bad||!s||s.bad||0!=ee(oe(a,s),r)||0!=ee(re(a,s),o)){var l=e.display.view,u=r.line>=e.display.viewFrom&&Ha(e,r)||{node:l[0].measure.map[2],offset:0},c=o.line<e.display.viewTo&&Ha(e,o);if(!c){var h=l[l.length-1].measure,d=h.maps?h.maps[h.maps.length-1]:h.map;c={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(u&&c){var f,p=t.rangeCount&&t.getRangeAt(0);try{f=D(u.node,u.offset,c.offset,c.node)}catch(t){}f&&(!n&&e.state.focused?(t.collapse(u.node,u.offset),f.collapsed||(t.removeAllRanges(),t.addRange(f))):(t.removeAllRanges(),t.addRange(f)),p&&null==t.anchorNode?t.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},za.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation((function(){return t.cm.curOp.selectionChanged=!0}))}),20)},za.prototype.showMultipleSelections=function(t){S(this.cm.display.cursorDiv,t.cursors),S(this.cm.display.selectionDiv,t.selection)},za.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},za.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return I(this.div,e)},za.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&M()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},za.prototype.blur=function(){this.div.blur()},za.prototype.getField=function(){return this.div},za.prototype.supportsTouch=function(){return!0},za.prototype.receivedFocus=function(){var t=this,e=this;this.selectionInEditor()?setTimeout((function(){return t.pollSelection()}),20):Qi(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},za.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},za.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(m&&c&&this.cm.display.gutterSpecs.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Wa(e,t.anchorNode,t.anchorOffset),i=Wa(e,t.focusNode,t.focusOffset);n&&i&&Qi(e,(function(){Qr(e.doc,Dr(n,i),V),(n.bad||i.bad)&&(e.curOp.selectionChanged=!0)}))}}},za.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),a=o.from(),s=o.to();if(0==a.ch&&a.line>i.firstLine()&&(a=te(a.line-1,qt(i.doc,a.line-1).length)),s.ch==qt(i.doc,s.line).text.length&&s.line<i.lastLine()&&(s=te(s.line+1,0)),a.line<r.viewFrom||s.line>r.viewTo-1)return!1;a.line==r.viewFrom||0==(t=ci(i,a.line))?(e=Kt(r.view[0].line),n=r.view[0].node):(e=Kt(r.view[t].line),n=r.view[t-1].node.nextSibling);var l,u,c=ci(i,s.line);if(c==r.view.length-1?(l=r.viewTo-1,u=r.lineDiv.lastChild):(l=Kt(r.view[c+1].line)-1,u=r.view[c+1].node.previousSibling),!n)return!1;for(var h=i.doc.splitLines(function(t,e,n,i,r){var o="",a=!1,s=t.doc.lineSeparator(),l=!1;function u(t){return function(e){return e.id==t}}function c(){a&&(o+=s,l&&(o+=s),a=l=!1)}function h(t){t&&(c(),o+=t)}function d(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(n)return void h(n);var o,f=e.getAttribute("cm-marker");if(f){var p=t.findMarks(te(i,0),te(r+1,0),u(+f));return void(p.length&&(o=p[0].find(0))&&h($t(t.doc,o.from,o.to).join(s)))}if("false"==e.getAttribute("contenteditable"))return;var g=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;g&&c();for(var m=0;m<e.childNodes.length;m++)d(e.childNodes[m]);/^(pre|p)$/i.test(e.nodeName)&&(l=!0),g&&(a=!0)}else 3==e.nodeType&&h(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;d(e),e!=n;)e=e.nextSibling,l=!1;return o}(i,n,u,e,l)),d=$t(i.doc,te(e,0),te(l,qt(i.doc,l).text.length));h.length>1&&d.length>1;)if(Y(h)==Y(d))h.pop(),d.pop(),l--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),e++}for(var f=0,p=0,g=h[0],m=d[0],v=Math.min(g.length,m.length);f<v&&g.charCodeAt(f)==m.charCodeAt(f);)++f;for(var y=Y(h),b=Y(d),x=Math.min(y.length-(1==h.length?f:0),b.length-(1==d.length?f:0));p<x&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==h.length&&1==d.length&&e==a.line)for(;f&&f>a.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)f--,p++;h[h.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),h[0]=h[0].slice(f).replace(/\u200b+$/,"");var _=te(e,f),E=te(l,d.length?Y(d).length-p:0);return h.length>1||h[0]||ee(_,E)?(go(i.doc,h,_,E,"+input"),!0):void 0},za.prototype.ensurePolled=function(){this.forceCompositionEnd()},za.prototype.reset=function(){this.forceCompositionEnd()},za.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},za.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()}),80))},za.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||Qi(this.cm,(function(){return hi(t.cm)}))},za.prototype.setUneditable=function(t){t.contentEditable="false"},za.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||tr(this.cm,Ma)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},za.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},za.prototype.onContextMenu=function(){},za.prototype.resetPosition=function(){},za.prototype.needsContentAttribute=!0;var Ga,qa,$a,Ya=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new j,this.hasSelection=!1,this.composing=null};Ya.prototype.init=function(t){var e=this,n=this,i=this.cm;this.createField(t);var r=this.textarea;function o(t){if(!gt(i,t)){if(i.somethingSelected())Ia({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var e=Pa(i);Ia({lineWise:!0,text:e.text}),"cut"==t.type?i.setSelections(e.ranges,null,V):(n.prevInput="",r.value=e.text.join("\n"),P(r))}"cut"==t.type&&(i.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),g&&(r.style.width="0px"),ht(r,"input",(function(){a&&s>=9&&e.hasSelection&&(e.hasSelection=null),n.poll()})),ht(r,"paste",(function(t){gt(i,t)||La(t,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),ht(r,"cut",o),ht(r,"copy",o),ht(t.scroller,"paste",(function(e){if(!En(t,e)&&!gt(i,e)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=e.clipboardData,r.dispatchEvent(o)}})),ht(t.lineSpace,"selectstart",(function(e){En(t,e)||bt(e)})),ht(r,"compositionstart",(function(){var t=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:t,range:i.markText(t,i.getCursor("to"),{className:"CodeMirror-composing"})}})),ht(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Ya.prototype.createField=function(t){this.wrapper=Na(),this.textarea=this.wrapper.firstChild},Ya.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},Ya.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,i=vi(t);if(t.options.moveInputWithCursor){var r=$n(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),a=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,r.top+a.top-o.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,r.left+a.left-o.left))}return i},Ya.prototype.showSelection=function(t){var e=this.cm.display;S(e.cursorDiv,t.cursors),S(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Ya.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&P(this.textarea),a&&s>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",a&&s>=9&&(this.hasSelection=null))}},Ya.prototype.getField=function(){return this.textarea},Ya.prototype.supportsTouch=function(){return!1},Ya.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||M()!=this.textarea))try{this.textarea.focus()}catch(t){}},Ya.prototype.blur=function(){this.textarea.blur()},Ya.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ya.prototype.receivedFocus=function(){this.slowPoll()},Ya.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){t.poll(),t.cm.state.focused&&t.slowPoll()}))},Ya.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,(function n(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,n))}))},Ya.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!e.state.focused||Mt(n)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=n.value;if(r==i&&!e.somethingSelected())return!1;if(a&&s>=9&&this.hasSelection===r||y&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i=""),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,u=Math.min(i.length,r.length);l<u&&i.charCodeAt(l)==r.charCodeAt(l);)++l;return Qi(e,(function(){Ma(e,r.slice(l),i.length-l,null,t.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=r,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Ya.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ya.prototype.onKeyPress=function(){a&&s>=9&&(this.hasSelection=null),this.fastPoll()},Ya.prototype.onContextMenu=function(t){var e=this,n=e.cm,i=n.display,r=e.textarea;e.contextMenuPending&&e.contextMenuPending();var o=ui(n,t),u=i.scroller.scrollTop;if(o&&!h){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&tr(n,Qr)(n.doc,Dr(o),V);var c,d=r.style.cssText,f=e.wrapper.style.cssText,p=e.wrapper.offsetParent.getBoundingClientRect();e.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-p.top-5)+"px; left: "+(t.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(c=window.scrollY),i.input.focus(),l&&window.scrollTo(null,c),i.input.reset(),n.somethingSelected()||(r.value=e.prevInput=" "),e.contextMenuPending=m,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),a&&s>=9&&g(),w?(Et(t),ht(window,"mouseup",(function t(){ft(window,"mouseup",t),setTimeout(m,20)}))):setTimeout(m,50)}function g(){if(null!=r.selectionStart){var t=n.somethingSelected(),o=""+(t?r.value:"");r.value="",r.value=o,e.prevInput=t?"":"",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function m(){if(e.contextMenuPending==m&&(e.contextMenuPending=!1,e.wrapper.style.cssText=f,r.style.cssText=d,a&&s<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=u),null!=r.selectionStart)){(!a||a&&s<9)&&g();var t=0;i.detectingSelectAll=setTimeout((function o(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&""==e.prevInput?tr(n,so)(n):t++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())}),200)}}},Ya.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},Ya.prototype.setUneditable=function(){},Ya.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function n(n,i,r,o){t.defaults[n]=i,r&&(e[n]=o?function(t,e,n){n!=Ea&&r(t,e,n)}:r)}t.defineOption=n,t.Init=Ea,n("value","",(function(t,e){return t.setValue(e)}),!0),n("mode",null,(function(t,e){t.doc.modeOption=e,Or(t)}),!0),n("indentUnit",2,Or,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(t){Ir(t),zn(t),hi(t)}),!0),n("lineSeparator",null,(function(t,e){if(t.doc.lineSep=e,e){var n=[],i=t.doc.first;t.doc.iter((function(t){for(var r=0;;){var o=t.text.indexOf(e,r);if(-1==o)break;r=o+e.length,n.push(te(i,o))}i++}));for(var r=n.length-1;r>=0;r--)go(t.doc,e,n[r],te(n[r].line,n[r].ch+e.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=Ea&&t.refresh()})),n("specialCharPlaceholder",Je,(function(t){return t.refresh()}),!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(t,e){return t.getInputField().spellcheck=e}),!0),n("autocorrect",!1,(function(t,e){return t.getInputField().autocorrect=e}),!0),n("autocapitalize",!1,(function(t,e){return t.getInputField().autocapitalize=e}),!0),n("rtlMoveVisually",!x),n("wholeLineUpdateBefore",!0),n("theme","default",(function(t){_a(t),gr(t)}),!0),n("keyMap","default",(function(t,e,n){var i=Ko(e),r=n!=Ea&&Ko(n);r&&r.detach&&r.detach(t,i),i.attach&&i.attach(t,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Ca,!0),n("gutters",[],(function(t,e){t.display.gutterSpecs=fr(e,t.options.lineNumbers),gr(t)}),!0),n("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?ai(t.display)+"px":"0",t.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(t){return Hi(t)}),!0),n("scrollbarStyle","native",(function(t){Ui(t),Hi(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(t,e){t.display.gutterSpecs=fr(t.options.gutters,e),gr(t)}),!0),n("firstLineNumber",1,gr,!0),n("lineNumberFormatter",(function(t){return t}),gr,!0),n("showCursorWhenSelecting",!1,mi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(t,e){"nocursor"==e&&(Di(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)})),n("screenReaderLabel",null,(function(t,e){e=""===e?null:e,t.display.input.screenReaderLabelChanged(e)})),n("disableInput",!1,(function(t,e){e||t.display.input.reset()}),!0),n("dragDrop",!0,Da),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,mi,!0),n("singleCursorHeightPerLine",!0,mi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ir,!0),n("addModeClass",!1,Ir,!0),n("pollInterval",100),n("undoDepth",200,(function(t,e){return t.doc.history.undoDepth=e})),n("historyEventDelay",1250),n("viewportMargin",10,(function(t){return t.refresh()}),!0),n("maxHighlightLength",1e4,Ir,!0),n("moveInputWithCursor",!0,(function(t,e){e||t.display.input.resetPosition()})),n("tabindex",null,(function(t,e){return t.display.input.getField().tabIndex=e||""})),n("autofocus",null),n("direction","ltr",(function(t,e){return t.doc.setDirection(e)}),!0),n("phrases",null)}(ka),qa=(Ga=ka).optionHandlers,$a=Ga.helpers={},Ga.prototype={constructor:Ga,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,e){var n=this.options,i=n[t];n[t]==e&&"mode"!=t||(n[t]=e,qa.hasOwnProperty(t)&&tr(this,qa[t])(this,e,i),pt(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Ko(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:er((function(t,e){var n=t.token?t:Ga.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");!function(t,e,n){for(var i=0,r=n(e);i<t.length&&n(t[i])<=r;)i++;t.splice(i,0,e)}(this.state.overlays,{mode:n,modeSpec:t,opaque:e&&e.opaque,priority:e&&e.priority||0},(function(t){return t.priority})),this.state.modeGen++,hi(this)})),removeOverlay:er((function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,void hi(this)}})),indentLine:er((function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Jt(this.doc,t)&&Ta(this,t,e,n)})),indentSelection:er((function(t){for(var e=this.doc.sel.ranges,n=-1,i=0;i<e.length;i++){var r=e[i];if(r.empty())r.head.line>n&&(Ta(this,r.head.line,t,!0),n=r.head.line,i==this.doc.sel.primIndex&&Ii(this));else{var o=r.from(),a=r.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<n;++l)Ta(this,l,t);var u=this.doc.sel.ranges;0==o.ch&&e.length==u.length&&u[i].from().ch>0&&Kr(this.doc,i,new wr(o,u[i].to()),V)}}})),getTokenAt:function(t,e){return ye(this,t,e)},getLineTokens:function(t,e){return ye(this,te(t),e,!0)},getTokenTypeAt:function(t){t=se(this.doc,t);var e,n=de(this,qt(this.doc,t.line)),i=0,r=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var a=i+r>>1;if((a?n[2*a-1]:0)>=o)r=a;else{if(!(n[2*a+1]<o)){e=n[2*a+2];break}i=a+1}}var s=e?e.indexOf("overlay "):-1;return s<0?e:0==s?null:e.slice(0,s-1)},getModeAt:function(t){var e=this.doc.mode;return e.innerMode?Ga.innerMode(e,this.getTokenAt(t).state).mode:e},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var n=[];if(!$a.hasOwnProperty(e))return n;var i=$a[e],r=this.getModeAt(t);if("string"==typeof r[e])i[r[e]]&&n.push(i[r[e]]);else if(r[e])for(var o=0;o<r[e].length;o++){var a=i[r[e][o]];a&&n.push(a)}else r.helperType&&i[r.helperType]?n.push(i[r.helperType]):i[r.name]&&n.push(i[r.name]);for(var s=0;s<i._global.length;s++){var l=i._global[s];l.pred(r,this)&&-1==z(n,l.val)&&n.push(l.val)}return n},getStateAfter:function(t,e){var n=this.doc;return fe(this,(t=ae(n,null==t?n.first+n.size-1:t))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return $n(this,null==t?n.head:"object"==lc(t)?se(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return qn(this,se(this.doc,t),e||"page")},coordsChar:function(t,e){return Kn(this,(t=Gn(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=Gn(this,{top:t,left:0},e||"page").top,Zt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var i,r=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,r=!0),i=qt(this.doc,t)}else i=t;return Un(this,i,{top:0,left:0},e||"page",n||r).top+(r?this.doc.height-We(i):0)},defaultTextHeight:function(){return ii(this.display)},defaultCharWidth:function(){return ri(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,r){var o,a,s,l=this.display,u=(t=$n(this,se(this.doc,t))).bottom,c=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),l.sizer.appendChild(e),"over"==i)u=t.top;else if("above"==i||"near"==i){var h=Math.max(l.wrapper.clientHeight,this.doc.height),d=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>h)&&t.top>e.offsetHeight?u=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=h&&(u=t.bottom),c+e.offsetWidth>d&&(c=d-e.offsetWidth)}e.style.top=u+"px",e.style.left=e.style.right="","right"==r?(c=l.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?c=0:"middle"==r&&(c=(l.sizer.clientWidth-e.offsetWidth)/2),e.style.left=c+"px"),n&&(o=this,a={left:c,top:u,right:c+e.offsetWidth,bottom:u+e.offsetHeight},null!=(s=Ti(o,a)).scrollTop&&Pi(o,s.scrollTop),null!=s.scrollLeft&&Ni(o,s.scrollLeft))},triggerOnKeyDown:er(ca),triggerOnKeyPress:er(da),triggerOnKeyUp:ha,triggerOnMouseDown:er(ma),execCommand:function(t){if(ea.hasOwnProperty(t))return ea[t].call(null,this)},triggerElectric:er((function(t){Ra(this,t)})),findPosH:function(t,e,n,i){var r=1;e<0&&(r=-1,e=-e);for(var o=se(this.doc,t),a=0;a<e&&!(o=Ba(this.doc,o,r,n,i)).hitSide;++a);return o},moveH:er((function(t,e){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Ba(n.doc,i.head,t,e,n.options.rtlMoveVisually):t<0?i.from():i.to()}),U)})),deleteH:er((function(t,e){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Zo(this,(function(n){var r=Ba(i,n.head,t,e,!1);return t<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(t,e,n,i){var r=1,o=i;e<0&&(r=-1,e=-e);for(var a=se(this.doc,t),s=0;s<e;++s){var l=$n(this,a,"div");if(null==o?o=l.left:l.left=o,(a=ja(this,l,r,n)).hitSide)break}return a},moveV:er((function(t,e){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(a){if(o)return t<0?a.from():a.to();var s=$n(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),r.push(s.left);var l=ja(n,s,t,e);return"page"==e&&a==i.sel.primary()&&Oi(n,qn(n,l,"div").top-s.top),l}),U),r.length)for(var a=0;a<i.sel.ranges.length;a++)i.sel.ranges[a].goalColumn=r[a]})),findWordAt:function(t){var e=qt(this.doc,t.line).text,n=t.ch,i=t.ch;if(e){var r=this.getHelper(t,"wordChars");"before"!=t.sticky&&i!=e.length||!n?++i:--n;for(var o=e.charAt(n),a=tt(o,r)?function(t){return tt(t,r)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!tt(t)};n>0&&a(e.charAt(n-1));)--n;for(;i<e.length&&a(e.charAt(i));)++i}return new wr(te(t.line,n),te(t.line,i))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?L(this.display.cursorDiv,"CodeMirror-overwrite"):C(this.display.cursorDiv,"CodeMirror-overwrite"),pt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==M()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:er((function(t,e){Mi(this,t,e)})),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Cn(this)-this.display.barHeight,width:t.scrollWidth-Cn(this)-this.display.barWidth,clientHeight:Sn(this),clientWidth:kn(this)}},scrollIntoView:er((function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:te(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Li(t),t.curOp.scrollToPos=e}(this,t):Ri(this,t.from,t.to,t.margin)})),setSize:er((function(t,e){var n=this,i=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.options.lineWrapping&&jn(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){di(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,pt(this,"refresh",this)})),operation:function(t){return Qi(this,t)},startOperation:function(){return qi(this)},endOperation:function(){return $i(this)},refresh:er((function(){var t=this.display.cachedTextHeight;hi(this),this.curOp.forceUpdate=!0,zn(this),Mi(this,this.doc.scrollLeft,this.doc.scrollTop),ur(this.display),(null==t||Math.abs(t-ii(this.display))>.5||this.options.lineWrapping)&&li(this),pt(this,"refresh",this)})),swapDoc:er((function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Pr(this,t),zn(this),this.display.input.reset(),Mi(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,e),e})),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},yt(Ga),Ga.registerHelper=function(t,e,n){$a.hasOwnProperty(t)||($a[t]=Ga[t]={_global:[]}),$a[t][e]=n},Ga.registerGlobalHelper=function(t,e,n,i){Ga.registerHelper(t,e,i),$a[t]._global.push({pred:n,val:i})};var Xa="iter insert remove copy getEditor constructor".split(" ");for(var Ka in Io.prototype)Io.prototype.hasOwnProperty(Ka)&&z(Xa,Ka)<0&&(ka.prototype[Ka]=function(t){return function(){return t.apply(this.doc,arguments)}}(Io.prototype[Ka]));return yt(Io),ka.inputStyles={textarea:Ya,contenteditable:za},ka.defineMode=function(t){ka.defaults.mode||"null"==t||(ka.defaults.mode=t),Nt.apply(this,arguments)},ka.defineMIME=function(t,e){Ft[t]=e},ka.defineMode("null",(function(){return{token:function(t){return t.skipToEnd()}}})),ka.defineMIME("text/plain","null"),ka.defineExtension=function(t,e){ka.prototype[t]=e},ka.defineDocExtension=function(t,e){Io.prototype[t]=e},ka.fromTextArea=function(t,e){if((e=e?N(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=M();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function i(){t.value=s.getValue()}var r;if(t.form&&(ht(t.form,"submit",i),!e.leaveSubmitMethodAlone)){var o=t.form;r=o.submit;try{var a=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=a}}catch(t){}}e.finishInit=function(n){n.save=i,n.getTextArea=function(){return t},n.toTextArea=function(){n.toTextArea=isNaN,i(),t.parentNode.removeChild(n.getWrapperElement()),t.style.display="",t.form&&(ft(t.form,"submit",i),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=r))}},t.style.display="none";var s=ka((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),e);return s},function(t){t.off=ft,t.on=ht,t.wheelEventPixels=xr,t.Doc=Io,t.splitLines=It,t.countColumn=B,t.findColumn=G,t.isWordChar=Q,t.Pass=H,t.signal=pt,t.Line=qe,t.changeEnd=Cr,t.scrollbarModel=Wi,t.Pos=te,t.cmpPos=ee,t.modes=Pt,t.mimeModes=Ft,t.resolveMode=Bt,t.getMode=jt,t.modeExtensions=zt,t.extendMode=Ht,t.copyState=Vt,t.startState=Ut,t.innerMode=Wt,t.commands=ea,t.keyMap=Wo,t.keyName=Xo,t.isModifierKey=$o,t.lookupKey=qo,t.normalizeKeyMap=Go,t.StringStream=Gt,t.SharedTextMarker=ko,t.TextMarker=Do,t.LineWidget=Eo,t.e_preventDefault=bt,t.e_stopPropagation=xt,t.e_stop=Et,t.addClass=L,t.contains=I,t.rmClass=C,t.keyNames=jo}(ka),ka.version="5.65.4",ka},"object"===lc(t)&&void 0!==e?e.exports=r():"function"==typeof define&&n.amdO?define(r):(i=i||self).CodeMirror=r()})),Ac=mc((function(t,e){var i;i=function(t){var e=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,n=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,i=/[*+-]\s/;function r(t,n){var i=n.line,r=0,o=0,a=e.exec(t.getLine(i)),s=a[1];do{var l=i+(r+=1),u=t.getLine(l),c=e.exec(u);if(c){var h=c[1],d=parseInt(a[3],10)+r-o,f=parseInt(c[3],10),p=f;if(s!==h||isNaN(f)){if(s.length>h.length)return;if(s.length<h.length&&1===r)return;o+=1}else d===f&&(p=f+1),d>f&&(p=d+1),t.replaceRange(u.replace(e,h+p+c[4]+c[5]),{line:l,ch:0},{line:l,ch:u.length})}}while(c)}t.commands.newlineAndIndentContinueMarkdownList=function(o){if(o.getOption("disableInput"))return t.Pass;for(var a=o.listSelections(),s=[],l=0;l<a.length;l++){var u=a[l].head,c=o.getStateAfter(u.line),h=t.innerMode(o.getMode(),c);if("markdown"!==h.mode.name&&"markdown"!==h.mode.helperType)return void o.execCommand("newlineAndIndent");var d=!1!==(c=h.state).list,f=0!==c.quote,p=o.getLine(u.line),g=e.exec(p),m=/^\s*$/.test(p.slice(0,u.ch));if(!a[l].empty()||!d&&!f||!g||m)return void o.execCommand("newlineAndIndent");if(n.test(p)){var v=f&&/>\s*$/.test(p),y=!/>\s*$/.test(p);(v||y)&&o.replaceRange("",{line:u.line,ch:0},{line:u.line,ch:u.ch+1}),s[l]="\n"}else{var b=g[1],x=g[5],_=!(i.test(g[2])||g[2].indexOf(">")>=0),E=_?parseInt(g[3],10)+1+g[4]:g[2].replace("x"," ");s[l]="\n"+b+E+x,_&&r(o,u)}}o.replaceSelections(s)}},"object"==lc(t)&&"object"==lc(e)?i(wc()):"function"==typeof define&&n.amdO?define(["../../lib/codemirror"],i):i(CodeMirror)})),Dc=mc((function(){var t=wc();t.commands.tabAndIndentMarkdownList=function(t){var e=t.listSelections()[0].head;if(!1!==t.getStateAfter(e.line).list)t.execCommand("indentMore");else if(t.options.indentWithTabs)t.execCommand("insertTab");else{var n=Array(t.options.tabSize+1).join(" ");t.replaceSelection(n)}},t.commands.shiftTabAndUnindentMarkdownList=function(t){var e=t.listSelections()[0].head;if(!1!==t.getStateAfter(e.line).list)t.execCommand("indentLess");else if(t.options.indentWithTabs)t.execCommand("insertTab");else{var n=Array(t.options.tabSize+1).join(" ");t.replaceSelection(n)}}})),Cc=mc((function(t,e){var i;i=function(t){t.defineOption("fullScreen",!1,(function(e,n,i){i==t.Init&&(i=!1),!i!=!n&&(n?function(t){var e=t.getWrapperElement();t.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:e.style.width,height:e.style.height},e.style.width="",e.style.height="auto",e.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",t.refresh()}(e):function(t){var e=t.getWrapperElement();e.className=e.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=t.state.fullScreenRestore;e.style.width=n.width,e.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),t.refresh()}(e))}))},"object"==lc(t)&&"object"==lc(e)?i(wc()):"function"==typeof define&&n.amdO?define(["../../lib/codemirror"],i):i(CodeMirror)})),kc=mc((function(t,e){var i;i=function(t){var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",(function(i,r){var o,a,s=i.indentUnit,l={},u=r.htmlMode?e:n;for(var c in u)l[c]=u[c];for(var c in r)l[c]=r[c];function h(t,e){function n(n){return e.tokenize=n,n(t,e)}var i=t.next();return"<"==i?t.eat("!")?t.eat("[")?t.match("CDATA[")?n(f("atom","]]>")):null:t.match("--")?n(f("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(p(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=f("meta","?>"),"meta"):(o=t.eat("/")?"closeTag":"openTag",e.tokenize=d,"tag bracket"):"&"==i?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function d(t,e){var n,i,r=t.next();if(">"==r||"/"==r&&t.eat(">"))return e.tokenize=h,o=">"==r?"endTag":"selfcloseTag","tag bracket";if("="==r)return o="equals",null;if("<"==r){e.tokenize=h,e.state=b,e.tagName=e.tagStart=null;var a=e.tokenize(t,e);return a?a+" tag error":"tag error"}return/[\'\"]/.test(r)?(e.tokenize=(n=r,i=function(t,e){for(;!t.eol();)if(t.next()==n){e.tokenize=d;break}return"string"},i.isInAttribute=!0,i),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function f(t,e){return function(n,i){for(;!n.eol();){if(n.match(e)){i.tokenize=h;break}n.next()}return t}}function p(t){return function(e,n){for(var i;null!=(i=e.next());){if("<"==i)return n.tokenize=p(t+1),n.tokenize(e,n);if(">"==i){if(1==t){n.tokenize=h;break}return n.tokenize=p(t-1),n.tokenize(e,n)}}return"meta"}}function g(t){return t&&t.toLowerCase()}function m(t,e,n){this.prev=t.context,this.tagName=e||"",this.indent=t.indented,this.startOfLine=n,(l.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function v(t){t.context&&(t.context=t.context.prev)}function y(t,e){for(var n;;){if(!t.context)return;if(n=t.context.tagName,!l.contextGrabbers.hasOwnProperty(g(n))||!l.contextGrabbers[g(n)].hasOwnProperty(g(e)))return;v(t)}}function b(t,e,n){return"openTag"==t?(n.tagStart=e.column(),x):"closeTag"==t?_:b}function x(t,e,n){return"word"==t?(n.tagName=e.current(),a="tag",A):l.allowMissingTagName&&"endTag"==t?(a="tag bracket",A(t,0,n)):(a="error",x)}function _(t,e,n){if("word"==t){var i=e.current();return n.context&&n.context.tagName!=i&&l.implicitlyClosed.hasOwnProperty(g(n.context.tagName))&&v(n),n.context&&n.context.tagName==i||!1===l.matchClosing?(a="tag",E):(a="tag error",w)}return l.allowMissingTagName&&"endTag"==t?(a="tag bracket",E(t,0,n)):(a="error",w)}function E(t,e,n){return"endTag"!=t?(a="error",E):(v(n),b)}function w(t,e,n){return a="error",E(t,0,n)}function A(t,e,n){if("word"==t)return a="attribute",D;if("endTag"==t||"selfcloseTag"==t){var i=n.tagName,r=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==t||l.autoSelfClosers.hasOwnProperty(g(i))?y(n,i):(y(n,i),n.context=new m(n,i,r==n.indented)),b}return a="error",A}function D(t,e,n){return"equals"==t?C:(l.allowMissing||(a="error"),A(t,0,n))}function C(t,e,n){return"string"==t?k:"word"==t&&l.allowUnquoted?(a="string",A):(a="error",A(t,0,n))}function k(t,e,n){return"string"==t?k:A(t,0,n)}return h.isInText=!0,{startState:function(t){var e={tokenize:h,state:b,indented:t||0,tagName:null,tagStart:null,context:null};return null!=t&&(e.baseIndent=t),e},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;o=null;var n=e.tokenize(t,e);return(n||o)&&"comment"!=n&&(a=null,e.state=e.state(o||n,t,e),a&&(n="error"==a?n+" error":a)),n},indent:function(e,n,i){var r=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+s;if(r&&r.noIndent)return t.Pass;if(e.tokenize!=d&&e.tokenize!=h)return i?i.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==l.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+s*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var o=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(o&&o[1])for(;r;){if(r.tagName==o[2]){r=r.prev;break}if(!l.implicitlyClosed.hasOwnProperty(g(r.tagName)))break;r=r.prev}else if(o)for(;r;){var a=l.contextGrabbers[g(r.tagName)];if(!a||!a.hasOwnProperty(g(o[2])))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+s:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(t){t.state==C&&(t.state=A)},xmlCurrentTag:function(t){return t.tagName?{name:t.tagName,close:"closeTag"==t.type}:null},xmlCurrentContext:function(t){for(var e=[],n=t.context;n;n=n.prev)e.push(n.tagName);return e.reverse()}}})),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})},"object"==lc(t)&&"object"==lc(e)?i(wc()):"function"==typeof define&&n.amdO?define(["../../lib/codemirror"],i):i(CodeMirror)})),Sc=mc((function(t,e){var i;i=function(t){t.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var e=0;e<t.modeInfo.length;e++){var n=t.modeInfo[e];n.mimes&&(n.mime=n.mimes[0])}t.findModeByMIME=function(e){e=e.toLowerCase();for(var n=0;n<t.modeInfo.length;n++){var i=t.modeInfo[n];if(i.mime==e)return i;if(i.mimes)for(var r=0;r<i.mimes.length;r++)if(i.mimes[r]==e)return i}return/\+xml$/.test(e)?t.findModeByMIME("application/xml"):/\+json$/.test(e)?t.findModeByMIME("application/json"):void 0},t.findModeByExtension=function(e){e=e.toLowerCase();for(var n=0;n<t.modeInfo.length;n++){var i=t.modeInfo[n];if(i.ext)for(var r=0;r<i.ext.length;r++)if(i.ext[r]==e)return i}},t.findModeByFileName=function(e){for(var n=0;n<t.modeInfo.length;n++){var i=t.modeInfo[n];if(i.file&&i.file.test(e))return i}var r=e.lastIndexOf("."),o=r>-1&&e.substring(r+1,e.length);if(o)return t.findModeByExtension(o)},t.findModeByName=function(e){e=e.toLowerCase();for(var n=0;n<t.modeInfo.length;n++){var i=t.modeInfo[n];if(i.name.toLowerCase()==e)return i;if(i.alias)for(var r=0;r<i.alias.length;r++)if(i.alias[r].toLowerCase()==e)return i}}},"object"==lc(t)&&"object"==lc(e)?i(wc()):"function"==typeof define&&n.amdO?define(["../lib/codemirror"],i):i(CodeMirror)})),Tc=mc((function(t,e){var i;i=function(t){t.defineMode("markdown",(function(e,n){var i=t.getMode(e,"text/html"),r="null"==i.name;void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.emoji&&(n.emoji=!1),void 0===n.fencedCodeBlockHighlighting&&(n.fencedCodeBlockHighlighting=!0),void 0===n.fencedCodeBlockDefaultMode&&(n.fencedCodeBlockDefaultMode="text/plain"),void 0===n.xml&&(n.xml=!0),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var o={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var a in o)o.hasOwnProperty(a)&&n.tokenTypeOverrides[a]&&(o[a]=n.tokenTypeOverrides[a]);var s=/^([*\-_])(?:\s*\1){2,}\s*$/,l=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,u=/^\[(x| )\](?=\s)/i,c=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,h=/^ {0,3}(?:\={1,}|-{2,})\s*$/,d=/^[^#!\[\]*_\\<>` "'(~:]+/,f=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,p=/^\s*\[[^\]]+?\]:.*$/,g=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function m(t,e,n){return e.f=e.inline=n,n(t,e)}function v(t,e,n){return e.f=e.block=n,n(t,e)}function y(e){if(e.linkTitle=!1,e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,e.f==x){var n=r;if(!n){var o=t.innerMode(i,e.htmlState);n="xml"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText}n&&(e.f=A,e.block=b,e.htmlState=null)}return e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine={stream:null},null}function b(i,r){var a,d=i.column()===r.indentation,g=!(a=r.prevLine.stream)||!/\S/.test(a.string),v=r.indentedCode,y=r.prevLine.hr,b=!1!==r.list,x=(r.listStack[r.listStack.length-1]||0)+3;r.indentedCode=!1;var w=r.indentation;if(null===r.indentationDiff&&(r.indentationDiff=r.indentation,b)){for(r.list=null;w<r.listStack[r.listStack.length-1];)r.listStack.pop(),r.listStack.length?r.indentation=r.listStack[r.listStack.length-1]:r.list=!1;!1!==r.list&&(r.indentationDiff=w-r.listStack[r.listStack.length-1])}var A=!(g||y||r.prevLine.header||b&&v||r.prevLine.fencedCodeEnd),D=(!1===r.list||y||g)&&r.indentation<=x&&i.match(s),C=null;if(r.indentationDiff>=4&&(v||r.prevLine.fencedCodeEnd||r.prevLine.header||g))return i.skipToEnd(),r.indentedCode=!0,o.code;if(i.eatSpace())return null;if(d&&r.indentation<=x&&(C=i.match(c))&&C[1].length<=6)return r.quote=0,r.header=C[1].length,r.thisLine.header=!0,n.highlightFormatting&&(r.formatting="header"),r.f=r.inline,E(r);if(r.indentation<=x&&i.eat(">"))return r.quote=d?1:r.quote+1,n.highlightFormatting&&(r.formatting="quote"),i.eatSpace(),E(r);if(!D&&!r.setext&&d&&r.indentation<=x&&(C=i.match(l))){var k=C[1]?"ol":"ul";return r.indentation=w+i.current().length,r.list=!0,r.quote=0,r.listStack.push(r.indentation),r.em=!1,r.strong=!1,r.code=!1,r.strikethrough=!1,n.taskLists&&i.match(u,!1)&&(r.taskList=!0),r.f=r.inline,n.highlightFormatting&&(r.formatting=["list","list-"+k]),E(r)}return d&&r.indentation<=x&&(C=i.match(f,!0))?(r.quote=0,r.fencedEndRE=new RegExp(C[1]+"+ *$"),r.localMode=n.fencedCodeBlockHighlighting&&function(n){if(t.findModeByName){var i=t.findModeByName(n);i&&(n=i.mime||i.mimes[0])}var r=t.getMode(e,n);return"null"==r.name?null:r}(C[2]||n.fencedCodeBlockDefaultMode),r.localMode&&(r.localState=t.startState(r.localMode)),r.f=r.block=_,n.highlightFormatting&&(r.formatting="code-block"),r.code=-1,E(r)):r.setext||!(A&&b||r.quote||!1!==r.list||r.code||D||p.test(i.string))&&(C=i.lookAhead(1))&&(C=C.match(h))?(r.setext?(r.header=r.setext,r.setext=0,i.skipToEnd(),n.highlightFormatting&&(r.formatting="header")):(r.header="="==C[0].charAt(0)?1:2,r.setext=r.header),r.thisLine.header=!0,r.f=r.inline,E(r)):D?(i.skipToEnd(),r.hr=!0,r.thisLine.hr=!0,o.hr):"["===i.peek()?m(i,r,S):m(i,r,r.inline)}function x(e,n){var o=i.token(e,n.htmlState);if(!r){var a=t.innerMode(i,n.htmlState);("xml"==a.mode.name&&null===a.state.tagStart&&!a.state.context&&a.state.tokenize.isInText||n.md_inside&&e.current().indexOf(">")>-1)&&(n.f=A,n.block=b,n.htmlState=null)}return o}function _(t,e){var i,r=e.listStack[e.listStack.length-1]||0,a=e.indentation<r,s=r+3;return e.fencedEndRE&&e.indentation<=s&&(a||t.match(e.fencedEndRE))?(n.highlightFormatting&&(e.formatting="code-block"),a||(i=E(e)),e.localMode=e.localState=null,e.block=b,e.f=A,e.fencedEndRE=null,e.code=0,e.thisLine.fencedCodeEnd=!0,a?v(t,e,e.block):i):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),o.code)}function E(t){var e=[];if(t.formatting){e.push(o.formatting),"string"==typeof t.formatting&&(t.formatting=[t.formatting]);for(var i=0;i<t.formatting.length;i++)e.push(o.formatting+"-"+t.formatting[i]),"header"===t.formatting[i]&&e.push(o.formatting+"-"+t.formatting[i]+"-"+t.header),"quote"===t.formatting[i]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=t.quote?e.push(o.formatting+"-"+t.formatting[i]+"-"+t.quote):e.push("error"))}if(t.taskOpen)return e.push("meta"),e.length?e.join(" "):null;if(t.taskClosed)return e.push("property"),e.length?e.join(" "):null;if(t.linkHref?e.push(o.linkHref,"url"):(t.strong&&e.push(o.strong),t.em&&e.push(o.em),t.strikethrough&&e.push(o.strikethrough),t.emoji&&e.push(o.emoji),t.linkText&&e.push(o.linkText),t.code&&e.push(o.code),t.image&&e.push(o.image),t.imageAltText&&e.push(o.imageAltText,"link"),t.imageMarker&&e.push(o.imageMarker)),t.header&&e.push(o.header,o.header+"-"+t.header),t.quote&&(e.push(o.quote),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=t.quote?e.push(o.quote+"-"+t.quote):e.push(o.quote+"-"+n.maxBlockquoteDepth)),!1!==t.list){var r=(t.listStack.length-1)%3;r?1===r?e.push(o.list2):e.push(o.list3):e.push(o.list1)}return t.trailingSpaceNewLine?e.push("trailing-space-new-line"):t.trailingSpace&&e.push("trailing-space-"+(t.trailingSpace%2?"a":"b")),e.length?e.join(" "):null}function w(t,e){if(t.match(d,!0))return E(e)}function A(e,r){var a=r.text(e,r);if(void 0!==a)return a;if(r.list)return r.list=null,E(r);if(r.taskList)return" "===e.match(u,!0)[1]?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,E(r);if(r.taskOpen=!1,r.taskClosed=!1,r.header&&e.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"),E(r);var s=e.next();if(r.linkTitle){r.linkTitle=!1;var l=s;"("===s&&(l=")");var c="^\\s*(?:[^"+(l=(l+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+l;if(e.match(new RegExp(c),!0))return o.linkHref}if("`"===s){var h=r.formatting;n.highlightFormatting&&(r.formatting="code"),e.eatWhile("`");var d=e.current().length;if(0!=r.code||r.quote&&1!=d){if(d==r.code){var f=E(r);return r.code=0,f}return r.formatting=h,E(r)}return r.code=d,E(r)}if(r.code)return E(r);if("\\"===s&&(e.next(),n.highlightFormatting)){var p=E(r),m=o.formatting+"-escape";return p?p+" "+m:m}if("!"===s&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return r.imageMarker=!0,r.image=!0,n.highlightFormatting&&(r.formatting="image"),E(r);if("["===s&&r.imageMarker&&e.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return r.imageMarker=!1,r.imageAltText=!0,n.highlightFormatting&&(r.formatting="image"),E(r);if("]"===s&&r.imageAltText){n.highlightFormatting&&(r.formatting="image");var p=E(r);return r.imageAltText=!1,r.image=!1,r.inline=r.f=C,p}if("["===s&&!r.image)return r.linkText&&e.match(/^.*?\]/)||(r.linkText=!0,n.highlightFormatting&&(r.formatting="link")),E(r);if("]"===s&&r.linkText){n.highlightFormatting&&(r.formatting="link");var p=E(r);return r.linkText=!1,r.inline=r.f=e.match(/\(.*?\)| ?\[.*?\]/,!1)?C:A,p}if("<"===s&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return r.f=r.inline=D,n.highlightFormatting&&(r.formatting="link"),(p=E(r))?p+=" ":p="",p+o.linkInline;if("<"===s&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return r.f=r.inline=D,n.highlightFormatting&&(r.formatting="link"),(p=E(r))?p+=" ":p="",p+o.linkEmail;if(n.xml&&"<"===s&&e.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var y=e.string.indexOf(">",e.pos);if(-1!=y){var b=e.string.substring(e.start,y);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(b)&&(r.md_inside=!0)}return e.backUp(1),r.htmlState=t.startState(i),v(e,r,x)}if(n.xml&&"<"===s&&e.match(/^\/\w*?>/))return r.md_inside=!1,"tag";if("*"===s||"_"===s){for(var _=1,w=1==e.pos?" ":e.string.charAt(e.pos-2);_<3&&e.eat(s);)_++;var k=e.peek()||" ",S=!/\s/.test(k)&&(!g.test(k)||/\s/.test(w)||g.test(w)),T=!/\s/.test(w)&&(!g.test(w)||/\s/.test(k)||g.test(k)),O=null,I=null;if(_%2&&(r.em||!S||"*"!==s&&T&&!g.test(w)?r.em!=s||!T||"*"!==s&&S&&!g.test(k)||(O=!1):O=!0),_>1&&(r.strong||!S||"*"!==s&&T&&!g.test(w)?r.strong!=s||!T||"*"!==s&&S&&!g.test(k)||(I=!1):I=!0),null!=I||null!=O)return n.highlightFormatting&&(r.formatting=null==O?"strong":null==I?"em":"strong em"),!0===O&&(r.em=s),!0===I&&(r.strong=s),f=E(r),!1===O&&(r.em=!1),!1===I&&(r.strong=!1),f}else if(" "===s&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return E(r);e.backUp(1)}if(n.strikethrough)if("~"===s&&e.eatWhile(s)){if(r.strikethrough)return n.highlightFormatting&&(r.formatting="strikethrough"),f=E(r),r.strikethrough=!1,f;if(e.match(/^[^\s]/,!1))return r.strikethrough=!0,n.highlightFormatting&&(r.formatting="strikethrough"),E(r)}else if(" "===s&&e.match("~~",!0)){if(" "===e.peek())return E(r);e.backUp(2)}if(n.emoji&&":"===s&&e.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){r.emoji=!0,n.highlightFormatting&&(r.formatting="emoji");var M=E(r);return r.emoji=!1,M}return" "===s&&(e.match(/^ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),E(r)}function D(t,e){if(">"===t.next()){e.f=e.inline=A,n.highlightFormatting&&(e.formatting="link");var i=E(e);return i?i+=" ":i="",i+o.linkInline}return t.match(/^[^>]+/,!0),o.linkInline}function C(t,e){if(t.eatSpace())return null;var i,r=t.next();return"("===r||"["===r?(e.f=e.inline=(i="("===r?")":"]",function(t,e){if(t.next()===i){e.f=e.inline=A,n.highlightFormatting&&(e.formatting="link-string");var r=E(e);return e.linkHref=!1,r}return t.match(k[i]),e.linkHref=!0,E(e)}),n.highlightFormatting&&(e.formatting="link-string"),e.linkHref=!0,E(e)):"error"}var k={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function S(t,e){return t.match(/^([^\]\\]|\\.)*\]:/,!1)?(e.f=T,t.next(),n.highlightFormatting&&(e.formatting="link"),e.linkText=!0,E(e)):m(t,e,A)}function T(t,e){if(t.match("]:",!0)){e.f=e.inline=O,n.highlightFormatting&&(e.formatting="link");var i=E(e);return e.linkText=!1,i}return t.match(/^([^\]\\]|\\.)+/,!0),o.linkText}function O(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),e.f=e.inline=A,o.linkHref+" url")}var I={startState:function(){return{f:b,prevLine:{stream:null},thisLine:{stream:null},block:b,htmlState:null,indentation:0,inline:A,text:w,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,htmlState:e.htmlState&&t.copyState(i,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?t.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkTitle:e.linkTitle,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,setext:e.setext,hr:e.hr,taskList:e.taskList,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE}},token:function(t,e){if(e.formatting=!1,t!=e.thisLine.stream){if(e.header=0,e.hr=!1,t.match(/^\s*$/,!0))return y(e),null;if(e.prevLine=e.thisLine,e.thisLine={stream:t},e.taskList=!1,e.trailingSpace=0,e.trailingSpaceNewLine=!1,!e.localState&&(e.f=e.block,e.f!=x)){var n=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(e.indentation=n,e.indentationDiff=null,n>0)return null}}return e.f(t,e)},innerMode:function(t){return t.block==x?{state:t.htmlState,mode:i}:t.localState?{state:t.localState,mode:t.localMode}:{state:t,mode:I}},indent:function(e,n,r){return e.block==x&&i.indent?i.indent(e.htmlState,n,r):e.localState&&e.localMode.indent?e.localMode.indent(e.localState,n,r):t.Pass},blankLine:y,getType:E,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return I}),"xml"),t.defineMIME("text/markdown","markdown"),t.defineMIME("text/x-markdown","markdown")},"object"==lc(t)&&"object"==lc(e)?i(wc(),kc(),Sc()):"function"==typeof define&&n.amdO?define(["../../lib/codemirror","../xml/xml","../meta"],i):i(CodeMirror)})),Oc=mc((function(t,e){var i;i=function(t){t.overlayMode=function(e,n,i){return{startState:function(){return{base:t.startState(e),overlay:t.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(i){return{base:t.copyState(e,i.base),overlay:t.copyState(n,i.overlay),basePos:i.basePos,baseCur:null,overlayPos:i.overlayPos,overlayCur:null}},token:function(t,r){return(t!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<t.start)&&(r.streamSeen=t,r.basePos=r.overlayPos=t.start),t.start==r.basePos&&(r.baseCur=e.token(t,r.base),r.basePos=t.pos),t.start==r.overlayPos&&(t.pos=t.start,r.overlayCur=n.token(t,r.overlay),r.overlayPos=t.pos),t.pos=Math.min(r.basePos,r.overlayPos),null==r.overlayCur?r.baseCur:null!=r.baseCur&&r.overlay.combineTokens||i&&null==r.overlay.combineTokens?r.baseCur+" "+r.overlayCur:r.overlayCur},indent:e.indent&&function(t,n,i){return e.indent(t.base,n,i)},electricChars:e.electricChars,innerMode:function(t){return{state:t.base,mode:e}},blankLine:function(t){var r,o;return e.blankLine&&(r=e.blankLine(t.base)),n.blankLine&&(o=n.blankLine(t.overlay)),null==o?r:i&&null!=r?r+" "+o:o}}}},"object"==lc(t)&&"object"==lc(e)?i(wc()):"function"==typeof define&&n.amdO?define(["../../lib/codemirror"],i):i(CodeMirror)})),Ic=mc((function(t,e){var i;i=function(t){function e(t){t.state.placeholder&&(t.state.placeholder.parentNode.removeChild(t.state.placeholder),t.state.placeholder=null)}function n(t){e(t);var n=t.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.style.direction=t.getOption("direction"),n.className="CodeMirror-placeholder CodeMirror-line-like";var i=t.getOption("placeholder");"string"==typeof i&&(i=document.createTextNode(i)),n.appendChild(i),t.display.lineSpace.insertBefore(n,t.display.lineSpace.firstChild)}function i(t){o(t)&&n(t)}function r(t){var i=t.getWrapperElement(),r=o(t);i.className=i.className.replace(" CodeMirror-empty","")+(r?" CodeMirror-empty":""),r?n(t):e(t)}function o(t){return 1===t.lineCount()&&""===t.getLine(0)}t.defineOption("placeholder","",(function(o,a,s){var l=s&&s!=t.Init;if(a&&!l)o.on("blur",i),o.on("change",r),o.on("swapDoc",r),t.on(o.getInputField(),"compositionupdate",o.state.placeholderCompose=function(){!function(t){setTimeout((function(){var i=!1;if(1==t.lineCount()){var r=t.getInputField();i="TEXTAREA"==r.nodeName?!t.getLine(0).length:!/[^\u200b]/.test(r.querySelector(".CodeMirror-line").textContent)}i?n(t):e(t)}),20)}(o)}),r(o);else if(!a&&l){o.off("blur",i),o.off("change",r),o.off("swapDoc",r),t.off(o.getInputField(),"compositionupdate",o.state.placeholderCompose),e(o);var u=o.getWrapperElement();u.className=u.className.replace(" CodeMirror-empty","")}a&&!o.hasFocus()&&i(o)}))},"object"==lc(t)&&"object"==lc(e)?i(wc()):"function"==typeof define&&n.amdO?define(["../../lib/codemirror"],i):i(CodeMirror)})),Mc=mc((function(t,e){var i;i=function(t){function e(e,n){clearTimeout(n.timeout),t.off(window,"mouseup",n.hurry),t.off(window,"keyup",n.hurry)}t.defineOption("autoRefresh",!1,(function(n,i){n.state.autoRefresh&&(e(0,n.state.autoRefresh),n.state.autoRefresh=null),i&&0==n.display.wrapper.offsetHeight&&function(n,i){function r(){n.display.wrapper.offsetHeight?(e(0,i),n.display.lastWrapHeight!=n.display.wrapper.clientHeight&&n.refresh()):i.timeout=setTimeout(r,i.delay)}i.timeout=setTimeout(r,i.delay),i.hurry=function(){clearTimeout(i.timeout),i.timeout=setTimeout(r,50)},t.on(window,"mouseup",i.hurry),t.on(window,"keyup",i.hurry)}(n,n.state.autoRefresh={delay:i.delay||250})}))},"object"==lc(t)&&"object"==lc(e)?i(wc()):"function"==typeof define&&n.amdO?define(["../../lib/codemirror"],i):i(CodeMirror)})),Lc=mc((function(t,e){var i;i=function(t){function e(t){t.state.markedSelection&&t.operation((function(){!function(t){if(!t.somethingSelected())return a(t);if(t.listSelections().length>1)return s(t);var e=t.getCursor("start"),n=t.getCursor("end"),i=t.state.markedSelection;if(!i.length)return o(t,e,n);var l=i[0].find(),u=i[i.length-1].find();if(!l||!u||n.line-e.line<=8||r(e,u.to)>=0||r(n,l.from)<=0)return s(t);for(;r(e,l.from)>0;)i.shift().clear(),l=i[0].find();for(r(e,l.from)<0&&(l.to.line-e.line<8?(i.shift().clear(),o(t,e,l.to,0)):o(t,e,l.from,0));r(n,u.to)<0;)i.pop().clear(),u=i[i.length-1].find();r(n,u.to)>0&&(n.line-u.from.line<8?(i.pop().clear(),o(t,u.from,n)):o(t,u.to,n))}(t)}))}function n(t){t.state.markedSelection&&t.state.markedSelection.length&&t.operation((function(){a(t)}))}t.defineOption("styleSelectedText",!1,(function(i,r,o){var l=o&&o!=t.Init;r&&!l?(i.state.markedSelection=[],i.state.markedSelectionStyle="string"==typeof r?r:"CodeMirror-selectedtext",s(i),i.on("cursorActivity",e),i.on("change",n)):!r&&l&&(i.off("cursorActivity",e),i.off("change",n),a(i),i.state.markedSelection=i.state.markedSelectionStyle=null)}));var i=t.Pos,r=t.cmpPos;function o(t,e,n,o){if(0!=r(e,n))for(var a=t.state.markedSelection,s=t.state.markedSelectionStyle,l=e.line;;){var u=l==e.line?e:i(l,0),c=l+8,h=c>=n.line,d=h?n:i(c,0),f=t.markText(u,d,{className:s});if(null==o?a.push(f):a.splice(o++,0,f),h)break;l=c}}function a(t){for(var e=t.state.markedSelection,n=0;n<e.length;++n)e[n].clear();e.length=0}function s(t){a(t);for(var e=t.listSelections(),n=0;n<e.length;n++)o(t,e[n].from(),e[n].to())}},"object"==lc(t)&&"object"==lc(e)?i(wc()):"function"==typeof define&&n.amdO?define(["../../lib/codemirror"],i):i(CodeMirror)})),Rc=mc((function(t,e){var i;i=function(t){var e,n,i=t.Pos;function r(t,e){for(var n=function(t){var e=t.flags;return null!=e?e:(t.ignoreCase?"i":"")+(t.global?"g":"")+(t.multiline?"m":"")}(t),i=n,r=0;r<e.length;r++)-1==i.indexOf(e.charAt(r))&&(i+=e.charAt(r));return n==i?t:new RegExp(t.source,i)}function o(t){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(t.source)}function a(t,e,n){e=r(e,"g");for(var o=n.line,a=n.ch,s=t.lastLine();o<=s;o++,a=0){e.lastIndex=a;var l=t.getLine(o),u=e.exec(l);if(u)return{from:i(o,u.index),to:i(o,u.index+u[0].length),match:u}}}function s(t,e,n){if(!o(e))return a(t,e,n);e=r(e,"gm");for(var s,l=1,u=n.line,c=t.lastLine();u<=c;){for(var h=0;h<l&&!(u>c);h++){var d=t.getLine(u++);s=null==s?d:s+"\n"+d}l*=2,e.lastIndex=n.ch;var f=e.exec(s);if(f){var p=s.slice(0,f.index).split("\n"),g=f[0].split("\n"),m=n.line+p.length-1,v=p[p.length-1].length;return{from:i(m,v),to:i(m+g.length-1,1==g.length?v+g[0].length:g[g.length-1].length),match:f}}}}function l(t,e,n){for(var i,r=0;r<=t.length;){e.lastIndex=r;var o=e.exec(t);if(!o)break;var a=o.index+o[0].length;if(a>t.length-n)break;(!i||a>i.index+i[0].length)&&(i=o),r=o.index+1}return i}function u(t,e,n){e=r(e,"g");for(var o=n.line,a=n.ch,s=t.firstLine();o>=s;o--,a=-1){var u=t.getLine(o),c=l(u,e,a<0?0:u.length-a);if(c)return{from:i(o,c.index),to:i(o,c.index+c[0].length),match:c}}}function c(t,e,n){if(!o(e))return u(t,e,n);e=r(e,"gm");for(var a,s=1,c=t.getLine(n.line).length-n.ch,h=n.line,d=t.firstLine();h>=d;){for(var f=0;f<s&&h>=d;f++){var p=t.getLine(h--);a=null==a?p:p+"\n"+a}s*=2;var g=l(a,e,c);if(g){var m=a.slice(0,g.index).split("\n"),v=g[0].split("\n"),y=h+m.length,b=m[m.length-1].length;return{from:i(y,b),to:i(y+v.length-1,1==v.length?b+v[0].length:v[v.length-1].length),match:g}}}}function h(t,e,n,i){if(t.length==e.length)return n;for(var r=0,o=n+Math.max(0,t.length-e.length);;){if(r==o)return r;var a=r+o>>1,s=i(t.slice(0,a)).length;if(s==n)return a;s>n?o=a:r=a+1}}function d(t,r,o,a){if(!r.length)return null;var s=a?e:n,l=s(r).split(/\r|\n\r?/);t:for(var u=o.line,c=o.ch,d=t.lastLine()+1-l.length;u<=d;u++,c=0){var f=t.getLine(u).slice(c),p=s(f);if(1==l.length){var g=p.indexOf(l[0]);if(-1==g)continue t;return o=h(f,p,g,s)+c,{from:i(u,h(f,p,g,s)+c),to:i(u,h(f,p,g+l[0].length,s)+c)}}var m=p.length-l[0].length;if(p.slice(m)==l[0]){for(var v=1;v<l.length-1;v++)if(s(t.getLine(u+v))!=l[v])continue t;var y=t.getLine(u+l.length-1),b=s(y),x=l[l.length-1];if(b.slice(0,x.length)==x)return{from:i(u,h(f,p,m,s)+c),to:i(u+l.length-1,h(y,b,x.length,s))}}}}function f(t,r,o,a){if(!r.length)return null;var s=a?e:n,l=s(r).split(/\r|\n\r?/);t:for(var u=o.line,c=o.ch,d=t.firstLine()-1+l.length;u>=d;u--,c=-1){var f=t.getLine(u);c>-1&&(f=f.slice(0,c));var p=s(f);if(1==l.length){var g=p.lastIndexOf(l[0]);if(-1==g)continue t;return{from:i(u,h(f,p,g,s)),to:i(u,h(f,p,g+l[0].length,s))}}var m=l[l.length-1];if(p.slice(0,m.length)==m){var v=1;for(o=u-l.length+1;v<l.length-1;v++)if(s(t.getLine(o+v))!=l[v])continue t;var y=t.getLine(u+1-l.length),b=s(y);if(b.slice(b.length-l[0].length)==l[0])return{from:i(u+1-l.length,h(y,b,y.length-l[0].length,s)),to:i(u,h(f,p,m.length,s))}}}}function p(t,e,n,o){var l;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=t,n=n?t.clipPos(n):i(0,0),this.pos={from:n,to:n},"object"==lc(o)?l=o.caseFold:(l=o,o=null),"string"==typeof e?(null==l&&(l=!1),this.matches=function(n,i){return(n?f:d)(t,e,i,l)}):(e=r(e,"gm"),o&&!1===o.multiline?this.matches=function(n,i){return(n?u:a)(t,e,i)}:this.matches=function(n,i){return(n?c:s)(t,e,i)})}String.prototype.normalize?(e=function(t){return t.normalize("NFD").toLowerCase()},n=function(t){return t.normalize("NFD")}):(e=function(t){return t.toLowerCase()},n=function(t){return t}),p.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){var n=this.doc.clipPos(e?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(n=i(n.line,n.ch),e?(n.ch--,n.ch<0&&(n.line--,n.ch=(this.doc.getLine(n.line)||"").length)):(n.ch++,n.ch>(this.doc.getLine(n.line)||"").length&&(n.ch=0,n.line++)),0!=t.cmpPos(n,this.doc.clipPos(n))))return this.atOccurrence=!1;var r=this.matches(e,n);if(this.afterEmptyMatch=r&&0==t.cmpPos(r.from,r.to),r)return this.pos=r,this.atOccurrence=!0,this.pos.match||!0;var o=i(e?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:o,to:o},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e,n){if(this.atOccurrence){var r=t.splitLines(e);this.doc.replaceRange(r,this.pos.from,this.pos.to,n),this.pos.to=i(this.pos.from.line+r.length-1,r[r.length-1].length+(1==r.length?this.pos.from.ch:0))}}},t.defineExtension("getSearchCursor",(function(t,e,n){return new p(this.doc,t,e,n)})),t.defineDocExtension("getSearchCursor",(function(t,e,n){return new p(this,t,e,n)})),t.defineExtension("selectMatches",(function(e,n){for(var i=[],r=this.getSearchCursor(e,this.getCursor("from"),n);r.findNext()&&!(t.cmpPos(r.to(),this.getCursor("to"))>0);)i.push({anchor:r.from(),head:r.to()});i.length&&this.setSelections(i,0)}))},"object"==lc(t)&&"object"==lc(e)?i(wc()):"function"==typeof define&&n.amdO?define(["../../lib/codemirror"],i):i(CodeMirror)})),Pc=mc((function(t,e){var i;i=function(t){var e=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?]))/i;t.defineMode("gfm",(function(n,i){var r=0,o={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(t){return{code:t.code,codeBlock:t.codeBlock,ateSpace:t.ateSpace}},token:function(t,n){if(n.combineTokens=null,n.codeBlock)return t.match(/^```+/)?(n.codeBlock=!1,null):(t.skipToEnd(),null);if(t.sol()&&(n.code=!1),t.sol()&&t.match(/^```+/))return t.skipToEnd(),n.codeBlock=!0,null;if("`"===t.peek()){t.next();var o=t.pos;t.eatWhile("`");var a=1+t.pos-o;return n.code?a===r&&(n.code=!1):(r=a,n.code=!0),null}if(n.code)return t.next(),null;if(t.eatSpace())return n.ateSpace=!0,null;if((t.sol()||n.ateSpace)&&(n.ateSpace=!1,!1!==i.gitHubSpice)){if(t.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return n.combineTokens=!0,"link";if(t.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return n.combineTokens=!0,"link"}return t.match(e)&&"]("!=t.string.slice(t.start-2,t.start)&&(0==t.start||/\W/.test(t.string.charAt(t.start-1)))?(n.combineTokens=!0,"link"):(t.next(),null)},blankLine:function(t){return t.code=!1,null}},a={taskLists:!0,strikethrough:!0,emoji:!0};for(var s in i)a[s]=i[s];return a.name="markdown",t.overlayMode(t.getMode(n,a),o)}),"markdown"),t.defineMIME("text/x-gfm","gfm")},"object"==lc(t)&&"object"==lc(e)?i(wc(),Tc(),Oc()):"function"==typeof define&&n.amdO?define(["../../lib/codemirror","../markdown/markdown","../../addon/mode/overlay"],i):i(CodeMirror)})),Fc=mc((function(){})),Nc=mc((function(t,e){var n;(n=function(t,e,n,i){i=i||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=i.flags||{},this.memoized={},this.loaded=!1;var r,o,a,s,l,u=this;function c(t,e){var n=u._readFile(t,null,i.asyncLoad);i.asyncLoad?n.then((function(t){e(t)})):e(n)}function h(t){e=t,n&&f()}function d(t){n=t,e&&f()}function f(){for(u.rules=u._parseAFF(e),u.compoundRuleCodes={},o=0,s=u.compoundRules.length;o<s;o++){var t=u.compoundRules[o];for(a=0,l=t.length;a<l;a++)u.compoundRuleCodes[t[a]]=[]}for(o in"ONLYINCOMPOUND"in u.flags&&(u.compoundRuleCodes[u.flags.ONLYINCOMPOUND]=[]),u.dictionaryTable=u._parseDIC(n),u.compoundRuleCodes)0===u.compoundRuleCodes[o].length&&delete u.compoundRuleCodes[o];for(o=0,s=u.compoundRules.length;o<s;o++){var r=u.compoundRules[o],c="";for(a=0,l=r.length;a<l;a++){var h=r[a];h in u.compoundRuleCodes?c+="("+u.compoundRuleCodes[h].join("|")+")":c+=h}u.compoundRules[o]=new RegExp(c,"i")}u.loaded=!0,i.asyncLoad&&i.loadedCallback&&i.loadedCallback(u)}return t&&(u.dictionary=t,e&&n?f():"undefined"!=typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(r=i.dictionaryPath?i.dictionaryPath:"typo/dictionaries",e||c(chrome.extension.getURL(r+"/"+t+"/"+t+".aff"),h),n||c(chrome.extension.getURL(r+"/"+t+"/"+t+".dic"),d)):(r=i.dictionaryPath?i.dictionaryPath:"//dictionaries",e||c(r+"/"+t+"/"+t+".aff",h),n||c(r+"/"+t+"/"+t+".dic",d))),this}).prototype={load:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);return this},_readFile:function(t,e,n){if(e=e||"utf8","undefined"!=typeof XMLHttpRequest){var i,r=new XMLHttpRequest;return r.open("GET",t,n),n&&(i=new Promise((function(t,e){r.onload=function(){200===r.status?t(r.responseText):e(r.statusText)},r.onerror=function(){e(r.statusText)}}))),r.overrideMimeType&&r.overrideMimeType("text/plain; charset="+e),r.send(null),n?i:r.responseText}var o=Fc();try{if(o.existsSync(t))return o.readFileSync(t,e);console.log("Path "+t+" does not exist.")}catch(t){return console.log(t),""}},_parseAFF:function(t){var e,n,i,r,o,a,s,l={},u=t.split(/\r?\n/);for(r=0,a=u.length;r<a;r++)if(e=(e=this._removeAffixComments(u[r])).trim()){var c=e.split(/\s+/),h=c[0];if("PFX"==h||"SFX"==h){var d=c[1],f=c[2],p=[];for(o=r+1,s=r+1+(n=parseInt(c[3],10));o<s;o++){var g=(i=u[o].split(/\s+/))[2],m=i[3].split("/"),v=m[0];"0"===v&&(v="");var y=this.parseRuleCodes(m[1]),b=i[4],x={};x.add=v,y.length>0&&(x.continuationClasses=y),"."!==b&&(x.match="SFX"===h?new RegExp(b+"$"):new RegExp("^"+b)),"0"!=g&&(x.remove="SFX"===h?new RegExp(g+"$"):g),p.push(x)}l[d]={type:h,combineable:"Y"==f,entries:p},r+=n}else if("COMPOUNDRULE"===h){for(o=r+1,s=r+1+(n=parseInt(c[1],10));o<s;o++)i=(e=u[o]).split(/\s+/),this.compoundRules.push(i[1]);r+=n}else"REP"===h?3===(i=e.split(/\s+/)).length&&this.replacementTable.push([i[1],i[2]]):this.flags[h]=c[1]}return l},_removeAffixComments:function(t){return t.match(/^\s*#/,"")?"":t},_parseDIC:function(t){var e=(t=this._removeDicComments(t)).split(/\r?\n/),n={};function i(t,e){n.hasOwnProperty(t)||(n[t]=null),e.length>0&&(null===n[t]&&(n[t]=[]),n[t].push(e))}for(var r=1,o=e.length;r<o;r++){var a=e[r];if(a){var s=a.split("/",2),l=s[0];if(s.length>1){var u=this.parseRuleCodes(s[1]);"NEEDAFFIX"in this.flags&&-1!=u.indexOf(this.flags.NEEDAFFIX)||i(l,u);for(var c=0,h=u.length;c<h;c++){var d=u[c],f=this.rules[d];if(f)for(var p=this._applyRule(l,f),g=0,m=p.length;g<m;g++){var v=p[g];if(i(v,[]),f.combineable)for(var y=c+1;y<h;y++){var b=u[y],x=this.rules[b];if(x&&x.combineable&&f.type!=x.type)for(var _=this._applyRule(v,x),E=0,w=_.length;E<w;E++)i(_[E],[])}}d in this.compoundRuleCodes&&this.compoundRuleCodes[d].push(l)}}else i(l.trim(),[])}}return n},_removeDicComments:function(t){return t=t.replace(/^\t.*$/gm,"")},parseRuleCodes:function(t){if(!t)return[];if(!("FLAG"in this.flags))return t.split("");if("long"===this.flags.FLAG){for(var e=[],n=0,i=t.length;n<i;n+=2)e.push(t.substr(n,2));return e}return"num"===this.flags.FLAG?t.split(","):void 0},_applyRule:function(t,e){for(var n=e.entries,i=[],r=0,o=n.length;r<o;r++){var a=n[r];if(!a.match||t.match(a.match)){var s=t;if(a.remove&&(s=s.replace(a.remove,"")),"SFX"===e.type?s+=a.add:s=a.add+s,i.push(s),"continuationClasses"in a)for(var l=0,u=a.continuationClasses.length;l<u;l++){var c=this.rules[a.continuationClasses[l]];c&&(i=i.concat(this._applyRule(s,c)))}}}return i},check:function(t){if(!this.loaded)throw"Dictionary not loaded.";var e=t.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(e))return!0;if(e.toUpperCase()===e){var n=e[0]+e.substring(1).toLowerCase();if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0;if(this.checkExact(e.toLowerCase()))return!0}var i=e[0].toLowerCase()+e.substring(1);if(i!==e){if(this.hasFlag(i,"KEEPCASE"))return!1;if(this.checkExact(i))return!0}return!1},checkExact:function(t){if(!this.loaded)throw"Dictionary not loaded.";var e,n,i=this.dictionaryTable[t];if(void 0===i){if("COMPOUNDMIN"in this.flags&&t.length>=this.flags.COMPOUNDMIN)for(e=0,n=this.compoundRules.length;e<n;e++)if(t.match(this.compoundRules[e]))return!0}else{if(null===i)return!0;if("object"===lc(i))for(e=0,n=i.length;e<n;e++)if(!this.hasFlag(t,"ONLYINCOMPOUND",i[e]))return!0}return!1},hasFlag:function(t,e,n){if(!this.loaded)throw"Dictionary not loaded.";return!(!(e in this.flags)||(void 0===n&&(n=Array.prototype.concat.apply([],this.dictionaryTable[t])),!n||-1===n.indexOf(this.flags[e])))},alphabet:"",suggest:function(t,e){if(!this.loaded)throw"Dictionary not loaded.";if(e=e||5,this.memoized.hasOwnProperty(t)){var n=this.memoized[t].limit;if(e<=n||this.memoized[t].suggestions.length<n)return this.memoized[t].suggestions.slice(0,e)}if(this.check(t))return[];for(var i=0,r=this.replacementTable.length;i<r;i++){var o=this.replacementTable[i];if(-1!==t.indexOf(o[0])){var a=t.replace(o[0],o[1]);if(this.check(a))return[a]}}var s=this;function l(t,e){var n,i,r,o,a={},l=s.alphabet.length;if("string"==typeof t){var u=t;(t={})[u]=!0}for(var u in t)for(n=0,r=u.length+1;n<r;n++){var c=[u.substring(0,n),u.substring(n)];if(c[1]&&(o=c[0]+c[1].substring(1),e&&!s.check(o)||(o in a?a[o]+=1:a[o]=1)),c[1].length>1&&c[1][1]!==c[1][0]&&(o=c[0]+c[1][1]+c[1][0]+c[1].substring(2),e&&!s.check(o)||(o in a?a[o]+=1:a[o]=1)),c[1]){var h=c[1].substring(0,1).toUpperCase()===c[1].substring(0,1)?"uppercase":"lowercase";for(i=0;i<l;i++){var d=s.alphabet[i];"uppercase"===h&&(d=d.toUpperCase()),d!=c[1].substring(0,1)&&(o=c[0]+d+c[1].substring(1),e&&!s.check(o)||(o in a?a[o]+=1:a[o]=1))}}if(c[1])for(i=0;i<l;i++)h=c[0].substring(-1).toUpperCase()===c[0].substring(-1)&&c[1].substring(0,1).toUpperCase()===c[1].substring(0,1)?"uppercase":"lowercase",d=s.alphabet[i],"uppercase"===h&&(d=d.toUpperCase()),o=c[0]+d+c[1],e&&!s.check(o)||(o in a?a[o]+=1:a[o]=1)}return a}return s.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[t]={suggestions:function(t){var n,i=l(t),r=l(i,!0);for(var o in i)s.check(o)&&(o in r?r[o]+=i[o]:r[o]=i[o]);var a=[];for(n in r)r.hasOwnProperty(n)&&a.push([n,r[n]]);a.sort((function(t,e){var n=t[1],i=e[1];return n<i?-1:n>i?1:e[0].localeCompare(t[0])})).reverse();var u=[],c="lowercase";t.toUpperCase()===t?c="uppercase":t.substr(0,1).toUpperCase()+t.substr(1).toLowerCase()===t&&(c="capitalized");var h=e;for(n=0;n<Math.min(h,a.length);n++)"uppercase"===c?a[n][0]=a[n][0].toUpperCase():"capitalized"===c&&(a[n][0]=a[n][0].substr(0,1).toUpperCase()+a[n][0].substr(1)),s.hasFlag(a[n][0],"NOSUGGEST")||-1!=u.indexOf(a[n][0])?h++:u.push(a[n][0]);return u}(t),limit:e},this.memoized[t].suggestions}},void 0!==e&&(e.exports=n)})),Bc=mc((function(t,e){var n=Nc();function i(t){"function"==typeof(t=t||{}).codeMirrorInstance&&"function"==typeof t.codeMirrorInstance.defineMode?(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),t.codeMirrorInstance.defineMode("spell-checker",(function(e){if(!i.aff_loading){i.aff_loading=!0;var r=new XMLHttpRequest;r.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),r.onload=function(){4===r.readyState&&200===r.status&&(i.aff_data=r.responseText,i.num_loaded++,2==i.num_loaded&&(i.typo=new n("en_US",i.aff_data,i.dic_data,{platform:"any"})))},r.send(null)}if(!i.dic_loading){i.dic_loading=!0;var o=new XMLHttpRequest;o.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),o.onload=function(){4===o.readyState&&200===o.status&&(i.dic_data=o.responseText,i.num_loaded++,2==i.num_loaded&&(i.typo=new n("en_US",i.aff_data,i.dic_data,{platform:"any"})))},o.send(null)}var a='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',s={token:function(t){var e=t.peek(),n="";if(a.includes(e))return t.next(),null;for(;null!=(e=t.peek())&&!a.includes(e);)n+=e,t.next();return i.typo&&!i.typo.check(n)?"spell-error":null}},l=t.codeMirrorInstance.getMode(e,e.backdrop||"text/plain");return t.codeMirrorInstance.overlayMode(l,s,!0)}))):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}i.num_loaded=0,i.aff_loading=!1,i.dic_loading=!1,i.aff_data="",i.dic_data="",i.typo,e.exports=i})),jc=mc((function(t){function e(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}gc(t),vc(t,{Lexer:function(){return L},Parser:function(){return N},Renderer:function(){return R},Slugger:function(){return F},TextRenderer:function(){return P},Tokenizer:function(){return S},defaults:function(){return n},getDefaults:function(){return e},lexer:function(){return q},marked:function(){return B},options:function(){return j},parse:function(){return U},parseInline:function(){return W},parser:function(){return G},setOptions:function(){return z},use:function(){return H},walkTokens:function(){return V}});var n={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var i=/[&<>"']/,r=/[&<>"']/g,o=/[<>"']|&(?!#?\w+;)/,a=/[<>"']|&(?!#?\w+;)/g,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=function(t){return s[t]};function u(t,e){if(e){if(i.test(t))return t.replace(r,l)}else if(o.test(t))return t.replace(a,l);return t}var c=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function h(t){return t.replace(c,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}var d=/(^|[^\[])\^/g;function f(t,e){t="string"==typeof t?t:t.source,e=e||"";var n={replace:function(e,i){return i=(i=i.source||i).replace(d,"$1"),t=t.replace(e,i),n},getRegex:function(){return new RegExp(t,e)}};return n}var p=/[^\w:]/g,g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function m(t,e,n){if(t){var i;try{i=decodeURIComponent(h(n)).replace(p,"").toLowerCase()}catch(t){return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!g.test(n)&&(n=function(t,e){v[" "+t]||(y.test(t)?v[" "+t]=t+"/":v[" "+t]=A(t,"/",!0));var n=-1===(t=v[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(b,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(x,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n}var v={},y=/^[^:]+:\/*[^/]*$/,b=/^([^:]+:)[\s\S]*$/,x=/^([^:]+:\/*[^/]*)[\s\S]*$/;var _={exec:function(){}};function E(t){for(var e,n,i=1;i<arguments.length;i++)for(n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function w(t,e){var n=t.replace(/\|/g,(function(t,e,n){for(var i=!1,r=e;--r>=0&&"\\"===n[r];)i=!i;return i?"|":" |"})).split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function A(t,e,n){var i=t.length;if(0===i)return"";for(var r=0;r<i;){var o=t.charAt(i-r-1);if(o!==e||n){if(o===e||!n)break;r++}else r++}return t.slice(0,i-r)}function D(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function C(t,e){if(e<1)return"";for(var n="";e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t}function k(t,e,n,i){var r=e.href,o=e.title?u(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;var s={type:"link",raw:n,href:r,title:o,text:a,tokens:i.inlineTokens(a,[])};return i.state.inLink=!1,s}return{type:"image",raw:n,href:r,title:o,text:u(a)}}var S=function(){function t(e){ec(this,t),this.options=e||n}return ic(t,[{key:"space",value:function(t){var e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}},{key:"code",value:function(t){var e=this.rules.block.code.exec(t);if(e){var n=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:A(n,"\n")}}}},{key:"fences",value:function(t){var e=this.rules.block.fences.exec(t);if(e){var n=e[0],i=function(t,e){var n=t.match(/^(\s+)(?:```)/);if(null===n)return e;var i=n[1];return e.split("\n").map((function(t){var e=t.match(/^\s+/);return null===e?t:rc(e,1)[0].length>=i.length?t.slice(i.length):t})).join("\n")}(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim():e[2],text:i}}}},{key:"heading",value:function(t){var e=this.rules.block.heading.exec(t);if(e){var n=e[2].trim();if(/#$/.test(n)){var i=A(n,"#");this.options.pedantic?n=i.trim():i&&!/ $/.test(i)||(n=i.trim())}var r={type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}},{key:"hr",value:function(t){var e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}},{key:"blockquote",value:function(t){var e=this.rules.block.blockquote.exec(t);if(e){var n=e[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:e[0],tokens:this.lexer.blockTokens(n,[]),text:n}}}},{key:"list",value:function(t){var e=this.rules.block.list.exec(t);if(e){var n,i,r,o,a,s,l,u,c,h,d,f,p=e[1].trim(),g=p.length>1,m={type:"list",raw:"",ordered:g,start:g?+p.slice(0,-1):"",loose:!1,items:[]};p=g?"\\d{1,9}\\".concat(p.slice(-1)):"\\".concat(p),this.options.pedantic&&(p=g?p:"[*+-]");for(var v=new RegExp("^( {0,3}".concat(p,")((?:[\t ][^\\n]*)?(?:\\n|$))"));t&&(f=!1,e=v.exec(t))&&!this.rules.block.hr.test(t);){if(n=e[0],t=t.substring(n.length),u=e[2].split("\n",1)[0],c=t.split("\n",1)[0],this.options.pedantic?(o=2,d=u.trimLeft()):(o=(o=e[2].search(/[^ ]/))>4?1:o,d=u.slice(o),o+=e[1].length),s=!1,!u&&/^ *$/.test(c)&&(n+=c+"\n",t=t.substring(c.length+1),f=!0),!f)for(var y=new RegExp("^ {0,".concat(Math.min(3,o-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),b=new RegExp("^ {0,".concat(Math.min(3,o-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"));t&&(u=h=t.split("\n",1)[0],this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!y.test(u))&&!b.test(t);){if(u.search(/[^ ]/)>=o||!u.trim())d+="\n"+u.slice(o);else{if(s)break;d+="\n"+u}s||u.trim()||(s=!0),n+=h+"\n",t=t.substring(h.length+1)}m.loose||(l?m.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(d))&&(r="[ ] "!==i[0],d=d.replace(/^\[[ xX]\] +/,"")),m.items.push({type:"list_item",raw:n,task:!!i,checked:r,loose:!1,text:d}),m.raw+=n}m.items[m.items.length-1].raw=n.trimRight(),m.items[m.items.length-1].text=d.trimRight(),m.raw=m.raw.trimRight();var x=m.items.length;for(a=0;a<x;a++){this.lexer.state.top=!1,m.items[a].tokens=this.lexer.blockTokens(m.items[a].text,[]);var _=m.items[a].tokens.filter((function(t){return"space"===t.type})),E=_.every((function(t){var e,n=0,i=oc(t.raw.split(""));try{for(i.s();!(e=i.n()).done;){if("\n"===e.value&&(n+=1),n>1)return!0}}catch(t){i.e(t)}finally{i.f()}return!1}));!m.loose&&_.length&&E&&(m.loose=!0,m.items[a].loose=!0)}return m}}},{key:"html",value:function(t){var e=this.rules.block.html.exec(t);if(e){var n={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};return this.options.sanitize&&(n.type="paragraph",n.text=this.options.sanitizer?this.options.sanitizer(e[0]):u(e[0]),n.tokens=[],this.lexer.inline(n.text,n.tokens)),n}}},{key:"def",value:function(t){var e=this.rules.block.def.exec(t);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{type:"def",tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}}},{key:"table",value:function(t){var e=this.rules.block.table.exec(t);if(e){var n={type:"table",header:w(e[1]).map((function(t){return{text:t}})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=e[0];var i,r,o,a,s=n.align.length;for(i=0;i<s;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]="right":/^ *:-+: *$/.test(n.align[i])?n.align[i]="center":/^ *:-+ *$/.test(n.align[i])?n.align[i]="left":n.align[i]=null;for(s=n.rows.length,i=0;i<s;i++)n.rows[i]=w(n.rows[i],n.header.length).map((function(t){return{text:t}}));for(s=n.header.length,r=0;r<s;r++)n.header[r].tokens=[],this.lexer.inline(n.header[r].text,n.header[r].tokens);for(s=n.rows.length,r=0;r<s;r++)for(a=n.rows[r],o=0;o<a.length;o++)a[o].tokens=[],this.lexer.inline(a[o].text,a[o].tokens);return n}}}},{key:"lheading",value:function(t){var e=this.rules.block.lheading.exec(t);if(e){var n={type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}},{key:"paragraph",value:function(t){var e=this.rules.block.paragraph.exec(t);if(e){var n={type:"paragraph",raw:e[0],text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}},{key:"text",value:function(t){var e=this.rules.block.text.exec(t);if(e){var n={type:"text",raw:e[0],text:e[0],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}},{key:"escape",value:function(t){var e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:u(e[1])}}},{key:"tag",value:function(t){var e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):u(e[0]):e[0]}}},{key:"link",value:function(t){var e=this.rules.inline.link.exec(t);if(e){var n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var i=A(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{var r=function(t,e){if(-1===t.indexOf(e[1]))return-1;for(var n=t.length,i=0,r=0;r<n;r++)if("\\"===t[r])r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&--i<0)return r;return-1}(e[2],"()");if(r>-1){var o=(0===e[0].indexOf("!")?5:4)+e[1].length+r;e[2]=e[2].substring(0,r),e[0]=e[0].substring(0,o).trim(),e[3]=""}}var a=e[2],s="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);l&&(a=l[1],s=l[3])}else s=e[3]?e[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(n)?a.slice(1):a.slice(1,-1)),k(e,{href:a?a.replace(this.rules.inline._escapes,"$1"):a,title:s?s.replace(this.rules.inline._escapes,"$1"):s},e[0],this.lexer)}}},{key:"reflink",value:function(t,e){var n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){var i=(n[2]||n[1]).replace(/\s+/g," ");if(!(i=e[i.toLowerCase()])||!i.href){var r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return k(n,i,n[0],this.lexer)}}},{key:"emStrong",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this.rules.inline.emStrong.lDelim.exec(t);if(i&&(!i[3]||!n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var r=i[1]||i[2]||"";if(!r||r&&(""===n||this.rules.inline.punctuation.exec(n))){var o,a,s=i[0].length-1,l=s,u=0,c="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+s);null!=(i=c.exec(e));)if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6])if(a=o.length,i[3]||i[4])l+=a;else if(!((i[5]||i[6])&&s%3)||(s+a)%3){if(!((l-=a)>0)){if(a=Math.min(a,a+l+u),Math.min(s,a)%2){var h=t.slice(1,s+i.index+a);return{type:"em",raw:t.slice(0,s+i.index+a+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}var d=t.slice(2,s+i.index+a-1);return{type:"strong",raw:t.slice(0,s+i.index+a+1),text:d,tokens:this.lexer.inlineTokens(d,[])}}}else u+=a}}}},{key:"codespan",value:function(t){var e=this.rules.inline.code.exec(t);if(e){var n=e[2].replace(/\n/g," "),i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=u(n,!0),{type:"codespan",raw:e[0],text:n}}}},{key:"br",value:function(t){var e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}},{key:"del",value:function(t){var e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2],[])}}},{key:"autolink",value:function(t,e){var n,i,r=this.rules.inline.autolink.exec(t);if(r)return i="@"===r[2]?"mailto:"+(n=u(this.options.mangle?e(r[1]):r[1])):n=u(r[1]),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}},{key:"url",value:function(t,e){var n;if(n=this.rules.inline.url.exec(t)){var i,r;if("@"===n[2])r="mailto:"+(i=u(this.options.mangle?e(n[0]):n[0]));else{var o;do{o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(o!==n[0]);i=u(n[0]),r="www."===n[1]?"http://"+i:i}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}},{key:"inlineText",value:function(t,e){var n,i=this.rules.inline.text.exec(t);if(i)return n=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):u(i[0]):i[0]:u(this.options.smartypants?e(i[0]):i[0]),{type:"text",raw:i[0],text:n}}}]),t}(),T={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:_,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};T.def=f(T.def).replace("label",T._label).replace("title",T._title).getRegex(),T.bullet=/(?:[*+-]|\d{1,9}[.)])/,T.listItemStart=f(/^( *)(bull) */).replace("bull",T.bullet).getRegex(),T.list=f(T.list).replace(/bull/g,T.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+T.def.source+")").getRegex(),T._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",T._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,T.html=f(T.html,"i").replace("comment",T._comment).replace("tag",T._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),T.paragraph=f(T._paragraph).replace("hr",T.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T._tag).getRegex(),T.blockquote=f(T.blockquote).replace("paragraph",T.paragraph).getRegex(),T.normal=E({},T),T.gfm=E({},T.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),T.gfm.table=f(T.gfm.table).replace("hr",T.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T._tag).getRegex(),T.gfm.paragraph=f(T._paragraph).replace("hr",T.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",T.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T._tag).getRegex(),T.pedantic=E({},T.normal,{html:f("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",T._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_,paragraph:f(T.normal._paragraph).replace("hr",T.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",T.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var O={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:_,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:_,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function I(t){return t.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function M(t){var e,n,i="",r=t.length;for(e=0;e<r;e++)n=t.charCodeAt(e),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i}O._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",O.punctuation=f(O.punctuation).replace(/punctuation/g,O._punctuation).getRegex(),O.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,O.escapedEmSt=/\\\*|\\_/g,O._comment=f(T._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),O.emStrong.lDelim=f(O.emStrong.lDelim).replace(/punct/g,O._punctuation).getRegex(),O.emStrong.rDelimAst=f(O.emStrong.rDelimAst,"g").replace(/punct/g,O._punctuation).getRegex(),O.emStrong.rDelimUnd=f(O.emStrong.rDelimUnd,"g").replace(/punct/g,O._punctuation).getRegex(),O._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,O._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,O._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,O.autolink=f(O.autolink).replace("scheme",O._scheme).replace("email",O._email).getRegex(),O._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,O.tag=f(O.tag).replace("comment",O._comment).replace("attribute",O._attribute).getRegex(),O._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,O._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,O._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,O.link=f(O.link).replace("label",O._label).replace("href",O._href).replace("title",O._title).getRegex(),O.reflink=f(O.reflink).replace("label",O._label).replace("ref",T._label).getRegex(),O.nolink=f(O.nolink).replace("ref",T._label).getRegex(),O.reflinkSearch=f(O.reflinkSearch,"g").replace("reflink",O.reflink).replace("nolink",O.nolink).getRegex(),O.normal=E({},O),O.pedantic=E({},O.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:f(/^!?\[(label)\]\((.*?)\)/).replace("label",O._label).getRegex(),reflink:f(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",O._label).getRegex()}),O.gfm=E({},O.normal,{escape:f(O.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),O.gfm.url=f(O.gfm.url,"i").replace("email",O.gfm._extended_email).getRegex(),O.breaks=E({},O.gfm,{br:f(O.br).replace("{2,}","*").getRegex(),text:f(O.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var L=function(){function t(e){ec(this,t),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||n,this.options.tokenizer=this.options.tokenizer||new S,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var i={block:T.normal,inline:O.normal};this.options.pedantic?(i.block=T.pedantic,i.inline=O.pedantic):this.options.gfm&&(i.block=T.gfm,this.options.breaks?i.inline=O.breaks:i.inline=O.gfm),this.tokenizer.rules=i}return ic(t,[{key:"lex",value:function(t){var e;for(t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}},{key:"blockTokens",value:function(t){var e,n,i,r,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,(function(t,e,n){return e+"    ".repeat(n.length)}));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(n){return!!(e=n.call({lexer:o},t,a))&&(t=t.substring(e.raw.length),a.push(e),!0)}))))if(e=this.tokenizer.space(t))t=t.substring(e.raw.length),1===e.raw.length&&a.length>0?a[a.length-1].raw+="\n":a.push(e);else if(e=this.tokenizer.code(t))t=t.substring(e.raw.length),!(n=a[a.length-1])||"paragraph"!==n.type&&"text"!==n.type?a.push(e):(n.raw+="\n"+e.raw,n.text+="\n"+e.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(e=this.tokenizer.fences(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.heading(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.hr(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.blockquote(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.list(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.html(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.def(t))t=t.substring(e.raw.length),!(n=a[a.length-1])||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[e.tag]||(this.tokens.links[e.tag]={href:e.href,title:e.title}):(n.raw+="\n"+e.raw,n.text+="\n"+e.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(e=this.tokenizer.table(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.lheading(t))t=t.substring(e.raw.length),a.push(e);else if(i=t,this.options.extensions&&this.options.extensions.startBlock&&function(){var e=1/0,n=t.slice(1),r=void 0;o.options.extensions.startBlock.forEach((function(t){"number"==typeof(r=t.call({lexer:this},n))&&r>=0&&(e=Math.min(e,r))})),e<1/0&&e>=0&&(i=t.substring(0,e+1))}(),this.state.top&&(e=this.tokenizer.paragraph(i)))n=a[a.length-1],r&&"paragraph"===n.type?(n.raw+="\n"+e.raw,n.text+="\n"+e.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):a.push(e),r=i.length!==t.length,t=t.substring(e.raw.length);else if(e=this.tokenizer.text(t))t=t.substring(e.raw.length),(n=a[a.length-1])&&"text"===n.type?(n.raw+="\n"+e.raw,n.text+="\n"+e.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):a.push(e);else if(t){var s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}return this.state.top=!0,a}},{key:"inline",value:function(t,e){this.inlineQueue.push({src:t,tokens:e})}},{key:"inlineTokens",value:function(t){var e,n,i,r,o,a,s=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],u=t;if(this.tokens.links){var c=Object.keys(this.tokens.links);if(c.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(u));)c.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,r.index)+"["+C("a",r[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(u));)u=u.slice(0,r.index)+"["+C("a",r[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.escapedEmSt.exec(u));)u=u.slice(0,r.index)+"++"+u.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(o||(a=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(n){return!!(e=n.call({lexer:s},t,l))&&(t=t.substring(e.raw.length),l.push(e),!0)}))))if(e=this.tokenizer.escape(t))t=t.substring(e.raw.length),l.push(e);else if(e=this.tokenizer.tag(t))t=t.substring(e.raw.length),(n=l[l.length-1])&&"text"===e.type&&"text"===n.type?(n.raw+=e.raw,n.text+=e.text):l.push(e);else if(e=this.tokenizer.link(t))t=t.substring(e.raw.length),l.push(e);else if(e=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(e.raw.length),(n=l[l.length-1])&&"text"===e.type&&"text"===n.type?(n.raw+=e.raw,n.text+=e.text):l.push(e);else if(e=this.tokenizer.emStrong(t,u,a))t=t.substring(e.raw.length),l.push(e);else if(e=this.tokenizer.codespan(t))t=t.substring(e.raw.length),l.push(e);else if(e=this.tokenizer.br(t))t=t.substring(e.raw.length),l.push(e);else if(e=this.tokenizer.del(t))t=t.substring(e.raw.length),l.push(e);else if(e=this.tokenizer.autolink(t,M))t=t.substring(e.raw.length),l.push(e);else if(this.state.inLink||!(e=this.tokenizer.url(t,M))){if(i=t,this.options.extensions&&this.options.extensions.startInline&&function(){var e=1/0,n=t.slice(1),r=void 0;s.options.extensions.startInline.forEach((function(t){"number"==typeof(r=t.call({lexer:this},n))&&r>=0&&(e=Math.min(e,r))})),e<1/0&&e>=0&&(i=t.substring(0,e+1))}(),e=this.tokenizer.inlineText(i,I))t=t.substring(e.raw.length),"_"!==e.raw.slice(-1)&&(a=e.raw.slice(-1)),o=!0,(n=l[l.length-1])&&"text"===n.type?(n.raw+=e.raw,n.text+=e.text):l.push(e);else if(t){var h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}throw new Error(h)}}else t=t.substring(e.raw.length),l.push(e);return l}}],[{key:"rules",get:function(){return{block:T,inline:O}}},{key:"lex",value:function(e,n){return new t(n).lex(e)}},{key:"lexInline",value:function(e,n){return new t(n).inlineTokens(e)}}]),t}(),R=function(){function t(e){ec(this,t),this.options=e||n}return ic(t,[{key:"code",value:function(t,e,n){var i=(e||"").match(/\S*/)[0];if(this.options.highlight){var r=this.options.highlight(t,i);null!=r&&r!==t&&(n=!0,t=r)}return t=t.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+u(i,!0)+'">'+(n?t:u(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:u(t,!0))+"</code></pre>\n"}},{key:"blockquote",value:function(t){return"<blockquote>\n".concat(t,"</blockquote>\n")}},{key:"html",value:function(t){return t}},{key:"heading",value:function(t,e,n,i){if(this.options.headerIds){var r=this.options.headerPrefix+i.slug(n);return"<h".concat(e,' id="').concat(r,'">').concat(t,"</h").concat(e,">\n")}return"<h".concat(e,">").concat(t,"</h").concat(e,">\n")}},{key:"hr",value:function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}},{key:"list",value:function(t,e,n){var i=e?"ol":"ul";return"<"+i+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+i+">\n"}},{key:"listitem",value:function(t){return"<li>".concat(t,"</li>\n")}},{key:"checkbox",value:function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}},{key:"paragraph",value:function(t){return"<p>".concat(t,"</p>\n")}},{key:"table",value:function(t,e){return e&&(e="<tbody>".concat(e,"</tbody>")),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}},{key:"tablerow",value:function(t){return"<tr>\n".concat(t,"</tr>\n")}},{key:"tablecell",value:function(t,e){var n=e.header?"th":"td";return(e.align?"<".concat(n,' align="').concat(e.align,'">'):"<".concat(n,">"))+t+"</".concat(n,">\n")}},{key:"strong",value:function(t){return"<strong>".concat(t,"</strong>")}},{key:"em",value:function(t){return"<em>".concat(t,"</em>")}},{key:"codespan",value:function(t){return"<code>".concat(t,"</code>")}},{key:"br",value:function(){return this.options.xhtml?"<br/>":"<br>"}},{key:"del",value:function(t){return"<del>".concat(t,"</del>")}},{key:"link",value:function(t,e,n){if(null===(t=m(this.options.sanitize,this.options.baseUrl,t)))return n;var i='<a href="'+u(t)+'"';return e&&(i+=' title="'+e+'"'),i+=">"+n+"</a>"}},{key:"image",value:function(t,e,n){if(null===(t=m(this.options.sanitize,this.options.baseUrl,t)))return n;var i='<img src="'.concat(t,'" alt="').concat(n,'"');return e&&(i+=' title="'.concat(e,'"')),i+=this.options.xhtml?"/>":">"}},{key:"text",value:function(t){return t}}]),t}(),P=function(){function t(){ec(this,t)}return ic(t,[{key:"strong",value:function(t){return t}},{key:"em",value:function(t){return t}},{key:"codespan",value:function(t){return t}},{key:"del",value:function(t){return t}},{key:"html",value:function(t){return t}},{key:"text",value:function(t){return t}},{key:"link",value:function(t,e,n){return""+n}},{key:"image",value:function(t,e,n){return""+n}},{key:"br",value:function(){return""}}]),t}(),F=function(){function t(){ec(this,t),this.seen={}}return ic(t,[{key:"serialize",value:function(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}},{key:"getNextSafeSlug",value:function(t,e){var n=t,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[t];do{n=t+"-"+ ++i}while(this.seen.hasOwnProperty(n))}return e||(this.seen[t]=i,this.seen[n]=0),n}},{key:"slug",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serialize(t);return this.getNextSafeSlug(n,e.dryrun)}}]),t}(),N=function(){function t(e){ec(this,t),this.options=e||n,this.options.renderer=this.options.renderer||new R,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new P,this.slugger=new F}return ic(t,[{key:"parse",value:function(t){var e,n,i,r,o,a,s,l,u,c,d,f,p,g,m,v,y,b,x,_=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],E="",w=t.length;for(e=0;e<w;e++)if(c=t[e],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[c.type])||!1===(x=this.options.extensions.renderers[c.type].call({parser:this},c))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type))switch(c.type){case"space":continue;case"hr":E+=this.renderer.hr();continue;case"heading":E+=this.renderer.heading(this.parseInline(c.tokens),c.depth,h(this.parseInline(c.tokens,this.textRenderer)),this.slugger);continue;case"code":E+=this.renderer.code(c.text,c.lang,c.escaped);continue;case"table":for(l="",s="",r=c.header.length,n=0;n<r;n++)s+=this.renderer.tablecell(this.parseInline(c.header[n].tokens),{header:!0,align:c.align[n]});for(l+=this.renderer.tablerow(s),u="",r=c.rows.length,n=0;n<r;n++){for(s="",o=(a=c.rows[n]).length,i=0;i<o;i++)s+=this.renderer.tablecell(this.parseInline(a[i].tokens),{header:!1,align:c.align[i]});u+=this.renderer.tablerow(s)}E+=this.renderer.table(l,u);continue;case"blockquote":u=this.parse(c.tokens),E+=this.renderer.blockquote(u);continue;case"list":for(d=c.ordered,f=c.start,p=c.loose,r=c.items.length,u="",n=0;n<r;n++)v=(m=c.items[n]).checked,y=m.task,g="",m.task&&(b=this.renderer.checkbox(v),p?m.tokens.length>0&&"paragraph"===m.tokens[0].type?(m.tokens[0].text=b+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=b+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:b}):g+=b),g+=this.parse(m.tokens,p),u+=this.renderer.listitem(g,y,v);E+=this.renderer.list(u,d,f);continue;case"html":E+=this.renderer.html(c.text);continue;case"paragraph":E+=this.renderer.paragraph(this.parseInline(c.tokens));continue;case"text":for(u=c.tokens?this.parseInline(c.tokens):c.text;e+1<w&&"text"===t[e+1].type;)u+="\n"+((c=t[++e]).tokens?this.parseInline(c.tokens):c.text);E+=_?this.renderer.paragraph(u):u;continue;default:var A='Token with "'+c.type+'" type was not found.';if(this.options.silent)return void console.error(A);throw new Error(A)}else E+=x||"";return E}},{key:"parseInline",value:function(t,e){e=e||this.renderer;var n,i,r,o="",a=t.length;for(n=0;n<a;n++)if(i=t[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type])||!1===(r=this.options.extensions.renderers[i.type].call({parser:this},i))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type))switch(i.type){case"escape":case"text":o+=e.text(i.text);break;case"html":o+=e.html(i.text);break;case"link":o+=e.link(i.href,i.title,this.parseInline(i.tokens,e));break;case"image":o+=e.image(i.href,i.title,i.text);break;case"strong":o+=e.strong(this.parseInline(i.tokens,e));break;case"em":o+=e.em(this.parseInline(i.tokens,e));break;case"codespan":o+=e.codespan(i.text);break;case"br":o+=e.br();break;case"del":o+=e.del(this.parseInline(i.tokens,e));break;default:var s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return void console.error(s);throw new Error(s)}else o+=r||"";return o}}],[{key:"parse",value:function(e,n){return new t(n).parse(e)}},{key:"parseInline",value:function(e,n){return new t(n).parseInline(e)}}]),t}();function B(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if("function"==typeof e&&(n=e,e=null),D(e=E({},B.defaults,e||{})),n){var i,r=e.highlight;try{i=L.lex(t,e)}catch(t){return n(t)}var o=function(t){var o;if(!t)try{e.walkTokens&&B.walkTokens(i,e.walkTokens),o=N.parse(i,e)}catch(e){t=e}return e.highlight=r,t?n(t):n(null,o)};if(!r||r.length<3)return o();if(delete e.highlight,!i.length)return o();var a=0;return B.walkTokens(i,(function(t){"code"===t.type&&(a++,setTimeout((function(){r(t.text,t.lang,(function(e,n){if(e)return o(e);null!=n&&n!==t.text&&(t.text=n,t.escaped=!0),0===--a&&o()}))}),0))})),void(0===a&&o())}try{var s=L.lex(t,e);return e.walkTokens&&B.walkTokens(s,e.walkTokens),N.parse(s,e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+u(t.message+"",!0)+"</pre>";throw t}}B.options=B.setOptions=function(t){var e;return E(B.defaults,t),e=B.defaults,n=e,B},B.getDefaults=e,B.defaults=n,B.use=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i,r=E.apply(void 0,[{}].concat(e)),o=B.defaults.extensions||{renderers:{},childTokens:{}};e.forEach((function(t){if(t.extensions&&(i=!0,t.extensions.forEach((function(t){if(!t.name)throw new Error("extension name required");if(t.renderer){var e=o.renderers?o.renderers[t.name]:null;o.renderers[t.name]=e?function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=t.renderer.apply(this,i);return!1===o&&(o=e.apply(this,i)),o}:t.renderer}if(t.tokenizer){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");o[t.level]?o[t.level].unshift(t.tokenizer):o[t.level]=[t.tokenizer],t.start&&("block"===t.level?o.startBlock?o.startBlock.push(t.start):o.startBlock=[t.start]:"inline"===t.level&&(o.startInline?o.startInline.push(t.start):o.startInline=[t.start]))}t.childTokens&&(o.childTokens[t.name]=t.childTokens)}))),t.renderer&&function(){var e=B.defaults.renderer||new R,n=function(n){var i=e[n];e[n]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=t.renderer[n].apply(e,o);return!1===s&&(s=i.apply(e,o)),s}};for(var i in t.renderer)n(i);r.renderer=e}(),t.tokenizer&&function(){var e=B.defaults.tokenizer||new S,n=function(n){var i=e[n];e[n]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=t.tokenizer[n].apply(e,o);return!1===s&&(s=i.apply(e,o)),s}};for(var i in t.tokenizer)n(i);r.tokenizer=e}(),t.walkTokens){var e=B.defaults.walkTokens;r.walkTokens=function(n){t.walkTokens.call(this,n),e&&e.call(this,n)}}i&&(r.extensions=o),B.setOptions(r)}))},B.walkTokens=function(t,e){var n,i=oc(t);try{var r=function(){var t=n.value;switch(e.call(B,t),t.type){case"table":var i,r=oc(t.header);try{for(r.s();!(i=r.n()).done;){var o=i.value;B.walkTokens(o.tokens,e)}}catch(t){r.e(t)}finally{r.f()}var a,s=oc(t.rows);try{for(s.s();!(a=s.n()).done;){var l,u=oc(a.value);try{for(u.s();!(l=u.n()).done;){var c=l.value;B.walkTokens(c.tokens,e)}}catch(t){u.e(t)}finally{u.f()}}}catch(t){s.e(t)}finally{s.f()}break;case"list":B.walkTokens(t.items,e);break;default:B.defaults.extensions&&B.defaults.extensions.childTokens&&B.defaults.extensions.childTokens[t.type]?B.defaults.extensions.childTokens[t.type].forEach((function(n){B.walkTokens(t[n],e)})):t.tokens&&B.walkTokens(t.tokens,e)}};for(i.s();!(n=i.n()).done;)r()}catch(t){i.e(t)}finally{i.f()}},B.parseInline=function(t,e){if(null==t)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");D(e=E({},B.defaults,e||{}));try{var n=L.lexInline(t,e);return e.walkTokens&&B.walkTokens(n,e.walkTokens),N.parseInline(n,e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+u(t.message+"",!0)+"</pre>";throw t}},B.Parser=N,B.parser=N.parse,B.Renderer=R,B.TextRenderer=P,B.Lexer=L,B.lexer=L.lex,B.Tokenizer=S,B.Slugger=F,B.parse=B;var j=B.options,z=B.setOptions,H=B.use,V=B.walkTokens,W=B.parseInline,U=B,G=N.parse,q=L.lex})),zc=mc((function(t,e){var n=wc();Ac(),Dc(),Cc(),Tc(),Oc(),Ic(),Mc(),Lc(),Rc(),Pc(),kc();var i=Bc(),r=jc().marked,o=/Mac/.test(navigator.platform),a=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),s={toggleBold:_,toggleItalic:E,drawLink:R,toggleHeadingSmaller:C,toggleHeadingBigger:k,drawImage:P,toggleBlockquote:D,toggleOrderedList:M,toggleUnorderedList:I,toggleCodeBlock:A,togglePreview:W,toggleStrikethrough:w,toggleHeading1:S,toggleHeading2:T,toggleHeading3:O,cleanBlock:L,drawTable:B,drawHorizontalRule:j,undo:z,redo:H,toggleSideBySide:V,toggleFullScreen:x},l={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},u=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4)))&&(e=!0),e};function c(t){return t=o?t.replace("Ctrl","Cmd"):t.replace("Cmd","Ctrl")}var h={};function d(t){return h[t]||(h[t]=new RegExp("\\s*"+t+"(\\s*)","g"))}function f(t,e){if(t&&e){var n=d(e);t.className.match(n)||(t.className+=" "+e)}}function p(t,e){if(t&&e){var n=d(e);t.className.match(n)&&(t.className=t.className.replace(n,"$1"))}}function g(t,e,n,i){var r=m(t,!1,e,n,"button",i);r.className+=" easymde-dropdown",r.onclick=function(){r.focus()};var o=document.createElement("div");o.className="easymde-dropdown-content";for(var a=0;a<t.children.length;a++){var s,l=t.children[a];(s=m("string"==typeof l&&l in J?J[l]:l,!0,e,n,"button",i)).addEventListener("click",(function(t){t.stopPropagation()}),!1),o.appendChild(s)}return r.appendChild(o),r}function m(t,e,n,i,r,a){t=t||{};var l=document.createElement(r);if(t.attributes)for(var u in t.attributes)Object.prototype.hasOwnProperty.call(t.attributes,u)&&l.setAttribute(u,t.attributes[u]);l.className=t.name,l.setAttribute("type",r),n=null==n||n,t.name&&t.name in i&&(s[t.name]=t.action),t.title&&n&&(l.title=function(t,e,n){var i,r=t;e&&n[i=function(t){for(var e in s)if(s[e]===t)return e;return null}(e)]&&(r+=" ("+c(n[i])+")");return r}(t.title,t.action,i),o&&(l.title=l.title.replace("Ctrl",""),l.title=l.title.replace("Alt",""))),t.noDisable&&l.classList.add("no-disable"),t.noMobile&&l.classList.add("no-mobile");var h=[];void 0!==t.className&&(h=t.className.split(" "));for(var d=[],f=0;f<h.length;f++){var p=h[f];p.match(/^fa([srlb]|(-[\w-]*)|$)/)?d.push(p):l.classList.add(p)}l.tabIndex=-1;for(var g=document.createElement("i"),m=0;m<d.length;m++){var v=d[m];g.classList.add(v)}return l.appendChild(g),void 0!==t.icon&&(l.innerHTML=t.icon),t.action&&e&&("function"==typeof t.action?l.onclick=function(e){e.preventDefault(),t.action(a)}:"string"==typeof t.action&&(l.onclick=function(e){e.preventDefault(),window.open(t.action,"_blank")})),l}function v(){var t=document.createElement("i");return t.className="separator",t.innerHTML="|",t}function y(t,e){e=e||t.getCursor("start");var n=t.getTokenAt(e);if(!n.type)return{};for(var i,r,o=n.type.split(" "),a={},s=0;s<o.length;s++)"strong"===(i=o[s])?a.bold=!0:"variable-2"===i?(r=t.getLine(e.line),/^\s*\d+\.\s/.test(r)?a["ordered-list"]=!0:a["unordered-list"]=!0):"atom"===i?a.quote=!0:"em"===i?a.italic=!0:"quote"===i?a.quote=!0:"strikethrough"===i?a.strikethrough=!0:"comment"===i?a.code=!0:"link"===i?a.link=!0:"tag"===i?a.image=!0:i.match(/^header(-[1-6])?$/)&&(a[i.replace("header","heading")]=!0);return a}var b="";function x(t){var e=t.codemirror;e.setOption("fullScreen",!e.getOption("fullScreen")),e.getOption("fullScreen")?(b=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=b;var n=e.getWrapperElement(),i=n.nextSibling;if(/editor-preview-active-side/.test(i.className))if(!1===t.options.sideBySideFullscreen){var r=n.parentNode;e.getOption("fullScreen")?p(r,"sided--no-fullscreen"):f(r,"sided--no-fullscreen")}else V(t);if(t.options.onToggleFullScreen&&t.options.onToggleFullScreen(e.getOption("fullScreen")||!1),void 0!==t.options.maxHeight&&(e.getOption("fullScreen")?(e.getScrollerElement().style.removeProperty("height"),i.style.removeProperty("height")):(e.getScrollerElement().style.height=t.options.maxHeight,t.setPreviewMaxHeight())),/fullscreen/.test(t.toolbar_div.className)?t.toolbar_div.className=t.toolbar_div.className.replace(/\s*fullscreen\b/,""):t.toolbar_div.className+=" fullscreen",t.toolbarElements&&t.toolbarElements.fullscreen){var o=t.toolbarElements.fullscreen;/active/.test(o.className)?o.className=o.className.replace(/\s*active\s*/g,""):o.className+=" active"}}function _(t){$(t,"bold",t.options.blockStyles.bold)}function E(t){$(t,"italic",t.options.blockStyles.italic)}function w(t){$(t,"strikethrough","~~")}function A(t){var e=t.options.blockStyles.code;function n(t){if("object"!==lc(t))throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+lc(t)+": "+t;return t.styles&&t.styles[2]&&-1!==t.styles[2].indexOf("formatting-code-block")}function i(t){return t.state.base.base||t.state.base}function r(t,e,r,o,a){r=r||t.getLineHandle(e),o=o||t.getTokenAt({line:e,ch:1}),a=a||!!r.text&&t.getTokenAt({line:e,ch:r.text.length-1});var s=o.type?o.type.split(" "):[];return a&&i(a).indentedCode?"indented":-1!==s.indexOf("comment")&&(i(o).fencedChars||i(a).fencedChars||n(r)?"fenced":"single")}var o,a,s,l,u,c,h,d,f,p,g,m,v=t.codemirror,y=v.getCursor("start"),b=v.getCursor("end"),x=v.getTokenAt({line:y.line,ch:y.ch||1}),_=v.getLineHandle(y.line),E=r(v,y.line,_,x);if("single"===E){var w=_.text.slice(0,y.ch).replace("`",""),A=_.text.slice(y.ch).replace("`","");v.replaceRange(w+A,{line:y.line,ch:0},{line:y.line,ch:99999999999999}),y.ch--,y!==b&&b.ch--,v.setSelection(y,b),v.focus()}else if("fenced"===E)if(y.line!==b.line||y.ch!==b.ch){for(o=y.line;o>=0&&!n(_=v.getLineHandle(o));o--);var D,C,k,S,T=i(v.getTokenAt({line:o,ch:1})).fencedChars;n(v.getLineHandle(y.line))?(D="",C=y.line):n(v.getLineHandle(y.line-1))?(D="",C=y.line-1):(D=T+"\n",C=y.line),n(v.getLineHandle(b.line))?(k="",S=b.line,0===b.ch&&(S+=1)):0!==b.ch&&n(v.getLineHandle(b.line+1))?(k="",S=b.line+1):(k=T+"\n",S=b.line+1),0===b.ch&&(S-=1),v.operation((function(){v.replaceRange(k,{line:S,ch:0},{line:S+(k?0:1),ch:0}),v.replaceRange(D,{line:C,ch:0},{line:C+(D?0:1),ch:0})})),v.setSelection({line:C+(D?1:0),ch:0},{line:S+(D?1:-1),ch:0}),v.focus()}else{var O=y.line;if(n(v.getLineHandle(y.line))&&("fenced"===r(v,y.line+1)?(o=y.line,O=y.line+1):(a=y.line,O=y.line-1)),void 0===o)for(o=O;o>=0&&!n(_=v.getLineHandle(o));o--);if(void 0===a)for(s=v.lineCount(),a=O;a<s&&!n(_=v.getLineHandle(a));a++);v.operation((function(){v.replaceRange("",{line:o,ch:0},{line:o+1,ch:0}),v.replaceRange("",{line:a-1,ch:0},{line:a,ch:0})})),v.focus()}else if("indented"===E){if(y.line!==b.line||y.ch!==b.ch)o=y.line,a=b.line,0===b.ch&&a--;else{for(o=y.line;o>=0;o--)if(!(_=v.getLineHandle(o)).text.match(/^\s*$/)&&"indented"!==r(v,o,_)){o+=1;break}for(s=v.lineCount(),a=y.line;a<s;a++)if(!(_=v.getLineHandle(a)).text.match(/^\s*$/)&&"indented"!==r(v,a,_)){a-=1;break}}var I=v.getLineHandle(a+1),M=I&&v.getTokenAt({line:a+1,ch:I.text.length-1});M&&i(M).indentedCode&&v.replaceRange("\n",{line:a+1,ch:0});for(var L=o;L<=a;L++)v.indentLine(L,"subtract");v.focus()}else{var R=y.line===b.line&&y.ch===b.ch&&0===y.ch,P=y.line!==b.line;R||P?(l=v,c=b,h=e,d=(u=y).line+1,f=c.line+1,p=u.line!==c.line,g=h+"\n",m="\n"+h,p&&f++,p&&0===c.ch&&(m=h+"\n",f--),U(l,!1,[g,m]),l.setSelection({line:d,ch:0},{line:f,ch:0})):U(v,!1,["`","`"])}}function D(t){q(t.codemirror,"quote")}function C(t){G(t.codemirror,"smaller")}function k(t){G(t.codemirror,"bigger")}function S(t){G(t.codemirror,void 0,1)}function T(t){G(t.codemirror,void 0,2)}function O(t){G(t.codemirror,void 0,3)}function I(t){var e=t.codemirror,n="*";["-","+","*"].includes(t.options.unorderedListStyle)&&(n=t.options.unorderedListStyle),q(e,"unordered-list",n)}function M(t){q(t.codemirror,"ordered-list")}function L(t){!function(t){if(/editor-preview-active/.test(t.getWrapperElement().lastChild.className))return;for(var e,n=t.getCursor("start"),i=t.getCursor("end"),r=n.line;r<=i.line;r++)e=(e=t.getLine(r)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),t.replaceRange(e,{line:r,ch:0},{line:r,ch:99999999999999})}(t.codemirror)}function R(t){var e=t.codemirror,n=y(e),i=t.options,r="https://";if(i.promptURLs&&!(r=prompt(i.promptTexts.link,"https://")))return!1;U(e,n.link,i.insertTexts.link,r)}function P(t){var e=t.codemirror,n=y(e),i=t.options,r="https://";if(i.promptURLs&&!(r=prompt(i.promptTexts.image,"https://")))return!1;U(e,n.image,i.insertTexts.image,r)}function F(t){t.openBrowseFileWindow()}function N(t,e){var n=t.codemirror,i=y(n),r=t.options,o=e.substr(e.lastIndexOf("/")+1),a=o.substring(o.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg"].includes(a))U(n,i.image,r.insertTexts.uploadedImage,e);else{var s=r.insertTexts.link;s[0]="["+o,U(n,i.link,s,e)}t.updateStatusBar("upload-image",t.options.imageTexts.sbOnUploaded.replace("#image_name#",o)),setTimeout((function(){t.updateStatusBar("upload-image",t.options.imageTexts.sbInit)}),1e3)}function B(t){var e=t.codemirror,n=y(e),i=t.options;U(e,n.table,i.insertTexts.table)}function j(t){var e=t.codemirror,n=y(e),i=t.options;U(e,n.image,i.insertTexts.horizontalRule)}function z(t){var e=t.codemirror;e.undo(),e.focus()}function H(t){var e=t.codemirror;e.redo(),e.focus()}function V(t){var e=t.codemirror,n=e.getWrapperElement(),i=n.nextSibling,r=t.toolbarElements&&t.toolbarElements["side-by-side"],o=!1,a=n.parentNode;/editor-preview-active-side/.test(i.className)?(!1===t.options.sideBySideFullscreen&&p(a,"sided--no-fullscreen"),i.className=i.className.replace(/\s*editor-preview-active-side\s*/g,""),r&&(r.className=r.className.replace(/\s*active\s*/g,"")),n.className=n.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout((function(){e.getOption("fullScreen")||(!1===t.options.sideBySideFullscreen?f(a,"sided--no-fullscreen"):x(t)),i.className+=" editor-preview-active-side"}),1),r&&(r.className+=" active"),n.className+=" CodeMirror-sided",o=!0);var s=n.lastChild;if(/editor-preview-active/.test(s.className)){s.className=s.className.replace(/\s*editor-preview-active\s*/g,"");var l=t.toolbarElements.preview,u=t.toolbar_div;l.className=l.className.replace(/\s*active\s*/g,""),u.className=u.className.replace(/\s*disabled-for-preview*/g,"")}if(e.sideBySideRenderingFunction||(e.sideBySideRenderingFunction=function(){var e=t.options.previewRender(t.value(),i);null!=e&&(i.innerHTML=e)}),o){var c=t.options.previewRender(t.value(),i);null!=c&&(i.innerHTML=c),e.on("update",e.sideBySideRenderingFunction)}else e.off("update",e.sideBySideRenderingFunction);e.refresh()}function W(t){var e=t.codemirror,n=e.getWrapperElement(),i=t.toolbar_div,r=!!t.options.toolbar&&t.toolbarElements.preview,o=n.lastChild,a=e.getWrapperElement().nextSibling;if(/editor-preview-active-side/.test(a.className)&&V(t),!o||!/editor-preview-full/.test(o.className)){if((o=document.createElement("div")).className="editor-preview-full",t.options.previewClass)if(Array.isArray(t.options.previewClass))for(var s=0;s<t.options.previewClass.length;s++)o.className+=" "+t.options.previewClass[s];else"string"==typeof t.options.previewClass&&(o.className+=" "+t.options.previewClass);n.appendChild(o)}/editor-preview-active/.test(o.className)?(o.className=o.className.replace(/\s*editor-preview-active\s*/g,""),r&&(r.className=r.className.replace(/\s*active\s*/g,""),i.className=i.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout((function(){o.className+=" editor-preview-active"}),1),r&&(r.className+=" active",i.className+=" disabled-for-preview")),o.innerHTML=t.options.previewRender(t.value(),o)}function U(t,e,n,i){if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className)){var r,o=n[0],a=n[1],s={},l={};Object.assign(s,t.getCursor("start")),Object.assign(l,t.getCursor("end")),i&&(o=o.replace("#url#",i),a=a.replace("#url#",i)),e?(o=(r=t.getLine(s.line)).slice(0,s.ch),a=r.slice(s.ch),t.replaceRange(o+a,{line:s.line,ch:0})):(r=t.getSelection(),t.replaceSelection(o+r+a),s.ch+=o.length,s!==l&&(l.ch+=o.length)),t.setSelection(s,l),t.focus()}}function G(t,e,n){if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className)){for(var i,r,o,a=t.getCursor("start"),s=t.getCursor("end"),l=a.line;l<=s.line;l++)i=l,r=void 0,o=void 0,r=t.getLine(i),o=r.search(/[^#]/),r=void 0!==e?o<=0?"bigger"==e?"###### "+r:"# "+r:6==o&&"smaller"==e?r.substr(7):1==o&&"bigger"==e?r.substr(2):"bigger"==e?r.substr(1):"#"+r:1==n?o<=0?"# "+r:o==n?r.substr(o+1):"# "+r.substr(o+1):2==n?o<=0?"## "+r:o==n?r.substr(o+1):"## "+r.substr(o+1):o<=0?"### "+r:o==n?r.substr(o+1):"### "+r.substr(o+1),t.replaceRange(r,{line:i,ch:0},{line:i,ch:99999999999999});t.focus()}}function q(t,e,n){if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className)){for(var i,r,o=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,a=/^\s*/,s=y(t),l=t.getCursor("start"),u=t.getCursor("end"),c={quote:/^(\s*)>\s+/,"unordered-list":o,"ordered-list":o},h=function(t,e,i){var r=o.exec(e),s=function(t,e){return{quote:">","unordered-list":n,"ordered-list":"%%i."}[t].replace("%%i",e)}(t,d);return null!==r?(function(t,e){var i=new RegExp({quote:">","unordered-list":"\\"+n,"ordered-list":"\\d+."}[t]);return e&&i.test(e)}(t,r[2])&&(s=""),e=r[1]+s+r[3]+e.replace(a,"").replace(c[t],"$1")):0==i&&(e=s+" "+e),e},d=1,f=l.line;f<=u.line;f++)i=f,r=void 0,r=t.getLine(i),s[e]?r=r.replace(c[e],"$1"):("unordered-list"==e&&(r=h("ordered-list",r,!0)),r=h(e,r,!1),d+=1),t.replaceRange(r,{line:i,ch:0},{line:i,ch:99999999999999});t.focus()}}function $(t,e,n,i){if(!/editor-preview-active/.test(t.codemirror.getWrapperElement().lastChild.className)){i=void 0===i?n:i;var r,o=t.codemirror,a=y(o),s=n,l=i,u=o.getCursor("start"),c=o.getCursor("end");a[e]?(s=(r=o.getLine(u.line)).slice(0,u.ch),l=r.slice(u.ch),"bold"==e?(s=s.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),l=l.replace(/(\*\*|__)/,"")):"italic"==e?(s=s.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),l=l.replace(/(\*|_)/,"")):"strikethrough"==e&&(s=s.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),l=l.replace(/(\*\*|~~)/,"")),o.replaceRange(s+l,{line:u.line,ch:0},{line:u.line,ch:99999999999999}),"bold"==e||"strikethrough"==e?(u.ch-=2,u!==c&&(c.ch-=2)):"italic"==e&&(u.ch-=1,u!==c&&(c.ch-=1))):(r=o.getSelection(),"bold"==e?r=(r=r.split("**").join("")).split("__").join(""):"italic"==e?r=(r=r.split("*").join("")).split("_").join(""):"strikethrough"==e&&(r=r.split("~~").join("")),o.replaceSelection(s+r+l),u.ch+=n.length,c.ch=u.ch+r.length),o.setSelection(u,c),o.focus()}}function Y(t,e){if(Math.abs(t)<1024)return""+t+e[0];var n=0;do{t/=1024,++n}while(Math.abs(t)>=1024&&n<e.length);return""+t.toFixed(1)+e[n]}function X(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]instanceof Array?t[n]=e[n].concat(t[n]instanceof Array?t[n]:[]):null!==e[n]&&"object"===lc(e[n])&&e[n].constructor===Object?t[n]=X(t[n]||{},e[n]):t[n]=e[n]);return t}function K(t){for(var e=1;e<arguments.length;e++)t=X(t,arguments[e]);return t}function Z(t){var e=t.match(/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),n=0;if(null===e)return n;for(var i=0;i<e.length;i++)e[i].charCodeAt(0)>=19968?n+=e[i].length:n+=1;return n}var J={bold:{name:"bold",action:_,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:E,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:w,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:C,className:"fa fa-header fa-heading",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:C,className:"fa fa-header fa-heading header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:k,className:"fa fa-header fa-heading header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:S,className:"fa fa-header fa-heading header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:T,className:"fa fa-header fa-heading header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:O,className:"fa fa-header fa-heading header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:A,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:D,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:I,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:M,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:L,className:"fa fa-eraser",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:R,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:P,className:"fa fa-image",title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:F,className:"fa fa-image",title:"Import an image"},table:{name:"table",action:B,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:j,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:W,className:"fa fa-eye",noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:V,className:"fa fa-columns",noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:x,className:"fa fa-arrows-alt",noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:"fa fa-question-circle",noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:z,className:"fa fa-undo",noDisable:!0,title:"Undo"},redo:{name:"redo",action:H,className:"fa fa-repeat fa-redo",noDisable:!0,title:"Redo"}},Q={link:["[","](#url#)"],image:["![](","#url#)"],uploadedImage:["![](#url#)",""],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},tt={link:"URL for the link:",image:"URL of the image:"},et={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},nt={bold:"**",code:"```",italic:"*"},it={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},rt={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:"Image #image_name# is too big (#image_size#).\nMaximum file size is #image_max_size#.",importError:"Something went wrong when uploading the image #image_name#."};function ot(t){(t=t||{}).parent=this;var e=!0;if(!1===t.autoDownloadFontAwesome&&(e=!1),!0!==t.autoDownloadFontAwesome)for(var n=document.styleSheets,i=0;i<n.length;i++)n[i].href&&n[i].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(e=!1);if(e){var r=document.createElement("link");r.rel="stylesheet",r.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(r)}if(t.element)this.element=t.element;else if(null===t.element)return void console.log("EasyMDE: Error. No element was found.");if(void 0===t.toolbar)for(var o in t.toolbar=[],J)Object.prototype.hasOwnProperty.call(J,o)&&(-1!=o.indexOf("separator-")&&t.toolbar.push("|"),(!0===J[o].default||t.showIcons&&t.showIcons.constructor===Array&&-1!=t.showIcons.indexOf(o))&&t.toolbar.push(o));if(Object.prototype.hasOwnProperty.call(t,"previewClass")||(t.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(t,"status")||(t.status=["autosave","lines","words","cursor"],t.uploadImage&&t.status.unshift("upload-image")),t.previewRender||(t.previewRender=function(t){return this.parent.markdown(t)}),t.parsingConfig=K({highlightFormatting:!0},t.parsingConfig||{}),t.insertTexts=K({},Q,t.insertTexts||{}),t.promptTexts=K({},tt,t.promptTexts||{}),t.blockStyles=K({},nt,t.blockStyles||{}),null!=t.autosave&&(t.autosave.timeFormat=K({},et,t.autosave.timeFormat||{})),t.shortcuts=K({},l,t.shortcuts||{}),t.maxHeight=t.maxHeight||void 0,t.direction=t.direction||"ltr",void 0!==t.maxHeight?t.minHeight=t.maxHeight:t.minHeight=t.minHeight||"300px",t.errorCallback=t.errorCallback||function(t){alert(t)},t.uploadImage=t.uploadImage||!1,t.imageMaxSize=t.imageMaxSize||2097152,t.imageAccept=t.imageAccept||"image/png, image/jpeg",t.imageTexts=K({},it,t.imageTexts||{}),t.errorMessages=K({},rt,t.errorMessages||{}),null!=t.autosave&&null!=t.autosave.unique_id&&""!=t.autosave.unique_id&&(t.autosave.uniqueId=t.autosave.unique_id),t.overlayMode&&void 0===t.overlayMode.combine&&(t.overlayMode.combine=!0),this.options=t,this.render(),!t.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(t.initialValue),t.uploadImage){var a=this;this.codemirror.on("dragenter",(function(t,e){a.updateStatusBar("upload-image",a.options.imageTexts.sbOnDragEnter),e.stopPropagation(),e.preventDefault()})),this.codemirror.on("dragend",(function(t,e){a.updateStatusBar("upload-image",a.options.imageTexts.sbInit),e.stopPropagation(),e.preventDefault()})),this.codemirror.on("dragleave",(function(t,e){a.updateStatusBar("upload-image",a.options.imageTexts.sbInit),e.stopPropagation(),e.preventDefault()})),this.codemirror.on("dragover",(function(t,e){a.updateStatusBar("upload-image",a.options.imageTexts.sbOnDragEnter),e.stopPropagation(),e.preventDefault()})),this.codemirror.on("drop",(function(e,n){n.stopPropagation(),n.preventDefault(),t.imageUploadFunction?a.uploadImagesUsingCustomFunction(t.imageUploadFunction,n.dataTransfer.files):a.uploadImages(n.dataTransfer.files)})),this.codemirror.on("paste",(function(e,n){t.imageUploadFunction?a.uploadImagesUsingCustomFunction(t.imageUploadFunction,n.clipboardData.files):a.uploadImages(n.clipboardData.files)}))}}function at(){if("object"!==("undefined"==typeof localStorage?"undefined":lc(localStorage)))return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(t){return!1}return!0}ot.prototype.uploadImages=function(t,e,n){if(0!==t.length){for(var i=[],r=0;r<t.length;r++)i.push(t[r].name),this.uploadImage(t[r],e,n);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",i.join(", ")))}},ot.prototype.uploadImagesUsingCustomFunction=function(t,e){if(0!==e.length){for(var n=[],i=0;i<e.length;i++)n.push(e[i].name),this.uploadImageUsingCustomFunction(t,e[i]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",n.join(", ")))}},ot.prototype.updateStatusBar=function(t,e){if(this.gui.statusbar){var n=this.gui.statusbar.getElementsByClassName(t);1===n.length?this.gui.statusbar.getElementsByClassName(t)[0].textContent=e:0===n.length?console.log("EasyMDE: status bar item "+t+" was not found."):console.log("EasyMDE: Several status bar items named "+t+" was found.")}},ot.prototype.markdown=function(t){if(r){var e;if(e=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?e.breaks=!1:e.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting){var n=this.options.renderingConfig.hljs||window.hljs;n&&(e.highlight=function(t,e){return e&&n.getLanguage(e)?n.highlight(e,t).value:n.highlightAuto(t).value})}r.setOptions(e);var i=r.parse(t);return this.options.renderingConfig&&"function"==typeof this.options.renderingConfig.sanitizerFunction&&(i=this.options.renderingConfig.sanitizerFunction.call(this,i)),i=function(t){for(var e=(new DOMParser).parseFromString(t,"text/html"),n=e.getElementsByTagName("li"),i=0;i<n.length;i++)for(var r=n[i],o=0;o<r.children.length;o++){var a=r.children[o];a instanceof HTMLInputElement&&"checkbox"===a.type&&(r.style.marginLeft="-1.5em",r.style.listStyleType="none")}return e.documentElement.innerHTML}(i=function(t){for(var e;null!==(e=a.exec(t));){var n=e[0];if(-1===n.indexOf("target=")){var i=n.replace(/>$/,' target="_blank">');t=t.replace(n,i)}}return t}(i))}},ot.prototype.render=function(t){if(t||(t=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==t){this.element=t;var e,r,o=this.options,a=this,l={};for(var h in o.shortcuts)null!==o.shortcuts[h]&&null!==s[h]&&function(t){l[c(o.shortcuts[t])]=function(){var e=s[t];"function"==typeof e?e(a):"string"==typeof e&&window.open(e,"_blank")}}(h);if(l.Enter="newlineAndIndentContinueMarkdownList",l.Tab="tabAndIndentMarkdownList",l["Shift-Tab"]="shiftTabAndUnindentMarkdownList",l.Esc=function(t){t.getOption("fullScreen")&&x(a)},this.documentOnKeyDown=function(t){27==(t=t||window.event).keyCode&&a.codemirror.getOption("fullScreen")&&x(a)},document.addEventListener("keydown",this.documentOnKeyDown,!1),o.overlayMode?(n.defineMode("overlay-mode",(function(t){return n.overlayMode(n.getMode(t,!1!==o.spellChecker?"spell-checker":"gfm"),o.overlayMode.mode,o.overlayMode.combine)})),e="overlay-mode",(r=o.parsingConfig).gitHubSpice=!1):((e=o.parsingConfig).name="gfm",e.gitHubSpice=!1),!1!==o.spellChecker&&(e="spell-checker",(r=o.parsingConfig).name="gfm",r.gitHubSpice=!1,"function"==typeof o.spellChecker?o.spellChecker({codeMirrorInstance:n}):i({codeMirrorInstance:n})),this.codemirror=n.fromTextArea(t,{mode:e,backdrop:r,theme:null!=o.theme?o.theme:"easymde",tabSize:null!=o.tabSize?o.tabSize:2,indentUnit:null!=o.tabSize?o.tabSize:2,indentWithTabs:!1!==o.indentWithTabs,lineNumbers:!0===o.lineNumbers,autofocus:!0===o.autofocus,extraKeys:l,direction:o.direction,lineWrapping:!1!==o.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:o.placeholder||t.getAttribute("placeholder")||"",styleSelectedText:null!=o.styleSelectedText?o.styleSelectedText:!u(),scrollbarStyle:null!=o.scrollbarStyle?o.scrollbarStyle:"native",configureMouse:function(t,e,n){return{addNew:!1}},inputStyle:null!=o.inputStyle?o.inputStyle:u()?"contenteditable":"textarea",spellcheck:null==o.nativeSpellcheck||o.nativeSpellcheck,autoRefresh:null!=o.autoRefresh&&o.autoRefresh}),this.codemirror.getScrollerElement().style.minHeight=o.minHeight,void 0!==o.maxHeight&&(this.codemirror.getScrollerElement().style.height=o.maxHeight),!0===o.forceSync){var d=this.codemirror;d.on("change",(function(){d.save()}))}this.gui={};var f=document.createElement("div");f.classList.add("EasyMDEContainer");var p=this.codemirror.getWrapperElement();p.parentNode.insertBefore(f,p),f.appendChild(p),!1!==o.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==o.status&&(this.gui.statusbar=this.createStatusbar()),null!=o.autosave&&!0===o.autosave.enabled&&(this.autosave(),this.codemirror.on("change",(function(){clearTimeout(a._autosave_timeout),a._autosave_timeout=setTimeout((function(){a.autosave()}),a.options.autosave.submit_delay||a.options.autosave.delay||1e3)})));var g=this;this.codemirror.on("update",(function(){o.previewImagesInEditor&&f.querySelectorAll(".cm-image-marker").forEach((function(t){var e=t.parentElement;if(e.innerText.match(/^!\[.*?\]\(.*\)/g)&&!e.hasAttribute("data-img-src")){var n=e.innerText.match("\\((.*)\\)");if(window.EMDEimagesCache||(window.EMDEimagesCache={}),n&&n.length>=2){var i=n[1];if(window.EMDEimagesCache[i])v(e,window.EMDEimagesCache[i]);else{var r=document.createElement("img");r.onload=function(){window.EMDEimagesCache[i]={naturalWidth:r.naturalWidth,naturalHeight:r.naturalHeight,url:i},v(e,window.EMDEimagesCache[i])},r.src=i}}}}))})),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var m=this.codemirror;setTimeout(function(){m.refresh()}.bind(m),0)}function v(t,e){var n,i;t.setAttribute("data-img-src",e.url),t.setAttribute("style","--bg-image:url("+e.url+");--width:"+e.naturalWidth+"px;--height:"+(n=e.naturalWidth,i=e.naturalHeight,n<window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","")?i+"px":i/n*100+"%")),g.codemirror.setSize()}},ot.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)},ot.prototype.autosave=function(){if(at()){var t=this;if(null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");!0!==this.options.autosave.binded&&(null!=t.element.form&&null!=t.element.form&&t.element.form.addEventListener("submit",(function(){clearTimeout(t.autosaveTimeoutId),t.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+t.options.autosave.uniqueId)})),this.options.autosave.binded=!0),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var e=t.value();""!==e?localStorage.setItem("smde_"+this.options.autosave.uniqueId,e):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var n=document.getElementById("autosaved");if(null!=n&&null!=n&&""!=n){var i=new Date,r=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(i),o=null==this.options.autosave.text?"Autosaved: ":this.options.autosave.text;n.innerHTML=o+r}}else console.log("EasyMDE: localStorage not available, cannot autosave")},ot.prototype.clearAutosavedValue=function(){if(at()){if(null==this.options.autosave||null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},ot.prototype.openBrowseFileWindow=function(t,e){var n=this,i=this.gui.toolbar.getElementsByClassName("imageInput")[0];i.click(),i.addEventListener("change",(function r(o){n.options.imageUploadFunction?n.uploadImagesUsingCustomFunction(n.options.imageUploadFunction,o.target.files):n.uploadImages(o.target.files,t,e),i.removeEventListener("change",r)}))},ot.prototype.uploadImage=function(t,e,n){var i=this;function r(t){i.updateStatusBar("upload-image",t),setTimeout((function(){i.updateStatusBar("upload-image",i.options.imageTexts.sbInit)}),1e4),n&&"function"==typeof n&&n(t),i.options.errorCallback(t)}function o(e){var n=i.options.imageTexts.sizeUnits.split(",");return e.replace("#image_name#",t.name).replace("#image_size#",Y(t.size,n)).replace("#image_max_size#",Y(i.options.imageMaxSize,n))}if(e=e||function(t){N(i,t)},t.size>this.options.imageMaxSize)r(o(this.options.errorMessages.fileTooLarge));else{var a=new FormData;a.append("image",t),i.options.imageCSRFToken&&a.append("csrfmiddlewaretoken",i.options.imageCSRFToken);var s=new XMLHttpRequest;s.upload.onprogress=function(e){if(e.lengthComputable){var n=""+Math.round(100*e.loaded/e.total);i.updateStatusBar("upload-image",i.options.imageTexts.sbProgress.replace("#file_name#",t.name).replace("#progress#",n))}},s.open("POST",this.options.imageUploadEndpoint),s.onload=function(){try{var t=JSON.parse(this.responseText)}catch(t){return console.error("EasyMDE: The server did not return a valid json."),void r(o(i.options.errorMessages.importError))}200===this.status&&t&&!t.error&&t.data&&t.data.filePath?e((i.options.imagePathAbsolute?"":window.location.origin+"/")+t.data.filePath):t.error&&t.error in i.options.errorMessages?r(o(i.options.errorMessages[t.error])):t.error?r(o(t.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),r(o(i.options.errorMessages.importError)))},s.onerror=function(t){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+t.target.status+" ("+t.target.statusText+")"),r(i.options.errorMessages.importError)},s.send(a)}},ot.prototype.uploadImageUsingCustomFunction=function(t,e){var n=this;t.apply(this,[e,function(t){N(n,t)},function(t){var i=function(t){var i=n.options.imageTexts.sizeUnits.split(",");return t.replace("#image_name#",e.name).replace("#image_size#",Y(e.size,i)).replace("#image_max_size#",Y(n.options.imageMaxSize,i))}(t);n.updateStatusBar("upload-image",i),setTimeout((function(){n.updateStatusBar("upload-image",n.options.imageTexts.sbInit)}),1e4),n.options.errorCallback(i)}])},ot.prototype.setPreviewMaxHeight=function(){var t=this.codemirror.getWrapperElement(),e=t.nextSibling,n=parseInt(window.getComputedStyle(t).paddingTop),i=parseInt(window.getComputedStyle(t).borderTopWidth),r=(parseInt(this.options.maxHeight)+2*n+2*i).toString()+"px";e.style.height=r},ot.prototype.createSideBySide=function(){var t=this.codemirror,e=t.getWrapperElement(),n=e.nextSibling;if(!n||!/editor-preview-side/.test(n.className)){if((n=document.createElement("div")).className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var i=0;i<this.options.previewClass.length;i++)n.className+=" "+this.options.previewClass[i];else"string"==typeof this.options.previewClass&&(n.className+=" "+this.options.previewClass);e.parentNode.insertBefore(n,e.nextSibling)}if(void 0!==this.options.maxHeight&&this.setPreviewMaxHeight(),!1===this.options.syncSideBySidePreviewScroll)return n;var r=!1,o=!1;return t.on("scroll",(function(t){if(r)r=!1;else{o=!0;var e=t.getScrollInfo().height-t.getScrollInfo().clientHeight,i=parseFloat(t.getScrollInfo().top)/e,a=(n.scrollHeight-n.clientHeight)*i;n.scrollTop=a}})),n.onscroll=function(){if(o)o=!1;else{r=!0;var e=n.scrollHeight-n.clientHeight,i=parseFloat(n.scrollTop)/e,a=(t.getScrollInfo().height-t.getScrollInfo().clientHeight)*i;t.scrollTo(0,a)}},n},ot.prototype.createToolbar=function(t){if((t=t||this.options.toolbar)&&0!==t.length){var e;for(e=0;e<t.length;e++)null!=J[t[e]]&&(t[e]=J[t[e]]);var n=document.createElement("div");n.className="editor-toolbar";var i=this,r={};for(i.toolbar=t,e=0;e<t.length;e++)if(("guide"!=t[e].name||!1!==i.options.toolbarGuideIcon)&&!(i.options.hideIcons&&-1!=i.options.hideIcons.indexOf(t[e].name)||("fullscreen"==t[e].name||"side-by-side"==t[e].name)&&u())){if("|"===t[e]){for(var o=!1,a=e+1;a<t.length;a++)"|"===t[a]||i.options.hideIcons&&-1!=i.options.hideIcons.indexOf(t[a].name)||(o=!0);if(!o)continue}!function(t){var e;if(e="|"===t?v():t.children?g(t,i.options.toolbarTips,i.options.shortcuts,i):m(t,!0,i.options.toolbarTips,i.options.shortcuts,"button",i),r[t.name||t]=e,n.appendChild(e),"upload-image"===t.name){var o=document.createElement("input");o.className="imageInput",o.type="file",o.multiple=!0,o.name="image",o.accept=i.options.imageAccept,o.style.display="none",o.style.opacity=0,n.appendChild(o)}}(t[e])}i.toolbar_div=n,i.toolbarElements=r;var s=this.codemirror;s.on("cursorActivity",(function(){var t,e,n=y(s);for(var i in r)e=void 0,e=r[t=i],n[t]?e.className+=" active":"fullscreen"!=t&&"side-by-side"!=t&&(e.className=e.className.replace(/\s*active\s*/g,""))}));var l=s.getWrapperElement();return l.parentNode.insertBefore(n,l),n}},ot.prototype.createStatusbar=function(t){t=t||this.options.status;var e=this.options,n=this.codemirror;if(t&&0!==t.length){var i,r,o,a,s=[];for(i=0;i<t.length;i++)if(r=void 0,o=void 0,a=void 0,"object"===lc(t[i]))s.push({className:t[i].className,defaultValue:t[i].defaultValue,onUpdate:t[i].onUpdate,onActivity:t[i].onActivity});else{var l=t[i];"words"===l?(a=function(t){t.innerHTML=Z(n.getValue())},r=function(t){t.innerHTML=Z(n.getValue())}):"lines"===l?(a=function(t){t.innerHTML=n.lineCount()},r=function(t){t.innerHTML=n.lineCount()}):"cursor"===l?(a=function(t){t.innerHTML="1:1"},o=function(t){var e=n.getCursor(),i=e.line+1,r=e.ch+1;t.innerHTML=i+":"+r}):"autosave"===l?a=function(t){null!=e.autosave&&!0===e.autosave.enabled&&t.setAttribute("id","autosaved")}:"upload-image"===l&&(a=function(t){t.innerHTML=e.imageTexts.sbInit}),s.push({className:l,defaultValue:a,onUpdate:r,onActivity:o})}var u=document.createElement("div");for(u.className="editor-statusbar",i=0;i<s.length;i++){var c=s[i],h=document.createElement("span");h.className=c.className,"function"==typeof c.defaultValue&&c.defaultValue(h),"function"==typeof c.onUpdate&&this.codemirror.on("update",function(t,e){return function(){e.onUpdate(t)}}(h,c)),"function"==typeof c.onActivity&&this.codemirror.on("cursorActivity",function(t,e){return function(){e.onActivity(t)}}(h,c)),u.appendChild(h)}var d=this.codemirror.getWrapperElement();return d.parentNode.insertBefore(u,d.nextSibling),u}},ot.prototype.value=function(t){var e=this.codemirror;if(void 0===t)return e.getValue();if(e.getDoc().setValue(t),this.isPreviewActive()){var n=e.getWrapperElement().lastChild;n.innerHTML=this.options.previewRender(t,n)}return this},ot.toggleBold=_,ot.toggleItalic=E,ot.toggleStrikethrough=w,ot.toggleBlockquote=D,ot.toggleHeadingSmaller=C,ot.toggleHeadingBigger=k,ot.toggleHeading1=S,ot.toggleHeading2=T,ot.toggleHeading3=O,ot.toggleCodeBlock=A,ot.toggleUnorderedList=I,ot.toggleOrderedList=M,ot.cleanBlock=L,ot.drawLink=R,ot.drawImage=P,ot.drawUploadedImage=F,ot.drawTable=B,ot.drawHorizontalRule=j,ot.undo=z,ot.redo=H,ot.togglePreview=W,ot.toggleSideBySide=V,ot.toggleFullScreen=x,ot.prototype.toggleBold=function(){_(this)},ot.prototype.toggleItalic=function(){E(this)},ot.prototype.toggleStrikethrough=function(){w(this)},ot.prototype.toggleBlockquote=function(){D(this)},ot.prototype.toggleHeadingSmaller=function(){C(this)},ot.prototype.toggleHeadingBigger=function(){k(this)},ot.prototype.toggleHeading1=function(){S(this)},ot.prototype.toggleHeading2=function(){T(this)},ot.prototype.toggleHeading3=function(){O(this)},ot.prototype.toggleCodeBlock=function(){A(this)},ot.prototype.toggleUnorderedList=function(){I(this)},ot.prototype.toggleOrderedList=function(){M(this)},ot.prototype.cleanBlock=function(){L(this)},ot.prototype.drawLink=function(){R(this)},ot.prototype.drawImage=function(){P(this)},ot.prototype.drawUploadedImage=function(){F(this)},ot.prototype.drawTable=function(){B(this)},ot.prototype.drawHorizontalRule=function(){j(this)},ot.prototype.undo=function(){z(this)},ot.prototype.redo=function(){H(this)},ot.prototype.togglePreview=function(){W(this)},ot.prototype.toggleSideBySide=function(){V(this)},ot.prototype.toggleFullScreen=function(){x(this)},ot.prototype.isPreviewActive=function(){var t=this.codemirror.getWrapperElement().lastChild;return/editor-preview-active/.test(t.className)},ot.prototype.isSideBySideActive=function(){var t=this.codemirror.getWrapperElement().nextSibling;return/editor-preview-active-side/.test(t.className)},ot.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},ot.prototype.getState=function(){return y(this.codemirror)},ot.prototype.toTextArea=function(){var t=this.codemirror,e=t.getWrapperElement(),n=e.parentNode;n&&(this.gui.toolbar&&n.removeChild(this.gui.toolbar),this.gui.statusbar&&n.removeChild(this.gui.statusbar),this.gui.sideBySide&&n.removeChild(this.gui.sideBySide)),n.parentNode.insertBefore(e,n),n.remove(),t.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},e.exports=ot})),Hc=mc((function(t,e){(function(){}).call(t),function(){null==window.Set&&(window.Set=function(){function t(){this.clear()}return t.prototype.clear=function(){return this.values=[]},t.prototype.has=function(t){return-1!==this.values.indexOf(t)},t.prototype.add=function(t){return this.has(t)||this.values.push(t),this},t.prototype.delete=function(t){var e;return-1!==(e=this.values.indexOf(t))&&(this.values.splice(e,1),!0)},t.prototype.forEach=function(){var t;return(t=this.values).forEach.apply(t,arguments)},t}())}.call(t),function(t){function n(){}function i(t){if("object"!=lc(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function r(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void h((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void a(e.promise,t)}o(e.promise,i)}else(1===t._state?o:a)(e.promise,t._value)})))}function o(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==lc(e)||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void s(t);if("function"==typeof n)return void u(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,s(t)}catch(e){a(t,e)}}function a(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&setTimeout((function(){t._handled||d(t._value)}),1);for(var e=0,n=t._deferreds.length;n>e;e++)r(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function u(t,e){var n=!1;try{t((function(t){n||(n=!0,o(e,t))}),(function(t){n||(n=!0,a(e,t))}))}catch(t){if(n)return;n=!0,a(e,t)}}var c=setTimeout,h="function"==typeof setImmediate&&setImmediate||function(t){c(t,1)},d=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var o=new i(n);return r(this,new l(t,e,o)),o},i.all=function(t){var e=Array.prototype.slice.call(t);return new i((function(t,n){function i(o,a){try{if(a&&("object"==lc(a)||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){i(o,t)}),n)}e[o]=a,0==--r&&t(e)}catch(t){n(t)}}if(0===e.length)return t([]);for(var r=e.length,o=0;o<e.length;o++)i(o,e[o])}))},i.resolve=function(t){return t&&"object"==lc(t)&&t.constructor===i?t:new i((function(e){e(t)}))},i.reject=function(t){return new i((function(e,n){n(t)}))},i.race=function(t){return new i((function(e,n){for(var i=0,r=t.length;r>i;i++)t[i].then(e,n)}))},i._setImmediateFn=function(t){h=t},i._setUnhandledRejectionFn=function(t){d=t},void 0!==e&&e.exports?e.exports=i:t.Promise||(t.Promise=i)}(t),function(){var t,e,n,i="object"==lc(window.customElements),r="function"==typeof document.registerElement;i||r||("undefined"==typeof WeakMap&&(t=Object.defineProperty,e=Date.now()%1e9,(n=function(){this.name="__st"+(1e9*Math.random()>>>0)+e+++"__"}).prototype={set:function(e,n){var i=e[this.name];return i&&i[0]===e?i[1]=n:t(e,this.name,{value:[e,n],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},delete:function(t){var e=t[this.name];return!(!e||e[0]!==t||(e[0]=e[1]=void 0,0))},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=n),function(t){function e(){g=!1;var t=m;m=[],t.sort((function(t,e){return t.uid_-e.uid_}));var n=!1;t.forEach((function(t){var e=t.takeRecords();(function(t){t.nodes_.forEach((function(e){var n=c.get(e);n&&n.forEach((function(e){e.observer===t&&e.removeTransientObservers()}))}))})(t),e.length&&(t.callback_(e,t),n=!0)})),n&&e()}function n(t,e){for(var n=t;n;n=n.parentNode){var i=c.get(n);if(i)for(var r=0;r<i.length;r++){var o=i[r],a=o.options;if(n===t||a.subtree){var s=e(a);s&&o.enqueue(s)}}}}function i(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++v}function r(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function o(t,e){return f=new r(t,e)}function a(t){return p||(p=function(t){var e=new r(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}(f),p.oldValue=t,p)}function s(t,e){return t===e?t:p&&function(t){return t===p||t===f}(t)?p:null}function l(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var u,c=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))u=setTimeout;else if(window.setImmediate)u=window.setImmediate;else{var h=[],d=String(Math.random());window.addEventListener("message",(function(t){if(t.data===d){var e=h;h=[],e.forEach((function(t){t()}))}})),u=function(t){h.push(t),window.postMessage(d,"*")}}var f,p,g=!1,m=[],v=0;i.prototype={observe:function(t,e){if(t=function(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=c.get(t);n||c.set(t,n=[]);for(var i,r=0;r<n.length;r++)if(n[r].observer===this){(i=n[r]).removeListeners(),i.options=e;break}i||(i=new l(this,t,e),n.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach((function(t){for(var e=c.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}}),this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}},l.prototype={enqueue:function(t){var n=this.observer.records_,i=n.length;if(n.length>0){var r=s(n[i-1],t);if(r)return void(n[i-1]=r)}else!function(t){m.push(t),g||(g=!0,u(e))}(this.observer);n[i]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=c.get(t);e||c.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach((function(t){this.removeListeners_(t);for(var e=c.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}}),this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,i=t.relatedNode.namespaceURI,r=t.target;(l=new o("attributes",r)).attributeName=e,l.attributeNamespace=i;var s=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;n(r,(function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(i)?void 0:t.attributeOldValue?a(s):l}));break;case"DOMCharacterDataModified":var l=o("characterData",r=t.target);s=t.prevValue;n(r,(function(t){return t.characterData?t.characterDataOldValue?a(s):l:void 0}));break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var u,c,h=t.target;"DOMNodeInserted"===t.type?(u=[h],c=[]):(u=[],c=[h]);var d=h.previousSibling,g=h.nextSibling;(l=o("childList",t.target.parentNode)).addedNodes=u,l.removedNodes=c,l.previousSibling=d,l.nextSibling=g,n(t.relatedNode,(function(t){return t.childList?l:void 0}))}f=p=void 0}},t.JsMutationObserver=i,t.MutationObserver||(t.MutationObserver=i,i._isPolyfilled=!0)}}(self),function(){if(!window.performance||!window.performance.now){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}var e;window.requestAnimationFrame||(window.requestAnimationFrame=(e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)?function(t){return e((function(){t(performance.now())}))}:function(t){return window.setTimeout(t,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)});var n=function(){var t=document.createEvent("Event");return t.initEvent("foo",!0,!0),t.preventDefault(),t.defaultPrevented}();if(!n){var i=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(i.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var r=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||r&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||r&&"function"!=typeof window.Event){var o=window.Event;window.Event=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n},window.Event.prototype=o.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},function(t){var e=t.flags,n=[];t.addModule=function(t){n.push(t)},t.initializeModules=function(){n.forEach((function(e){e(t)}))},t.hasNative=Boolean(document.registerElement),t.isIE=/Trident/.test(navigator.userAgent),t.useNative=!e.register&&t.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule((function(t){function e(t,e){n(t,(function(t){return!!e(t)||void i(t,e)})),i(t,e)}function n(t,e,i){var r=t.firstElementChild;if(!r)for(r=t.firstChild;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.nextSibling;for(;r;)!0!==e(r,i)&&n(r,e,i),r=r.nextElementSibling;return null}function i(t,n){for(var i=t.shadowRoot;i;)e(i,n),i=i.olderShadowRoot}function r(t,e,n){if(t=window.wrap(t),!(n.indexOf(t)>=0)){n.push(t);for(var i,a=t.querySelectorAll("link[rel="+o+"]"),s=0,l=a.length;l>s&&(i=a[s]);s++)i.import&&r(i.import,e,n);e(t)}}var o=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";t.forDocumentTree=function(t,e){r(t,e,[])},t.forSubtree=e})),window.CustomElements.addModule((function(t){function e(t,e){return n(t,e)||i(t,e)}function n(e,n){return!!t.upgrade(e,n)||void(n&&a(e))}function i(t,e){p(t,(function(t){return!!n(t,e)||void 0}))}function r(t){y.push(t),v||(v=!0,setTimeout(o))}function o(){v=!1;for(var t,e=y,n=0,i=e.length;i>n&&(t=e[n]);n++)t();y=[]}function a(t){m?r((function(){s(t)})):s(t)}function s(t){t.__upgraded__&&!t.__attached&&(t.__attached=!0,t.attachedCallback&&t.attachedCallback())}function l(t){m?r((function(){u(t)})):u(t)}function u(t){t.__upgraded__&&t.__attached&&(t.__attached=!1,t.detachedCallback&&t.detachedCallback())}function c(t,n){if(f.dom){var i=n[0];if(i&&"childList"===i.type&&i.addedNodes&&i.addedNodes){for(var r=i.addedNodes[0];r&&r!==document&&!r.host;)r=r.parentNode;var o=r&&(r.URL||r._URL||r.host&&r.host.localName)||"";o=o.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,o||"")}var a=function(t){for(var e=t,n=window.wrap(document);e;){if(e==n)return!0;e=e.parentNode||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host}}(t);n.forEach((function(t){"childList"===t.type&&(b(t.addedNodes,(function(t){t.localName&&e(t,a)})),b(t.removedNodes,(function(t){t.localName&&function(t){l(t),p(t,(function(t){l(t)}))}(t)})))})),f.dom&&console.groupEnd()}function h(t){if(!t.__observer){var e=new MutationObserver(c.bind(this,t));e.observe(t,{childList:!0,subtree:!0}),t.__observer=e}}function d(t){t=window.wrap(t),f.dom&&console.group("upgradeDocument: ",t.baseURI.split("/").pop()),e(t,t===window.wrap(document)),h(t),f.dom&&console.groupEnd()}var f=t.flags,p=t.forSubtree,g=t.forDocumentTree,m=window.MutationObserver._isPolyfilled&&f["throttle-attached"];t.hasPolyfillMutations=m,t.hasThrottledAttached=m;var v=!1,y=[],b=Array.prototype.forEach.call.bind(Array.prototype.forEach),x=Element.prototype.createShadowRoot;x&&(Element.prototype.createShadowRoot=function(){var t=x.call(this);return window.CustomElements.watchShadow(this),t}),t.watchShadow=function(t){if(t.shadowRoot&&!t.shadowRoot.__watched){f.dom&&console.log("watching shadow-root for: ",t.localName);for(var e=t.shadowRoot;e;)h(e),e=e.olderShadowRoot}},t.upgradeDocumentTree=function(t){g(t,d)},t.upgradeDocument=d,t.upgradeSubtree=i,t.upgradeAll=e,t.attached=a,t.takeRecords=function(t){for((t=window.wrap(t))||(t=window.wrap(document));t.parentNode;)t=t.parentNode;var e=t.__observer;e&&(c(t,e.takeRecords()),o())}})),window.CustomElements.addModule((function(t){function e(e,r,o){return i.upgrade&&console.group("upgrade:",e.localName),r.is&&e.setAttribute("is",r.is),n(e,r),e.__upgraded__=!0,(a=e).createdCallback&&a.createdCallback(),o&&t.attached(e),t.upgradeSubtree(e,o),i.upgrade&&console.groupEnd(),e;var a}function n(t,e){Object.__proto__||function(t,e,n){for(var i={},r=e;r!==n&&r!==HTMLElement.prototype;){for(var o,a=Object.getOwnPropertyNames(r),s=0;o=a[s];s++)i[o]||(Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o)),i[o]=1);r=Object.getPrototypeOf(r)}}(t,e.prototype,e.native),t.__proto__=e.prototype}var i=t.flags;t.upgrade=function(n,i){if("template"===n.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(n),!n.__upgraded__&&n.nodeType===Node.ELEMENT_NODE){var r=n.getAttribute("is"),o=t.getRegisteredDefinition(n.localName)||t.getRegisteredDefinition(r);if(o&&(r&&o.tag==n.localName||!r&&!o.extends))return e(n,o,i)}},t.upgradeWithDefinition=e,t.implementPrototype=n})),window.CustomElements.addModule((function(t){function e(t,e,n){t=t.toLowerCase();var i=this.getAttribute(t);n.apply(this,arguments);var r=this.getAttribute(t);this.attributeChangedCallback&&r!==i&&this.attributeChangedCallback(t,i,r)}function n(t){var e=i(t);return e?n(e.extends).concat([e]):[]}function i(t){return t?f[t.toLowerCase()]:void 0}function r(t,e){t&&(t=t.toLowerCase()),e&&(e=e.toLowerCase());var n,o=i(e||t);if(o){if(t==o.tag&&e==o.is)return new o.ctor;if(!e&&!o.is)return new o.ctor}return e?((n=r(t)).setAttribute("is",e),n):(n=g(t),t.indexOf("-")>=0&&c(n,HTMLElement),n)}function o(t,e){var n=t[e];t[e]=function(){var t=n.apply(this,arguments);return l(t),t}}var a,s=(t.isIE,t.upgradeDocumentTree),l=t.upgradeAll,u=t.upgradeWithDefinition,c=t.implementPrototype,h=t.useNative,d=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],f={},p="http://www.w3.org/1999/xhtml",g=document.createElement.bind(document),m=document.createElementNS.bind(document);a=Object.__proto__||h?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;for(var n=t;n;){if(n===e.prototype)return!0;n=n.__proto__}return!1},o(Node.prototype,"cloneNode"),o(document,"importNode"),document.registerElement=function(r,o){var a,l=o||{};if(!r)throw new Error("document.registerElement: first argument `name` must not be empty");if(r.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(r)+"'.");if(function(t){for(var e=0;e<d.length;e++)if(t===d[e])return!0}(r))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(r)+"'. The type name is invalid.");if(i(r))throw new Error("DuplicateDefinitionError: a type with name '"+String(r)+"' is already registered");return l.prototype||(l.prototype=Object.create(HTMLElement.prototype)),l.__name=r.toLowerCase(),l.extends&&(l.extends=l.extends.toLowerCase()),l.lifecycle=l.lifecycle||{},l.ancestry=n(l.extends),function(t){for(var e,n=t.extends,i=0;e=t.ancestry[i];i++)n=e.is&&e.tag;t.tag=n||t.__name,n&&(t.is=t.__name)}(l),function(t){if(!Object.__proto__){var e=HTMLElement.prototype;if(t.is){var n=document.createElement(t.tag);e=Object.getPrototypeOf(n)}for(var i,r=t.prototype,o=!1;r;)r==e&&(o=!0),(i=Object.getPrototypeOf(r))&&(r.__proto__=i),r=i;o||console.warn(t.tag+" prototype not found in prototype chain for "+t.is),t.native=e}}(l),function(t){if(!t.setAttribute._polyfilled){var n=t.setAttribute;t.setAttribute=function(t,i){e.call(this,t,i,n)};var i=t.removeAttribute;t.removeAttribute=function(t){e.call(this,t,null,i)},t.setAttribute._polyfilled=!0}}(l.prototype),function(t,e){f[t]=e}(l.__name,l),l.ctor=(a=l,function(){return function(t){return u(g(t.tag),t)}(a)}),l.ctor.prototype=l.prototype,l.prototype.constructor=l.ctor,t.ready&&s(document),l.ctor},document.createElement=r,document.createElementNS=function(t,e,n){return t===p?r(e,n):m(t,e)},t.registry=f,t.instanceof=a,t.reservedTagList=d,t.getRegisteredDefinition=i,document.register=document.registerElement})),function(t){function e(){o(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(t){setTimeout(t,16)})((function(){setTimeout((function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))}))}))}var n=t.useNative,i=t.initializeModules;if(t.isIE,n){var r=function(){};t.watchShadow=r,t.upgrade=r,t.upgradeAll=r,t.upgradeDocumentTree=r,t.upgradeSubtree=r,t.takeRecords=r,t.instanceof=function(t,e){return t instanceof e}}else i();var o=t.upgradeDocumentTree,a=t.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(t){return t}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(t){t.import&&a(wrap(t.import))}),"complete"===document.readyState||t.flags.eager)e();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,e)}else e()}(window.CustomElements))}.call(t),function(){}.call(t),function(){(function(){(function(){this.Trix={VERSION:"1.3.1",ZERO_WIDTH_SPACE:"\ufeff",NON_BREAKING_SPACE:"",OBJECT_REPLACEMENT_CHARACTER:"",browser:{composesExistingText:/Android.*Chrome/.test(navigator.userAgent),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:function(){var t,e,n;if("undefined"==typeof InputEvent)return!1;for(t=0,e=(n=["data","getTargetRanges","inputType"]).length;e>t;t++)if(!(n[t]in InputEvent.prototype))return!1;return!0}()},config:{}}}).call(this)}).call(this);var t=this.Trix;(function(){(function(){t.BasicObject=function(){function t(){}var e,n,i;return t.proxyMethod=function(t){var i,r,o,a,s;return o=n(t),i=o.name,a=o.toMethod,s=o.toProperty,r=o.optional,this.prototype[i]=function(){var t,n;return t=null!=a?r?"function"==typeof this[a]?this[a]():void 0:this[a]():null!=s?this[s]:void 0,r?null!=(n=null!=t?t[i]:void 0)?e.call(n,t,arguments):void 0:(n=t[i],e.call(n,t,arguments))}},n=function(t){var e,n;if(!(n=t.match(i)))throw new Error("can't parse @proxyMethod expression: "+t);return e={name:n[4]},null!=n[2]?e.toMethod=n[1]:e.toProperty=n[1],null!=n[3]&&(e.optional=!0),e},e=Function.prototype.apply,i=/^(.+?)(\(\))?(\?)?\.(.+?)$/,t}()}).call(this),function(){var e={}.hasOwnProperty;t.Object=function(n){function i(){this.id=++r}var r;return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),r=0,i.fromJSONString=function(t){return this.fromJSON(JSON.parse(t))},i.prototype.hasSameConstructorAs=function(t){return this.constructor===(null!=t?t.constructor:void 0)},i.prototype.isEqualTo=function(t){return this===t},i.prototype.inspect=function(){var t,e,n;return t=function(){var t,i,r;for(e in r=[],i=null!=(t=this.contentsForInspection())?t:{})n=i[e],r.push(e+"="+n);return r}.call(this),"#<"+this.constructor.name+":"+this.id+(t.length?" "+t.join(", "):"")+">"},i.prototype.contentsForInspection=function(){},i.prototype.toJSONString=function(){return JSON.stringify(this)},i.prototype.toUTF16String=function(){return t.UTF16String.box(this)},i.prototype.getCacheKey=function(){return this.id.toString()},i}(t.BasicObject)}.call(this),function(){t.extend=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this}}.call(this),function(){t.extend({defer:function(t){return setTimeout(t,1)}})}.call(this),function(){var e,n;t.extend({normalizeSpaces:function(e){return e.replace(RegExp(""+t.ZERO_WIDTH_SPACE,"g"),"").replace(RegExp(""+t.NON_BREAKING_SPACE,"g")," ")},normalizeNewlines:function(t){return t.replace(/\r\n/g,"\n")},breakableWhitespacePattern:RegExp("[^\\S"+t.NON_BREAKING_SPACE+"]"),squishBreakableWhitespace:function(e){return e.replace(RegExp(""+t.breakableWhitespacePattern.source,"g")," ").replace(/\ {2,}/g," ")},summarizeStringChange:function(e,i){var r,o,a,s;return e=t.UTF16String.box(e),(i=t.UTF16String.box(i)).length<e.length?(s=(o=n(e,i))[0],r=o[1]):(r=(a=n(i,e))[0],s=a[1]),{added:r,removed:s}}}),n=function(n,i){var r,o,a,s,l;return n.isEqualTo(i)?["",""]:(a=(s=(o=e(n,i)).utf16String.length)?(l=o.offset,r=n.codepoints.slice(0,l).concat(n.codepoints.slice(l+s)),e(i,t.UTF16String.fromCodepoints(r))):e(i,n),[o.utf16String.toString(),a.utf16String.toString()])},e=function(t,e){var n,i,r;for(n=0,i=t.length,r=e.length;i>n&&t.charAt(n).isEqualTo(e.charAt(n));)n++;for(;i>n+1&&t.charAt(i-1).isEqualTo(e.charAt(r-1));)i--,r--;return{utf16String:t.slice(n,i),offset:n}}}.call(this),function(){t.extend({copyObject:function(t){var e,n,i;for(e in null==t&&(t={}),n={},t)i=t[e],n[e]=i;return n},objectsAreEqual:function(t,e){var n;if(null==t&&(t={}),null==e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(n in t)if(t[n]!==e[n])return!1;return!0}})}.call(this),function(){var e=[].slice;t.extend({arraysAreEqual:function(t,e){var n,i,r;if(null==t&&(t=[]),null==e&&(e=[]),t.length!==e.length)return!1;for(i=n=0,r=t.length;r>n;i=++n)if(t[i]!==e[i])return!1;return!0},arrayStartsWith:function(e,n){return null==e&&(e=[]),null==n&&(n=[]),t.arraysAreEqual(e.slice(0,n.length),n)},spliceArray:function(){var t,n,i;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],(i=n.slice(0)).splice.apply(i,t),i},summarizeArrayChange:function(t,e){var n,i,r,o,a,s,l,u,c,h,d;for(null==t&&(t=[]),null==e&&(e=[]),n=[],h=[],r=new Set,o=0,l=t.length;l>o;o++)d=t[o],r.add(d);for(i=new Set,a=0,u=e.length;u>a;a++)d=e[a],i.add(d),r.has(d)||n.push(d);for(s=0,c=t.length;c>s;s++)d=t[s],i.has(d)||h.push(d);return{added:n,removed:h}}})}.call(this),function(){var e,n,i,r;e=null,n=null,r=null,i=null,t.extend({getAllAttributeNames:function(){return null!=e?e:e=t.getTextAttributeNames().concat(t.getBlockAttributeNames())},getBlockConfig:function(e){return t.config.blockAttributes[e]},getBlockAttributeNames:function(){return null!=n?n:n=Object.keys(t.config.blockAttributes)},getTextConfig:function(e){return t.config.textAttributes[e]},getTextAttributeNames:function(){return null!=r?r:r=Object.keys(t.config.textAttributes)},getListAttributeNames:function(){var e,n;return null!=i?i:i=function(){var i,r;for(e in r=[],i=t.config.blockAttributes)null!=(n=i[e].listAttribute)&&r.push(n);return r}()}})}.call(this),function(){var e,n,i,r,o,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=document.documentElement,n=null!=(i=null!=(r=null!=(o=e.matchesSelector)?o:e.webkitMatchesSelector)?r:e.msMatchesSelector)?i:e.mozMatchesSelector,t.extend({handleEvent:function(n,i){var r,o,a,s,l,u,c,h,d,f,p;return l=(c=null!=i?i:{}).onElement,s=c.matchingSelector,p=c.withCallback,a=c.inPhase,u=c.preventDefault,d=c.times,r=null!=l?l:e,h=s,p,f="capturing"===a,(o=function(e){var n;return null!=d&&0==--d&&o.destroy(),null!=(n=t.findClosestElementFromNode(e.target,{matchingSelector:h}))&&(null!=p&&p.call(n,e,n),u)?e.preventDefault():void 0}).destroy=function(){return r.removeEventListener(n,o,f)},r.addEventListener(n,o,f),o},handleEventOnce:function(e,n){return null==n&&(n={}),n.times=1,t.handleEvent(e,n)},triggerEvent:function(n,i){var r,o,a,s,l,u,c;return u=(c=null!=i?i:{}).onElement,o=c.bubbles,a=c.cancelable,r=c.attributes,s=null!=u?u:e,o=!1!==o,a=!1!==a,(l=document.createEvent("Events")).initEvent(n,o,a),null!=r&&t.extend.call(l,r),s.dispatchEvent(l)},elementMatchesSelector:function(t,e){return 1===(null!=t?t.nodeType:void 0)?n.call(t,e):void 0},findClosestElementFromNode:function(e,n){var i,r,o;for(i=(r=null!=n?n:{}).matchingSelector,o=r.untilNode;null!=e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.parentNode;if(null!=e){if(null==i)return e;if(e.closest&&null==o)return e.closest(i);for(;e&&e!==o;){if(t.elementMatchesSelector(e,i))return e;e=e.parentNode}}},findInnerElement:function(t){for(;null!=t?t.firstElementChild:void 0;)t=t.firstElementChild;return t},innerElementIsActive:function(e){return document.activeElement!==e&&t.elementContainsNode(e,document.activeElement)},elementContainsNode:function(t,e){if(t&&e)for(;e;){if(e===t)return!0;e=e.parentNode}},findNodeFromContainerAndOffset:function(t,e){var n;if(t)return t.nodeType===Node.TEXT_NODE?t:0===e?null!=(n=t.firstChild)?n:t:t.childNodes.item(e-1)},findElementFromContainerAndOffset:function(e,n){var i;return i=t.findNodeFromContainerAndOffset(e,n),t.findClosestElementFromNode(i)},findChildIndexOfNode:function(t){var e;if(null!=t?t.parentNode:void 0){for(e=0;t=t.previousSibling;)e++;return e}},removeNode:function(t){var e;return null!=t&&null!=(e=t.parentNode)?e.removeChild(t):void 0},walkTree:function(t,e){var n,i,r,o,a;return i=(r=null!=e?e:{}).onlyNodesOfType,o=r.usingFilter,n=r.expandEntityReferences,a=function(){switch(i){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}}(),document.createTreeWalker(t,a,null!=o?o:null,!0===n)},tagName:function(t){var e;return null!=t&&null!=(e=t.tagName)?e.toLowerCase():void 0},makeElement:function(t,e){var n,i,r,o,a,s,l,u,c,h,d,f,p,g;if(null==e&&(e={}),"object"==lc(t)?t=(e=t).tagName:e={attributes:e},r=document.createElement(t),null!=e.editable&&(null==e.attributes&&(e.attributes={}),e.attributes.contenteditable=e.editable),e.attributes)for(s in c=e.attributes)g=c[s],r.setAttribute(s,g);if(e.style)for(s in h=e.style)g=h[s],r.style[s]=g;if(e.data)for(s in d=e.data)g=d[s],r.dataset[s]=g;if(e.className)for(o=0,l=(f=e.className.split(" ")).length;l>o;o++)i=f[o],r.classList.add(i);if(e.textContent&&(r.textContent=e.textContent),e.childNodes)for(a=0,u=(p=[].concat(e.childNodes)).length;u>a;a++)n=p[a],r.appendChild(n);return r},getBlockTagNames:function(){var e,n;return null!=t.blockTagNames?t.blockTagNames:t.blockTagNames=function(){var i,r;for(e in r=[],i=t.config.blockAttributes)(n=i[e].tagName)&&r.push(n);return r}()},nodeIsBlockContainer:function(e){return t.nodeIsBlockStartComment(null!=e?e.firstChild:void 0)},nodeProbablyIsBlockContainer:function(e){var n,i;return n=t.tagName(e),a.call(t.getBlockTagNames(),n)>=0&&(i=t.tagName(e.firstChild),a.call(t.getBlockTagNames(),i)<0)},nodeIsBlockStart:function(e,n){return(null!=n?n:{strict:!0}).strict?t.nodeIsBlockStartComment(e):t.nodeIsBlockStartComment(e)||!t.nodeIsBlockStartComment(e.firstChild)&&t.nodeProbablyIsBlockContainer(e)},nodeIsBlockStartComment:function(e){return t.nodeIsCommentNode(e)&&"block"===(null!=e?e.data:void 0)},nodeIsCommentNode:function(t){return(null!=t?t.nodeType:void 0)===Node.COMMENT_NODE},nodeIsCursorTarget:function(e,n){var i;return i=(null!=n?n:{}).name,e?t.nodeIsTextNode(e)?e.data===t.ZERO_WIDTH_SPACE?!i||e.parentNode.dataset.trixCursorTarget===i:void 0:t.nodeIsCursorTarget(e.firstChild):void 0},nodeIsAttachmentElement:function(e){return t.elementMatchesSelector(e,t.AttachmentView.attachmentSelector)},nodeIsEmptyTextNode:function(e){return t.nodeIsTextNode(e)&&""===(null!=e?e.data:void 0)},nodeIsTextNode:function(t){return(null!=t?t.nodeType:void 0)===Node.TEXT_NODE}})}.call(this),function(){var e,n,i,r,o;e=t.copyObject,r=t.objectsAreEqual,t.extend({normalizeRange:i=function(t){var e;if(null!=t)return Array.isArray(t)||(t=[t,t]),[n(t[0]),n(null!=(e=t[1])?e:t[0])]},rangeIsCollapsed:function(t){var e,n,r;if(null!=t)return r=(n=i(t))[0],e=n[1],o(r,e)},rangesAreEqual:function(t,e){var n,r,a,s,l,u;if(null!=t&&null!=e)return r=(a=i(t))[0],n=a[1],u=(s=i(e))[0],l=s[1],o(r,u)&&o(n,l)}}),n=function(t){return"number"==typeof t?t:e(t)},o=function(t,e){return"number"==typeof t?t===e:r(t,e)}}.call(this),function(){var e,n,i,r,o,a,s,l;t.registerElement=function(t,e){var n,i;return null==e&&(e={}),t=t.toLowerCase(),e=s(e),(n=(i=a(e)).defaultCSS)&&(delete i.defaultCSS,r(n,t)),o(t,i)},r=function(t,e){return i(e).textContent=t.replace(/%t/g,e)},i=function(t){var n,i;return(n=document.createElement("style")).setAttribute("type","text/css"),n.setAttribute("data-tag-name",t.toLowerCase()),(i=e())&&n.setAttribute("nonce",i),document.head.insertBefore(n,document.head.firstChild),n},e=function(){var t;return(t=n("trix-csp-nonce")||n("csp-nonce"))?t.getAttribute("content"):void 0},n=function(t){return document.head.querySelector("meta[name="+t+"]")},a=function(t){var e,n,i;for(e in n={},t)i=t[e],n[e]="function"==typeof i?{value:i}:i;return n},l=function(t){var e,n,i,r,o;for(e={},n=0,r=(o=["initialize","connect","disconnect"]).length;r>n;n++)e[i=o[n]]=t[i],delete t[i];return e},s=window.customElements?function(t){var e,n,i,r,o;return o=l(t),i=o.initialize,e=o.connect,n=o.disconnect,i&&(r=e,e=function(){return this.initialized||(this.initialized=!0,i.call(this)),null!=r?r.call(this):void 0}),e&&(t.connectedCallback=e),n&&(t.disconnectedCallback=n),t}:function(t){var e,n,i,r;return i=(r=l(t)).initialize,e=r.connect,n=r.disconnect,i&&(t.createdCallback=i),e&&(t.attachedCallback=e),n&&(t.detachedCallback=n),t},o=window.customElements?function(t,e){var n;return n=function(){return"object"==("undefined"==typeof Reflect?"undefined":lc(Reflect))?Reflect.construct(HTMLElement,[],n):HTMLElement.apply(this)},Object.setPrototypeOf(n.prototype,HTMLElement.prototype),Object.setPrototypeOf(n,HTMLElement),Object.defineProperties(n.prototype,e),window.customElements.define(t,n),n}:function(t,e){var n,i;return i=Object.create(HTMLElement.prototype,e),n=document.registerElement(t,{prototype:i}),Object.defineProperty(i,"constructor",{value:n}),n}}.call(this),function(){var e,n;t.extend({getDOMSelection:function(){var t;return(t=window.getSelection()).rangeCount>0?t:void 0},getDOMRange:function(){var n,i;return(n=null!=(i=t.getDOMSelection())?i.getRangeAt(0):void 0)&&!e(n)?n:void 0},setDOMRange:function(e){var n;return(n=window.getSelection()).removeAllRanges(),n.addRange(e),t.selectionChangeObserver.update()}}),e=function(t){return n(t.startContainer)||n(t.endContainer)},n=function(t){return!Object.getPrototypeOf(t)}}.call(this),function(){var e;e={"application/x-trix-feature-detection":"test"},t.extend({dataTransferIsPlainText:function(t){var e,n,i;return i=t.getData("text/plain"),n=t.getData("text/html"),i&&n?(e=(new DOMParser).parseFromString(n,"text/html").body).textContent===i?!e.querySelector("*"):void 0:null!=i?i.length:void 0},dataTransferIsWritable:function(t){var n,i;if(null!=(null!=t?t.setData:void 0)){for(n in e)if(i=e[n],!function(){try{return t.setData(n,i),t.getData(n)===i}catch(t){}}())return;return!0}},keyEventIsKeyboardCommand:/Mac|^iP/.test(navigator.platform)?function(t){return t.metaKey}:function(t){return t.ctrlKey}})}.call(this),function(){var e,n,i,r;t.extend({RTL_PATTERN:/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,getDirection:(n=t.makeElement("input",{dir:"auto",name:"x",dirName:"x.dir"}),(e=t.makeElement("form")).appendChild(n),i=function(){try{return new FormData(e).has(n.dirName)}catch(t){}}(),r=function(){try{return n.matches(":dir(ltr),:dir(rtl)")}catch(t){}}(),i?function(t){return n.value=t,new FormData(e).get(n.dirName)}:r?function(t){return n.value=t,n.matches(":dir(rtl)")?"rtl":"ltr"}:function(e){var n;return n=e.trim().charAt(0),t.RTL_PATTERN.test(n)?"rtl":"ltr"})})}.call(this),function(){}.call(this),function(){var e,n={}.hasOwnProperty;e=t.arraysAreEqual,t.Hash=function(i){function r(t){null==t&&(t={}),this.values=a(t),r.__super__.constructor.apply(this,arguments)}var o,a,s,l,u;return function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,i),r.fromCommonAttributesOfObjects=function(t){var e,n,i,r,a,s;if(null==t&&(t=[]),!t.length)return new this;for(i=(e=o(t[0])).getKeys(),n=0,r=(s=t.slice(1)).length;r>n;n++)a=s[n],i=e.getKeysCommonToHash(o(a)),e=e.slice(i);return e},r.box=function(t){return o(t)},r.prototype.add=function(t,e){return this.merge(l(t,e))},r.prototype.remove=function(e){return new t.Hash(a(this.values,e))},r.prototype.get=function(t){return this.values[t]},r.prototype.has=function(t){return t in this.values},r.prototype.merge=function(e){return new t.Hash(s(this.values,u(e)))},r.prototype.slice=function(e){var n,i,r,o;for(o={},n=0,r=e.length;r>n;n++)i=e[n],this.has(i)&&(o[i]=this.values[i]);return new t.Hash(o)},r.prototype.getKeys=function(){return Object.keys(this.values)},r.prototype.getKeysCommonToHash=function(t){var e,n,i,r,a;for(t=o(t),a=[],e=0,i=(r=this.getKeys()).length;i>e;e++)n=r[e],this.values[n]===t.values[n]&&a.push(n);return a},r.prototype.isEqualTo=function(t){return e(this.toArray(),o(t).toArray())},r.prototype.isEmpty=function(){return 0===this.getKeys().length},r.prototype.toArray=function(){var t,e,n;return(null!=this.array?this.array:this.array=function(){var i;for(t in e=[],i=this.values)n=i[t],e.push(t,n);return e}.call(this)).slice(0)},r.prototype.toObject=function(){return a(this.values)},r.prototype.toJSON=function(){return this.toObject()},r.prototype.contentsForInspection=function(){return{values:JSON.stringify(this.values)}},l=function(t,e){var n;return(n={})[t]=e,n},s=function(t,e){var n,i,r;for(n in i=a(t),e)r=e[n],i[n]=r;return i},a=function(t,e){var n,i,r,o,a;for(o={},n=0,r=(a=Object.keys(t).sort()).length;r>n;n++)(i=a[n])!==e&&(o[i]=t[i]);return o},o=function(e){return e instanceof t.Hash?e:new t.Hash(e)},u=function(e){return e instanceof t.Hash?e.values:e},r}(t.Object)}.call(this),function(){t.ObjectGroup=function(){function t(t,e){var n,i;this.objects=null!=t?t:[],i=e.depth,(n=e.asTree)&&(this.depth=i,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}return t.groupObjects=function(t,e){var n,i,r,o,a,s,l,u,c;for(null==t&&(t=[]),r=(c=null!=e?e:{}).depth,(n=c.asTree)&&null==r&&(r=0),u=[],a=0,s=t.length;s>a;a++){if(l=t[a],o){if(("function"==typeof l.canBeGrouped?l.canBeGrouped(r):void 0)&&("function"==typeof(i=o[o.length-1]).canBeGroupedWith?i.canBeGroupedWith(l,r):void 0)){o.push(l);continue}u.push(new this(o,{depth:r,asTree:n})),o=null}("function"==typeof l.canBeGrouped?l.canBeGrouped(r):void 0)?o=[l]:u.push(l)}return o&&u.push(new this(o,{depth:r,asTree:n})),u},t.prototype.getObjects=function(){return this.objects},t.prototype.getDepth=function(){return this.depth},t.prototype.getCacheKey=function(){var t,e,n,i,r;for(e=["objectGroup"],t=0,n=(r=this.getObjects()).length;n>t;t++)i=r[t],e.push(i.getCacheKey());return e.join("/")},t}()}.call(this),function(){var e={}.hasOwnProperty;t.ObjectMap=function(t){function n(t){var e,n,i,r,o;for(null==t&&(t=[]),this.objects={},i=0,r=t.length;r>i;i++)o=t[i],n=JSON.stringify(o),null==(e=this.objects)[n]&&(e[n]=o)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.find=function(t){var e;return e=JSON.stringify(t),this.objects[e]},n}(t.BasicObject)}.call(this),function(){t.ElementStore=function(){function t(t){this.reset(t)}var e;return t.prototype.add=function(t){var n;return n=e(t),this.elements[n]=t},t.prototype.remove=function(t){var n,i;return n=e(t),(i=this.elements[n])?(delete this.elements[n],i):void 0},t.prototype.reset=function(t){var e,n,i;for(null==t&&(t=[]),this.elements={},n=0,i=t.length;i>n;n++)e=t[n],this.add(e);return t},e=function(t){return t.dataset.trixStoreKey},t}()}.call(this),function(){}.call(this),function(){var e={}.hasOwnProperty;t.Operation=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.isPerforming=function(){return!0===this.performing},n.prototype.hasPerformed=function(){return!0===this.performed},n.prototype.hasSucceeded=function(){return this.performed&&this.succeeded},n.prototype.hasFailed=function(){return this.performed&&!this.succeeded},n.prototype.getPromise=function(){return null!=this.promise?this.promise:this.promise=new Promise((t=this,function(e,n){return t.performing=!0,t.perform((function(i,r){return t.succeeded=i,t.performing=!1,t.performed=!0,t.succeeded?e(r):n(r)}))}));var t},n.prototype.perform=function(t){return t(!1)},n.prototype.release=function(){var t;return null!=(t=this.promise)&&"function"==typeof t.cancel&&t.cancel(),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null},n.proxyMethod("getPromise().then"),n.proxyMethod("getPromise().catch"),n}(t.BasicObject)}.call(this),function(){var e,n,i,r,o,a={}.hasOwnProperty;t.UTF16String=function(t){function e(t,e){this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}return function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e.box=function(t){return null==t&&(t=""),t instanceof this?t:this.fromUCS2String(null!=t?t.toString():void 0)},e.fromUCS2String=function(t){return new this(t,r(t))},e.fromCodepoints=function(t){return new this(o(t),t)},e.prototype.offsetToUCS2Offset=function(t){return o(this.codepoints.slice(0,Math.max(0,t))).length},e.prototype.offsetFromUCS2Offset=function(t){return r(this.ucs2String.slice(0,Math.max(0,t))).length},e.prototype.slice=function(){var t;return this.constructor.fromCodepoints((t=this.codepoints).slice.apply(t,arguments))},e.prototype.charAt=function(t){return this.slice(t,t+1)},e.prototype.isEqualTo=function(t){return this.constructor.box(t).ucs2String===this.ucs2String},e.prototype.toJSON=function(){return this.ucs2String},e.prototype.getCacheKey=function(){return this.ucs2String},e.prototype.toString=function(){return this.ucs2String},e}(t.BasicObject),e=1===("function"==typeof Array.from?Array.from("").length:void 0),n=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),i=" "===("function"==typeof String.fromCodePoint?String.fromCodePoint(32,128124):void 0),r=e&&n?function(t){return Array.from(t).map((function(t){return t.codePointAt(0)}))}:function(t){var e,n,i,r,o;for(r=[],e=0,i=t.length;i>e;)(o=t.charCodeAt(e++))>=55296&&56319>=o&&i>e&&(56320==(64512&(n=t.charCodeAt(e++)))?o=((1023&o)<<10)+(1023&n)+65536:e--),r.push(o);return r},o=i?function(t){return String.fromCodePoint.apply(String,t)}:function(t){var e,n;return function(){var i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],e="",n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|1023&n),o.push(e+String.fromCharCode(n));return o}().join("")}}.call(this),function(){}.call(this),function(){}.call(this),function(){t.config.lang={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"}}.call(this),function(){t.config.css={attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"}}.call(this),function(){var e;t.config.blockAttributes=e={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test:function(n){return t.tagName(n.parentNode)===e[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test:function(n){return t.tagName(n.parentNode)===e[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}}}.call(this),function(){var e,n;e=t.config.lang,n=[e.bytes,e.KB,e.MB,e.GB,e.TB,e.PB],t.config.fileSize={prefix:"IEC",precision:2,formatter:function(t){var i,r;switch(t){case 0:return"0 "+e.bytes;case 1:return"1 "+e.byte;default:return i=function(){switch(this.prefix){case"SI":return 1e3;case"IEC":return 1024}}.call(this),r=Math.floor(Math.log(t)/Math.log(i)),(t/Math.pow(i,r)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"")+" "+n[r]}}}}.call(this),function(){t.config.textAttributes={bold:{tagName:"strong",inheritable:!0,parser:function(t){var e;return"bold"===(e=window.getComputedStyle(t)).fontWeight||e.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:function(t){return"italic"===window.getComputedStyle(t).fontStyle}},href:{groupTagName:"a",parser:function(e){var n,i;return i="a:not("+t.AttachmentView.attachmentSelector+")",(n=t.findClosestElementFromNode(e,{matchingSelector:i}))?n.getAttribute("href"):void 0}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}}}.call(this),function(){var e,n,i;i=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],n="data-trix-serialized-attributes",e=new RegExp("\x3c!--block--\x3e","g"),t.extend({serializers:{"application/json":function(e){var n;if(e instanceof t.Document)n=e;else{if(!(e instanceof HTMLElement))throw new Error("unserializable object");n=t.Document.fromHTML(e.innerHTML)}return n.toSerializableDocument().toJSONString()},"text/html":function(r){var o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,x,_;if(r instanceof t.Document)l=t.DocumentView.render(r);else{if(!(r instanceof HTMLElement))throw new Error("unserializable object");l=r.cloneNode(!0)}for(u=0,f=(y=l.querySelectorAll("[data-trix-serialize=false]")).length;f>u;u++)s=y[u],t.removeNode(s);for(c=0,p=i.length;p>c;c++)for(o=i[c],h=0,g=(b=l.querySelectorAll("["+o+"]")).length;g>h;h++)(s=b[h]).removeAttribute(o);for(d=0,m=(x=l.querySelectorAll("[data-trix-serialized-attributes]")).length;m>d;d++){s=x[d];try{for(v in a=JSON.parse(s.getAttribute(n)),s.removeAttribute(n),a)_=a[v],s.setAttribute(v,_)}catch(t){}}return l.innerHTML.replace(e,"")}},deserializers:{"application/json":function(e){return t.Document.fromJSONString(e)},"text/html":function(e){return t.Document.fromHTML(e)}},serializeToContentType:function(e,n){var i;if(i=t.serializers[n])return i(e);throw new Error("unknown content type: "+n)},deserializeFromContentType:function(e,n){var i;if(i=t.deserializers[n])return i(e);throw new Error("unknown content type: "+n)}})}.call(this),function(){var e;e=t.config.lang,t.config.toolbar={getDefaultHTML:function(){return'<div class="trix-button-row">\n  <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="'+e.bold+'" tabindex="-1">'+e.bold+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="'+e.italic+'" tabindex="-1">'+e.italic+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="'+e.strike+'" tabindex="-1">'+e.strike+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="'+e.link+'" tabindex="-1">'+e.link+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="'+e.heading1+'" tabindex="-1">'+e.heading1+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="'+e.quote+'" tabindex="-1">'+e.quote+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="'+e.code+'" tabindex="-1">'+e.code+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="'+e.bullets+'" tabindex="-1">'+e.bullets+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="'+e.numbers+'" tabindex="-1">'+e.numbers+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="'+e.outdent+'" tabindex="-1">'+e.outdent+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="'+e.indent+'" tabindex="-1">'+e.indent+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="'+e.attachFiles+'" tabindex="-1">'+e.attachFiles+'</button>\n  </span>\n\n  <span class="trix-button-group-spacer"></span>\n\n  <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="'+e.undo+'" tabindex="-1">'+e.undo+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="'+e.redo+'" tabindex="-1">'+e.redo+'</button>\n  </span>\n</div>\n\n<div class="trix-dialogs" data-trix-dialogs>\n  <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">\n    <div class="trix-dialog__link-fields">\n      <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="'+e.urlPlaceholder+'" aria-label="'+e.url+'" required data-trix-input>\n      <div class="trix-button-group">\n        <input type="button" class="trix-button trix-button--dialog" value="'+e.link+'" data-trix-method="setAttribute">\n        <input type="button" class="trix-button trix-button--dialog" value="'+e.unlink+'" data-trix-method="removeAttribute">\n      </div>\n    </div>\n  </div>\n</div>'}}}.call(this),function(){t.config.undoInterval=5e3}.call(this),function(){t.config.attachments={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}}}.call(this),function(){t.config.keyNames={8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"}}.call(this),function(){t.config.input={level2Enabled:!0,getLevel:function(){return this.level2Enabled&&t.browser.supportsInputEvents?2:0},pickFiles:function(e){var n;return(n=t.makeElement("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId})).addEventListener("change",(function(){return e(n.files),t.removeNode(n)})),t.removeNode(document.getElementById(this.fileInputId)),document.body.appendChild(n),n.click()},fileInputId:"trix-file-input-"+Date.now().toString(16)}}.call(this),function(){}.call(this),function(){t.registerElement("trix-toolbar",{defaultCSS:"%t {\n  display: block;\n}\n\n%t {\n  white-space: nowrap;\n}\n\n%t [data-trix-dialog] {\n  display: none;\n}\n\n%t [data-trix-dialog][data-trix-active] {\n  display: block;\n}\n\n%t [data-trix-dialog] [data-trix-validate]:invalid {\n  background-color: #ffdddd;\n}",initialize:function(){return""===this.innerHTML?this.innerHTML=t.config.toolbar.getDefaultHTML():void 0}})}.call(this),function(){var e={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t.ObjectView=function(i){function r(t,e){this.object=t,this.options=null!=e?e:{},this.childViews=[],this.rootView=this}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(r,i),r.prototype.getNodes=function(){var t,e,n,i,r;for(null==this.nodes&&(this.nodes=this.createNodes()),r=[],t=0,e=(i=this.nodes).length;e>t;t++)n=i[t],r.push(n.cloneNode(!0));return r},r.prototype.invalidate=function(){var t;return this.nodes=null,this.childViews=[],null!=(t=this.parentView)?t.invalidate():void 0},r.prototype.invalidateViewForObject=function(t){var e;return null!=(e=this.findViewForObject(t))?e.invalidate():void 0},r.prototype.findOrCreateCachedChildView=function(t,e){var n;return(n=this.getCachedViewForObject(e))?this.recordChildView(n):(n=this.createChildView.apply(this,arguments),this.cacheViewForObject(n,e)),n},r.prototype.createChildView=function(e,n,i){var r;return null==i&&(i={}),n instanceof t.ObjectGroup&&(i.viewClass=e,e=t.ObjectGroupView),r=new e(n,i),this.recordChildView(r)},r.prototype.recordChildView=function(t){return t.parentView=this,t.rootView=this.rootView,this.childViews.push(t),t},r.prototype.getAllChildViews=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.childViews).length;n>e;e++)t=i[e],r.push(t),r=r.concat(t.getAllChildViews());return r},r.prototype.findElement=function(){return this.findElementForObject(this.object)},r.prototype.findElementForObject=function(t){var e;return(e=null!=t?t.id:void 0)?this.rootView.element.querySelector("[data-trix-id='"+e+"']"):void 0},r.prototype.findViewForObject=function(t){var e,n,i,r;for(e=0,n=(i=this.getAllChildViews()).length;n>e;e++)if((r=i[e]).object===t)return r},r.prototype.getViewCache=function(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?null!=this.viewCache?this.viewCache:this.viewCache={}:void 0},r.prototype.isViewCachingEnabled=function(){return!1!==this.shouldCacheViews},r.prototype.enableViewCaching=function(){return this.shouldCacheViews=!0},r.prototype.disableViewCaching=function(){return this.shouldCacheViews=!1},r.prototype.getCachedViewForObject=function(t){var e;return null!=(e=this.getViewCache())?e[t.getCacheKey()]:void 0},r.prototype.cacheViewForObject=function(t,e){var n;return null!=(n=this.getViewCache())?n[e.getCacheKey()]=t:void 0},r.prototype.garbageCollectCachedViews=function(){var t,e,i,r,o,a;if(t=this.getViewCache()){for(e in a=this.getAllChildViews().concat(this),i=function(){var t,e,n;for(n=[],t=0,e=a.length;e>t;t++)o=a[t],n.push(o.object.getCacheKey());return n}(),r=[],t)n.call(i,e)<0&&r.push(delete t[e]);return r}},r}(t.BasicObject)}.call(this),function(){var e={}.hasOwnProperty;t.ObjectGroupView=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.getChildViews=function(){var t,e,n,i;if(!this.childViews.length)for(t=0,e=(i=this.objectGroup.getObjects()).length;e>t;t++)n=i[t],this.findOrCreateCachedChildView(this.viewClass,n,this.options);return this.childViews},n.prototype.createNodes=function(){var t,e,n,i,r,o,a,s;for(t=this.createContainerElement(),e=0,i=(a=this.getChildViews()).length;i>e;e++)for(n=0,r=(s=a[e].getNodes()).length;r>n;n++)o=s[n],t.appendChild(o);return[t]},n.prototype.createContainerElement=function(t){return null==t&&(t=this.objectGroup.getDepth()),this.getChildViews()[0].createContainerElement(t)},n}(t.ObjectView)}.call(this),function(){var e={}.hasOwnProperty;t.Controller=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n}(t.BasicObject)}.call(this),function(){var e,n,i,r,o,a,s={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t.findClosestElementFromNode,i=t.nodeIsEmptyTextNode,n=t.nodeIsBlockStartComment,r=t.normalizeSpaces,o=t.summarizeStringChange,a=t.tagName,t.MutationObserver=function(t){function u(t){this.element=t,this.didMutate=function(t,e){return function(){return t.apply(e,arguments)}}(this.didMutate,this),this.observer=new window.MutationObserver(this.didMutate),this.start()}var c,h,d;return function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(u,t),"["+(h="data-trix-mutable")+"]",d={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},u.prototype.start=function(){return this.reset(),this.observer.observe(this.element,d)},u.prototype.stop=function(){return this.observer.disconnect()},u.prototype.didMutate=function(t){var e,n;return(e=this.mutations).push.apply(e,this.findSignificantMutations(t)),this.mutations.length?(null!=(n=this.delegate)&&"function"==typeof n.elementDidMutate&&n.elementDidMutate(this.getMutationSummary()),this.reset()):void 0},u.prototype.reset=function(){return this.mutations=[]},u.prototype.findSignificantMutations=function(t){var e,n,i,r;for(r=[],e=0,n=t.length;n>e;e++)i=t[e],this.mutationIsSignificant(i)&&r.push(i);return r},u.prototype.mutationIsSignificant=function(t){var e,n,i,r;if(this.nodeIsMutable(t.target))return!1;for(e=0,n=(r=this.nodesModifiedByMutation(t)).length;n>e;e++)if(i=r[e],this.nodeIsSignificant(i))return!0;return!1},u.prototype.nodeIsSignificant=function(t){return t!==this.element&&!this.nodeIsMutable(t)&&!i(t)},u.prototype.nodeIsMutable=function(t){return e(t,{matchingSelector:"[data-trix-mutable]"})},u.prototype.nodesModifiedByMutation=function(t){var e;switch(e=[],t.type){case"attributes":t.attributeName!==h&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push.apply(e,t.addedNodes),e.push.apply(e,t.removedNodes)}return e},u.prototype.getMutationSummary=function(){return this.getTextMutationSummary()},u.prototype.getTextMutationSummary=function(){var t,e,n,i,r,o,a,s,u,c,h;for(n=(s=this.getTextChangesFromCharacterData()).additions,r=s.deletions,o=0,a=(u=(h=this.getTextChangesFromChildList()).additions).length;a>o;o++)e=u[o],l.call(n,e)<0&&n.push(e);return r.push.apply(r,h.deletions),c={},(t=n.join(""))&&(c.textAdded=t),(i=r.join(""))&&(c.textDeleted=i),c},u.prototype.getMutationsByType=function(t){var e,n,i,r,o;for(o=[],e=0,n=(r=this.mutations).length;n>e;e++)(i=r[e]).type===t&&o.push(i);return o},u.prototype.getTextChangesFromChildList=function(){var t,e,i,o,a,s,l,u,h,d;for(t=[],l=[],e=0,o=(s=this.getMutationsByType("childList")).length;o>e;e++)a=s[e],t.push.apply(t,a.addedNodes),l.push.apply(l,a.removedNodes);return 0===t.length&&1===l.length&&n(l[0])?(h=[],d=["\n"]):(h=c(t),d=c(l)),{additions:function(){var t,e,n;for(n=[],i=t=0,e=h.length;e>t;i=++t)(u=h[i])!==d[i]&&n.push(r(u));return n}(),deletions:function(){var t,e,n;for(n=[],i=t=0,e=d.length;e>t;i=++t)(u=d[i])!==h[i]&&n.push(r(u));return n}()}},u.prototype.getTextChangesFromCharacterData=function(){var t,e,n,i,a,s,l,u;return(e=this.getMutationsByType("characterData")).length&&(u=e[0],n=e[e.length-1],a=r(u.oldValue),i=r(n.target.data),t=(s=o(a,i)).added,l=s.removed),{additions:t?[t]:[],deletions:l?[l]:[]}},c=function(t){var e,n,i,r;for(null==t&&(t=[]),r=[],e=0,n=t.length;n>e;e++)switch((i=t[e]).nodeType){case Node.TEXT_NODE:r.push(i.data);break;case Node.ELEMENT_NODE:"br"===a(i)?r.push("\n"):r.push.apply(r,c(i.childNodes))}return r},u}(t.BasicObject)}.call(this),function(){var e={}.hasOwnProperty;t.FileVerificationOperation=function(t){function n(t){this.file=t}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.perform=function(t){var e,n;return(e=new FileReader).onerror=function(){return t(!1)},e.onload=(n=this,function(){e.onerror=null;try{e.abort()}catch(t){}return t(!0,n.file)}),e.readAsArrayBuffer(this.file)},n}(t.Operation)}.call(this),function(){var e,n,i={}.hasOwnProperty;e=t.handleEvent,n=t.innerElementIsActive,t.InputController=function(r){function o(n){var i;for(i in this.element=n,this.mutationObserver=new t.MutationObserver(this.element),this.mutationObserver.delegate=this,this.events)e(i,{onElement:this.element,withCallback:this.handlerFor(i)})}return function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(o,r),o.prototype.events={},o.prototype.elementDidMutate=function(){},o.prototype.editorWillSyncDocumentView=function(){return this.mutationObserver.stop()},o.prototype.editorDidSyncDocumentView=function(){return this.mutationObserver.start()},o.prototype.requestRender=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestRender?t.inputControllerDidRequestRender():void 0},o.prototype.requestReparse=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestReparse&&t.inputControllerDidRequestReparse(),this.requestRender()},o.prototype.attachFiles=function(e){var n,i,r;return i=function(){var i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(new t.FileVerificationOperation(n));return o}(),Promise.all(i).then((r=this,function(t){return r.handleInput((function(){var e,n;return null!=(e=this.delegate)&&e.inputControllerWillAttachFiles(),null!=(n=this.responder)&&n.insertFiles(t),this.requestRender()}))}))},o.prototype.handlerFor=function(t){return e=this,function(i){return i.defaultPrevented?void 0:e.handleInput((function(){return n(this.element)?void 0:(this.eventName=t,this.events[t].call(this,i))}))};var e},o.prototype.handleInput=function(t){var e,n;try{return null!=(e=this.delegate)&&e.inputControllerWillHandleInput(),t.call(this)}finally{null!=(n=this.delegate)&&n.inputControllerDidHandleInput()}},o.prototype.createLinkHTML=function(t,e){var n;return(n=document.createElement("a")).href=t,n.textContent=null!=e?e:t,n.outerHTML},o}(t.BasicObject)}.call(this),function(){var e,n,i,r,o,a,s,l,u,c,h,d,f=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty,g=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};u=t.makeElement,c=t.objectsAreEqual,t.tagName,n=t.browser,s=t.keyEventIsKeyboardCommand,r=t.dataTransferIsWritable,i=t.dataTransferIsPlainText,l=t.config.keyNames,t.Level0InputController=function(n){function a(){a.__super__.constructor.apply(this,arguments),this.resetInputSummary()}var p;return f(a,n),p=0,a.prototype.setInputSummary=function(t){var e,n;for(e in null==t&&(t={}),this.inputSummary.eventName=this.eventName,t)n=t[e],this.inputSummary[e]=n;return this.inputSummary},a.prototype.resetInputSummary=function(){return this.inputSummary={}},a.prototype.reset=function(){return this.resetInputSummary(),t.selectionChangeObserver.reset()},a.prototype.elementDidMutate=function(t){var e;return this.isComposing()?null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidAllowUnhandledInput?e.inputControllerDidAllowUnhandledInput():void 0:this.handleInput((function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()}))},a.prototype.mutationIsExpected=function(t){var e,n,i,r,o,a,s,l,u;return a=t.textAdded,s=t.textDeleted,!!this.inputSummary.preferDocument||(e=null!=a?a===this.inputSummary.textAdded:!this.inputSummary.textAdded,n=null!=s?this.inputSummary.didDelete:!this.inputSummary.didDelete,u="\n"===s&&!n,!!(((l=("\n"===a||" \n"===a)&&!e)&&!u||u&&!l)&&(r=this.getSelectedRange())&&(i=l?a.replace(/\n$/,"").length||-1:(null!=a?a.length:void 0)||1,null!=(o=this.responder)?o.positionIsBlockBreak(r[1]+i):void 0))||e&&n)},a.prototype.mutationIsSignificant=function(t){var e,n,i;return i=Object.keys(t).length>0,e=""===(null!=(n=this.compositionInput)?n.getEndData():void 0),i||!e},a.prototype.events={keydown:function(e){var n,i,r,o,a,u,c,h,d;if(this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0,o=l[e.keyCode]){for(i=this.keys,r=0,u=(h=["ctrl","alt","shift","meta"]).length;u>r;r++)e[(c=h[r])+"Key"]&&("ctrl"===c&&(c="control"),i=null!=i?i[c]:void 0);null!=(null!=i?i[o]:void 0)&&(this.setInputSummary({keyName:o}),t.selectionChangeObserver.reset(),i[o].call(this,e))}return s(e)&&(n=String.fromCharCode(e.keyCode).toLowerCase())&&((a=function(){var t,n,i,r;for(r=[],t=0,n=(i=["alt","shift"]).length;n>t;t++)e[(c=i[t])+"Key"]&&r.push(c);return r}()).push(n),null!=(d=this.delegate)?d.inputControllerDidReceiveKeyboardCommand(a):void 0)?e.preventDefault():void 0},keypress:function(t){var e,n,i;if(null==this.inputSummary.eventName&&!t.metaKey&&(!t.ctrlKey||t.altKey))return(i=d(t))?(null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString(i),this.setInputSummary({textAdded:i,didDelete:this.selectionIsExpanded()})):void 0},textInput:function(t){var e,n,i,r;return e=t.data,(r=this.inputSummary.textAdded)&&r!==e&&r.toUpperCase()===e?(n=this.getSelectedRange(),this.setSelectedRange([n[0],n[1]+r.length]),null!=(i=this.responder)&&i.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(n)):void 0},dragenter:function(t){return t.preventDefault()},dragstart:function(t){var e;return t.target,this.serializeSelectionToDataTransfer(t.dataTransfer),this.draggedRange=this.getSelectedRange(),null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidStartDrag?e.inputControllerDidStartDrag():void 0},dragover:function(t){var e,n;return!this.draggedRange&&!this.canAcceptDataTransfer(t.dataTransfer)||(t.preventDefault(),e={x:t.clientX,y:t.clientY},c(e,this.draggingPoint))?void 0:(this.draggingPoint=e,null!=(n=this.delegate)&&"function"==typeof n.inputControllerDidReceiveDragOverPoint?n.inputControllerDidReceiveDragOverPoint(this.draggingPoint):void 0)},dragend:function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidCancelDrag&&t.inputControllerDidCancelDrag(),this.draggedRange=null,this.draggingPoint=null},drop:function(e){var n,i,r,o,a,s,l,u,c;return e.preventDefault(),r=null!=(a=e.dataTransfer)?a.files:void 0,o={x:e.clientX,y:e.clientY},null!=(s=this.responder)&&s.setLocationRangeFromPointRange(o),(null!=r?r.length:void 0)?this.attachFiles(r):this.draggedRange?(null!=(l=this.delegate)&&l.inputControllerWillMoveText(),null!=(u=this.responder)&&u.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()):(i=e.dataTransfer.getData("application/x-trix-document"))&&(n=t.Document.fromJSONString(i),null!=(c=this.responder)&&c.insertDocument(n),this.requestRender()),this.draggedRange=null,this.draggingPoint=null},cut:function(t){var e,n;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&(this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault(),null!=(n=this.delegate)&&n.inputControllerWillCutText(),this.deleteInDirection("backward"),t.defaultPrevented)?this.requestRender():void 0},copy:function(t){var e;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&this.serializeSelectionToDataTransfer(t.clipboardData)?t.preventDefault():void 0},paste:function(e){var n,r,a,s,l,u,c,d,f,m,v,y,b,x,_,E,w,A,D,C,k,S,T,O;return n=null!=(d=e.clipboardData)?d:e.testClipboardData,c={clipboard:n},null==n||h(e)?void this.getPastedHTMLUsingHiddenElement((O=this,function(t){var e,n,i;return c.type="text/html",c.html=t,null!=(e=O.delegate)&&e.inputControllerWillPaste(c),null!=(n=O.responder)&&n.insertHTML(c.html),O.requestRender(),null!=(i=O.delegate)?i.inputControllerDidPaste(c):void 0})):((s=n.getData("URL"))?(c.type="text/html",T=(u=n.getData("public.url-name"))?t.squishBreakableWhitespace(u).trim():s,c.html=this.createLinkHTML(s,T),null!=(f=this.delegate)&&f.inputControllerWillPaste(c),this.setInputSummary({textAdded:T,didDelete:this.selectionIsExpanded()}),null!=(_=this.responder)&&_.insertHTML(c.html),this.requestRender(),null!=(E=this.delegate)&&E.inputControllerDidPaste(c)):i(n)?(c.type="text/plain",c.string=n.getData("text/plain"),null!=(w=this.delegate)&&w.inputControllerWillPaste(c),this.setInputSummary({textAdded:c.string,didDelete:this.selectionIsExpanded()}),null!=(A=this.responder)&&A.insertString(c.string),this.requestRender(),null!=(D=this.delegate)&&D.inputControllerDidPaste(c)):(l=n.getData("text/html"))?(c.type="text/html",c.html=l,null!=(C=this.delegate)&&C.inputControllerWillPaste(c),null!=(k=this.responder)&&k.insertHTML(c.html),this.requestRender(),null!=(S=this.delegate)&&S.inputControllerDidPaste(c)):g.call(n.types,"Files")>=0&&(a=null!=(m=n.items)&&null!=(v=m[0])&&"function"==typeof v.getAsFile?v.getAsFile():void 0)&&(!a.name&&(r=o(a))&&(a.name="pasted-file-"+ ++p+"."+r),c.type="File",c.file=a,null!=(y=this.delegate)&&y.inputControllerWillAttachFiles(),null!=(b=this.responder)&&b.insertFile(c.file),this.requestRender(),null!=(x=this.delegate)&&x.inputControllerDidPaste(c)),e.preventDefault())},compositionstart:function(t){return this.getCompositionInput().start(t.data)},compositionupdate:function(t){return this.getCompositionInput().update(t.data)},compositionend:function(t){return this.getCompositionInput().end(t.data)},beforeinput:function(){return this.inputSummary.didInput=!0},input:function(t){return this.inputSummary.didInput=!0,t.stopPropagation()}},a.prototype.keys={backspace:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},delete:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},return:function(){var t,e;return this.setInputSummary({preferDocument:!0}),null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),null!=(e=this.responder)?e.insertLineBreak():void 0},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canIncreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.increaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},right:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},control:{d:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},h:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},o:function(t){var e,n;return t.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n",{updatePosition:!1}),this.requestRender()}},shift:{return:function(t){var e,n;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n"),this.requestRender(),t.preventDefault()},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canDecreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.decreaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("backward")):void 0},right:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("forward")):void 0}},alt:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}},meta:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}}},a.prototype.getCompositionInput=function(){return this.isComposing()?this.compositionInput:this.compositionInput=new e(this)},a.prototype.isComposing=function(){return null!=this.compositionInput&&!this.compositionInput.isEnded()},a.prototype.deleteInDirection=function(t,e){var n;return!1!==(null!=(n=this.responder)?n.deleteInDirection(t):void 0)?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0},a.prototype.serializeSelectionToDataTransfer=function(e){var n,i;if(r(e))return n=null!=(i=this.responder)?i.getSelectedDocument().toSerializableDocument():void 0,e.setData("application/x-trix-document",JSON.stringify(n)),e.setData("text/html",t.DocumentView.render(n).innerHTML),e.setData("text/plain",n.toString().replace(/\n$/,"")),!0},a.prototype.canAcceptDataTransfer=function(t){var e,n,i,r,o;for(o={},e=0,n=(r=null!=(i=null!=t?t.types:void 0)?i:[]).length;n>e;e++)o[r[e]]=!0;return o.Files||o["application/x-trix-document"]||o["text/html"]||o["text/plain"]},a.prototype.getPastedHTMLUsingHiddenElement=function(e){var n,i,r,o;return i=this.getSelectedRange(),r={position:"absolute",left:window.pageXOffset+"px",top:window.pageYOffset+"px",opacity:0},n=u({style:r,tagName:"div",editable:!0}),document.body.appendChild(n),n.focus(),requestAnimationFrame((o=this,function(){var r;return r=n.innerHTML,t.removeNode(n),o.setSelectedRange(i),e(r)}))},a.proxyMethod("responder?.getSelectedRange"),a.proxyMethod("responder?.setSelectedRange"),a.proxyMethod("responder?.expandSelectionInDirection"),a.proxyMethod("responder?.selectionIsInCursorTarget"),a.proxyMethod("responder?.selectionIsExpanded"),a}(t.InputController),o=function(t){var e,n;return null!=(e=t.type)&&null!=(n=e.match(/\/(\w+)$/))?n[1]:void 0},a=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),d=function(e){var n;return e.key&&a&&e.key.codePointAt(0)===e.keyCode?e.key:(null===e.which?n=e.keyCode:0!==e.which&&0!==e.charCode&&(n=e.charCode),null!=n&&"escape"!==l[n]?t.UTF16String.fromCodepoints([n]).toString():void 0)},h=function(t){var e,n,i,r,o,a,s,l,u;if(s=t.clipboardData){if(g.call(s.types,"text/html")>=0){for(i=0,a=(l=s.types).length;a>i;i++)if(u=l[i],e=/^CorePasteboardFlavorType/.test(u),n=/^dyn\./.test(u)&&s.getData(u),e||n)return!0;return!1}return r=g.call(s.types,"com.apple.webarchive")>=0,o=g.call(s.types,"com.apple.flat-rtfd")>=0,r||o}},e=function(t){function e(t){var e;this.inputController=t,e=this.inputController,this.responder=e.responder,this.delegate=e.delegate,this.inputSummary=e.inputSummary,this.data={}}return f(e,t),e.prototype.start=function(t){var e,n;return this.data.start=t,this.isSignificant()?("keypress"===this.inputSummary.eventName&&this.inputSummary.textAdded&&null!=(e=this.responder)&&e.deleteInDirection("left"),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=null!=(n=this.responder)?n.getSelectedRange():void 0):void 0},e.prototype.update=function(t){var e;return this.data.update=t,this.isSignificant()&&(e=this.selectPlaceholder())?(this.forgetPlaceholder(),this.range=e):void 0},e.prototype.end=function(t){var e,n,i,r;return this.data.end=t,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.setSelectedRange(this.range),null!=(i=this.responder)&&i.insertString(this.data.end),null!=(r=this.responder)?r.setSelectedRange(this.range[0]+this.data.end.length):void 0):null!=this.data.start||null!=this.data.update?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset()},e.prototype.getEndData=function(){return this.data.end},e.prototype.isEnded=function(){return null!=this.getEndData()},e.prototype.isSignificant=function(){return!n.composesExistingText||this.inputSummary.didInput},e.prototype.canApplyToDocument=function(){var t,e;return 0===(null!=(t=this.data.start)?t.length:void 0)&&(null!=(e=this.data.end)?e.length:void 0)>0&&null!=this.range},e.proxyMethod("inputController.setInputSummary"),e.proxyMethod("inputController.requestRender"),e.proxyMethod("inputController.requestReparse"),e.proxyMethod("responder?.selectionIsExpanded"),e.proxyMethod("responder?.insertPlaceholder"),e.proxyMethod("responder?.selectPlaceholder"),e.proxyMethod("responder?.forgetPlaceholder"),e}(t.BasicObject)}.call(this),function(){var e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t.dataTransferIsPlainText,n=t.keyEventIsKeyboardCommand,i=t.objectsAreEqual,t.Level2InputController=function(s){function l(){return this.render=r(this.render,this),l.__super__.constructor.apply(this,arguments)}var u,c,h,d,f,p;return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(l,s),l.prototype.elementDidMutate=function(){var t;return this.scheduledRender?this.composing&&null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidAllowUnhandledInput?t.inputControllerDidAllowUnhandledInput():void 0:this.reparse()},l.prototype.scheduleRender=function(){return null!=this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)},l.prototype.render=function(){var t;return cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||null!=(t=this.delegate)&&t.render(),"function"==typeof this.afterRender&&this.afterRender(),this.afterRender=null},l.prototype.reparse=function(){var t;return null!=(t=this.delegate)?t.reparse():void 0},l.prototype.events={keydown:function(t){var e,i,r,o;if(n(t)){if(e=c(t),null!=(o=this.delegate)?o.inputControllerDidReceiveKeyboardCommand(e):void 0)return t.preventDefault()}else if(r=t.key,t.altKey&&(r+="+Alt"),t.shiftKey&&(r+="+Shift"),i=this.keys[r])return this.withEvent(t,i)},paste:function(t){var e,n,i,r,o,a,s,l,u;return h(t)?(t.preventDefault(),this.attachFiles(t.clipboardData.files)):d(t)?(t.preventDefault(),n={type:"text/plain",string:t.clipboardData.getData("text/plain")},null!=(i=this.delegate)&&i.inputControllerWillPaste(n),null!=(r=this.responder)&&r.insertString(n.string),this.render(),null!=(o=this.delegate)?o.inputControllerDidPaste(n):void 0):(e=null!=(a=t.clipboardData)?a.getData("URL"):void 0)?(t.preventDefault(),n={type:"text/html",html:this.createLinkHTML(e)},null!=(s=this.delegate)&&s.inputControllerWillPaste(n),null!=(l=this.responder)&&l.insertHTML(n.html),this.render(),null!=(u=this.delegate)?u.inputControllerDidPaste(n):void 0):void 0},beforeinput:function(t){var e;return(e=this.inputTypes[t.inputType])?(this.withEvent(t,e),this.scheduleRender()):void 0},input:function(){return t.selectionChangeObserver.reset()},dragstart:function(t){var e,n;return(null!=(e=this.responder)?e.selectionContainsAttachments():void 0)?(t.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:null!=(n=this.responder)?n.getSelectedRange():void 0,point:f(t)}):void 0},dragenter:function(t){return u(t)?t.preventDefault():void 0},dragover:function(t){var e,n;if(this.dragging){if(t.preventDefault(),e=f(t),!i(e,this.dragging.point))return this.dragging.point=e,null!=(n=this.responder)?n.setLocationRangeFromPointRange(e):void 0}else if(u(t))return t.preventDefault()},drop:function(t){var e,n,i,r;return this.dragging?(t.preventDefault(),null!=(n=this.delegate)&&n.inputControllerWillMoveText(),null!=(i=this.responder)&&i.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender()):u(t)?(t.preventDefault(),e=f(t),null!=(r=this.responder)&&r.setLocationRangeFromPointRange(e),this.attachFiles(t.dataTransfer.files)):void 0},dragend:function(){var t;return this.dragging?(null!=(t=this.responder)&&t.setSelectedRange(this.dragging.range),this.dragging=null):void 0},compositionend:function(){return this.composing?(this.composing=!1,this.scheduleRender()):void 0}},l.prototype.keys={ArrowLeft:function(){var t,e;return(null!=(t=this.responder)?t.shouldManageMovingCursorInDirection("backward"):void 0)?(this.event.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},ArrowRight:function(){var t,e;return(null!=(t=this.responder)?t.shouldManageMovingCursorInDirection("forward"):void 0)?(this.event.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},Backspace:function(){var t,e,n;return(null!=(t=this.responder)?t.shouldManageDeletingInDirection("backward"):void 0)?(this.event.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.deleteInDirection("backward"),this.render()):void 0},Tab:function(){var t,e;return(null!=(t=this.responder)?t.canIncreaseNestingLevel():void 0)?(this.event.preventDefault(),null!=(e=this.responder)&&e.increaseNestingLevel(),this.render()):void 0},"Tab+Shift":function(){var t,e;return(null!=(t=this.responder)?t.canDecreaseNestingLevel():void 0)?(this.event.preventDefault(),null!=(e=this.responder)&&e.decreaseNestingLevel(),this.render()):void 0}},l.prototype.inputTypes={deleteByComposition:function(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut:function(){return this.deleteInDirection("backward")},deleteByDrag:function(){return this.event.preventDefault(),this.withTargetDOMRange((function(){var t;return this.deleteByDragRange=null!=(t=this.responder)?t.getSelectedRange():void 0}))},deleteCompositionText:function(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent:function(){return this.deleteInDirection("backward")},deleteContentBackward:function(){return this.deleteInDirection("backward")},deleteContentForward:function(){return this.deleteInDirection("forward")},deleteEntireSoftLine:function(){return this.deleteInDirection("forward")},deleteHardLineBackward:function(){return this.deleteInDirection("backward")},deleteHardLineForward:function(){return this.deleteInDirection("forward")},deleteSoftLineBackward:function(){return this.deleteInDirection("backward")},deleteSoftLineForward:function(){return this.deleteInDirection("forward")},deleteWordBackward:function(){return this.deleteInDirection("backward")},deleteWordForward:function(){return this.deleteInDirection("forward")},formatBackColor:function(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold:function(){return this.toggleAttributeIfSupported("bold")},formatFontColor:function(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName:function(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent:function(){var t;return(null!=(t=this.responder)?t.canIncreaseNestingLevel():void 0)?this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.increaseNestingLevel():void 0})):void 0},formatItalic:function(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter:function(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull:function(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft:function(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight:function(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent:function(){var t;return(null!=(t=this.responder)?t.canDecreaseNestingLevel():void 0)?this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.decreaseNestingLevel():void 0})):void 0},formatRemove:function(){return this.withTargetDOMRange((function(){var t,e,n,i;for(t in i=[],null!=(e=this.responder)?e.getCurrentAttributes():void 0)i.push(null!=(n=this.responder)?n.removeCurrentAttribute(t):void 0);return i}))},formatSetBlockTextDirection:function(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection:function(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough:function(){return this.toggleAttributeIfSupported("strike")},formatSubscript:function(){return this.toggleAttributeIfSupported("sub")},formatSuperscript:function(){return this.toggleAttributeIfSupported("sup")},formatUnderline:function(){return this.toggleAttributeIfSupported("underline")},historyRedo:function(){var t;return null!=(t=this.delegate)?t.inputControllerWillPerformRedo():void 0},historyUndo:function(){var t;return null!=(t=this.delegate)?t.inputControllerWillPerformUndo():void 0},insertCompositionText:function(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition:function(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop:function(){var t,e;return(t=this.deleteByDragRange)?(this.deleteByDragRange=null,null!=(e=this.delegate)&&e.inputControllerWillMoveText(),this.withTargetDOMRange((function(){var e;return null!=(e=this.responder)?e.moveTextFromRange(t):void 0}))):void 0},insertFromPaste:function(){var n,i,r,o,a,s,l,u,c,h,d,f;return n=this.event.dataTransfer,a={dataTransfer:n},(i=n.getData("URL"))?(this.event.preventDefault(),a.type="text/html",d=(o=n.getData("public.url-name"))?t.squishBreakableWhitespace(o).trim():i,a.html=this.createLinkHTML(i,d),null!=(s=this.delegate)&&s.inputControllerWillPaste(a),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.insertHTML(a.html):void 0})),this.afterRender=(f=this,function(){var t;return null!=(t=f.delegate)?t.inputControllerDidPaste(a):void 0})):e(n)?(a.type="text/plain",a.string=n.getData("text/plain"),null!=(l=this.delegate)&&l.inputControllerWillPaste(a),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.insertString(a.string):void 0})),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(a):void 0}}(this)):(r=n.getData("text/html"))?(this.event.preventDefault(),a.type="text/html",a.html=r,null!=(u=this.delegate)&&u.inputControllerWillPaste(a),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.insertHTML(a.html):void 0})),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(a):void 0}}(this)):(null!=(c=n.files)?c.length:void 0)?(a.type="File",a.file=n.files[0],null!=(h=this.delegate)&&h.inputControllerWillPaste(a),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.insertFile(a.file):void 0})),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(a):void 0}}(this)):void 0},insertFromYank:function(){return this.insertString(this.event.data)},insertLineBreak:function(){return this.insertString("\n")},insertLink:function(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList:function(){return this.toggleAttributeIfSupported("number")},insertParagraph:function(){var t;return null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.insertLineBreak():void 0}))},insertReplacementText:function(){return this.insertString(this.event.dataTransfer.getData("text/plain"),{updatePosition:!1})},insertText:function(){var t,e;return this.insertString(null!=(t=this.event.data)?t:null!=(e=this.event.dataTransfer)?e.getData("text/plain"):void 0)},insertTranspose:function(){return this.insertString(this.event.data)},insertUnorderedList:function(){return this.toggleAttributeIfSupported("bullet")}},l.prototype.insertString=function(t,e){var n;return null==t&&(t=""),null!=(n=this.delegate)&&n.inputControllerWillPerformTyping(),this.withTargetDOMRange((function(){var n;return null!=(n=this.responder)?n.insertString(t,e):void 0}))},l.prototype.toggleAttributeIfSupported=function(e){var n;return a.call(t.getAllAttributeNames(),e)>=0?(null!=(n=this.delegate)&&n.inputControllerWillPerformFormatting(e),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.toggleCurrentAttribute(e):void 0}))):void 0},l.prototype.activateAttributeIfSupported=function(e,n){var i;return a.call(t.getAllAttributeNames(),e)>=0?(null!=(i=this.delegate)&&i.inputControllerWillPerformFormatting(e),this.withTargetDOMRange((function(){var t;return null!=(t=this.responder)?t.setCurrentAttribute(e,n):void 0}))):void 0},l.prototype.deleteInDirection=function(t,e){var n,i,r,o;return(null!=e?e:{recordUndoEntry:!0}).recordUndoEntry&&null!=(r=this.delegate)&&r.inputControllerWillPerformTyping(),o=this,i=function(){var e;return null!=(e=o.responder)?e.deleteInDirection(t):void 0},(n=this.getTargetDOMRange({minLength:2}))?this.withTargetDOMRange(n,i):i()},l.prototype.withTargetDOMRange=function(e,n){var i;return"function"==typeof e&&(n=e,e=this.getTargetDOMRange()),e?null!=(i=this.responder)?i.withTargetDOMRange(e,n.bind(this)):void 0:(t.selectionChangeObserver.reset(),n.call(this))},l.prototype.getTargetDOMRange=function(t){var e,n,i,r;return i=(null!=t?t:{minLength:0}).minLength,(r="function"==typeof(e=this.event).getTargetRanges?e.getTargetRanges():void 0)&&r.length&&(n=p(r[0]),0===i||n.toString().length>=i)?n:void 0},p=function(t){var e;return(e=document.createRange()).setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),e},l.prototype.withEvent=function(t,e){var n;this.event=t;try{n=e.call(this)}finally{this.event=null}return n},u=function(t){var e,n;return a.call(null!=(e=null!=(n=t.dataTransfer)?n.types:void 0)?e:[],"Files")>=0},h=function(t){var e;return(e=t.clipboardData)?a.call(e.types,"Files")>=0&&1===e.types.length&&e.files.length>=1:void 0},d=function(t){var e;return(e=t.clipboardData)?a.call(e.types,"text/plain")>=0&&1===e.types.length:void 0},c=function(t){var e;return e=[],t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),e.push(t.key),e},f=function(t){return{x:t.clientX,y:t.clientY}},l}(t.InputController)}.call(this),function(){var e,n,i,r,o,a,s,l,u=function(t,e){return function(){return t.apply(e,arguments)}},c={}.hasOwnProperty;n=t.defer,i=t.handleEvent,a=t.makeElement,l=t.tagName,s=t.config,o=s.lang,e=s.css,r=s.keyNames,t.AttachmentEditorController=function(s){function h(t,e,n,i){this.attachmentPiece=t,this.element=e,this.container=n,this.options=null!=i?i:{},this.didBlurCaption=u(this.didBlurCaption,this),this.didChangeCaption=u(this.didChangeCaption,this),this.didInputCaption=u(this.didInputCaption,this),this.didKeyDownCaption=u(this.didKeyDownCaption,this),this.didClickActionButton=u(this.didClickActionButton,this),this.didClickToolbar=u(this.didClickToolbar,this),this.attachment=this.attachmentPiece.attachment,"a"===l(this.element)&&(this.element=this.element.firstChild),this.install()}var d;return function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(h,s),d=function(t){return function(){var e;return(e=t.apply(this,arguments)).do(),null==this.undos&&(this.undos=[]),this.undos.push(e.undo)}},h.prototype.install=function(){return this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()?this.installCaptionEditor():void 0},h.prototype.uninstall=function(){var t,e;for(this.savePendingCaption();e=this.undos.pop();)e();return null!=(t=this.delegate)?t.didUninstallAttachmentEditor(this):void 0},h.prototype.savePendingCaption=function(){var t,e,n;return null!=this.pendingCaption?(t=this.pendingCaption,this.pendingCaption=null,t?null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestUpdatingAttributesForAttachment?e.attachmentEditorDidRequestUpdatingAttributesForAttachment({caption:t},this.attachment):void 0:null!=(n=this.delegate)&&"function"==typeof n.attachmentEditorDidRequestRemovingAttributeForAttachment?n.attachmentEditorDidRequestRemovingAttributeForAttachment("caption",this.attachment):void 0):void 0},h.prototype.makeElementMutable=d((function(){return{do:(t=this,function(){return t.element.dataset.trixMutable=!0}),undo:function(t){return function(){return delete t.element.dataset.trixMutable}}(this)};var t})),h.prototype.addToolbar=d((function(){var n,r;return n=a({tagName:"div",className:e.attachmentToolbar,data:{trixMutable:!0},childNodes:a({tagName:"div",className:"trix-button-row",childNodes:a({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:a({tagName:"button",className:"trix-button trix-button--remove",textContent:o.remove,attributes:{title:o.remove},data:{trixAction:"remove"}})})})}),this.attachment.isPreviewable()&&n.appendChild(a({tagName:"div",className:e.attachmentMetadataContainer,childNodes:a({tagName:"span",className:e.attachmentMetadata,childNodes:[a({tagName:"span",className:e.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),a({tagName:"span",className:e.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),i("click",{onElement:n,withCallback:this.didClickToolbar}),i("click",{onElement:n,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),{do:(r=this,function(){return r.element.appendChild(n)}),undo:function(){return t.removeNode(n)}}})),h.prototype.installCaptionEditor=d((function(){var r,s,l,u,c,h;return(u=a({tagName:"textarea",className:e.attachmentCaptionEditor,attributes:{placeholder:o.captionPlaceholder},data:{trixMutable:!0}})).value=this.attachmentPiece.getCaption(),(c=u.cloneNode()).classList.add("trix-autoresize-clone"),c.tabIndex=-1,r=function(){return c.value=u.value,u.style.height=c.scrollHeight+"px"},i("input",{onElement:u,withCallback:r}),i("input",{onElement:u,withCallback:this.didInputCaption}),i("keydown",{onElement:u,withCallback:this.didKeyDownCaption}),i("change",{onElement:u,withCallback:this.didChangeCaption}),i("blur",{onElement:u,withCallback:this.didBlurCaption}),l=this.element.querySelector("figcaption"),s=l.cloneNode(),{do:(h=this,function(){return l.style.display="none",s.appendChild(u),s.appendChild(c),s.classList.add(e.attachmentCaption+"--editing"),l.parentElement.insertBefore(s,l),r(),h.options.editCaption?n((function(){return u.focus()})):void 0}),undo:function(){return t.removeNode(s),l.style.display=null}}})),h.prototype.didClickToolbar=function(t){return t.preventDefault(),t.stopPropagation()},h.prototype.didClickActionButton=function(t){var e;if("remove"===t.target.getAttribute("data-trix-action"))return null!=(e=this.delegate)?e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment):void 0},h.prototype.didKeyDownCaption=function(t){var e;return"return"===r[t.keyCode]?(t.preventDefault(),this.savePendingCaption(),null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestDeselectingAttachment?e.attachmentEditorDidRequestDeselectingAttachment(this.attachment):void 0):void 0},h.prototype.didInputCaption=function(t){return this.pendingCaption=t.target.value.replace(/\s/g," ").trim()},h.prototype.didChangeCaption=function(){return this.savePendingCaption()},h.prototype.didBlurCaption=function(){return this.savePendingCaption()},h}(t.BasicObject)}.call(this),function(){var e,n,i,r={}.hasOwnProperty;i=t.makeElement,e=t.config.css,t.AttachmentView=function(o){function a(){a.__super__.constructor.apply(this,arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}var s;return function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(a,o),a.attachmentSelector="[data-trix-attachment]",a.prototype.createContentNodes=function(){return[]},a.prototype.createNodes=function(){var t,n,r,o,a,l,u;if(t=o=i({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),(n=this.getHref())&&(o=i({tagName:"a",editable:!1,attributes:{href:n,tabindex:-1}}),t.appendChild(o)),this.attachment.hasContent())o.innerHTML=this.attachment.getContent();else for(r=0,a=(u=this.createContentNodes()).length;a>r;r++)l=u[r],o.appendChild(l);return o.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=i({tagName:"progress",attributes:{class:e.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),t.appendChild(this.progressElement)),[s("left"),t,s("right")]},a.prototype.createCaptionElement=function(){var t,n,r,o,a,s,l;return r=i({tagName:"figcaption",className:e.attachmentCaption}),(t=this.attachmentPiece.getCaption())?(r.classList.add(e.attachmentCaption+"--edited"),r.textContent=t):((n=this.getCaptionConfig()).name&&(o=this.attachment.getFilename()),n.size&&(s=this.attachment.getFormattedFilesize()),o&&(a=i({tagName:"span",className:e.attachmentName,textContent:o}),r.appendChild(a)),s&&(o&&r.appendChild(document.createTextNode(" ")),l=i({tagName:"span",className:e.attachmentSize,textContent:s}),r.appendChild(l))),r},a.prototype.getClassName=function(){var t,n;return n=[e.attachment,e.attachment+"--"+this.attachment.getType()],(t=this.attachment.getExtension())&&n.push(e.attachment+"--"+t),n.join(" ")},a.prototype.getData=function(){var t,e;return e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},(t=this.attachmentPiece.attributes).isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(e.trixSerialize=!1),e},a.prototype.getHref=function(){return n(this.attachment.getContent(),"a")?void 0:this.attachment.getHref()},a.prototype.getCaptionConfig=function(){var e,n,i;return i=this.attachment.getType(),e=t.copyObject(null!=(n=t.config.attachments[i])?n.caption:void 0),"file"===i&&(e.name=!0),e},a.prototype.findProgressElement=function(){var t;return null!=(t=this.findElement())?t.querySelector("progress"):void 0},s=function(e){return i({tagName:"span",textContent:t.ZERO_WIDTH_SPACE,data:{trixCursorTarget:e,trixSerialize:!1}})},a.prototype.attachmentDidChangeUploadProgress=function(){var t,e;return e=this.attachment.getUploadProgress(),null!=(t=this.findProgressElement())?t.value=e:void 0},a}(t.ObjectView),n=function(t,e){var n;return(n=i("div")).innerHTML=null!=t?t:"",n.querySelector(e)}}.call(this),function(){var e,n={}.hasOwnProperty;e=t.makeElement,t.PreviewableAttachmentView=function(i){function r(){r.__super__.constructor.apply(this,arguments),this.attachment.previewDelegate=this}return function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,i),r.prototype.createContentNodes=function(){return this.image=e({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]},r.prototype.createCaptionElement=function(){var e;return(e=r.__super__.createCaptionElement.apply(this,arguments)).textContent||e.setAttribute("data-trix-placeholder",t.config.lang.captionPlaceholder),e},r.prototype.refresh=function(t){var e;return null==t&&(t=null!=(e=this.findElement())?e.querySelector("img"):void 0),t?this.updateAttributesForImage(t):void 0},r.prototype.updateAttributesForImage=function(t){var e,n,i,r,o,a;return o=this.attachment.getURL(),n=this.attachment.getPreviewURL(),t.src=n||o,n===o?t.removeAttribute("data-trix-serialized-attributes"):(i=JSON.stringify({src:o}),t.setAttribute("data-trix-serialized-attributes",i)),a=this.attachment.getWidth(),e=this.attachment.getHeight(),null!=a&&(t.width=a),null!=e&&(t.height=e),r=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/"),t.dataset.trixStoreKey=r},r.prototype.attachmentDidChangeAttributes=function(){return this.refresh(this.image),this.refresh()},r}(t.AttachmentView)}.call(this),function(){var e,n,i,r={}.hasOwnProperty;i=t.makeElement,e=t.findInnerElement,n=t.getTextConfig,t.PieceView=function(o){function a(){var t;a.__super__.constructor.apply(this,arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),t=this.options,this.textConfig=t.textConfig,this.context=t.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}var s;return function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(a,o),a.prototype.createNodes=function(){var t,n,i,r,o,a;if(a=this.attachment?this.createAttachmentNodes():this.createStringNodes(),t=this.createElement()){for(i=e(t),n=0,r=a.length;r>n;n++)o=a[n],i.appendChild(o);a=[t]}return a},a.prototype.createAttachmentNodes=function(){var e;return e=this.attachment.isPreviewable()?t.PreviewableAttachmentView:t.AttachmentView,this.createChildView(e,this.piece.attachment,{piece:this.piece}).getNodes()},a.prototype.createStringNodes=function(){var t,e,n,r,o,a,s,l,u;if(null!=(s=this.textConfig)?s.plaintext:void 0)return[document.createTextNode(this.string)];for(a=[],n=e=0,r=(l=this.string.split("\n")).length;r>e;n=++e)u=l[n],n>0&&(t=i("br"),a.push(t)),u.length&&(o=document.createTextNode(this.preserveSpaces(u)),a.push(o));return a},a.prototype.createElement=function(){var t,e,r,o,a,s,l,u,c;for(o in u={},s=this.attributes)if(c=s[o],(t=n(o))&&(t.tagName&&(a=i(t.tagName),r?(r.appendChild(a),r=a):e=r=a),t.styleProperty&&(u[t.styleProperty]=c),t.style))for(o in l=t.style)c=l[o],u[o]=c;if(Object.keys(u).length)for(o in null==e&&(e=i("span")),u)c=u[o],e.style[o]=c;return e},a.prototype.createContainerElement=function(){var t,e,r,o,a;for(r in o=this.attributes)if(a=o[r],(e=n(r))&&e.groupTagName)return(t={})[r]=a,i(e.groupTagName,t)},s=t.NON_BREAKING_SPACE,a.prototype.preserveSpaces=function(t){return this.context.isLast&&(t=t.replace(/\ $/,s)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 "+s+" $2").replace(/\ {2}/g,s+" ").replace(/\ {2}/g," "+s),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,s)),t},a}(t.ObjectView)}.call(this),function(){var e={}.hasOwnProperty;t.TextView=function(n){function i(){i.__super__.constructor.apply(this,arguments),this.text=this.object,this.textConfig=this.options.textConfig}var r;return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),i.prototype.createNodes=function(){var e,n,i,o,a,s,l,u,c,h;for(s=[],o=(u=t.ObjectGroup.groupObjects(this.getPieces())).length-1,i=n=0,a=u.length;a>n;i=++n)l=u[i],e={},0===i&&(e.isFirst=!0),i===o&&(e.isLast=!0),r(c)&&(e.followsWhitespace=!0),h=this.findOrCreateCachedChildView(t.PieceView,l,{textConfig:this.textConfig,context:e}),s.push.apply(s,h.getNodes()),c=l;return s},i.prototype.getPieces=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.text.getPieces()).length;e>t;t++)(n=i[t]).hasAttribute("blockBreak")||r.push(n);return r},r=function(t){return/\s$/.test(null!=t?t.toString():void 0)},i}(t.ObjectView)}.call(this),function(){var e,n,i,r={}.hasOwnProperty;i=t.makeElement,n=t.getBlockConfig,e=t.config.css,t.BlockView=function(o){function a(){a.__super__.constructor.apply(this,arguments),this.block=this.object,this.attributes=this.block.getAttributes()}return function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(a,o),a.prototype.createNodes=function(){var e,r,o,a,s,l,u,c,h,d;if(l=[document.createComment("block")],this.block.isEmpty()?l.push(i("br")):(h=null!=(u=n(this.block.getLastAttribute()))?u.text:void 0,d=this.findOrCreateCachedChildView(t.TextView,this.block.text,{textConfig:h}),l.push.apply(l,d.getNodes()),this.shouldAddExtraNewlineElement()&&l.push(i("br"))),this.attributes.length)return l;for(c=t.config.blockAttributes.default.tagName,this.block.isRTL()&&(e={dir:"rtl"}),r=i({tagName:c,attributes:e}),o=0,a=l.length;a>o;o++)s=l[o],r.appendChild(s);return[r]},a.prototype.createContainerElement=function(t){var r,o,a,s,l;return r=this.attributes[t],l=n(r).tagName,0===t&&this.block.isRTL()&&(o={dir:"rtl"}),"attachmentGallery"===r&&(s=this.block.getBlockBreakPosition(),a=e.attachmentGallery+" "+e.attachmentGallery+"--"+s),i({tagName:l,className:a,attributes:o})},a.prototype.shouldAddExtraNewlineElement=function(){return/\n\n$/.test(this.block.toString())},a}(t.ObjectView)}.call(this),function(){var e,n,i={}.hasOwnProperty;e=t.defer,n=t.makeElement,t.DocumentView=function(r){function o(){o.__super__.constructor.apply(this,arguments),this.element=this.options.element,this.elementStore=new t.ElementStore,this.setDocument(this.object)}var a,s,l;return function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(o,r),o.render=function(t){var e,i;return(i=new this(t,{element:e=n("div")})).render(),i.sync(),e},o.prototype.setDocument=function(t){return t.isEqualTo(this.document)?void 0:this.document=this.object=t},o.prototype.render=function(){var e,i,r,o,a,s,l;if(this.childViews=[],this.shadowElement=n("div"),!this.document.isEmpty()){for(s=[],e=0,i=(a=t.ObjectGroup.groupObjects(this.document.getBlocks(),{asTree:!0})).length;i>e;e++)o=a[e],l=this.findOrCreateCachedChildView(t.BlockView,o),s.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=l.getNodes()).length;e>t;t++)r=n[t],i.push(this.shadowElement.appendChild(r));return i}.call(this));return s}},o.prototype.isSynced=function(){return a(this.shadowElement,this.element)},o.prototype.sync=function(){var t;for(t=this.createDocumentFragmentForSync();this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()},o.prototype.didSync=function(){return this.elementStore.reset(s(this.element)),e((t=this,function(){return t.garbageCollectCachedViews()}));var t},o.prototype.createDocumentFragmentForSync=function(){var t,e,n,i,r,o,a,l,u,c;for(e=document.createDocumentFragment(),n=0,r=(l=this.shadowElement.childNodes).length;r>n;n++)a=l[n],e.appendChild(a.cloneNode(!0));for(i=0,o=(u=s(e)).length;o>i;i++)t=u[i],(c=this.elementStore.remove(t))&&t.parentNode.replaceChild(c,t);return e},s=function(t){return t.querySelectorAll("[data-trix-store-key]")},a=function(t,e){return l(t.innerHTML)===l(e.innerHTML)},l=function(t){return t.replace(/&nbsp;/g," ")},o}(t.ObjectView)}.call(this),function(){var e,n,i,r,o,a=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty;i=t.findClosestElementFromNode,r=t.handleEvent,o=t.innerElementIsActive,n=t.defer,e=t.AttachmentView.attachmentSelector,t.CompositionController=function(l){function u(n,i){this.element=n,this.composition=i,this.didClickAttachment=a(this.didClickAttachment,this),this.didBlur=a(this.didBlur,this),this.didFocus=a(this.didFocus,this),this.documentView=new t.DocumentView(this.composition.document,{element:this.element}),r("focus",{onElement:this.element,withCallback:this.didFocus}),r("blur",{onElement:this.element,withCallback:this.didBlur}),r("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),r("mousedown",{onElement:this.element,matchingSelector:e,withCallback:this.didClickAttachment}),r("click",{onElement:this.element,matchingSelector:"a"+e,preventDefault:!0})}return function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(u,l),u.prototype.didFocus=function(){var t,e,n,i;return i=this,t=function(){var t;return i.focused?void 0:(i.focused=!0,null!=(t=i.delegate)&&"function"==typeof t.compositionControllerDidFocus?t.compositionControllerDidFocus():void 0)},null!=(e=null!=(n=this.blurPromise)?n.then(t):void 0)?e:t()},u.prototype.didBlur=function(){return this.blurPromise=new Promise((t=this,function(e){return n((function(){var n;return o(t.element)||(t.focused=null,null!=(n=t.delegate)&&"function"==typeof n.compositionControllerDidBlur&&n.compositionControllerDidBlur()),t.blurPromise=null,e()}))}));var t},u.prototype.didClickAttachment=function(t,e){var n,r,o;return n=this.findAttachmentForElement(e),r=null!=i(t.target,{matchingSelector:"figcaption"}),null!=(o=this.delegate)&&"function"==typeof o.compositionControllerDidSelectAttachment?o.compositionControllerDidSelectAttachment(n,{editCaption:r}):void 0},u.prototype.getSerializableElement=function(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element},u.prototype.render=function(){var t,e,n;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&(null!=(t=this.delegate)&&"function"==typeof t.compositionControllerWillSyncDocumentView&&t.compositionControllerWillSyncDocumentView(),this.documentView.sync(),null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidSyncDocumentView&&e.compositionControllerDidSyncDocumentView()),null!=(n=this.delegate)&&"function"==typeof n.compositionControllerDidRender?n.compositionControllerDidRender():void 0},u.prototype.rerenderViewForObject=function(t){return this.invalidateViewForObject(t),this.render()},u.prototype.invalidateViewForObject=function(t){return this.documentView.invalidateViewForObject(t)},u.prototype.isViewCachingEnabled=function(){return this.documentView.isViewCachingEnabled()},u.prototype.enableViewCaching=function(){return this.documentView.enableViewCaching()},u.prototype.disableViewCaching=function(){return this.documentView.disableViewCaching()},u.prototype.refreshViewCache=function(){return this.documentView.garbageCollectCachedViews()},u.prototype.isEditingAttachment=function(){return null!=this.attachmentEditor},u.prototype.installAttachmentEditorForAttachment=function(e,n){var i,r,o;if((null!=(o=this.attachmentEditor)?o.attachment:void 0)!==e&&(r=this.documentView.findElementForObject(e)))return this.uninstallAttachmentEditor(),i=this.composition.document.getAttachmentPieceForAttachment(e),this.attachmentEditor=new t.AttachmentEditorController(i,r,this.element,n),this.attachmentEditor.delegate=this},u.prototype.uninstallAttachmentEditor=function(){var t;return null!=(t=this.attachmentEditor)?t.uninstall():void 0},u.prototype.didUninstallAttachmentEditor=function(){return this.attachmentEditor=null,this.render()},u.prototype.attachmentEditorDidRequestUpdatingAttributesForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.updateAttributesForAttachment(t,e)},u.prototype.attachmentEditorDidRequestRemovingAttributeForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.removeAttributeForAttachment(t,e)},u.prototype.attachmentEditorDidRequestRemovalOfAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestRemovalOfAttachment?e.compositionControllerDidRequestRemovalOfAttachment(t):void 0},u.prototype.attachmentEditorDidRequestDeselectingAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestDeselectingAttachment?e.compositionControllerDidRequestDeselectingAttachment(t):void 0},u.prototype.canSyncDocumentView=function(){return!this.isEditingAttachment()},u.prototype.findAttachmentForElement=function(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))},u}(t.BasicObject)}.call(this),function(){var e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty;n=t.handleEvent,i=t.triggerEvent,e=t.findClosestElementFromNode,t.ToolbarController=function(t){function a(t){this.element=t,this.didKeyDownDialogInput=r(this.didKeyDownDialogInput,this),this.didClickDialogButton=r(this.didClickDialogButton,this),this.didClickAttributeButton=r(this.didClickAttributeButton,this),this.didClickActionButton=r(this.didClickActionButton,this),this.attributes={},this.actions={},this.resetDialogInputs(),n("mousedown",{onElement:this.element,matchingSelector:s,withCallback:this.didClickActionButton}),n("mousedown",{onElement:this.element,matchingSelector:l,withCallback:this.didClickAttributeButton}),n("click",{onElement:this.element,matchingSelector:m,preventDefault:!0}),n("click",{onElement:this.element,matchingSelector:u,withCallback:this.didClickDialogButton}),n("keydown",{onElement:this.element,matchingSelector:c,withCallback:this.didKeyDownDialogInput})}var s,l,u,c,h,d,f,p,g,m;return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(a,t),m=(l="[data-trix-attribute]")+", "+(s="[data-trix-action]"),(h="[data-trix-dialog]")+"[data-trix-active]",u=h+" [data-trix-method]",c=h+" [data-trix-input]",a.prototype.didClickActionButton=function(t,e){var n,i,r;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=d(e),this.getDialog(n)?this.toggleDialog(n):null!=(r=this.delegate)?r.toolbarDidInvokeAction(n):void 0},a.prototype.didClickAttributeButton=function(t,e){var n,i,r;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=f(e),this.getDialog(n)?this.toggleDialog(n):null!=(r=this.delegate)&&r.toolbarDidToggleAttribute(n),this.refreshAttributeButtons()},a.prototype.didClickDialogButton=function(t,n){var i;return i=e(n,{matchingSelector:h}),this[n.getAttribute("data-trix-method")].call(this,i)},a.prototype.didKeyDownDialogInput=function(t,e){var n,i;return 13===t.keyCode&&(t.preventDefault(),n=e.getAttribute("name"),i=this.getDialog(n),this.setAttribute(i)),27===t.keyCode?(t.preventDefault(),this.hideDialog()):void 0},a.prototype.updateActions=function(t){return this.actions=t,this.refreshActionButtons()},a.prototype.refreshActionButtons=function(){return this.eachActionButton((t=this,function(e,n){return e.disabled=!1===t.actions[n]}));var t},a.prototype.eachActionButton=function(t){var e,n,i,r,o;for(o=[],n=0,i=(r=this.element.querySelectorAll(s)).length;i>n;n++)e=r[n],o.push(t(e,d(e)));return o},a.prototype.updateAttributes=function(t){return this.attributes=t,this.refreshAttributeButtons()},a.prototype.refreshAttributeButtons=function(){return this.eachAttributeButton((t=this,function(e,n){return e.disabled=!1===t.attributes[n],t.attributes[n]||t.dialogIsVisible(n)?(e.setAttribute("data-trix-active",""),e.classList.add("trix-active")):(e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"))}));var t},a.prototype.eachAttributeButton=function(t){var e,n,i,r,o;for(o=[],n=0,i=(r=this.element.querySelectorAll(l)).length;i>n;n++)e=r[n],o.push(t(e,f(e)));return o},a.prototype.applyKeyboardCommand=function(t){var e,n,r,o,a,s;for(o=JSON.stringify(t.sort()),r=0,a=(s=this.element.querySelectorAll("[data-trix-key]")).length;a>r;r++)if(n=(e=s[r]).getAttribute("data-trix-key").split("+"),JSON.stringify(n.sort())===o)return i("mousedown",{onElement:e}),!0;return!1},a.prototype.dialogIsVisible=function(t){var e;return(e=this.getDialog(t))?e.hasAttribute("data-trix-active"):void 0},a.prototype.toggleDialog=function(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)},a.prototype.showDialog=function(t){var e,n,i,r,o,a,s,l,u;for(this.hideDialog(),null!=(a=this.delegate)&&a.toolbarWillShowDialog(),(n=this.getDialog(t)).setAttribute("data-trix-active",""),n.classList.add("trix-active"),i=0,o=(s=n.querySelectorAll("input[disabled]")).length;o>i;i++)s[i].removeAttribute("disabled");return(e=f(n))&&(r=g(n,t))&&(r.value=null!=(l=this.attributes[e])?l:"",r.select()),null!=(u=this.delegate)?u.toolbarDidShowDialog(t):void 0},a.prototype.setAttribute=function(t){var e,n,i;return e=f(t),(n=g(t,e)).willValidate&&!n.checkValidity()?(n.setAttribute("data-trix-validate",""),n.classList.add("trix-validate"),n.focus()):(null!=(i=this.delegate)&&i.toolbarDidUpdateAttribute(e,n.value),this.hideDialog())},a.prototype.removeAttribute=function(t){var e,n;return e=f(t),null!=(n=this.delegate)&&n.toolbarDidRemoveAttribute(e),this.hideDialog()},a.prototype.hideDialog=function(){var t,e;return(t=this.element.querySelector("[data-trix-dialog][data-trix-active]"))?(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),null!=(e=this.delegate)?e.toolbarDidHideDialog(p(t)):void 0):void 0},a.prototype.resetDialogInputs=function(){var t,e,n,i,r;for(r=[],t=0,n=(i=this.element.querySelectorAll(c)).length;n>t;t++)(e=i[t]).setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),r.push(e.classList.remove("trix-validate"));return r},a.prototype.getDialog=function(t){return this.element.querySelector("[data-trix-dialog="+t+"]")},g=function(t,e){return null==e&&(e=f(t)),t.querySelector("[data-trix-input][name='"+e+"']")},d=function(t){return t.getAttribute("data-trix-action")},f=function(t){var e;return null!=(e=t.getAttribute("data-trix-attribute"))?e:t.getAttribute("data-trix-dialog-attribute")},p=function(t){return t.getAttribute("data-trix-dialog")},a}(t.BasicObject)}.call(this),function(){var e={}.hasOwnProperty;t.ImagePreloadOperation=function(t){function n(t){this.url=t}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.perform=function(t){var e,n;return(e=new Image).onload=(n=this,function(){return e.width=n.width=e.naturalWidth,e.height=n.height=e.naturalHeight,t(!0,e)}),e.onerror=function(){return t(!1)},e.src=this.url},n}(t.Operation)}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;t.Attachment=function(i){function r(n){null==n&&(n={}),this.releaseFile=e(this.releaseFile,this),r.__super__.constructor.apply(this,arguments),this.attributes=t.Hash.box(n),this.didChangeAttributes()}return function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,i),r.previewablePattern=/^image(\/(gif|png|jpe?g)|$)/,r.attachmentForFile=function(t){var e;return(e=new this(this.attributesForFile(t))).setFile(t),e},r.attributesForFile=function(e){return new t.Hash({filename:e.name,filesize:e.size,contentType:e.type})},r.fromJSON=function(t){return new this(t)},r.prototype.getAttribute=function(t){return this.attributes.get(t)},r.prototype.hasAttribute=function(t){return this.attributes.has(t)},r.prototype.getAttributes=function(){return this.attributes.toObject()},r.prototype.setAttributes=function(t){var e,n,i;return null==t&&(t={}),e=this.attributes.merge(t),this.attributes.isEqualTo(e)?void 0:(this.attributes=e,this.didChangeAttributes(),null!=(n=this.previewDelegate)&&"function"==typeof n.attachmentDidChangeAttributes&&n.attachmentDidChangeAttributes(this),null!=(i=this.delegate)&&"function"==typeof i.attachmentDidChangeAttributes?i.attachmentDidChangeAttributes(this):void 0)},r.prototype.didChangeAttributes=function(){return this.isPreviewable()?this.preloadURL():void 0},r.prototype.isPending=function(){return null!=this.file&&!(this.getURL()||this.getHref())},r.prototype.isPreviewable=function(){return this.attributes.has("previewable")?this.attributes.get("previewable"):this.constructor.previewablePattern.test(this.getContentType())},r.prototype.getType=function(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"},r.prototype.getURL=function(){return this.attributes.get("url")},r.prototype.getHref=function(){return this.attributes.get("href")},r.prototype.getFilename=function(){var t;return null!=(t=this.attributes.get("filename"))?t:""},r.prototype.getFilesize=function(){return this.attributes.get("filesize")},r.prototype.getFormattedFilesize=function(){var e;return"number"==typeof(e=this.attributes.get("filesize"))?t.config.fileSize.formatter(e):""},r.prototype.getExtension=function(){var t;return null!=(t=this.getFilename().match(/\.(\w+)$/))?t[1].toLowerCase():void 0},r.prototype.getContentType=function(){return this.attributes.get("contentType")},r.prototype.hasContent=function(){return this.attributes.has("content")},r.prototype.getContent=function(){return this.attributes.get("content")},r.prototype.getWidth=function(){return this.attributes.get("width")},r.prototype.getHeight=function(){return this.attributes.get("height")},r.prototype.getFile=function(){return this.file},r.prototype.setFile=function(t){return this.file=t,this.isPreviewable()?this.preloadFile():void 0},r.prototype.releaseFile=function(){return this.releasePreloadedFile(),this.file=null},r.prototype.getUploadProgress=function(){var t;return null!=(t=this.uploadProgress)?t:0},r.prototype.setUploadProgress=function(t){var e;return this.uploadProgress!==t?(this.uploadProgress=t,null!=(e=this.uploadProgressDelegate)&&"function"==typeof e.attachmentDidChangeUploadProgress?e.attachmentDidChangeUploadProgress(this):void 0):void 0},r.prototype.toJSON=function(){return this.getAttributes()},r.prototype.getCacheKey=function(){return[r.__super__.getCacheKey.apply(this,arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")},r.prototype.getPreviewURL=function(){return this.previewURL||this.preloadingURL},r.prototype.setPreviewURL=function(t){var e,n;return t!==this.getPreviewURL()?(this.previewURL=t,null!=(e=this.previewDelegate)&&"function"==typeof e.attachmentDidChangeAttributes&&e.attachmentDidChangeAttributes(this),null!=(n=this.delegate)&&"function"==typeof n.attachmentDidChangePreviewURL?n.attachmentDidChangePreviewURL(this):void 0):void 0},r.prototype.preloadURL=function(){return this.preload(this.getURL(),this.releaseFile)},r.prototype.preloadFile=function(){return this.file?(this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)):void 0},r.prototype.releasePreloadedFile=function(){return this.fileObjectURL?(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null):void 0},r.prototype.preload=function(e,n){var i,r;return e&&e!==this.getPreviewURL()?(this.preloadingURL=e,new t.ImagePreloadOperation(e).then((r=this,function(t){var i,o;return o=t.width,i=t.height,r.getWidth()&&r.getHeight()||r.setAttributes({width:o,height:i}),r.preloadingURL=null,r.setPreviewURL(e),"function"==typeof n?n():void 0})).catch((i=this,function(){return i.preloadingURL=null,"function"==typeof n?n():void 0}))):void 0},r}(t.Object)}.call(this),function(){var e={}.hasOwnProperty;t.Piece=function(n){function i(e,n){null==n&&(n={}),i.__super__.constructor.apply(this,arguments),this.attributes=t.Hash.box(n)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),i.types={},i.registerType=function(t,e){return e.type=t,this.types[t]=e},i.fromJSON=function(t){var e;return(e=this.types[t.type])?e.fromJSON(t):void 0},i.prototype.copyWithAttributes=function(t){return new this.constructor(this.getValue(),t)},i.prototype.copyWithAdditionalAttributes=function(t){return this.copyWithAttributes(this.attributes.merge(t))},i.prototype.copyWithoutAttribute=function(t){return this.copyWithAttributes(this.attributes.remove(t))},i.prototype.copy=function(){return this.copyWithAttributes(this.attributes)},i.prototype.getAttribute=function(t){return this.attributes.get(t)},i.prototype.getAttributesHash=function(){return this.attributes},i.prototype.getAttributes=function(){return this.attributes.toObject()},i.prototype.getCommonAttributes=function(){var t,e,n;return(n=pieceList.getPieceAtIndex(0))?(t=n.attributes,e=t.getKeys(),pieceList.eachPiece((function(n){return e=t.getKeysCommonToHash(n.attributes),t=t.slice(e)})),t.toObject()):{}},i.prototype.hasAttribute=function(t){return this.attributes.has(t)},i.prototype.hasSameStringValueAsPiece=function(t){return null!=t&&this.toString()===t.toString()},i.prototype.hasSameAttributesAsPiece=function(t){return null!=t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))},i.prototype.isBlockBreak=function(){return!1},i.prototype.isEqualTo=function(t){return i.__super__.isEqualTo.apply(this,arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)},i.prototype.isEmpty=function(){return 0===this.length},i.prototype.isSerializable=function(){return!0},i.prototype.toJSON=function(){return{type:this.constructor.type,attributes:this.getAttributes()}},i.prototype.contentsForInspection=function(){return{type:this.constructor.type,attributes:this.attributes.inspect()}},i.prototype.canBeGrouped=function(){return this.hasAttribute("href")},i.prototype.canBeGroupedWith=function(t){return this.getAttribute("href")===t.getAttribute("href")},i.prototype.getLength=function(){return this.length},i.prototype.canBeConsolidatedWith=function(){return!1},i}(t.Object)}.call(this),function(){var e={}.hasOwnProperty;t.Piece.registerType("attachment",t.AttachmentPiece=function(n){function i(t){this.attachment=t,i.__super__.constructor.apply(this,arguments),this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),i.fromJSON=function(e){return new this(t.Attachment.fromJSON(e.attachment),e.attributes)},i.permittedAttributes=["caption","presentation"],i.prototype.ensureAttachmentExclusivelyHasAttribute=function(t){return this.hasAttribute(t)?(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice(t)),this.attributes=this.attributes.remove(t)):void 0},i.prototype.removeProhibitedAttributes=function(){var t;return(t=this.attributes.slice(this.constructor.permittedAttributes)).isEqualTo(this.attributes)?void 0:this.attributes=t},i.prototype.getValue=function(){return this.attachment},i.prototype.isSerializable=function(){return!this.attachment.isPending()},i.prototype.getCaption=function(){var t;return null!=(t=this.attributes.get("caption"))?t:""},i.prototype.isEqualTo=function(t){var e;return i.__super__.isEqualTo.apply(this,arguments)&&this.attachment.id===(null!=t&&null!=(e=t.attachment)?e.id:void 0)},i.prototype.toString=function(){return t.OBJECT_REPLACEMENT_CHARACTER},i.prototype.toJSON=function(){var t;return(t=i.__super__.toJSON.apply(this,arguments)).attachment=this.attachment,t},i.prototype.getCacheKey=function(){return[i.__super__.getCacheKey.apply(this,arguments),this.attachment.getCacheKey()].join("/")},i.prototype.toConsole=function(){return JSON.stringify(this.toString())},i}(t.Piece))}.call(this),function(){var e,n={}.hasOwnProperty;e=t.normalizeNewlines,t.Piece.registerType("string",t.StringPiece=function(t){function i(t){i.__super__.constructor.apply(this,arguments),this.string=e(t),this.length=this.string.length}return function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.fromJSON=function(t){return new this(t.string,t.attributes)},i.prototype.getValue=function(){return this.string},i.prototype.toString=function(){return this.string.toString()},i.prototype.isBlockBreak=function(){return"\n"===this.toString()&&!0===this.getAttribute("blockBreak")},i.prototype.toJSON=function(){var t;return(t=i.__super__.toJSON.apply(this,arguments)).string=this.string,t},i.prototype.canBeConsolidatedWith=function(t){return null!=t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)},i.prototype.consolidateWith=function(t){return new this.constructor(this.toString()+t.toString(),this.attributes)},i.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.length?(e=this,n=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),n=new this.constructor(this.string.slice(t),this.attributes)),[e,n]},i.prototype.toConsole=function(){var t;return(t=this.string).length>15&&(t=t.slice(0,14)+""),JSON.stringify(t.toString())},i}(t.Piece))}.call(this),function(){var e,n={}.hasOwnProperty,i=[].slice;e=t.spliceArray,t.SplittableList=function(t){function r(t){null==t&&(t=[]),r.__super__.constructor.apply(this,arguments),this.objects=t.slice(0),this.length=this.objects.length}var o,a,s;return function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,t),r.box=function(t){return t instanceof this?t:new this(t)},r.prototype.indexOf=function(t){return this.objects.indexOf(t)},r.prototype.splice=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],new this.constructor(e.apply(null,[this.objects].concat(i.call(t))))},r.prototype.eachObject=function(t){var e,n,i,r,o,a;for(a=[],n=e=0,i=(o=this.objects).length;i>e;n=++e)r=o[n],a.push(t(r,n));return a},r.prototype.insertObjectAtIndex=function(t,e){return this.splice(e,0,t)},r.prototype.insertSplittableListAtIndex=function(t,e){return this.splice.apply(this,[e,0].concat(i.call(t.objects)))},r.prototype.insertSplittableListAtPosition=function(t,e){var n,i,r;return i=(r=this.splitObjectAtPosition(e))[0],n=r[1],new this.constructor(i).insertSplittableListAtIndex(t,n)},r.prototype.editObjectAtIndex=function(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)},r.prototype.replaceObjectAtIndex=function(t,e){return this.splice(e,1,t)},r.prototype.removeObjectAtIndex=function(t){return this.splice(t,1)},r.prototype.getObjectAtIndex=function(t){return this.objects[t]},r.prototype.getSplittableListInRange=function(t){var e,n,i,r;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],r=i[2],new this.constructor(n.slice(e,r+1))},r.prototype.selectSplittableList=function(t){var e,n;return n=function(){var n,i,r,o;for(o=[],n=0,i=(r=this.objects).length;i>n;n++)e=r[n],t(e)&&o.push(e);return o}.call(this),new this.constructor(n)},r.prototype.removeObjectsInRange=function(t){var e,n,i,r;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],r=i[2],new this.constructor(n).splice(e,r-e+1)},r.prototype.transformObjectsInRange=function(t,e){var n,i,r,o,a,s,l;return a=this.splitObjectsAtRange(t),o=a[0],i=a[1],s=a[2],l=function(){var t,a,l;for(l=[],n=t=0,a=o.length;a>t;n=++t)r=o[n],l.push(n>=i&&s>=n?e(r):r);return l}(),new this.constructor(l)},r.prototype.splitObjectsAtRange=function(t){var e,n,i,r,a;return n=(r=this.splitObjectAtPosition(s(t)))[0],e=r[1],i=r[2],[n=(a=new this.constructor(n).splitObjectAtPosition(o(t)+i))[0],e,a[1]-1]},r.prototype.getObjectAtPosition=function(t){var e,n;return e=(n=this.findIndexAndOffsetAtPosition(t)).index,n.offset,this.objects[e]},r.prototype.splitObjectAtPosition=function(t){var e,n,i,r,o,a,s,l,u;return e=(o=this.findIndexAndOffsetAtPosition(t)).index,r=o.offset,i=this.objects.slice(0),null!=e?0===r?(l=e,u=0):(n=(a=this.getObjectAtIndex(e).splitAtOffset(r))[0],s=a[1],i.splice(e,1,n,s),l=e+1,u=n.getLength()-r):(l=i.length,u=0),[i,l,u]},r.prototype.consolidate=function(){var t,e,n,i,r,o;for(i=[],r=this.objects[0],t=0,e=(o=this.objects.slice(1)).length;e>t;t++)n=o[t],("function"==typeof r.canBeConsolidatedWith?r.canBeConsolidatedWith(n):void 0)?r=r.consolidateWith(n):(i.push(r),r=n);return null!=r&&i.push(r),new this.constructor(i)},r.prototype.consolidateFromIndexToIndex=function(t,e){var n,r;return r=this.objects.slice(0).slice(t,e+1),n=new this.constructor(r).consolidate().toArray(),this.splice.apply(this,[t,r.length].concat(i.call(n)))},r.prototype.findIndexAndOffsetAtPosition=function(t){var e,n,i,r,o,a;for(e=0,i=n=0,r=(a=this.objects).length;r>n;i=++n){if(o=e+a[i].getLength(),t>=e&&o>t)return{index:i,offset:t-e};e=o}return{index:null,offset:null}},r.prototype.findPositionAtIndexAndOffset=function(t,e){var n,i,r,o,a,s;for(a=0,n=i=0,r=(s=this.objects).length;r>i;n=++i)if(o=s[n],t>n)a+=o.getLength();else if(n===t){a+=e;break}return a},r.prototype.getEndPosition=function(){var t,e;return null!=this.endPosition?this.endPosition:this.endPosition=function(){var n,i,r;for(e=0,n=0,i=(r=this.objects).length;i>n;n++)t=r[n],e+=t.getLength();return e}.call(this)},r.prototype.toString=function(){return this.objects.join("")},r.prototype.toArray=function(){return this.objects.slice(0)},r.prototype.toJSON=function(){return this.toArray()},r.prototype.isEqualTo=function(t){return r.__super__.isEqualTo.apply(this,arguments)||a(this.objects,null!=t?t.objects:void 0)},a=function(t,e){var n,i,r,o,a;if(null==e&&(e=[]),t.length!==e.length)return!1;for(a=!0,i=n=0,r=t.length;r>n;i=++n)o=t[i],a&&!o.isEqualTo(e[i])&&(a=!1);return a},r.prototype.contentsForInspection=function(){var t;return{objects:"["+function(){var e,n,i,r;for(r=[],e=0,n=(i=this.objects).length;n>e;e++)t=i[e],r.push(t.inspect());return r}.call(this).join(", ")+"]"}},s=function(t){return t[0]},o=function(t){return t[1]},r}(t.Object)}.call(this),function(){var e={}.hasOwnProperty;t.Text=function(n){function i(e){var n;null==e&&(e=[]),i.__super__.constructor.apply(this,arguments),this.pieceList=new t.SplittableList(function(){var t,i,r;for(r=[],t=0,i=e.length;i>t;t++)(n=e[t]).isEmpty()||r.push(n);return r}())}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),i.textForAttachmentWithAttributes=function(e,n){return new this([new t.AttachmentPiece(e,n)])},i.textForStringWithAttributes=function(e,n){return new this([new t.StringPiece(e,n)])},i.fromJSON=function(e){var n;return new this(function(){var i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(t.Piece.fromJSON(n));return o}())},i.prototype.copy=function(){return this.copyWithPieceList(this.pieceList)},i.prototype.copyWithPieceList=function(t){return new this.constructor(t.consolidate().toArray())},i.prototype.copyUsingObjectMap=function(t){var e,n;return n=function(){var n,i,r,o,a;for(a=[],n=0,i=(r=this.getPieces()).length;i>n;n++)e=r[n],a.push(null!=(o=t.find(e))?o:e);return a}.call(this),new this.constructor(n)},i.prototype.appendText=function(t){return this.insertTextAtPosition(t,this.getLength())},i.prototype.insertTextAtPosition=function(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))},i.prototype.removeTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))},i.prototype.replaceTextAtRange=function(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])},i.prototype.moveTextFromRangeToPosition=function(t,e){var n,i;if(!(t[0]<=e&&e<=t[1]))return n=(i=this.getTextAtRange(t)).getLength(),t[0]<e&&(e-=n),this.removeTextAtRange(t).insertTextAtPosition(i,e)},i.prototype.addAttributeAtRange=function(t,e,n){var i;return(i={})[t]=e,this.addAttributesAtRange(i,n)},i.prototype.addAttributesAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,(function(e){return e.copyWithAdditionalAttributes(t)})))},i.prototype.removeAttributeAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,(function(e){return e.copyWithoutAttribute(t)})))},i.prototype.setAttributesAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,(function(e){return e.copyWithAttributes(t)})))},i.prototype.getAttributesAtPosition=function(t){var e,n;return null!=(e=null!=(n=this.pieceList.getObjectAtPosition(t))?n.getAttributes():void 0)?e:{}},i.prototype.getCommonAttributes=function(){var e,n;return e=function(){var t,e,i,r;for(r=[],t=0,e=(i=this.pieceList.toArray()).length;e>t;t++)n=i[t],r.push(n.getAttributes());return r}.call(this),t.Hash.fromCommonAttributesOfObjects(e).toObject()},i.prototype.getCommonAttributesAtRange=function(t){var e;return null!=(e=this.getTextAtRange(t).getCommonAttributes())?e:{}},i.prototype.getExpandedRangeForAttributeAtOffset=function(t,e){var n,i,r;for(n=r=e,i=this.getLength();n>0&&this.getCommonAttributesAtRange([n-1,r])[t];)n--;for(;i>r&&this.getCommonAttributesAtRange([e,r+1])[t];)r++;return[n,r]},i.prototype.getTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))},i.prototype.getStringAtRange=function(t){return this.pieceList.getSplittableListInRange(t).toString()},i.prototype.getStringAtPosition=function(t){return this.getStringAtRange([t,t+1])},i.prototype.startsWithString=function(t){return this.getStringAtRange([0,t.length])===t},i.prototype.endsWithString=function(t){var e;return e=this.getLength(),this.getStringAtRange([e-t.length,e])===t},i.prototype.getAttachmentPieces=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.pieceList.toArray()).length;e>t;t++)null!=(n=i[t]).attachment&&r.push(n);return r},i.prototype.getAttachments=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.getAttachmentPieces()).length;e>t;t++)n=i[t],r.push(n.attachment);return r},i.prototype.getAttachmentAndPositionById=function(t){var e,n,i,r,o,a;for(r=0,e=0,n=(o=this.pieceList.toArray()).length;n>e;e++){if((null!=(a=(i=o[e]).attachment)?a.id:void 0)===t)return{attachment:i.attachment,position:r};r+=i.length}return{attachment:null,position:null}},i.prototype.getAttachmentById=function(t){var e,n;return e=(n=this.getAttachmentAndPositionById(t)).attachment,n.position,e},i.prototype.getRangeOfAttachment=function(t){var e,n;return t=(n=this.getAttachmentAndPositionById(t.id)).attachment,e=n.position,null!=t?[e,e+1]:void 0},i.prototype.updateAttributesForAttachment=function(t,e){var n;return(n=this.getRangeOfAttachment(e))?this.addAttributesAtRange(t,n):this},i.prototype.getLength=function(){return this.pieceList.getEndPosition()},i.prototype.isEmpty=function(){return 0===this.getLength()},i.prototype.isEqualTo=function(t){var e;return i.__super__.isEqualTo.apply(this,arguments)||(null!=t&&null!=(e=t.pieceList)?e.isEqualTo(this.pieceList):void 0)},i.prototype.isBlockBreak=function(){return 1===this.getLength()&&this.pieceList.getObjectAtIndex(0).isBlockBreak()},i.prototype.eachPiece=function(t){return this.pieceList.eachObject(t)},i.prototype.getPieces=function(){return this.pieceList.toArray()},i.prototype.getPieceAtPosition=function(t){return this.pieceList.getObjectAtPosition(t)},i.prototype.contentsForInspection=function(){return{pieceList:this.pieceList.inspect()}},i.prototype.toSerializableText=function(){var t;return t=this.pieceList.selectSplittableList((function(t){return t.isSerializable()})),this.copyWithPieceList(t)},i.prototype.toString=function(){return this.pieceList.toString()},i.prototype.toJSON=function(){return this.pieceList.toJSON()},i.prototype.toConsole=function(){var t;return JSON.stringify(function(){var e,n,i,r;for(r=[],e=0,n=(i=this.pieceList.toArray()).length;n>e;e++)t=i[e],r.push(JSON.parse(t.toConsole()));return r}.call(this))},i.prototype.getDirection=function(){return t.getDirection(this.toString())},i.prototype.isRTL=function(){return"rtl"===this.getDirection()},i}(t.Object)}.call(this),function(){var e,n,i,r,o={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},s=[].slice;e=t.arraysAreEqual,r=t.spliceArray,n=t.getBlockConfig,t.getBlockAttributeNames,i=t.getListAttributeNames,t.Block=function(l){function u(e,n){null==e&&(e=new t.Text),null==n&&(n=[]),u.__super__.constructor.apply(this,arguments),this.text=h(e),this.attributes=n}var c,h,d,f,p,g,m,v,y;return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(u,l),u.fromJSON=function(e){return new this(t.Text.fromJSON(e.text),e.attributes)},u.prototype.isEmpty=function(){return this.text.isBlockBreak()},u.prototype.isEqualTo=function(t){return u.__super__.isEqualTo.apply(this,arguments)||this.text.isEqualTo(null!=t?t.text:void 0)&&e(this.attributes,null!=t?t.attributes:void 0)},u.prototype.copyWithText=function(t){return new this.constructor(t,this.attributes)},u.prototype.copyWithoutText=function(){return this.copyWithText(null)},u.prototype.copyWithAttributes=function(t){return new this.constructor(this.text,t)},u.prototype.copyWithoutAttributes=function(){return this.copyWithAttributes(null)},u.prototype.copyUsingObjectMap=function(t){var e;return this.copyWithText((e=t.find(this.text))?e:this.text.copyUsingObjectMap(t))},u.prototype.addAttribute=function(t){var e;return e=this.attributes.concat(f(t)),this.copyWithAttributes(e)},u.prototype.removeAttribute=function(t){var e,i;return i=n(t).listAttribute,e=g(g(this.attributes,t),i),this.copyWithAttributes(e)},u.prototype.removeLastAttribute=function(){return this.removeAttribute(this.getLastAttribute())},u.prototype.getLastAttribute=function(){return p(this.attributes)},u.prototype.getAttributes=function(){return this.attributes.slice(0)},u.prototype.getAttributeLevel=function(){return this.attributes.length},u.prototype.getAttributeAtLevel=function(t){return this.attributes[t-1]},u.prototype.hasAttribute=function(t){return a.call(this.attributes,t)>=0},u.prototype.hasAttributes=function(){return this.getAttributeLevel()>0},u.prototype.getLastNestableAttribute=function(){return p(this.getNestableAttributes())},u.prototype.getNestableAttributes=function(){var t,e,i,r,o;for(o=[],e=0,i=(r=this.attributes).length;i>e;e++)t=r[e],n(t).nestable&&o.push(t);return o},u.prototype.getNestingLevel=function(){return this.getNestableAttributes().length},u.prototype.decreaseNestingLevel=function(){var t;return(t=this.getLastNestableAttribute())?this.removeAttribute(t):this},u.prototype.increaseNestingLevel=function(){var t,e,n;return(t=this.getLastNestableAttribute())?(n=this.attributes.lastIndexOf(t),e=r.apply(null,[this.attributes,n+1,0].concat(s.call(f(t)))),this.copyWithAttributes(e)):this},u.prototype.getListItemAttributes=function(){var t,e,i,r,o;for(o=[],e=0,i=(r=this.attributes).length;i>e;e++)t=r[e],n(t).listAttribute&&o.push(t);return o},u.prototype.isListItem=function(){var t;return null!=(t=n(this.getLastAttribute()))?t.listAttribute:void 0},u.prototype.isTerminalBlock=function(){var t;return null!=(t=n(this.getLastAttribute()))?t.terminal:void 0},u.prototype.breaksOnReturn=function(){var t;return null!=(t=n(this.getLastAttribute()))?t.breakOnReturn:void 0},u.prototype.findLineBreakInDirectionFromPosition=function(t,e){var n,i;return i=this.toString(),-1!==(n=function(){switch(t){case"forward":return i.indexOf("\n",e);case"backward":return i.slice(0,e).lastIndexOf("\n")}}())?n:void 0},u.prototype.contentsForInspection=function(){return{text:this.text.inspect(),attributes:this.attributes}},u.prototype.toString=function(){return this.text.toString()},u.prototype.toJSON=function(){return{text:this.text,attributes:this.attributes}},u.prototype.getDirection=function(){return this.text.getDirection()},u.prototype.isRTL=function(){return this.text.isRTL()},u.prototype.getLength=function(){return this.text.getLength()},u.prototype.canBeConsolidatedWith=function(t){return!this.hasAttributes()&&!t.hasAttributes()&&this.getDirection()===t.getDirection()},u.prototype.consolidateWith=function(e){var n,i;return n=t.Text.textForStringWithAttributes("\n"),i=this.getTextWithoutBlockBreak().appendText(n),this.copyWithText(i.appendText(e.text))},u.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.getLength()?(e=this,n=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),n=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,n]},u.prototype.getBlockBreakPosition=function(){return this.text.getLength()-1},u.prototype.getTextWithoutBlockBreak=function(){return m(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()},u.prototype.canBeGrouped=function(t){return this.attributes[t]},u.prototype.canBeGroupedWith=function(t,e){var r,o,s,l;return o=(s=t.getAttributes())[e],!((r=this.attributes[e])!==o||!1===n(r).group&&(l=s[e+1],a.call(i(),l)<0)||this.getDirection()!==t.getDirection()&&!t.isEmpty())},h=function(t){return t=y(t),c(t)},y=function(e){var n,i,r,o,a,l;return o=!1,l=e.getPieces(),i=2<=l.length?s.call(l,0,n=l.length-1):(n=0,[]),null==(r=l[n++])?e:(i=function(){var t,e,n;for(n=[],t=0,e=i.length;e>t;t++)(a=i[t]).isBlockBreak()?(o=!0,n.push(v(a))):n.push(a);return n}(),o?new t.Text(s.call(i).concat([r])):e)},d=t.Text.textForStringWithAttributes("\n",{blockBreak:!0}),c=function(t){return m(t)?t:t.appendText(d)},m=function(t){var e;return 0!==(e=t.getLength())&&t.getTextAtRange([e-1,e]).isBlockBreak()},v=function(t){return t.copyWithoutAttribute("blockBreak")},f=function(t){var e;return null!=(e=n(t).listAttribute)?[e,t]:[t]},p=function(t){return t.slice(-1)[0]},g=function(t,e){var n;return-1===(n=t.lastIndexOf(e))?t:r(t,n,1)},u}(t.Object)}.call(this),function(){var e,n,i,r={}.hasOwnProperty,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},a=[].slice;n=t.tagName,i=t.walkTree,e=t.nodeIsAttachmentElement,t.HTMLSanitizer=function(s){function l(t,e){var n;n=null!=e?e:{},this.allowedAttributes=n.allowedAttributes,this.forbiddenProtocols=n.forbiddenProtocols,this.forbiddenElements=n.forbiddenElements,null==this.allowedAttributes&&(this.allowedAttributes=u),null==this.forbiddenProtocols&&(this.forbiddenProtocols=h),null==this.forbiddenElements&&(this.forbiddenElements=c),this.body=d(t)}var u,c,h,d;return function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(l,s),u="style href src width height class".split(" "),h="javascript:".split(" "),c="script iframe".split(" "),l.sanitize=function(t,e){var n;return(n=new this(t,e)).sanitize(),n},l.prototype.sanitize=function(){return this.sanitizeElements(),this.normalizeListElementNesting()},l.prototype.getHTML=function(){return this.body.innerHTML},l.prototype.getBody=function(){return this.body},l.prototype.sanitizeElements=function(){var e,n,r,o,a;for(a=i(this.body),o=[];a.nextNode();)switch((r=a.currentNode).nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(r)?o.push(r):this.sanitizeElement(r);break;case Node.COMMENT_NODE:o.push(r)}for(e=0,n=o.length;n>e;e++)r=o[e],t.removeNode(r);return this.body},l.prototype.sanitizeElement=function(t){var e,n,i,r,s;for(t.hasAttribute("href")&&(r=t.protocol,o.call(this.forbiddenProtocols,r)>=0&&t.removeAttribute("href")),e=0,n=(s=a.call(t.attributes)).length;n>e;e++)i=s[e].name,o.call(this.allowedAttributes,i)>=0||0===i.indexOf("data-trix")||t.removeAttribute(i);return t},l.prototype.normalizeListElementNesting=function(){var t,e,i,r,o;for(t=0,e=(o=a.call(this.body.querySelectorAll("ul,ol"))).length;e>t;t++)(r=(i=o[t]).previousElementSibling)&&"li"===n(r)&&r.appendChild(i);return this.body},l.prototype.elementIsRemovable=function(t){return(null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE?this.elementIsForbidden(t)||this.elementIsntSerializable(t):void 0},l.prototype.elementIsForbidden=function(t){var e;return e=n(t),o.call(this.forbiddenElements,e)>=0},l.prototype.elementIsntSerializable=function(t){return"false"===t.getAttribute("data-trix-serialize")&&!e(t)},d=function(t){var e,n,i,r,o;for(null==t&&(t=""),t=t.replace(/<\/html[^>]*>[^]*$/i,"</html>"),(e=document.implementation.createHTMLDocument("")).documentElement.innerHTML=t,i=0,r=(o=e.head.querySelectorAll("style")).length;r>i;i++)n=o[i],e.body.appendChild(n);return e.body},l}(t.BasicObject)}.call(this),function(){var e,n,i,r,o,a,s,l,u,c,h,d={}.hasOwnProperty,f=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t.arraysAreEqual,a=t.makeElement,c=t.tagName,o=t.getBlockTagNames,h=t.walkTree,r=t.findClosestElementFromNode,i=t.elementContainsNode,s=t.nodeIsAttachmentElement,l=t.normalizeSpaces,n=t.breakableWhitespacePattern,u=t.squishBreakableWhitespace,t.HTMLParser=function(p){function g(t,e){this.html=t,this.referenceElement=(null!=e?e:{}).referenceElement,this.blocks=[],this.blockElements=[],this.processedElements=[]}var m,v,y,b,x,_,E,w,A,D,C,k;return function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(g,p),g.parse=function(t,e){var n;return(n=new this(t,e)).parse(),n},g.prototype.getDocument=function(){return t.Document.fromJSON(this.blocks)},g.prototype.parse=function(){var e,n;try{for(this.createHiddenContainer(),e=t.HTMLSanitizer.sanitize(this.html).getHTML(),this.containerElement.innerHTML=e,n=h(this.containerElement,{usingFilter:E});n.nextNode();)this.processNode(n.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}},g.prototype.createHiddenContainer=function(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=a({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))},g.prototype.removeHiddenContainer=function(){return t.removeNode(this.containerElement)},E=function(t){return"style"===c(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},g.prototype.processNode=function(t){switch(t.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(t))return this.appendBlockForTextNode(t),this.processTextNode(t);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}},g.prototype.appendBlockForTextNode=function(t){var n,i,r;return(i=t.parentNode)===this.currentBlockElement&&this.isBlockElement(t.previousSibling)?this.appendStringWithAttributes("\n"):i!==this.containerElement&&!this.isBlockElement(i)||(n=this.getBlockAttributes(i),e(n,null!=(r=this.currentBlock)?r.attributes:void 0))?void 0:(this.currentBlock=this.appendBlockForAttributesWithElement(n,i),this.currentBlockElement=i)},g.prototype.appendBlockForElement=function(t){var n,r,o,a;if(o=this.isBlockElement(t),r=i(this.currentBlockElement,t),o&&!this.isBlockElement(t.firstChild)){if((!this.isInsignificantTextNode(t.firstChild)||!this.isBlockElement(t.firstElementChild))&&(n=this.getBlockAttributes(t),t.firstChild))return r&&e(n,this.currentBlock.attributes)?this.appendStringWithAttributes("\n"):(this.currentBlock=this.appendBlockForAttributesWithElement(n,t),this.currentBlockElement=t)}else if(this.currentBlockElement&&!r&&!o)return(a=this.findParentBlockElement(t))?this.appendBlockForElement(a):(this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null)},g.prototype.findParentBlockElement=function(t){var e;for(e=t.parentElement;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&f.call(this.blockElements,e)>=0)return e;e=e.parentElement}return null},g.prototype.processTextNode=function(t){var e,n;return n=t.data,v(t.parentNode)||(n=u(n),C(null!=(e=t.previousSibling)?e.textContent:void 0)&&(n=x(n))),this.appendStringWithAttributes(n,this.getTextAttributes(t.parentNode))},g.prototype.processElement=function(t){var e,n,i,r,o;if(s(t))return e=w(t,"attachment"),Object.keys(e).length&&(r=this.getTextAttributes(t),this.appendAttachmentWithAttributes(e,r),t.innerHTML=""),this.processedElements.push(t);switch(c(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes("\n",this.getTextAttributes(t)),this.processedElements.push(t);case"img":for(n in e={url:t.getAttribute("src"),contentType:"image"},i=b(t))o=i[n],e[n]=o;return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes("\n");break;case"td":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes(" | ")}},g.prototype.appendBlockForAttributesWithElement=function(t,e){var n;return this.blockElements.push(e),n=m(t),this.blocks.push(n),n},g.prototype.appendEmptyBlock=function(){return this.appendBlockForAttributesWithElement([],null)},g.prototype.appendStringWithAttributes=function(t,e){return this.appendPiece(D(t,e))},g.prototype.appendAttachmentWithAttributes=function(t,e){return this.appendPiece(A(t,e))},g.prototype.appendPiece=function(t){return 0===this.blocks.length&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)},g.prototype.appendStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[i.length-1])?n.type:void 0)?n.string+=t:i.push(D(t))},g.prototype.prependStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[0])?n.type:void 0)?n.string=t+n.string:i.unshift(D(t))},D=function(t,e){return null==e&&(e={}),"string",{string:t=l(t),attributes:e,type:"string"}},A=function(t,e){return null==e&&(e={}),"attachment",{attachment:t,attributes:e,type:"attachment"}},m=function(t){return null==t&&(t={}),{text:[],attributes:t}},g.prototype.getTextAttributes=function(e){var n,i,o,a,l,u,c,h,d,f,p,g;for(n in o={},d=t.config.textAttributes)if((l=d[n]).tagName&&r(e,{matchingSelector:l.tagName,untilNode:this.containerElement}))o[n]=!0;else if(l.parser){if(g=l.parser(e)){for(i=!1,u=0,h=(f=this.findBlockElementAncestors(e)).length;h>u;u++)if(a=f[u],l.parser(a)===g){i=!0;break}i||(o[n]=g)}}else l.styleProperty&&(g=e.style[l.styleProperty])&&(o[n]=g);if(s(e))for(c in p=w(e,"attributes"))g=p[c],o[c]=g;return o},g.prototype.getBlockAttributes=function(e){var n,i,r,o;for(i=[];e&&e!==this.containerElement;){for(n in o=t.config.blockAttributes)!1!==(r=o[n]).parse&&c(e)===r.tagName&&(("function"==typeof r.test?r.test(e):void 0)||!r.test)&&(i.push(n),r.listAttribute&&i.push(r.listAttribute));e=e.parentNode}return i.reverse()},g.prototype.findBlockElementAncestors=function(t){var e,n;for(e=[];t&&t!==this.containerElement;)n=c(t),f.call(o(),n)>=0&&e.push(t),t=t.parentNode;return e},w=function(t,e){try{return JSON.parse(t.getAttribute("data-trix-"+e))}catch(t){return{}}},b=function(t){var e,n,i;return i=t.getAttribute("width"),n=t.getAttribute("height"),e={},i&&(e.width=parseInt(i,10)),n&&(e.height=parseInt(n,10)),e},g.prototype.isBlockElement=function(t){var e;if((null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE&&!s(t)&&!r(t,{matchingSelector:"td",untilNode:this.containerElement}))return e=c(t),f.call(o(),e)>=0||"block"===window.getComputedStyle(t).display},g.prototype.isInsignificantTextNode=function(t){var e,n,i;if((null!=t?t.nodeType:void 0)===Node.TEXT_NODE&&k(t.data)&&(n=t.parentNode,i=t.previousSibling,e=t.nextSibling,(!_(n.previousSibling)||this.isBlockElement(n.previousSibling))&&!v(n)))return!i||this.isBlockElement(i)||!e||this.isBlockElement(e)},g.prototype.isExtraBR=function(t){return"br"===c(t)&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t},v=function(t){var e;return"pre"===(e=window.getComputedStyle(t).whiteSpace)||"pre-wrap"===e||"pre-line"===e},_=function(t){return t&&!C(t.textContent)},g.prototype.translateBlockElementMarginsToNewlines=function(){var t,e,n,i,r,o,a;for(t=this.getMarginOfDefaultBlockElement(),a=[],n=e=0,i=(o=this.blocks).length;i>e;n=++e)o[n],(r=this.getMarginOfBlockElementAtIndex(n))&&(r.top>2*t.top&&this.prependStringToTextAtIndex("\n",n),a.push(r.bottom>2*t.bottom?this.appendStringToTextAtIndex("\n",n):void 0));return a},g.prototype.getMarginOfBlockElementAtIndex=function(t){var e,n;return!(e=this.blockElements[t])||!e.textContent||(n=c(e),f.call(o(),n)>=0||f.call(this.processedElements,e)>=0)?void 0:y(e)},g.prototype.getMarginOfDefaultBlockElement=function(){var e;return e=a(t.config.blockAttributes.default.tagName),this.containerElement.appendChild(e),y(e)},y=function(t){var e;return"block"===(e=window.getComputedStyle(t)).display?{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}:void 0},x=function(t){return t.replace(RegExp("^"+n.source+"+"),"")},k=function(t){return RegExp("^"+n.source+"*$").test(t)},C=function(t){return/\s$/.test(t)},g}(t.BasicObject)}.call(this),function(){var e,n,i,r,o={}.hasOwnProperty,a=[].slice,s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t.arraysAreEqual,i=t.normalizeRange,r=t.rangeIsCollapsed,n=t.getBlockConfig,t.Document=function(l){function u(e){null==e&&(e=[]),u.__super__.constructor.apply(this,arguments),0===e.length&&(e=[new t.Block]),this.blockList=t.SplittableList.box(e)}var c;return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(u,l),u.fromJSON=function(e){var n;return new this(function(){var i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(t.Block.fromJSON(n));return o}())},u.fromHTML=function(e,n){return t.HTMLParser.parse(e,n).getDocument()},u.fromString=function(e,n){var i;return i=t.Text.textForStringWithAttributes(e,n),new this([new t.Block(i)])},u.prototype.isEmpty=function(){var t;return 1===this.blockList.length&&((t=this.getBlockAtIndex(0)).isEmpty()&&!t.hasAttributes())},u.prototype.copy=function(t){var e;return null==t&&(t={}),e=t.consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray(),new this.constructor(e)},u.prototype.copyUsingObjectsFromDocument=function(e){var n;return n=new t.ObjectMap(e.getObjects()),this.copyUsingObjectMap(n)},u.prototype.copyUsingObjectMap=function(t){var e,n,i;return n=function(){var n,r,o,a;for(a=[],n=0,r=(o=this.getBlocks()).length;r>n;n++)e=o[n],a.push((i=t.find(e))?i:e.copyUsingObjectMap(t));return a}.call(this),new this.constructor(n)},u.prototype.copyWithBaseBlockAttributes=function(t){var e,n,i;return null==t&&(t=[]),i=function(){var i,r,o,a;for(a=[],i=0,r=(o=this.getBlocks()).length;r>i;i++)n=o[i],e=t.concat(n.getAttributes()),a.push(n.copyWithAttributes(e));return a}.call(this),new this.constructor(i)},u.prototype.replaceBlock=function(t,e){var n;return-1===(n=this.blockList.indexOf(t))?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,n))},u.prototype.insertDocumentAtRange=function(t,e){var n,o,a,s,l,u,c;return o=t.blockList,l=(e=i(e))[0],a=(u=this.locationFromPosition(l)).index,s=u.offset,c=this,n=this.getBlockAtPosition(l),r(e)&&n.isEmpty()&&!n.hasAttributes()?c=new this.constructor(c.blockList.removeObjectAtIndex(a)):n.getBlockBreakPosition()===s&&l++,c=c.removeTextAtRange(e),new this.constructor(c.blockList.insertSplittableListAtPosition(o,l))},u.prototype.mergeDocumentAtRange=function(t,n){var r,o,a,s,l,u,c,h,d,f,p,g;return p=(n=i(n))[0],f=this.locationFromPosition(p),o=this.getBlockAtIndex(f.index).getAttributes(),r=t.getBaseBlockAttributes(),g=o.slice(-r.length),e(r,g)?(c=o.slice(0,-r.length),u=t.copyWithBaseBlockAttributes(c)):u=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(o),a=u.getBlockCount(),s=u.getBlockAtIndex(0),e(o,s.getAttributes())?(l=s.getTextWithoutBlockBreak(),d=this.insertTextAtRange(l,n),a>1&&(u=new this.constructor(u.getBlocks().slice(1)),h=p+l.getLength(),d=d.insertDocumentAtRange(u,h))):d=this.insertDocumentAtRange(u,n),d},u.prototype.insertTextAtRange=function(t,e){var n,r,o,a,s;return s=(e=i(e))[0],r=(a=this.locationFromPosition(s)).index,o=a.offset,n=this.removeTextAtRange(e),new this.constructor(n.blockList.editObjectAtIndex(r,(function(e){return e.copyWithText(e.text.insertTextAtPosition(t,o))})))},u.prototype.removeTextAtRange=function(t){var e,n,o,a,s,l,u,c,h,d,f,p,g,m,v,y,b,x;return c=(d=t=i(t))[0],y=d[1],r(t)?this:(l=(f=this.locationRangeFromRange(t))[0],m=f[1],s=l.index,u=l.offset,a=this.getBlockAtIndex(s),g=m.index,v=m.offset,p=this.getBlockAtIndex(g),y-c==1&&a.getBlockBreakPosition()===u&&p.getBlockBreakPosition()!==v&&"\n"===p.text.getStringAtPosition(v)?o=this.blockList.editObjectAtIndex(g,(function(t){return t.copyWithText(t.text.removeTextAtRange([v,v+1]))})):(h=a.text.getTextAtRange([0,u]),b=p.text.getTextAtRange([v,p.getLength()]),x=h.appendText(b),n=s!==g&&0===u&&a.getAttributeLevel()>=p.getAttributeLevel()?p.copyWithText(x):a.copyWithText(x),e=g+1-s,o=this.blockList.splice(s,e,n)),new this.constructor(o))},u.prototype.moveTextFromRangeToPosition=function(t,e){var n,r,o,s,l,u,c,h,d,f;return d=(u=t=i(t))[0],o=u[1],e>=d&&o>=e?this:(r=this.getDocumentAtRange(t),h=this.removeTextAtRange(t),(l=e>d)&&(e-=r.getLength()),s=(c=r.getBlocks())[0],0===(n=2<=c.length?a.call(c,1):[]).length?(f=s.getTextWithoutBlockBreak(),l&&(e+=1)):f=s.text,h=h.insertTextAtRange(f,e),0===n.length?h:(r=new this.constructor(n),e+=f.getLength(),h.insertDocumentAtRange(r,e)))},u.prototype.addAttributeAtRange=function(t,e,i){var r;return r=this.blockList,this.eachBlockAtRange(i,(function(i,o,a){return r=r.editObjectAtIndex(a,(function(){return n(t)?i.addAttribute(t,e):o[0]===o[1]?i:i.copyWithText(i.text.addAttributeAtRange(t,e,o))}))})),new this.constructor(r)},u.prototype.addAttribute=function(t,e){var n;return n=this.blockList,this.eachBlock((function(i,r){return n=n.editObjectAtIndex(r,(function(){return i.addAttribute(t,e)}))})),new this.constructor(n)},u.prototype.removeAttributeAtRange=function(t,e){var i;return i=this.blockList,this.eachBlockAtRange(e,(function(e,r,o){return n(t)?i=i.editObjectAtIndex(o,(function(){return e.removeAttribute(t)})):r[0]!==r[1]?i=i.editObjectAtIndex(o,(function(){return e.copyWithText(e.text.removeAttributeAtRange(t,r))})):void 0})),new this.constructor(i)},u.prototype.updateAttributesForAttachment=function(t,e){var n,i,r;return i=this.getRangeOfAttachment(e)[0],n=this.locationFromPosition(i).index,r=this.getTextAtIndex(n),new this.constructor(this.blockList.editObjectAtIndex(n,(function(n){return n.copyWithText(r.updateAttributesForAttachment(t,e))})))},u.prototype.removeAttributeForAttachment=function(t,e){var n;return n=this.getRangeOfAttachment(e),this.removeAttributeAtRange(t,n)},u.prototype.insertBlockBreakAtRange=function(e){var n,r,o,a;return a=(e=i(e))[0],o=this.locationFromPosition(a).offset,r=this.removeTextAtRange(e),0===o&&(n=[new t.Block]),new this.constructor(r.blockList.insertSplittableListAtPosition(new t.SplittableList(n),a))},u.prototype.applyBlockAttributeAtRange=function(t,e,i){var r,o,a,s;return o=(a=this.expandRangeToLineBreaksAndSplitBlocks(i)).document,i=a.range,(r=n(t)).listAttribute?(s=(o=o.removeLastListAttributeAtRange(i,{exceptAttributeName:t})).convertLineBreaksToBlockBreaksInRange(i),o=s.document,i=s.range):o=r.exclusive?o.removeBlockAttributesAtRange(i):r.terminal?o.removeLastTerminalAttributeAtRange(i):o.consolidateBlocksAtRange(i),o.addAttributeAtRange(t,e,i)},u.prototype.removeLastListAttributeAtRange=function(t,e){var i;return null==e&&(e={}),i=this.blockList,this.eachBlockAtRange(t,(function(t,r,o){var a;if((a=t.getLastAttribute())&&n(a).listAttribute&&a!==e.exceptAttributeName)return i=i.editObjectAtIndex(o,(function(){return t.removeAttribute(a)}))})),new this.constructor(i)},u.prototype.removeLastTerminalAttributeAtRange=function(t){var e;return e=this.blockList,this.eachBlockAtRange(t,(function(t,i,r){var o;if((o=t.getLastAttribute())&&n(o).terminal)return e=e.editObjectAtIndex(r,(function(){return t.removeAttribute(o)}))})),new this.constructor(e)},u.prototype.removeBlockAttributesAtRange=function(t){var e;return e=this.blockList,this.eachBlockAtRange(t,(function(t,n,i){return t.hasAttributes()?e=e.editObjectAtIndex(i,(function(){return t.copyWithoutAttributes()})):void 0})),new this.constructor(e)},u.prototype.expandRangeToLineBreaksAndSplitBlocks=function(t){var e,n,r,o,a,s,l,u,c;return c=(s=t=i(t))[0],o=s[1],u=this.locationFromPosition(c),r=this.locationFromPosition(o),l=(e=this).getBlockAtIndex(u.index),null!=(u.offset=l.findLineBreakInDirectionFromPosition("backward",u.offset))&&(a=e.positionFromLocation(u),e=e.insertBlockBreakAtRange([a,a+1]),r.index+=1,r.offset-=e.getBlockAtIndex(u.index).getLength(),u.index+=1),u.offset=0,0===r.offset&&r.index>u.index?(r.index-=1,r.offset=e.getBlockAtIndex(r.index).getBlockBreakPosition()):("\n"===(n=e.getBlockAtIndex(r.index)).text.getStringAtRange([r.offset-1,r.offset])?r.offset-=1:r.offset=n.findLineBreakInDirectionFromPosition("forward",r.offset),r.offset!==n.getBlockBreakPosition()&&(a=e.positionFromLocation(r),e=e.insertBlockBreakAtRange([a,a+1]))),c=e.positionFromLocation(u),o=e.positionFromLocation(r),{document:e,range:t=i([c,o])}},u.prototype.convertLineBreaksToBlockBreaksInRange=function(t){var e,n,r;return n=(t=i(t))[0],r=this.getStringAtRange(t).slice(0,-1),e=this,r.replace(/.*?\n/g,(function(t){return n+=t.length,e=e.insertBlockBreakAtRange([n-1,n])})),{document:e,range:t}},u.prototype.consolidateBlocksAtRange=function(t){var e,n,r,o,a;return a=(r=t=i(t))[0],n=r[1],o=this.locationFromPosition(a).index,e=this.locationFromPosition(n).index,new this.constructor(this.blockList.consolidateFromIndexToIndex(o,e))},u.prototype.getDocumentAtRange=function(t){var e;return t=i(t),e=this.blockList.getSplittableListInRange(t).toArray(),new this.constructor(e)},u.prototype.getStringAtRange=function(t){var e,n;return(n=t=i(t))[n.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)},u.prototype.getBlockAtIndex=function(t){return this.blockList.getObjectAtIndex(t)},u.prototype.getBlockAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getBlockAtIndex(e)},u.prototype.getTextAtIndex=function(t){var e;return null!=(e=this.getBlockAtIndex(t))?e.text:void 0},u.prototype.getTextAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getTextAtIndex(e)},u.prototype.getPieceAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getPieceAtPosition(n)},u.prototype.getCharacterAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getStringAtRange([n,n+1])},u.prototype.getLength=function(){return this.blockList.getEndPosition()},u.prototype.getBlocks=function(){return this.blockList.toArray()},u.prototype.getBlockCount=function(){return this.blockList.length},u.prototype.getEditCount=function(){return this.editCount},u.prototype.eachBlock=function(t){return this.blockList.eachObject(t)},u.prototype.eachBlockAtRange=function(t,e){var n,r,o,a,s,l,u,c,h,d,f,p;if(f=(l=t=i(t))[0],o=l[1],d=this.locationFromPosition(f),r=this.locationFromPosition(o),d.index===r.index)return n=this.getBlockAtIndex(d.index),p=[d.offset,r.offset],e(n,p,d.index);for(h=[],s=a=u=d.index,c=r.index;c>=u?c>=a:a>=c;s=c>=u?++a:--a)(n=this.getBlockAtIndex(s))?(p=function(){switch(s){case d.index:return[d.offset,n.text.getLength()];case r.index:return[0,r.offset];default:return[0,n.text.getLength()]}}(),h.push(e(n,p,s))):h.push(void 0);return h},u.prototype.getCommonAttributesAtRange=function(e){var n,o,a;return o=(e=i(e))[0],r(e)?this.getCommonAttributesAtPosition(o):(a=[],n=[],this.eachBlockAtRange(e,(function(t,e){return e[0]!==e[1]?(a.push(t.text.getCommonAttributesAtRange(e)),n.push(c(t))):void 0})),t.Hash.fromCommonAttributesOfObjects(a).merge(t.Hash.fromCommonAttributesOfObjects(n)).toObject())},u.prototype.getCommonAttributesAtPosition=function(e){var n,i,r,o,a,l,u,h,d,f;if(a=(d=this.locationFromPosition(e)).index,h=d.offset,!(r=this.getBlockAtIndex(a)))return{};for(u in o=c(r),n=r.text.getAttributesAtPosition(h),i=r.text.getAttributesAtPosition(h-1),l=function(){var e,n;for(u in n=[],e=t.config.textAttributes)(f=e[u]).inheritable&&n.push(u);return n}(),i)((f=i[u])===n[u]||s.call(l,u)>=0)&&(o[u]=f);return o},u.prototype.getRangeOfCommonAttributeAtPosition=function(t,e){var n,r,o,a,s,l,u,c;return o=(s=this.locationFromPosition(e)).index,a=s.offset,c=(l=this.getTextAtIndex(o).getExpandedRangeForAttributeAtOffset(t,a))[0],r=l[1],u=this.positionFromLocation({index:o,offset:c}),n=this.positionFromLocation({index:o,offset:r}),i([u,n])},u.prototype.getBaseBlockAttributes=function(){var t,e,n,i,r,o,a;for(t=this.getBlockAtIndex(0).getAttributes(),n=i=1,a=this.getBlockCount();a>=1?a>i:i>a;n=a>=1?++i:--i)e=this.getBlockAtIndex(n).getAttributes(),o=Math.min(t.length,e.length),t=function(){var n,i,a;for(a=[],r=n=0,i=o;(i>=0?i>n:n>i)&&e[r]===t[r];r=i>=0?++n:--n)a.push(e[r]);return a}();return t},c=function(t){var e,n;return n={},(e=t.getLastAttribute())&&(n[e]=!0),n},u.prototype.getAttachmentById=function(t){var e,n,i,r;for(n=0,i=(r=this.getAttachments()).length;i>n;n++)if((e=r[n]).id===t)return e},u.prototype.getAttachmentPieces=function(){var t;return t=[],this.blockList.eachObject((function(e){var n;return n=e.text,t=t.concat(n.getAttachmentPieces())})),t},u.prototype.getAttachments=function(){var t,e,n,i,r;for(r=[],t=0,e=(i=this.getAttachmentPieces()).length;e>t;t++)n=i[t],r.push(n.attachment);return r},u.prototype.getRangeOfAttachment=function(t){var e,n,r,o,a,s,l;for(o=0,n=e=0,r=(a=this.blockList.toArray()).length;r>e;n=++e){if(l=(s=a[n].text).getRangeOfAttachment(t))return i([o+l[0],o+l[1]]);o+=s.getLength()}},u.prototype.getLocationRangeOfAttachment=function(t){var e;return e=this.getRangeOfAttachment(t),this.locationRangeFromRange(e)},u.prototype.getAttachmentPieceForAttachment=function(t){var e,n,i,r;for(e=0,n=(r=this.getAttachmentPieces()).length;n>e;e++)if((i=r[e]).attachment===t)return i},u.prototype.findRangesForBlockAttribute=function(t){var e,n,i,r,o,a,s;for(o=0,a=[],n=0,i=(s=this.getBlocks()).length;i>n;n++)r=(e=s[n]).getLength(),e.hasAttribute(t)&&a.push([o,o+r]),o+=r;return a},u.prototype.findRangesForTextAttribute=function(t,e){var n,i,r,o,a,s,l,u,c,h;for(h=(null!=e?e:{}).withValue,s=0,l=[],u=[],o=function(e){return null!=h?e.getAttribute(t)===h:e.hasAttribute(t)},n=0,i=(c=this.getPieces()).length;i>n;n++)r=(a=c[n]).getLength(),o(a)&&(l[1]===s?l[1]=s+r:u.push(l=[s,s+r])),s+=r;return u},u.prototype.locationFromPosition=function(t){var e,n;return null!=(n=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t))).index?n:{index:(e=this.getBlocks()).length-1,offset:e[e.length-1].getLength()}},u.prototype.positionFromLocation=function(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)},u.prototype.locationRangeFromPosition=function(t){return i(this.locationFromPosition(t))},u.prototype.locationRangeFromRange=function(t){var e,n,r,o;if(t=i(t))return o=t[0],n=t[1],r=this.locationFromPosition(o),e=this.locationFromPosition(n),i([r,e])},u.prototype.rangeFromLocationRange=function(t){var e,n;return t=i(t),e=this.positionFromLocation(t[0]),r(t)||(n=this.positionFromLocation(t[1])),i([e,n])},u.prototype.isEqualTo=function(t){return this.blockList.isEqualTo(null!=t?t.blockList:void 0)},u.prototype.getTexts=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.getBlocks()).length;n>e;e++)t=i[e],r.push(t.text);return r},u.prototype.getPieces=function(){var t,e,n,i,r;for(n=[],t=0,e=(i=this.getTexts()).length;e>t;t++)r=i[t],n.push.apply(n,r.getPieces());return n},u.prototype.getObjects=function(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())},u.prototype.toSerializableDocument=function(){var t;return t=[],this.blockList.eachObject((function(e){return t.push(e.copyWithText(e.text.toSerializableText()))})),new this.constructor(t)},u.prototype.toString=function(){return this.blockList.toString()},u.prototype.toJSON=function(){return this.blockList.toJSON()},u.prototype.toConsole=function(){var t;return JSON.stringify(function(){var e,n,i,r;for(r=[],e=0,n=(i=this.blockList.toArray()).length;n>e;e++)t=i[e],r.push(JSON.parse(t.text.toConsole()));return r}.call(this))},u}(t.Object)}.call(this),function(){t.LineBreakInsertion=function(){function t(t){var e;this.composition=t,this.document=this.composition.document,e=this.composition.getSelectedRange(),this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}return t.prototype.shouldInsertBlockBreak=function(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?0!==this.startLocation.offset:this.breaksOnReturn&&"\n"!==this.nextCharacter},t.prototype.shouldBreakFormattedBlock=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&"\n"===this.nextCharacter||"\n"===this.previousCharacter)},t.prototype.shouldDecreaseListLevel=function(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()},t.prototype.shouldPrependListItem=function(){return this.block.isListItem()&&0===this.startLocation.offset&&!this.block.isEmpty()},t.prototype.shouldRemoveLastBlockAttribute=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()},t}()}.call(this),function(){var e,n,i,r,o,a,s,l,u,c,h={}.hasOwnProperty;a=t.normalizeRange,u=t.rangesAreEqual,l=t.rangeIsCollapsed,s=t.objectsAreEqual,e=t.arrayStartsWith,c=t.summarizeArrayChange,i=t.getAllAttributeNames,r=t.getBlockConfig,o=t.getTextConfig,n=t.extend,t.Composition=function(d){function f(){this.document=new t.Document,this.attachments=[],this.currentAttributes={},this.revision=0}return function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(f,d),f.prototype.setDocument=function(t){var e;return t.isEqualTo(this.document)?void 0:(this.document=t,this.refreshAttachments(),this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeDocument?e.compositionDidChangeDocument(t):void 0)},f.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.getSelectedRange()}},f.prototype.loadSnapshot=function(e){var n,i,r,o;return n=e.document,o=e.selectedRange,null!=(i=this.delegate)&&"function"==typeof i.compositionWillLoadSnapshot&&i.compositionWillLoadSnapshot(),this.setDocument(null!=n?n:new t.Document),this.setSelection(null!=o?o:[0,0]),null!=(r=this.delegate)&&"function"==typeof r.compositionDidLoadSnapshot?r.compositionDidLoadSnapshot():void 0},f.prototype.insertText=function(t,e){var n,i,r,o;return o=(null!=e?e:{updatePosition:!0}).updatePosition,i=this.getSelectedRange(),this.setDocument(this.document.insertTextAtRange(t,i)),n=(r=i[0])+t.getLength(),o&&this.setSelection(n),this.notifyDelegateOfInsertionAtRange([r,n])},f.prototype.insertBlock=function(e){var n;return null==e&&(e=new t.Block),n=new t.Document([e]),this.insertDocument(n)},f.prototype.insertDocument=function(e){var n,i,r;return null==e&&(e=new t.Document),i=this.getSelectedRange(),this.setDocument(this.document.insertDocumentAtRange(e,i)),n=(r=i[0])+e.getLength(),this.setSelection(n),this.notifyDelegateOfInsertionAtRange([r,n])},f.prototype.insertString=function(e,n){var i,r;return i=this.getCurrentTextAttributes(),r=t.Text.textForStringWithAttributes(e,i),this.insertText(r,n)},f.prototype.insertBlockBreak=function(){var t,e,n;return e=this.getSelectedRange(),this.setDocument(this.document.insertBlockBreakAtRange(e)),t=(n=e[0])+1,this.setSelection(t),this.notifyDelegateOfInsertionAtRange([n,t])},f.prototype.insertLineBreak=function(){var e,n;return(n=new t.LineBreakInsertion(this)).shouldDecreaseListLevel()?(this.decreaseListLevel(),this.setSelection(n.startPosition)):n.shouldPrependListItem()?(e=new t.Document([n.block.copyWithoutText()]),this.insertDocument(e)):n.shouldInsertBlockBreak()?this.insertBlockBreak():n.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():n.shouldBreakFormattedBlock()?this.breakFormattedBlock(n):this.insertString("\n")},f.prototype.insertHTML=function(e){var n,i,r,o;return n=t.Document.fromHTML(e),r=this.getSelectedRange(),this.setDocument(this.document.mergeDocumentAtRange(n,r)),i=(o=r[0])+n.getLength()-1,this.setSelection(i),this.notifyDelegateOfInsertionAtRange([o,i])},f.prototype.replaceHTML=function(e){var n,i,r;return n=t.Document.fromHTML(e).copyUsingObjectsFromDocument(this.document),i=this.getLocationRange({strict:!1}),r=this.document.rangeFromLocationRange(i),this.setDocument(n),this.setSelection(r)},f.prototype.insertFile=function(t){return this.insertFiles([t])},f.prototype.insertFiles=function(e){var n,i,r,o,a,s;for(i=[],o=0,a=e.length;a>o;o++)r=e[o],(null!=(s=this.delegate)?s.compositionShouldAcceptFile(r):void 0)&&(n=t.Attachment.attachmentForFile(r),i.push(n));return this.insertAttachments(i)},f.prototype.insertAttachment=function(t){return this.insertAttachments([t])},f.prototype.insertAttachments=function(e){var n,i,r,o,a,s,l,u,c;for(u=new t.Text,o=0,a=e.length;a>o;o++)c=(n=e[o]).getType(),s=null!=(l=t.config.attachments[c])?l.presentation:void 0,r=this.getCurrentTextAttributes(),s&&(r.presentation=s),i=t.Text.textForAttachmentWithAttributes(n,r),u=u.appendText(i);return this.insertText(u)},f.prototype.shouldManageDeletingInDirection=function(t){var e;if(e=this.getLocationRange(),l(e)){if("backward"===t&&0===e[0].offset)return!0;if(this.shouldManageMovingCursorInDirection(t))return!0}else if(e[0].index!==e[1].index)return!0;return!1},f.prototype.deleteInDirection=function(t,e){var n,i,r,o,a,s,u,c;return o=(null!=e?e:{}).length,a=this.getLocationRange(),s=this.getSelectedRange(),(u=l(s))?r="backward"===t&&0===a[0].offset:c=a[0].index!==a[1].index,!(r&&this.canDecreaseBlockAttributeLevel()&&(i=this.getBlock(),i.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(s[0]),i.isEmpty()))&&(u&&(s=this.getExpandedRangeInDirection(t,{length:o}),"backward"===t&&(n=this.getAttachmentAtRange(s))),n?(this.editAttachment(n),!1):(this.setDocument(this.document.removeTextAtRange(s)),this.setSelection(s[0]),!r&&!c&&void 0))},f.prototype.moveTextFromRange=function(t){var e;return e=this.getSelectedRange()[0],this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)},f.prototype.removeAttachment=function(t){var e;return(e=this.document.getRangeOfAttachment(t))?(this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])):void 0},f.prototype.removeLastBlockAttribute=function(){var t,e,n,i;return i=(n=this.getSelectedRange())[0],e=n[1],t=this.document.getBlockAtPosition(e),this.removeCurrentAttribute(t.getLastAttribute()),this.setSelection(i)}," ",f.prototype.insertPlaceholder=function(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")},f.prototype.selectPlaceholder=function(){return null!=this.placeholderPosition?(this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+" ".length]),this.getSelectedRange()):void 0},f.prototype.forgetPlaceholder=function(){return this.placeholderPosition=null},f.prototype.hasCurrentAttribute=function(t){var e;return null!=(e=this.currentAttributes[t])&&!1!==e},f.prototype.toggleCurrentAttribute=function(t){var e;return(e=!this.currentAttributes[t])?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)},f.prototype.canSetCurrentAttribute=function(t){return r(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)},f.prototype.canSetCurrentTextAttribute=function(){var t,e,n,i;if(t=this.getSelectedDocument()){for(e=0,n=(i=t.getAttachments()).length;n>e;e++)if(!i[e].hasContent())return!1;return!0}},f.prototype.canSetCurrentBlockAttribute=function(){var t;if(t=this.getBlock())return!t.isTerminalBlock()},f.prototype.setCurrentAttribute=function(t,e){return r(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())},f.prototype.setTextAttribute=function(e,n){var i,r;if(i=this.getSelectedRange())return i[0]!==i[1]?this.setDocument(this.document.addAttributeAtRange(e,n,i)):"href"===e?(r=t.Text.textForStringWithAttributes(n,{href:n}),this.insertText(r)):void 0},f.prototype.setBlockAttribute=function(t,e){var n;if(n=this.getSelectedRange())return this.canSetCurrentAttribute(t)?(this.getBlock(),this.setDocument(this.document.applyBlockAttributeAtRange(t,e,n)),this.setSelection(n)):void 0},f.prototype.removeCurrentAttribute=function(t){return r(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())},f.prototype.removeTextAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},f.prototype.removeBlockAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},f.prototype.canDecreaseNestingLevel=function(){var t;return(null!=(t=this.getBlock())?t.getNestingLevel():void 0)>0},f.prototype.canIncreaseNestingLevel=function(){var t,n,i;if(t=this.getBlock())return null!=(i=r(t.getLastNestableAttribute()))&&i.listAttribute?(n=this.getPreviousBlock())?e(n.getListItemAttributes(),t.getListItemAttributes()):void 0:t.getNestingLevel()>0},f.prototype.decreaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))},f.prototype.increaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))},f.prototype.canDecreaseBlockAttributeLevel=function(){var t;return(null!=(t=this.getBlock())?t.getAttributeLevel():void 0)>0},f.prototype.decreaseBlockAttributeLevel=function(){var t,e;return(t=null!=(e=this.getBlock())?e.getLastAttribute():void 0)?this.removeCurrentAttribute(t):void 0},f.prototype.decreaseListLevel=function(){var t,e,n,i,r,o;for(o=this.getSelectedRange()[0],n=r=this.document.locationFromPosition(o).index,t=this.getBlock().getAttributeLevel();(e=this.document.getBlockAtIndex(n+1))&&e.isListItem()&&e.getAttributeLevel()>t;)n++;return o=this.document.positionFromLocation({index:r,offset:0}),i=this.document.positionFromLocation({index:n,offset:0}),this.setDocument(this.document.removeLastListAttributeAtRange([o,i]))},f.prototype.updateCurrentAttributes=function(){var t,e,n,r,o,a;if(a=this.getSelectedRange({ignoreLock:!0})){for(e=this.document.getCommonAttributesAtRange(a),n=0,r=(o=i()).length;r>n;n++)e[t=o[n]]||this.canSetCurrentAttribute(t)||(e[t]=!1);if(!s(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}},f.prototype.getCurrentAttributes=function(){return n.call({},this.currentAttributes)},f.prototype.getCurrentTextAttributes=function(){var t,e,n,i;for(e in t={},n=this.currentAttributes)!1!==(i=n[e])&&o(e)&&(t[e]=i);return t},f.prototype.freezeSelection=function(){return this.setCurrentAttribute("frozen",!0)},f.prototype.thawSelection=function(){return this.removeCurrentAttribute("frozen")},f.prototype.hasFrozenSelection=function(){return this.hasCurrentAttribute("frozen")},f.proxyMethod("getSelectionManager().getPointRange"),f.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),f.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),f.proxyMethod("getSelectionManager().locationIsCursorTarget"),f.proxyMethod("getSelectionManager().selectionIsExpanded"),f.proxyMethod("delegate?.getSelectionManager"),f.prototype.setSelection=function(t){var e,n;return e=this.document.locationRangeFromRange(t),null!=(n=this.delegate)?n.compositionDidRequestChangingSelectionToLocationRange(e):void 0},f.prototype.getSelectedRange=function(){var t;return(t=this.getLocationRange())?this.document.rangeFromLocationRange(t):void 0},f.prototype.setSelectedRange=function(t){var e;return e=this.document.locationRangeFromRange(t),this.getSelectionManager().setLocationRange(e)},f.prototype.getPosition=function(){var t;return(t=this.getLocationRange())?this.document.positionFromLocation(t[0]):void 0},f.prototype.getLocationRange=function(t){var e,n;return null!=(e=null!=(n=this.targetLocationRange)?n:this.getSelectionManager().getLocationRange(t))?e:a({index:0,offset:0})},f.prototype.withTargetLocationRange=function(t,e){var n;this.targetLocationRange=t;try{n=e()}finally{this.targetLocationRange=null}return n},f.prototype.withTargetRange=function(t,e){var n;return n=this.document.locationRangeFromRange(t),this.withTargetLocationRange(n,e)},f.prototype.withTargetDOMRange=function(t,e){var n;return n=this.createLocationRangeFromDOMRange(t,{strict:!1}),this.withTargetLocationRange(n,e)},f.prototype.getExpandedRangeInDirection=function(t,e){var n,i,r,o;return i=(null!=e?e:{}).length,o=(r=this.getSelectedRange())[0],n=r[1],"backward"===t?i?o-=i:o=this.translateUTF16PositionFromOffset(o,-1):i?n+=i:n=this.translateUTF16PositionFromOffset(n,1),a([o,n])},f.prototype.shouldManageMovingCursorInDirection=function(t){var e;return!!this.editingAttachment||(e=this.getExpandedRangeInDirection(t),null!=this.getAttachmentAtRange(e))},f.prototype.moveCursorInDirection=function(t){var e,n,i,r;return this.editingAttachment?i=this.document.getRangeOfAttachment(this.editingAttachment):(r=this.getSelectedRange(),i=this.getExpandedRangeInDirection(t),n=!u(r,i)),this.setSelectedRange("backward"===t?i[0]:i[1]),n&&(e=this.getAttachmentAtRange(i))?this.editAttachment(e):void 0},f.prototype.expandSelectionInDirection=function(t,e){var n,i;return n=(null!=e?e:{}).length,i=this.getExpandedRangeInDirection(t,{length:n}),this.setSelectedRange(i)},f.prototype.expandSelectionForEditing=function(){return this.hasCurrentAttribute("href")?this.expandSelectionAroundCommonAttribute("href"):void 0},f.prototype.expandSelectionAroundCommonAttribute=function(t){var e,n;return e=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(t,e),this.setSelectedRange(n)},f.prototype.selectionContainsAttachments=function(){var t;return(null!=(t=this.getSelectedAttachments())?t.length:void 0)>0},f.prototype.selectionIsInCursorTarget=function(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())},f.prototype.positionIsCursorTarget=function(t){var e;return(e=this.document.locationFromPosition(t))?this.locationIsCursorTarget(e):void 0},f.prototype.positionIsBlockBreak=function(t){var e;return null!=(e=this.document.getPieceAtPosition(t))?e.isBlockBreak():void 0},f.prototype.getSelectedDocument=function(){var t;return(t=this.getSelectedRange())?this.document.getDocumentAtRange(t):void 0},f.prototype.getSelectedAttachments=function(){var t;return null!=(t=this.getSelectedDocument())?t.getAttachments():void 0},f.prototype.getAttachments=function(){return this.attachments.slice(0)},f.prototype.refreshAttachments=function(){var t,e,n,i,r,o,a,s,l,u,h,d;for(n=this.document.getAttachments(),t=(s=c(this.attachments,n)).added,h=s.removed,this.attachments=n,i=0,o=h.length;o>i;i++)(e=h[i]).delegate=null,null!=(l=this.delegate)&&"function"==typeof l.compositionDidRemoveAttachment&&l.compositionDidRemoveAttachment(e);for(d=[],r=0,a=t.length;a>r;r++)(e=t[r]).delegate=this,d.push(null!=(u=this.delegate)&&"function"==typeof u.compositionDidAddAttachment?u.compositionDidAddAttachment(e):void 0);return d},f.prototype.attachmentDidChangeAttributes=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidEditAttachment?e.compositionDidEditAttachment(t):void 0},f.prototype.attachmentDidChangePreviewURL=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeAttachmentPreviewURL?e.compositionDidChangeAttachmentPreviewURL(t):void 0},f.prototype.editAttachment=function(t,e){var n;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,null!=(n=this.delegate)&&"function"==typeof n.compositionDidStartEditingAttachment?n.compositionDidStartEditingAttachment(this.editingAttachment,e):void 0},f.prototype.stopEditingAttachment=function(){var t;if(this.editingAttachment)return null!=(t=this.delegate)&&"function"==typeof t.compositionDidStopEditingAttachment&&t.compositionDidStopEditingAttachment(this.editingAttachment),this.editingAttachment=null},f.prototype.updateAttributesForAttachment=function(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))},f.prototype.removeAttributeForAttachment=function(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))},f.prototype.breakFormattedBlock=function(e){var n,i,r,o,a;return i=e.document,n=e.block,a=[(o=e.startPosition)-1,o],n.getBlockBreakPosition()===e.startLocation.offset?(n.breaksOnReturn()&&"\n"===e.nextCharacter?o+=1:i=i.removeTextAtRange(a),a=[o,o]):"\n"===e.nextCharacter?"\n"===e.previousCharacter?a=[o-1,o+1]:(a=[o,o+1],o+=1):e.startLocation.offset-1!=0&&(o+=1),r=new t.Document([n.removeLastAttribute().copyWithoutText()]),this.setDocument(i.insertDocumentAtRange(r,a)),this.setSelection(o)},f.prototype.getPreviousBlock=function(){var t,e;return(e=this.getLocationRange())&&(t=e[0].index)>0?this.document.getBlockAtIndex(t-1):void 0},f.prototype.getBlock=function(){var t;return(t=this.getLocationRange())?this.document.getBlockAtIndex(t[0].index):void 0},f.prototype.getAttachmentAtRange=function(e){var n;return(n=this.document.getDocumentAtRange(e)).toString()===t.OBJECT_REPLACEMENT_CHARACTER+"\n"?n.getAttachments()[0]:void 0},f.prototype.notifyDelegateOfCurrentAttributesChange=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.compositionDidChangeCurrentAttributes?t.compositionDidChangeCurrentAttributes(this.currentAttributes):void 0},f.prototype.notifyDelegateOfInsertionAtRange=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionDidPerformInsertionAtRange?e.compositionDidPerformInsertionAtRange(t):void 0},f.prototype.translateUTF16PositionFromOffset=function(t,e){var n,i;return n=(i=this.document.toUTF16String()).offsetFromUCS2Offset(t),i.offsetToUCS2Offset(n+e)},f}(t.BasicObject)}.call(this),function(){var e={}.hasOwnProperty;t.UndoManager=function(t){function n(t){this.composition=t,this.undoEntries=[],this.redoEntries=[]}var i;return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.recordUndoEntry=function(t,e){var n,r,o,a,s;return r=(a=null!=e?e:{}).context,n=a.consolidatable,o=this.undoEntries.slice(-1)[0],n&&i(o,t,r)?void 0:(s=this.createEntry({description:t,context:r}),this.undoEntries.push(s),this.redoEntries=[])},n.prototype.undo=function(){var t,e;return(e=this.undoEntries.pop())?(t=this.createEntry(e),this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)):void 0},n.prototype.redo=function(){var t,e;return(t=this.redoEntries.pop())?(e=this.createEntry(t),this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)):void 0},n.prototype.canUndo=function(){return this.undoEntries.length>0},n.prototype.canRedo=function(){return this.redoEntries.length>0},n.prototype.createEntry=function(t){var e,n,i;return n=(i=null!=t?t:{}).description,e=i.context,{description:null!=n?n.toString():void 0,context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}},i=function(t,e,n){return(null!=t?t.description:void 0)===(null!=e?e.toString():void 0)&&(null!=t?t.context:void 0)===JSON.stringify(n)},n}(t.BasicObject)}.call(this),function(){var e;t.attachmentGalleryFilter=function(t){var n;return(n=new e(t)).perform(),n.getSnapshot()},e=function(){function t(t){this.document=t.document,this.selectedRange=t.selectedRange}var e;return e="attachmentGallery","presentation","gallery",t.prototype.perform=function(){return this.removeBlockAttribute(),this.applyBlockAttribute()},t.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.selectedRange}},t.prototype.removeBlockAttribute=function(){var t,n,i,r,o;for(o=[],t=0,n=(r=this.findRangesOfBlocks()).length;n>t;t++)i=r[t],o.push(this.document=this.document.removeAttributeAtRange(e,i));return o},t.prototype.applyBlockAttribute=function(){var t,n,i,r,o,a;for(i=0,a=[],t=0,n=(o=this.findRangesOfPieces()).length;n>t;t++)(r=o[t])[1]-r[0]>1&&(r[0]+=i,r[1]+=i,"\n"!==this.document.getCharacterAtPosition(r[1])&&(this.document=this.document.insertBlockBreakAtRange(r[1]),r[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),r[1]++,i++),0!==r[0]&&"\n"!==this.document.getCharacterAtPosition(r[0]-1)&&(this.document=this.document.insertBlockBreakAtRange(r[0]),r[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),r[0]++,i++),a.push(this.document=this.document.applyBlockAttributeAtRange(e,!0,r)));return a},t.prototype.findRangesOfBlocks=function(){return this.document.findRangesForBlockAttribute(e)},t.prototype.findRangesOfPieces=function(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})},t.prototype.moveSelectedRangeForward=function(){return this.selectedRange[0]+=1,this.selectedRange[1]+=1},t}()}.call(this),function(){t.Editor=function(){function e(e,i,r){var o,a;this.composition=e,this.selectionManager=i,this.element=r,this.insertFiles=(o=this.insertFiles,a=this,function(){return o.apply(a,arguments)}),this.undoManager=new t.UndoManager(this.composition),this.filters=n.slice(0)}var n;return n=[t.attachmentGalleryFilter],e.prototype.loadDocument=function(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})},e.prototype.loadHTML=function(e){return null==e&&(e=""),this.loadDocument(t.Document.fromHTML(e,{referenceElement:this.element}))},e.prototype.loadJSON=function(e){var n,i;return n=e.document,i=e.selectedRange,n=t.Document.fromJSON(n),this.loadSnapshot({document:n,selectedRange:i})},e.prototype.loadSnapshot=function(e){return this.undoManager=new t.UndoManager(this.composition),this.composition.loadSnapshot(e)},e.prototype.getDocument=function(){return this.composition.document},e.prototype.getSelectedDocument=function(){return this.composition.getSelectedDocument()},e.prototype.getSnapshot=function(){return this.composition.getSnapshot()},e.prototype.toJSON=function(){return this.getSnapshot()},e.prototype.deleteInDirection=function(t){return this.composition.deleteInDirection(t)},e.prototype.insertAttachment=function(t){return this.composition.insertAttachment(t)},e.prototype.insertAttachments=function(t){return this.composition.insertAttachments(t)},e.prototype.insertDocument=function(t){return this.composition.insertDocument(t)},e.prototype.insertFile=function(t){return this.composition.insertFile(t)},e.prototype.insertFiles=function(t){return this.composition.insertFiles(t)},e.prototype.insertHTML=function(t){return this.composition.insertHTML(t)},e.prototype.insertString=function(t){return this.composition.insertString(t)},e.prototype.insertText=function(t){return this.composition.insertText(t)},e.prototype.insertLineBreak=function(){return this.composition.insertLineBreak()},e.prototype.getSelectedRange=function(){return this.composition.getSelectedRange()},e.prototype.getPosition=function(){return this.composition.getPosition()},e.prototype.getClientRectAtPosition=function(t){var e;return e=this.getDocument().locationRangeFromRange([t,t+1]),this.selectionManager.getClientRectAtLocationRange(e)},e.prototype.expandSelectionInDirection=function(t){return this.composition.expandSelectionInDirection(t)},e.prototype.moveCursorInDirection=function(t){return this.composition.moveCursorInDirection(t)},e.prototype.setSelectedRange=function(t){return this.composition.setSelectedRange(t)},e.prototype.activateAttribute=function(t,e){return null==e&&(e=!0),this.composition.setCurrentAttribute(t,e)},e.prototype.attributeIsActive=function(t){return this.composition.hasCurrentAttribute(t)},e.prototype.canActivateAttribute=function(t){return this.composition.canSetCurrentAttribute(t)},e.prototype.deactivateAttribute=function(t){return this.composition.removeCurrentAttribute(t)},e.prototype.canDecreaseNestingLevel=function(){return this.composition.canDecreaseNestingLevel()},e.prototype.canIncreaseNestingLevel=function(){return this.composition.canIncreaseNestingLevel()},e.prototype.decreaseNestingLevel=function(){return this.canDecreaseNestingLevel()?this.composition.decreaseNestingLevel():void 0},e.prototype.increaseNestingLevel=function(){return this.canIncreaseNestingLevel()?this.composition.increaseNestingLevel():void 0},e.prototype.canRedo=function(){return this.undoManager.canRedo()},e.prototype.canUndo=function(){return this.undoManager.canUndo()},e.prototype.recordUndoEntry=function(t,e){var n,i,r;return i=(r=null!=e?e:{}).context,n=r.consolidatable,this.undoManager.recordUndoEntry(t,{context:i,consolidatable:n})},e.prototype.redo=function(){return this.canRedo()?this.undoManager.redo():void 0},e.prototype.undo=function(){return this.canUndo()?this.undoManager.undo():void 0},e}()}.call(this),function(){var e={}.hasOwnProperty;t.ManagedAttachment=function(t){function n(t,e){var n;this.attachmentManager=t,this.attachment=e,n=this.attachment,this.id=n.id,this.file=n.file}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(n,t),n.prototype.remove=function(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)},n.proxyMethod("attachment.getAttribute"),n.proxyMethod("attachment.hasAttribute"),n.proxyMethod("attachment.setAttribute"),n.proxyMethod("attachment.getAttributes"),n.proxyMethod("attachment.setAttributes"),n.proxyMethod("attachment.isPending"),n.proxyMethod("attachment.isPreviewable"),n.proxyMethod("attachment.getURL"),n.proxyMethod("attachment.getHref"),n.proxyMethod("attachment.getFilename"),n.proxyMethod("attachment.getFilesize"),n.proxyMethod("attachment.getFormattedFilesize"),n.proxyMethod("attachment.getExtension"),n.proxyMethod("attachment.getContentType"),n.proxyMethod("attachment.getFile"),n.proxyMethod("attachment.setFile"),n.proxyMethod("attachment.releaseFile"),n.proxyMethod("attachment.getUploadProgress"),n.proxyMethod("attachment.setUploadProgress"),n}(t.BasicObject)}.call(this),function(){var e={}.hasOwnProperty;t.AttachmentManager=function(n){function i(t){var e,n,i;for(null==t&&(t=[]),this.managedAttachments={},n=0,i=t.length;i>n;n++)e=t[n],this.manageAttachment(e)}return function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype}(i,n),i.prototype.getAttachments=function(){var t,e,n,i;for(e in i=[],n=this.managedAttachments)t=n[e],i.push(t);return i},i.prototype.manageAttachment=function(e){var n,i;return null!=(n=this.managedAttachments)[i=e.id]?n[i]:n[i]=new t.ManagedAttachment(this,e)},i.prototype.attachmentIsManaged=function(t){return t.id in this.managedAttachments},i.prototype.requestRemovalOfAttachment=function(t){var e;return this.attachmentIsManaged(t)&&null!=(e=this.delegate)&&"function"==typeof e.attachmentManagerDidRequestRemovalOfAttachment?e.attachmentManagerDidRequestRemovalOfAttachment(t):void 0},i.prototype.unmanageAttachment=function(t){var e;return e=this.managedAttachments[t.id],delete this.managedAttachments[t.id],e},i}(t.BasicObject)}.call(this),function(){var e,n,i,r,o,a,s,l,u,c,h;e=t.elementContainsNode,n=t.findChildIndexOfNode,o=t.nodeIsBlockStart,a=t.nodeIsBlockStartComment,r=t.nodeIsBlockContainer,s=t.nodeIsCursorTarget,l=t.nodeIsEmptyTextNode,u=t.nodeIsTextNode,i=t.nodeIsAttachmentElement,c=t.tagName,h=t.walkTree,t.LocationMapper=function(){function t(t){this.element=t}var d,f,p,g;return t.prototype.findLocationFromContainerAndOffset=function(t,i,r){var a,l,c,d,g,m,v;for(m=(null!=r?r:{strict:!0}).strict,l=0,c=!1,d={index:0,offset:0},(a=this.findAttachmentElementParentForNode(t))&&(t=a.parentNode,i=n(a)),v=h(this.element,{usingFilter:p});v.nextNode();){if((g=v.currentNode)===t&&u(t)){s(g)||(d.offset+=i);break}if(g.parentNode===t){if(l++===i)break}else if(!e(t,g)&&l>0)break;o(g,{strict:m})?(c&&d.index++,d.offset=0,c=!0):d.offset+=f(g)}return d},t.prototype.findContainerAndOffsetFromLocation=function(t){var e,i,a,l,c;if(0===t.index&&0===t.offset){for(e=this.element,l=0;e.firstChild;)if(e=e.firstChild,r(e)){l=1;break}return[e,l]}if(i=(c=this.findNodeAndOffsetFromLocation(t))[0],a=c[1],i){if(u(i))0===f(i)?(e=i.parentNode.parentNode,l=n(i.parentNode),s(i,{name:"right"})&&l++):(e=i,l=t.offset-a);else{if(e=i.parentNode,!o(i.previousSibling)&&!r(e))for(;i===e.lastChild&&(i=e,e=e.parentNode,!r(e)););l=n(i),0!==t.offset&&l++}return[e,l]}},t.prototype.findNodeAndOffsetFromLocation=function(t){var e,n,i,r,o,a,l,c;for(l=0,n=0,i=(c=this.getSignificantNodesForIndex(t.index)).length;i>n;n++){if(e=c[n],r=f(e),t.offset<=l+r)if(u(e)){if(o=e,a=l,t.offset===a&&s(o))break}else o||(o=e,a=l);if((l+=r)>t.offset)break}return[o,a]},t.prototype.findAttachmentElementParentForNode=function(t){for(;t&&t!==this.element;){if(i(t))return t;t=t.parentNode}},t.prototype.getSignificantNodesForIndex=function(t){var e,n,i,r,o;for(i=[],o=h(this.element,{usingFilter:d}),r=!1;o.nextNode();)if(n=o.currentNode,a(n)){if(null!=e?e++:e=0,e===t)r=!0;else if(r)break}else r&&i.push(n);return i},f=function(t){return t.nodeType===Node.TEXT_NODE?s(t)?0:t.textContent.length:"br"===c(t)||i(t)?1:0},d=function(t){return g(t)===NodeFilter.FILTER_ACCEPT?p(t):NodeFilter.FILTER_REJECT},g=function(t){return l(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},p=function(t){return i(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},t}()}.call(this),function(){var e,n,i=[].slice;e=t.getDOMRange,n=t.setDOMRange,t.PointMapper=function(){function t(){}return t.prototype.createDOMRangeFromPoint=function(t){var i,r,o,a,s,l,u,c;if(u=t.x,c=t.y,document.caretPositionFromPoint)return o=(s=document.caretPositionFromPoint(u,c)).offsetNode,r=s.offset,(i=document.createRange()).setStart(o,r),i;if(document.caretRangeFromPoint)return document.caretRangeFromPoint(u,c);if(document.body.createTextRange){a=e();try{(l=document.body.createTextRange()).moveToPoint(u,c),l.select()}catch(t){}return i=e(),n(a),i}},t.prototype.getClientRectsForDOMRange=function(t){var e;return[(e=i.call(t.getClientRects()))[0],e[e.length-1]]},t}()}.call(this),function(){var e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=t.getDOMRange,t.SelectionChangeObserver=function(t){function o(){this.run=n(this.run,this),this.update=n(this.update,this),this.selectionManagers=[]}var a;return function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(o,t),o.prototype.start=function(){return this.started?void 0:(this.started=!0,"onselectionchange"in document?document.addEventListener("selectionchange",this.update,!0):this.run())},o.prototype.stop=function(){return this.started?(this.started=!1,document.removeEventListener("selectionchange",this.update,!0)):void 0},o.prototype.registerSelectionManager=function(t){return r.call(this.selectionManagers,t)<0?(this.selectionManagers.push(t),this.start()):void 0},o.prototype.unregisterSelectionManager=function(t){var e;return this.selectionManagers=function(){var n,i,r,o;for(o=[],n=0,i=(r=this.selectionManagers).length;i>n;n++)(e=r[n])!==t&&o.push(e);return o}.call(this),0===this.selectionManagers.length?this.stop():void 0},o.prototype.notifySelectionManagersOfSelectionChange=function(){var t,e,n,i,r;for(i=[],t=0,e=(n=this.selectionManagers).length;e>t;t++)r=n[t],i.push(r.selectionDidChange());return i},o.prototype.update=function(){var t;return t=e(),a(t,this.domRange)?void 0:(this.domRange=t,this.notifySelectionManagersOfSelectionChange())},o.prototype.reset=function(){return this.domRange=null,this.update()},o.prototype.run=function(){return this.started?(this.update(),requestAnimationFrame(this.run)):void 0},a=function(t,e){return(null!=t?t.startContainer:void 0)===(null!=e?e.startContainer:void 0)&&(null!=t?t.startOffset:void 0)===(null!=e?e.startOffset:void 0)&&(null!=t?t.endContainer:void 0)===(null!=e?e.endContainer:void 0)&&(null!=t?t.endOffset:void 0)===(null!=e?e.endOffset:void 0)},o}(t.BasicObject),null==t.selectionChangeObserver&&(t.selectionChangeObserver=new t.SelectionChangeObserver)}.call(this),function(){var e,n,i,r,o,a,s,l,u,c,h=function(t,e){return function(){return t.apply(e,arguments)}},d={}.hasOwnProperty;i=t.getDOMSelection,n=t.getDOMRange,c=t.setDOMRange,e=t.elementContainsNode,a=t.nodeIsCursorTarget,o=t.innerElementIsActive,r=t.handleEvent,s=t.normalizeRange,l=t.rangeIsCollapsed,u=t.rangesAreEqual,t.SelectionManager=function(f){function p(e){this.element=e,this.selectionDidChange=h(this.selectionDidChange,this),this.didMouseDown=h(this.didMouseDown,this),this.locationMapper=new t.LocationMapper(this.element),this.pointMapper=new t.PointMapper,this.lockCount=0,r("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}return function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(p,f),p.prototype.getLocationRange=function(t){var e;return null==t&&(t={}),!1===t.strict?this.createLocationRangeFromDOMRange(n(),{strict:!1}):t.ignoreLock?this.currentLocationRange:null!=(e=this.lockedLocationRange)?e:this.currentLocationRange},p.prototype.setLocationRange=function(t){var e;if(!this.lockedLocationRange)return t=s(t),(e=this.createDOMRangeFromLocationRange(t))?(c(e),this.updateCurrentLocationRange(t)):void 0},p.prototype.setLocationRangeFromPointRange=function(t){var e,n;return t=s(t),n=this.getLocationAtPoint(t[0]),e=this.getLocationAtPoint(t[1]),this.setLocationRange([n,e])},p.prototype.getClientRectAtLocationRange=function(t){var e;return(e=this.createDOMRangeFromLocationRange(t))?this.getClientRectsForDOMRange(e)[1]:void 0},p.prototype.locationIsCursorTarget=function(t){var e,n;return e=(n=this.findNodeAndOffsetFromLocation(t))[0],n[1],a(e)},p.prototype.lock=function(){return 0==this.lockCount++?(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange()):void 0},p.prototype.unlock=function(){var t;return 0==--this.lockCount&&(t=this.lockedLocationRange,this.lockedLocationRange=null,null!=t)?this.setLocationRange(t):void 0},p.prototype.clearSelection=function(){var t;return null!=(t=i())?t.removeAllRanges():void 0},p.prototype.selectionIsCollapsed=function(){var t;return!0===(null!=(t=n())?t.collapsed:void 0)},p.prototype.selectionIsExpanded=function(){return!this.selectionIsCollapsed()},p.prototype.createLocationRangeFromDOMRange=function(t,e){var n,i;if(null!=t&&this.domRangeWithinElement(t)&&(i=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e)))return t.collapsed||(n=this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e)),s([i,n])},p.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),p.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),p.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),p.proxyMethod("pointMapper.createDOMRangeFromPoint"),p.proxyMethod("pointMapper.getClientRectsForDOMRange"),p.prototype.didMouseDown=function(){return this.pauseTemporarily()},p.prototype.pauseTemporarily=function(){var t,n,i,o,a;return this.paused=!0,a=this,n=function(){var t,n;for(a.paused=!1,clearTimeout(o),t=0,n=i.length;n>t;t++)i[t].destroy();return e(document,a.element)?a.selectionDidChange():void 0},o=setTimeout(n,200),i=function(){var e,i,o,a;for(a=[],e=0,i=(o=["mousemove","keydown"]).length;i>e;e++)t=o[e],a.push(r(t,{onElement:document,withCallback:n}));return a}()},p.prototype.selectionDidChange=function(){return this.paused||o(this.element)?void 0:this.updateCurrentLocationRange()},p.prototype.updateCurrentLocationRange=function(t){var e;return(null!=t?t:t=this.createLocationRangeFromDOMRange(n()))&&!u(t,this.currentLocationRange)?(this.currentLocationRange=t,null!=(e=this.delegate)&&"function"==typeof e.locationRangeDidChange?e.locationRangeDidChange(this.currentLocationRange.slice(0)):void 0):void 0},p.prototype.createDOMRangeFromLocationRange=function(t){var e,n,i,r;return i=this.findContainerAndOffsetFromLocation(t[0]),n=l(t)?i:null!=(r=this.findContainerAndOffsetFromLocation(t[1]))?r:i,null!=i&&null!=n?((e=document.createRange()).setStart.apply(e,i),e.setEnd.apply(e,n),e):void 0},p.prototype.getLocationAtPoint=function(t){var e,n;return(e=this.createDOMRangeFromPoint(t))&&null!=(n=this.createLocationRangeFromDOMRange(e))?n[0]:void 0},p.prototype.domRangeWithinElement=function(t){return t.collapsed?e(this.element,t.startContainer):e(this.element,t.startContainer)&&e(this.element,t.endContainer)},p}(t.BasicObject)}.call(this),function(){var e,n,i,r,o={}.hasOwnProperty,a=[].slice;i=t.rangeIsCollapsed,r=t.rangesAreEqual,n=t.objectsAreEqual,e=t.getBlockConfig,t.EditorController=function(s){function l(e){var n,i;this.editorElement=e.editorElement,n=e.document,i=e.html,this.selectionManager=new t.SelectionManager(this.editorElement),this.selectionManager.delegate=this,this.composition=new t.Composition,this.composition.delegate=this,this.attachmentManager=new t.AttachmentManager(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=new(t["Level"+t.config.input.getLevel()+"InputController"])(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new t.CompositionController(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new t.ToolbarController(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new t.Editor(this.composition,this.selectionManager,this.editorElement),null!=n?this.editor.loadDocument(n):this.editor.loadHTML(i)}var u;return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(l,s),l.prototype.registerSelectionManager=function(){return t.selectionChangeObserver.registerSelectionManager(this.selectionManager)},l.prototype.unregisterSelectionManager=function(){return t.selectionChangeObserver.unregisterSelectionManager(this.selectionManager)},l.prototype.render=function(){return this.compositionController.render()},l.prototype.reparse=function(){return this.composition.replaceHTML(this.editorElement.innerHTML)},l.prototype.compositionDidChangeDocument=function(){return this.notifyEditorElement("document-change"),this.handlingInput?void 0:this.render()},l.prototype.compositionDidChangeCurrentAttributes=function(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})},l.prototype.compositionDidPerformInsertionAtRange=function(t){return this.pasting?this.pastedRange=t:void 0},l.prototype.compositionShouldAcceptFile=function(t){return this.notifyEditorElement("file-accept",{file:t})},l.prototype.compositionDidAddAttachment=function(t){var e;return e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-add",{attachment:e})},l.prototype.compositionDidEditAttachment=function(t){var e;return this.compositionController.rerenderViewForObject(t),e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")},l.prototype.compositionDidChangeAttachmentPreviewURL=function(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")},l.prototype.compositionDidRemoveAttachment=function(t){var e;return e=this.attachmentManager.unmanageAttachment(t),this.notifyEditorElement("attachment-remove",{attachment:e})},l.prototype.compositionDidStartEditingAttachment=function(t,e){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,e),this.selectionManager.setLocationRange(this.attachmentLocationRange)},l.prototype.compositionDidStopEditingAttachment=function(){return this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null},l.prototype.compositionDidRequestChangingSelectionToLocationRange=function(t){return!this.loadingSnapshot||this.isFocused()?(this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()):void 0},l.prototype.compositionWillLoadSnapshot=function(){return this.loadingSnapshot=!0},l.prototype.compositionDidLoadSnapshot=function(){return this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1},l.prototype.getSelectionManager=function(){return this.selectionManager},l.proxyMethod("getSelectionManager().setLocationRange"),l.proxyMethod("getSelectionManager().getLocationRange"),l.prototype.attachmentManagerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},l.prototype.compositionControllerWillSyncDocumentView=function(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()},l.prototype.compositionControllerDidSyncDocumentView=function(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")},l.prototype.compositionControllerDidRender=function(){return null!=this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision},l.prototype.compositionControllerDidFocus=function(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")},l.prototype.compositionControllerDidBlur=function(){return this.notifyEditorElement("blur")},l.prototype.compositionControllerDidSelectAttachment=function(t,e){return this.toolbarController.hideDialog(),this.composition.editAttachment(t,e)},l.prototype.compositionControllerDidRequestDeselectingAttachment=function(t){var e,n;return e=null!=(n=this.attachmentLocationRange)?n:this.composition.document.getLocationRangeOfAttachment(t),this.selectionManager.setLocationRange(e[1])},l.prototype.compositionControllerWillUpdateAttachment=function(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})},l.prototype.compositionControllerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},l.prototype.inputControllerWillHandleInput=function(){return this.handlingInput=!0,this.requestedRender=!1},l.prototype.inputControllerDidRequestRender=function(){return this.requestedRender=!0},l.prototype.inputControllerDidHandleInput=function(){return this.handlingInput=!1,this.requestedRender?(this.requestedRender=!1,this.render()):void 0},l.prototype.inputControllerDidAllowUnhandledInput=function(){return this.notifyEditorElement("change")},l.prototype.inputControllerDidRequestReparse=function(){return this.reparse()},l.prototype.inputControllerWillPerformTyping=function(){return this.recordTypingUndoEntry()},l.prototype.inputControllerWillPerformFormatting=function(t){return this.recordFormattingUndoEntry(t)},l.prototype.inputControllerWillCutText=function(){return this.editor.recordUndoEntry("Cut")},l.prototype.inputControllerWillPaste=function(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})},l.prototype.inputControllerDidPaste=function(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})},l.prototype.inputControllerWillMoveText=function(){return this.editor.recordUndoEntry("Move")},l.prototype.inputControllerWillAttachFiles=function(){return this.editor.recordUndoEntry("Drop Files")},l.prototype.inputControllerWillPerformUndo=function(){return this.editor.undo()},l.prototype.inputControllerWillPerformRedo=function(){return this.editor.redo()},l.prototype.inputControllerDidReceiveKeyboardCommand=function(t){return this.toolbarController.applyKeyboardCommand(t)},l.prototype.inputControllerDidStartDrag=function(){return this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()},l.prototype.inputControllerDidReceiveDragOverPoint=function(t){return this.selectionManager.setLocationRangeFromPointRange(t)},l.prototype.inputControllerDidCancelDrag=function(){return this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null},l.prototype.locationRangeDidChange=function(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!r(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")},l.prototype.toolbarDidClickButton=function(){return this.getLocationRange()?void 0:this.setLocationRange({index:0,offset:0})},l.prototype.toolbarDidInvokeAction=function(t){return this.invokeAction(t)},l.prototype.toolbarDidToggleAttribute=function(t){return this.recordFormattingUndoEntry(t),this.composition.toggleCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},l.prototype.toolbarDidUpdateAttribute=function(t,e){return this.recordFormattingUndoEntry(t),this.composition.setCurrentAttribute(t,e),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},l.prototype.toolbarDidRemoveAttribute=function(t){return this.recordFormattingUndoEntry(t),this.composition.removeCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},l.prototype.toolbarWillShowDialog=function(){return this.composition.expandSelectionForEditing(),this.freezeSelection()},l.prototype.toolbarDidShowDialog=function(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})},l.prototype.toolbarDidHideDialog=function(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})},l.prototype.freezeSelection=function(){return this.selectionFrozen?void 0:(this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render())},l.prototype.thawSelection=function(){return this.selectionFrozen?(this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()):void 0},l.prototype.actions={undo:{test:function(){return this.editor.canUndo()},perform:function(){return this.editor.undo()}},redo:{test:function(){return this.editor.canRedo()},perform:function(){return this.editor.redo()}},link:{test:function(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:function(){return!0},perform:function(){return t.config.input.pickFiles(this.editor.insertFiles)}}},l.prototype.canInvokeAction=function(t){var e,n;return!!this.actionIsExternal(t)||!!(null!=(e=this.actions[t])&&null!=(n=e.test)?n.call(this):void 0)},l.prototype.invokeAction=function(t){var e,n;return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t}):null!=(e=this.actions[t])&&null!=(n=e.perform)?n.call(this):void 0},l.prototype.actionIsExternal=function(t){return/^x-./.test(t)},l.prototype.getCurrentActions=function(){var t,e;for(t in e={},this.actions)e[t]=this.canInvokeAction(t);return e},l.prototype.updateCurrentActions=function(){var t;return t=this.getCurrentActions(),n(t,this.currentActions)?void 0:(this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions}))},l.prototype.runEditorFilters=function(){var t,e,n,i,r,o,a,s;for(s=this.composition.getSnapshot(),n=0,i=(r=this.editor.filters).length;i>n;n++)e=r[n],t=s.document,a=s.selectedRange,null==(s=null!=(o=e.call(this.editor,s))?o:{}).document&&(s.document=t),null==s.selectedRange&&(s.selectedRange=a);return u(s,this.composition.getSnapshot())?void 0:this.composition.loadSnapshot(s)},u=function(t,e){return r(t.selectedRange,e.selectedRange)&&t.document.isEqualTo(e.document)},l.prototype.updateInputElement=function(){var e,n;return e=this.compositionController.getSerializableElement(),n=t.serializeToContentType(e,"text/html"),this.editorElement.setInputElementValue(n)},l.prototype.notifyEditorElement=function(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,e)},l.prototype.removeAttachment=function(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()},l.prototype.recordFormattingUndoEntry=function(t){var n,r;return n=e(t),r=this.selectionManager.getLocationRange(),n||!i(r)?this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0}):void 0},l.prototype.recordTypingUndoEntry=function(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})},l.prototype.getUndoContext=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],[this.getLocationContext(),this.getTimeContext()].concat(a.call(t))},l.prototype.getLocationContext=function(){var t;return t=this.selectionManager.getLocationRange(),i(t)?t[0].index:t},l.prototype.getTimeContext=function(){return t.config.undoInterval>0?Math.floor((new Date).getTime()/t.config.undoInterval):0},l.prototype.isFocused=function(){var t;return this.editorElement===(null!=(t=this.editorElement.ownerDocument)?t.activeElement:void 0)},l.prototype.isFocusedInvisibly=function(){return this.isFocused()&&!this.getLocationRange()},l}(t.Controller)}.call(this),function(){var e,n,i,r,o,a,s,l,u,c,h,d,f,p,g,m,v=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t.browser,a=t.makeElement,s=t.triggerEvent,r=t.handleEvent,o=t.handleEventOnce,i=t.findClosestElementFromNode,e=t.AttachmentView.attachmentSelector,t.registerElement("trix-editor",(p=0,u=function(t){return!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t?t.focus():void 0},g=function(t){return t.hasAttribute("contenteditable")?void 0:(t.setAttribute("contenteditable",""),o("focus",{onElement:t,withCallback:function(){return c(t)}}))},c=function(t){return d(t),m(t)},d=function(t){return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("enableObjectResizing"):void 0)?(document.execCommand("enableObjectResizing",!1,!1),r("mscontrolselect",{onElement:t,preventDefault:!0})):void 0},m=function(){var e;return!("function"==typeof document.queryCommandSupported?document.queryCommandSupported("DefaultParagraphSeparator"):void 0)||"div"!==(e=t.config.blockAttributes.default.tagName)&&"p"!==e?void 0:document.execCommand("DefaultParagraphSeparator",!1,e)},l=function(t){return t.hasAttribute("role")?void 0:t.setAttribute("role","textbox")},f=function(t){var e;if(!t.hasAttribute("aria-label")&&!t.hasAttribute("aria-labelledby"))return(e=function(){var e,n;return(n=function(){var n,i,r,o;for(o=[],n=0,i=(r=t.labels).length;i>n;n++)(e=r[n]).contains(t)||o.push(e.textContent);return o}().join(" "))?t.setAttribute("aria-label",n):t.removeAttribute("aria-label")})(),r("focus",{onElement:t,withCallback:e})},h=n.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"},{defaultCSS:"%t {\n  display: block;\n}\n\n%t:empty:not(:focus)::before {\n  content: attr(placeholder);\n  color: graytext;\n  cursor: text;\n  pointer-events: none;\n}\n\n%t a[contenteditable=false] {\n  cursor: text;\n}\n\n%t img {\n  max-width: 100%;\n  height: auto;\n}\n\n%t "+e+" figcaption textarea {\n  resize: none;\n}\n\n%t "+e+" figcaption textarea.trix-autoresize-clone {\n  position: absolute;\n  left: -9999px;\n  max-height: 0px;\n}\n\n%t "+e+" figcaption[data-trix-placeholder]:empty::before {\n  content: attr(data-trix-placeholder);\n  color: graytext;\n}\n\n%t [data-trix-cursor-target] {\n  display: "+h.display+" !important;\n  width: "+h.width+" !important;\n  padding: 0 !important;\n  margin: 0 !important;\n  border: none !important;\n}\n\n%t [data-trix-cursor-target=left] {\n  vertical-align: top !important;\n  margin-left: -1px !important;\n}\n\n%t [data-trix-cursor-target=right] {\n  vertical-align: bottom !important;\n  margin-right: -1px !important;\n}",trixId:{get:function(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++p),this.trixId)}},labels:{get:function(){var t,e,n;return e=[],this.id&&this.ownerDocument&&e.push.apply(e,this.ownerDocument.querySelectorAll("label[for='"+this.id+"']")),(t=i(this,{matchingSelector:"label"}))&&((n=t.control)===this||null===n)&&e.push(t),e}},toolbarElement:{get:function(){var t,e,n;return this.hasAttribute("toolbar")?null!=(e=this.ownerDocument)?e.getElementById(this.getAttribute("toolbar")):void 0:this.parentNode?(n="trix-toolbar-"+this.trixId,this.setAttribute("toolbar",n),t=a("trix-toolbar",{id:n}),this.parentNode.insertBefore(t,this),t):void 0}},inputElement:{get:function(){var t,e,n;return this.hasAttribute("input")?null!=(n=this.ownerDocument)?n.getElementById(this.getAttribute("input")):void 0:this.parentNode?(e="trix-input-"+this.trixId,this.setAttribute("input",e),t=a("input",{type:"hidden",id:e}),this.parentNode.insertBefore(t,this.nextElementSibling),t):void 0}},editor:{get:function(){var t;return null!=(t=this.editorController)?t.editor:void 0}},name:{get:function(){var t;return null!=(t=this.inputElement)?t.name:void 0}},value:{get:function(){var t;return null!=(t=this.inputElement)?t.value:void 0},set:function(t){var e;return this.defaultValue=t,null!=(e=this.editor)?e.loadHTML(this.defaultValue):void 0}},notify:function(t,e){return this.editorController?s("trix-"+t,{onElement:this,attributes:e}):void 0},setInputElementValue:function(t){var e;return null!=(e=this.inputElement)?e.value=t:void 0},initialize:function(){return this.hasAttribute("data-trix-internal")?void 0:(g(this),l(this),f(this))},connect:function(){return this.hasAttribute("data-trix-internal")?void 0:(this.editorController||(s("trix-before-initialize",{onElement:this}),this.editorController=new t.EditorController({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame((e=this,function(){return s("trix-initialize",{onElement:e})}))),this.editorController.registerSelectionManager(),this.registerResetListener(),this.registerClickListener(),u(this));var e},disconnect:function(){var t;return null!=(t=this.editorController)&&t.unregisterSelectionManager(),this.unregisterResetListener(),this.unregisterClickListener()},registerResetListener:function(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)},unregisterResetListener:function(){return window.removeEventListener("reset",this.resetListener,!1)},registerClickListener:function(){return this.clickListener=this.clickBubbled.bind(this),window.addEventListener("click",this.clickListener,!1)},unregisterClickListener:function(){return window.removeEventListener("click",this.clickListener,!1)},resetBubbled:function(t){var e;if(!t.defaultPrevented&&t.target===(null!=(e=this.inputElement)?e.form:void 0))return this.reset()},clickBubbled:function(t){var e;if(!(t.defaultPrevented||this.contains(t.target)||!(e=i(t.target,{matchingSelector:"label"}))||v.call(this.labels,e)<0))return this.focus()},reset:function(){return this.value=this.defaultValue}}))}.call(this),function(){}.call(this)}).call(this),"object"==lc(e)&&e.exports?e.exports=t:"function"==typeof define&&n.amdO&&define(t)}.call(t)})),Vc=mc((function(t,e){/*! choices.js v10.1.0 |  2022 Josh Johnson | https://github.com/jshjohnson/Choices#readme */var i,r;i=window,r=function(){return function(){var t={282:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.clearChoices=e.activateChoices=e.filterChoices=e.addChoice=void 0;var i=n(883);e.addChoice=function(t){var e=t.value,n=t.label,r=t.id,o=t.groupId,a=t.disabled,s=t.elementId,l=t.customProperties,u=t.placeholder,c=t.keyCode;return{type:i.ACTION_TYPES.ADD_CHOICE,value:e,label:n,id:r,groupId:o,disabled:a,elementId:s,customProperties:l,placeholder:u,keyCode:c}},e.filterChoices=function(t){return{type:i.ACTION_TYPES.FILTER_CHOICES,results:t}},e.activateChoices=function(t){return void 0===t&&(t=!0),{type:i.ACTION_TYPES.ACTIVATE_CHOICES,active:t}},e.clearChoices=function(){return{type:i.ACTION_TYPES.CLEAR_CHOICES}}},783:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.addGroup=void 0;var i=n(883);e.addGroup=function(t){var e=t.value,n=t.id,r=t.active,o=t.disabled;return{type:i.ACTION_TYPES.ADD_GROUP,value:e,id:n,active:r,disabled:o}}},464:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.highlightItem=e.removeItem=e.addItem=void 0;var i=n(883);e.addItem=function(t){var e=t.value,n=t.label,r=t.id,o=t.choiceId,a=t.groupId,s=t.customProperties,l=t.placeholder,u=t.keyCode;return{type:i.ACTION_TYPES.ADD_ITEM,value:e,label:n,id:r,choiceId:o,groupId:a,customProperties:s,placeholder:l,keyCode:u}},e.removeItem=function(t,e){return{type:i.ACTION_TYPES.REMOVE_ITEM,id:t,choiceId:e}},e.highlightItem=function(t,e){return{type:i.ACTION_TYPES.HIGHLIGHT_ITEM,id:t,highlighted:e}}},137:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.setIsLoading=e.resetTo=e.clearAll=void 0;var i=n(883);e.clearAll=function(){return{type:i.ACTION_TYPES.CLEAR_ALL}},e.resetTo=function(t){return{type:i.ACTION_TYPES.RESET_TO,state:t}},e.setIsLoading=function(t){return{type:i.ACTION_TYPES.SET_IS_LOADING,isLoading:t}}},373:function(t,e,n){var i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(996)),a=r(n(221)),s=n(282),l=n(783),u=n(464),c=n(137),h=n(520),d=n(883),f=n(789),p=n(799),g=n(655),m=r(n(744)),v=r(n(686)),y="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,b={},x=function(){function t(e,n){var r=this;void 0===e&&(e="[data-choice]"),void 0===n&&(n={}),void 0===n.allowHTML&&console.warn("Deprecation warning: allowHTML will default to false in a future release. To render HTML in Choices, you will need to set it to true. Setting allowHTML will suppress this message."),this.config=o.default.all([f.DEFAULT_CONFIG,t.defaults.options,n],{arrayMerge:function(t,e){return i([],e,!0)}});var a=(0,p.diff)(this.config,f.DEFAULT_CONFIG);a.length&&console.warn("Unknown config option(s) passed",a.join(", "));var s="string"==typeof e?document.querySelector(e):e;if(!(s instanceof HTMLInputElement||s instanceof HTMLSelectElement))throw TypeError("Expected one of the following types text|select-one|select-multiple");if(this._isTextElement=s.type===d.TEXT_TYPE,this._isSelectOneElement=s.type===d.SELECT_ONE_TYPE,this._isSelectMultipleElement=s.type===d.SELECT_MULTIPLE_TYPE,this._isSelectElement=this._isSelectOneElement||this._isSelectMultipleElement,this.config.searchEnabled=this._isSelectMultipleElement||this.config.searchEnabled,["auto","always"].includes("".concat(this.config.renderSelectedChoices))||(this.config.renderSelectedChoices="auto"),n.addItemFilter&&"function"!=typeof n.addItemFilter){var l=n.addItemFilter instanceof RegExp?n.addItemFilter:new RegExp(n.addItemFilter);this.config.addItemFilter=l.test.bind(l)}if(this._isTextElement?this.passedElement=new h.WrappedInput({element:s,classNames:this.config.classNames,delimiter:this.config.delimiter}):this.passedElement=new h.WrappedSelect({element:s,classNames:this.config.classNames,template:function(t){return r._templates.option(t)}}),this.initialised=!1,this._store=new m.default,this._initialState=g.defaultState,this._currentState=g.defaultState,this._prevState=g.defaultState,this._currentValue="",this._canSearch=!!this.config.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=(0,p.generateId)(this.passedElement.element,"choices-"),this._direction=this.passedElement.dir,!this._direction){var u=window.getComputedStyle(this.passedElement.element).direction;u!==window.getComputedStyle(document.documentElement).direction&&(this._direction=u)}if(this._idNames={itemChoice:"item-choice"},this._isSelectElement&&(this._presetGroups=this.passedElement.optionGroups,this._presetOptions=this.passedElement.options),this._presetChoices=this.config.choices,this._presetItems=this.config.items,this.passedElement.value&&this._isTextElement){var c=this.passedElement.value.split(this.config.delimiter);this._presetItems=this._presetItems.concat(c)}if(this.passedElement.options&&this.passedElement.options.forEach((function(t){r._presetChoices.push({value:t.value,label:t.innerHTML,selected:!!t.selected,disabled:t.disabled||t.parentNode.disabled,placeholder:""===t.value||t.hasAttribute("placeholder"),customProperties:t.dataset["custom-properties"]})})),this._render=this._render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this._onSelectKey=this._onSelectKey.bind(this),this._onEnterKey=this._onEnterKey.bind(this),this._onEscapeKey=this._onEscapeKey.bind(this),this._onDirectionKey=this._onDirectionKey.bind(this),this._onDeleteKey=this._onDeleteKey.bind(this),this.passedElement.isActive)return this.config.silent||console.warn("Trying to initialise Choices on element already initialised",{element:e}),void(this.initialised=!0);this.init()}return Object.defineProperty(t,"defaults",{get:function(){return Object.preventExtensions({get options(){return b},get templates(){return v.default}})},enumerable:!1,configurable:!0}),t.prototype.init=function(){if(!this.initialised){this._createTemplates(),this._createElements(),this._createStructure(),this._store.subscribe(this._render),this._render(),this._addEventListeners(),(!this.config.addItems||this.passedElement.element.hasAttribute("disabled"))&&this.disable(),this.initialised=!0;var t=this.config.callbackOnInit;t&&"function"==typeof t&&t.call(this)}},t.prototype.destroy=function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this.clearStore(),this._isSelectElement&&(this.passedElement.options=this._presetOptions),this._templates=v.default,this.initialised=!1)},t.prototype.enable=function(){return this.passedElement.isDisabled&&this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this},t.prototype.disable=function(){return this.passedElement.isDisabled||this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this},t.prototype.highlightItem=function(t,e){if(void 0===e&&(e=!0),!t||!t.id)return this;var n=t.id,i=t.groupId,r=void 0===i?-1:i,o=t.value,a=void 0===o?"":o,s=t.label,l=void 0===s?"":s,c=r>=0?this._store.getGroupById(r):null;return this._store.dispatch((0,u.highlightItem)(n,!0)),e&&this.passedElement.triggerEvent(d.EVENTS.highlightItem,{id:n,value:a,label:l,groupValue:c&&c.value?c.value:null}),this},t.prototype.unhighlightItem=function(t){if(!t||!t.id)return this;var e=t.id,n=t.groupId,i=void 0===n?-1:n,r=t.value,o=void 0===r?"":r,a=t.label,s=void 0===a?"":a,l=i>=0?this._store.getGroupById(i):null;return this._store.dispatch((0,u.highlightItem)(e,!1)),this.passedElement.triggerEvent(d.EVENTS.highlightItem,{id:e,value:o,label:s,groupValue:l&&l.value?l.value:null}),this},t.prototype.highlightAll=function(){var t=this;return this._store.items.forEach((function(e){return t.highlightItem(e)})),this},t.prototype.unhighlightAll=function(){var t=this;return this._store.items.forEach((function(e){return t.unhighlightItem(e)})),this},t.prototype.removeActiveItemsByValue=function(t){var e=this;return this._store.activeItems.filter((function(e){return e.value===t})).forEach((function(t){return e._removeItem(t)})),this},t.prototype.removeActiveItems=function(t){var e=this;return this._store.activeItems.filter((function(e){return e.id!==t})).forEach((function(t){return e._removeItem(t)})),this},t.prototype.removeHighlightedItems=function(t){var e=this;return void 0===t&&(t=!1),this._store.highlightedActiveItems.forEach((function(n){e._removeItem(n),t&&e._triggerChange(n.value)})),this},t.prototype.showDropdown=function(t){var e=this;return this.dropdown.isActive||requestAnimationFrame((function(){e.dropdown.show(),e.containerOuter.open(e.dropdown.distanceFromTopWindow),!t&&e._canSearch&&e.input.focus(),e.passedElement.triggerEvent(d.EVENTS.showDropdown,{})})),this},t.prototype.hideDropdown=function(t){var e=this;return this.dropdown.isActive?(requestAnimationFrame((function(){e.dropdown.hide(),e.containerOuter.close(),!t&&e._canSearch&&(e.input.removeActiveDescendant(),e.input.blur()),e.passedElement.triggerEvent(d.EVENTS.hideDropdown,{})})),this):this},t.prototype.getValue=function(t){void 0===t&&(t=!1);var e=this._store.activeItems.reduce((function(e,n){var i=t?n.value:n;return e.push(i),e}),[]);return this._isSelectOneElement?e[0]:e},t.prototype.setValue=function(t){var e=this;return this.initialised?(t.forEach((function(t){return e._setChoiceOrItem(t)})),this):this},t.prototype.setChoiceByValue=function(t){var e=this;return!this.initialised||this._isTextElement||(Array.isArray(t)?t:[t]).forEach((function(t){return e._findAndSelectChoiceByValue(t)})),this},t.prototype.setChoices=function(t,e,n,i){var r=this;if(void 0===t&&(t=[]),void 0===e&&(e="value"),void 0===n&&(n="label"),void 0===i&&(i=!1),!this.initialised)throw new ReferenceError("setChoices was called on a non-initialized instance of Choices");if(!this._isSelectElement)throw new TypeError("setChoices can't be used with INPUT based Choices");if("string"!=typeof e||!e)throw new TypeError("value parameter must be a name of 'value' field in passed objects");if(i&&this.clearChoices(),"function"==typeof t){var o=t(this);if("function"==typeof Promise&&o instanceof Promise)return new Promise((function(t){return requestAnimationFrame(t)})).then((function(){return r._handleLoadingState(!0)})).then((function(){return o})).then((function(t){return r.setChoices(t,e,n,i)})).catch((function(t){r.config.silent||console.error(t)})).then((function(){return r._handleLoadingState(!1)})).then((function(){return r}));if(!Array.isArray(o))throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(lc(o)));return this.setChoices(o,e,n,!1)}if(!Array.isArray(t))throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices");return this.containerOuter.removeLoadingState(),this._startLoading(),t.forEach((function(t){if(t.choices)r._addGroup({id:t.id?parseInt("".concat(t.id),10):null,group:t,valueKey:e,labelKey:n});else{var i=t;r._addChoice({value:i[e],label:i[n],isSelected:!!i.selected,isDisabled:!!i.disabled,placeholder:!!i.placeholder,customProperties:i.customProperties})}})),this._stopLoading(),this},t.prototype.clearChoices=function(){return this._store.dispatch((0,s.clearChoices)()),this},t.prototype.clearStore=function(){return this._store.dispatch((0,c.clearAll)()),this},t.prototype.clearInput=function(){var t=!this._isSelectOneElement;return this.input.clear(t),!this._isTextElement&&this._canSearch&&(this._isSearching=!1,this._store.dispatch((0,s.activateChoices)(!0))),this},t.prototype._render=function(){if(!this._store.isLoading()){this._currentState=this._store.state;var t=this._currentState.choices!==this._prevState.choices||this._currentState.groups!==this._prevState.groups||this._currentState.items!==this._prevState.items,e=this._isSelectElement,n=this._currentState.items!==this._prevState.items;t&&(e&&this._renderChoices(),n&&this._renderItems(),this._prevState=this._currentState)}},t.prototype._renderChoices=function(){var t=this,e=this._store,n=e.activeGroups,i=e.activeChoices,r=document.createDocumentFragment();if(this.choiceList.clear(),this.config.resetScrollPosition&&requestAnimationFrame((function(){return t.choiceList.scrollToTop()})),n.length>=1&&!this._isSearching){var o=i.filter((function(t){return!0===t.placeholder&&-1===t.groupId}));o.length>=1&&(r=this._createChoicesFragment(o,r)),r=this._createGroupsFragment(n,i,r)}else i.length>=1&&(r=this._createChoicesFragment(i,r));if(r.childNodes&&r.childNodes.length>0){var a=this._store.activeItems,s=this._canAddItem(a,this.input.value);if(s.response)this.choiceList.append(r),this._highlightChoice();else{var l=this._getTemplate("notice",s.notice);this.choiceList.append(l)}}else{var u=void 0;l=void 0,this._isSearching?(l="function"==typeof this.config.noResultsText?this.config.noResultsText():this.config.noResultsText,u=this._getTemplate("notice",l,"no-results")):(l="function"==typeof this.config.noChoicesText?this.config.noChoicesText():this.config.noChoicesText,u=this._getTemplate("notice",l,"no-choices")),this.choiceList.append(u)}},t.prototype._renderItems=function(){var t=this._store.activeItems||[];this.itemList.clear();var e=this._createItemsFragment(t);e.childNodes&&this.itemList.append(e)},t.prototype._createGroupsFragment=function(t,e,n){var i=this;return void 0===n&&(n=document.createDocumentFragment()),this.config.shouldSort&&t.sort(this.config.sorter),t.forEach((function(t){var r=function(t){return e.filter((function(e){return i._isSelectOneElement?e.groupId===t.id:e.groupId===t.id&&("always"===i.config.renderSelectedChoices||!e.selected)}))}(t);if(r.length>=1){var o=i._getTemplate("choiceGroup",t);n.appendChild(o),i._createChoicesFragment(r,n,!0)}})),n},t.prototype._createChoicesFragment=function(t,e,n){var r=this;void 0===e&&(e=document.createDocumentFragment()),void 0===n&&(n=!1);var o=this.config,a=o.renderSelectedChoices,s=o.searchResultLimit,l=o.renderChoiceLimit,u=this._isSearching?p.sortByScore:this.config.sorter,c=function(t){if("auto"!==a||r._isSelectOneElement||!t.selected){var n=r._getTemplate("choice",t,r.config.itemSelectText);e.appendChild(n)}},h=t;"auto"!==a||this._isSelectOneElement||(h=t.filter((function(t){return!t.selected})));var d=h.reduce((function(t,e){return e.placeholder?t.placeholderChoices.push(e):t.normalChoices.push(e),t}),{placeholderChoices:[],normalChoices:[]}),f=d.placeholderChoices,g=d.normalChoices;(this.config.shouldSort||this._isSearching)&&g.sort(u);var m=h.length,v=this._isSelectOneElement?i(i([],f,!0),g,!0):g;this._isSearching?m=s:l&&l>0&&!n&&(m=l);for(var y=0;y<m;y+=1)v[y]&&c(v[y]);return e},t.prototype._createItemsFragment=function(t,e){var n=this;void 0===e&&(e=document.createDocumentFragment());var i=this.config,r=i.shouldSortItems,o=i.sorter,a=i.removeItemButton;return r&&!this._isSelectOneElement&&t.sort(o),this._isTextElement?this.passedElement.value=t.map((function(t){return t.value})).join(this.config.delimiter):this.passedElement.options=t,t.forEach((function(t){var i=n._getTemplate("item",t,a);e.appendChild(i)})),e},t.prototype._triggerChange=function(t){null!=t&&this.passedElement.triggerEvent(d.EVENTS.change,{value:t})},t.prototype._selectPlaceholderChoice=function(t){this._addItem({value:t.value,label:t.label,choiceId:t.id,groupId:t.groupId,placeholder:t.placeholder}),this._triggerChange(t.value)},t.prototype._handleButtonAction=function(t,e){if(t&&e&&this.config.removeItems&&this.config.removeItemButton){var n=e.parentNode&&e.parentNode.dataset.id,i=n&&t.find((function(t){return t.id===parseInt(n,10)}));i&&(this._removeItem(i),this._triggerChange(i.value),this._isSelectOneElement&&this._store.placeholderChoice&&this._selectPlaceholderChoice(this._store.placeholderChoice))}},t.prototype._handleItemAction=function(t,e,n){var i=this;if(void 0===n&&(n=!1),t&&e&&this.config.removeItems&&!this._isSelectOneElement){var r=e.dataset.id;t.forEach((function(t){t.id!==parseInt("".concat(r),10)||t.highlighted?!n&&t.highlighted&&i.unhighlightItem(t):i.highlightItem(t)})),this.input.focus()}},t.prototype._handleChoiceAction=function(t,e){if(t&&e){var n=e.dataset.id,i=n&&this._store.getChoiceById(n);if(i){var r=t[0]&&t[0].keyCode?t[0].keyCode:void 0,o=this.dropdown.isActive;i.keyCode=r,this.passedElement.triggerEvent(d.EVENTS.choice,{choice:i}),i.selected||i.disabled||this._canAddItem(t,i.value).response&&(this._addItem({value:i.value,label:i.label,choiceId:i.id,groupId:i.groupId,customProperties:i.customProperties,placeholder:i.placeholder,keyCode:i.keyCode}),this._triggerChange(i.value)),this.clearInput(),o&&this._isSelectOneElement&&(this.hideDropdown(!0),this.containerOuter.focus())}}},t.prototype._handleBackspace=function(t){if(this.config.removeItems&&t){var e=t[t.length-1],n=t.some((function(t){return t.highlighted}));this.config.editItems&&!n&&e?(this.input.value=e.value,this.input.setWidth(),this._removeItem(e),this._triggerChange(e.value)):(n||this.highlightItem(e,!1),this.removeHighlightedItems(!0))}},t.prototype._startLoading=function(){this._store.dispatch((0,c.setIsLoading)(!0))},t.prototype._stopLoading=function(){this._store.dispatch((0,c.setIsLoading)(!1))},t.prototype._handleLoadingState=function(t){void 0===t&&(t=!0);var e=this.itemList.getChild(".".concat(this.config.classNames.placeholder));t?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?e?e.innerHTML=this.config.loadingText:(e=this._getTemplate("placeholder",this.config.loadingText))&&this.itemList.append(e):this.input.placeholder=this.config.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement?e&&(e.innerHTML=this._placeholderValue||""):this.input.placeholder=this._placeholderValue||"")},t.prototype._handleSearch=function(t){if(this.input.isFocussed){var e=this._store.choices,n=this.config,i=n.searchFloor,r=n.searchChoices,o=e.some((function(t){return!t.active}));if(null!=t&&t.length>=i){var a=r?this._searchChoices(t):0;this.passedElement.triggerEvent(d.EVENTS.search,{value:t,resultCount:a})}else o&&(this._isSearching=!1,this._store.dispatch((0,s.activateChoices)(!0)))}},t.prototype._canAddItem=function(t,e){var n=!0,i="function"==typeof this.config.addItemText?this.config.addItemText(e):this.config.addItemText;if(!this._isSelectOneElement){var r=(0,p.existsInArray)(t,e);this.config.maxItemCount>0&&this.config.maxItemCount<=t.length&&(n=!1,i="function"==typeof this.config.maxItemText?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),!this.config.duplicateItemsAllowed&&r&&n&&(n=!1,i="function"==typeof this.config.uniqueItemText?this.config.uniqueItemText(e):this.config.uniqueItemText),this._isTextElement&&this.config.addItems&&n&&"function"==typeof this.config.addItemFilter&&!this.config.addItemFilter(e)&&(n=!1,i="function"==typeof this.config.customAddItemText?this.config.customAddItemText(e):this.config.customAddItemText)}return{response:n,notice:i}},t.prototype._searchChoices=function(t){var e="string"==typeof t?t.trim():t,n="string"==typeof this._currentValue?this._currentValue.trim():this._currentValue;if(e.length<1&&e==="".concat(n," "))return 0;var r=this._store.searchableChoices,o=e,l=Object.assign(this.config.fuseOptions,{keys:i([],this.config.searchFields,!0),includeMatches:!0}),u=new a.default(r,l).search(o);return this._currentValue=e,this._highlightPosition=0,this._isSearching=!0,this._store.dispatch((0,s.filterChoices)(u)),u.length},t.prototype._addEventListeners=function(){var t=document.documentElement;t.addEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.addEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.addEventListener("mousedown",this._onMouseDown,!0),t.addEventListener("click",this._onClick,{passive:!0}),t.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:!0}),this._isSelectOneElement&&(this.containerOuter.element.addEventListener("focus",this._onFocus,{passive:!0}),this.containerOuter.element.addEventListener("blur",this._onBlur,{passive:!0})),this.input.element.addEventListener("keyup",this._onKeyUp,{passive:!0}),this.input.element.addEventListener("focus",this._onFocus,{passive:!0}),this.input.element.addEventListener("blur",this._onBlur,{passive:!0}),this.input.element.form&&this.input.element.form.addEventListener("reset",this._onFormReset,{passive:!0}),this.input.addEventListeners()},t.prototype._removeEventListeners=function(){var t=document.documentElement;t.removeEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.removeEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.removeEventListener("mousedown",this._onMouseDown,!0),t.removeEventListener("click",this._onClick),t.removeEventListener("touchmove",this._onTouchMove),this.dropdown.element.removeEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(this.containerOuter.element.removeEventListener("focus",this._onFocus),this.containerOuter.element.removeEventListener("blur",this._onBlur)),this.input.element.removeEventListener("keyup",this._onKeyUp),this.input.element.removeEventListener("focus",this._onFocus),this.input.element.removeEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()},t.prototype._onKeyDown=function(t){var e=t.keyCode,n=this._store.activeItems,i=this.input.isFocussed,r=this.dropdown.isActive,o=this.itemList.hasChildren(),a=String.fromCharCode(e),s=/[a-zA-Z0-9-_ ]/.test(a),l=d.KEY_CODES.BACK_KEY,u=d.KEY_CODES.DELETE_KEY,c=d.KEY_CODES.ENTER_KEY,h=d.KEY_CODES.A_KEY,f=d.KEY_CODES.ESC_KEY,p=d.KEY_CODES.UP_KEY,g=d.KEY_CODES.DOWN_KEY,m=d.KEY_CODES.PAGE_UP_KEY,v=d.KEY_CODES.PAGE_DOWN_KEY;switch(this._isTextElement||r||!s||(this.showDropdown(),this.input.isFocussed||(this.input.value+=a.toLowerCase())),e){case h:return this._onSelectKey(t,o);case c:return this._onEnterKey(t,n,r);case f:return this._onEscapeKey(r);case p:case m:case g:case v:return this._onDirectionKey(t,r);case u:case l:return this._onDeleteKey(t,n,i)}},t.prototype._onKeyUp=function(t){var e=t.target,n=t.keyCode,i=this.input.value,r=this._store.activeItems,o=this._canAddItem(r,i),a=d.KEY_CODES.BACK_KEY,l=d.KEY_CODES.DELETE_KEY;if(this._isTextElement)if(o.notice&&i){var u=this._getTemplate("notice",o.notice);this.dropdown.element.innerHTML=u.outerHTML,this.showDropdown(!0)}else this.hideDropdown(!0);else{var c=(n===a||n===l)&&e&&!e.value,h=!this._isTextElement&&this._isSearching,f=this._canSearch&&o.response;c&&h?(this._isSearching=!1,this._store.dispatch((0,s.activateChoices)(!0))):f&&this._handleSearch(this.input.rawValue)}this._canSearch=this.config.searchEnabled},t.prototype._onSelectKey=function(t,e){var n=t.ctrlKey,i=t.metaKey;(n||i)&&e&&(this._canSearch=!1,this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement&&this.highlightAll())},t.prototype._onEnterKey=function(t,e,n){var i=t.target,r=d.KEY_CODES.ENTER_KEY,o=i&&i.hasAttribute("data-button");if(this._isTextElement&&i&&i.value){var a=this.input.value;this._canAddItem(e,a).response&&(this.hideDropdown(!0),this._addItem({value:a}),this._triggerChange(a),this.clearInput())}if(o&&(this._handleButtonAction(e,i),t.preventDefault()),n){var s=this.dropdown.getChild(".".concat(this.config.classNames.highlightedState));s&&(e[0]&&(e[0].keyCode=r),this._handleChoiceAction(e,s)),t.preventDefault()}else this._isSelectOneElement&&(this.showDropdown(),t.preventDefault())},t.prototype._onEscapeKey=function(t){t&&(this.hideDropdown(!0),this.containerOuter.focus())},t.prototype._onDirectionKey=function(t,e){var n=t.keyCode,i=t.metaKey,r=d.KEY_CODES.DOWN_KEY,o=d.KEY_CODES.PAGE_UP_KEY,a=d.KEY_CODES.PAGE_DOWN_KEY;if(e||this._isSelectOneElement){this.showDropdown(),this._canSearch=!1;var s=n===r||n===a?1:-1,l="[data-choice-selectable]",u=void 0;if(i||n===a||n===o)u=s>0?this.dropdown.element.querySelector("".concat(l,":last-of-type")):this.dropdown.element.querySelector(l);else{var c=this.dropdown.element.querySelector(".".concat(this.config.classNames.highlightedState));u=c?(0,p.getAdjacentEl)(c,l,s):this.dropdown.element.querySelector(l)}u&&((0,p.isScrolledIntoView)(u,this.choiceList.element,s)||this.choiceList.scrollToChildElement(u,s),this._highlightChoice(u)),t.preventDefault()}},t.prototype._onDeleteKey=function(t,e,n){var i=t.target;this._isSelectOneElement||i.value||!n||(this._handleBackspace(e),t.preventDefault())},t.prototype._onTouchMove=function(){this._wasTap&&(this._wasTap=!1)},t.prototype._onTouchEnd=function(t){var e=(t||t.touches[0]).target;this._wasTap&&this.containerOuter.element.contains(e)&&((e===this.containerOuter.element||e===this.containerInner.element)&&(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown()),t.stopPropagation()),this._wasTap=!0},t.prototype._onMouseDown=function(t){var e=t.target;if(e instanceof HTMLElement){if(y&&this.choiceList.element.contains(e)){var n=this.choiceList.element.firstElementChild,i="ltr"===this._direction?t.offsetX>=n.offsetWidth:t.offsetX<n.offsetLeft;this._isScrollingOnIe=i}if(e!==this.input.element){var r=e.closest("[data-button],[data-item],[data-choice]");if(r instanceof HTMLElement){var o=t.shiftKey,a=this._store.activeItems,s=r.dataset;"button"in s?this._handleButtonAction(a,r):"item"in s?this._handleItemAction(a,r,o):"choice"in s&&this._handleChoiceAction(a,r)}t.preventDefault()}}},t.prototype._onMouseOver=function(t){var e=t.target;e instanceof HTMLElement&&"choice"in e.dataset&&this._highlightChoice(e)},t.prototype._onClick=function(t){var e=t.target;this.containerOuter.element.contains(e)?this.dropdown.isActive||this.containerOuter.isDisabled?this._isSelectOneElement&&e!==this.input.element&&!this.dropdown.element.contains(e)&&this.hideDropdown():this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),this.containerOuter.focus()):(this._store.highlightedActiveItems.length>0&&this.unhighlightAll(),this.containerOuter.removeFocusState(),this.hideDropdown(!0))},t.prototype._onFocus=function(t){var e,n=this,i=t.target;i&&this.containerOuter.element.contains(i)&&((e={})[d.TEXT_TYPE]=function(){i===n.input.element&&n.containerOuter.addFocusState()},e[d.SELECT_ONE_TYPE]=function(){n.containerOuter.addFocusState(),i===n.input.element&&n.showDropdown(!0)},e[d.SELECT_MULTIPLE_TYPE]=function(){i===n.input.element&&(n.showDropdown(!0),n.containerOuter.addFocusState())},e)[this.passedElement.element.type]()},t.prototype._onBlur=function(t){var e,n=this,i=t.target;if(i&&this.containerOuter.element.contains(i)&&!this._isScrollingOnIe){var r=this._store.activeItems.some((function(t){return t.highlighted}));((e={})[d.TEXT_TYPE]=function(){i===n.input.element&&(n.containerOuter.removeFocusState(),r&&n.unhighlightAll(),n.hideDropdown(!0))},e[d.SELECT_ONE_TYPE]=function(){n.containerOuter.removeFocusState(),(i===n.input.element||i===n.containerOuter.element&&!n._canSearch)&&n.hideDropdown(!0)},e[d.SELECT_MULTIPLE_TYPE]=function(){i===n.input.element&&(n.containerOuter.removeFocusState(),n.hideDropdown(!0),r&&n.unhighlightAll())},e)[this.passedElement.element.type]()}else this._isScrollingOnIe=!1,this.input.element.focus()},t.prototype._onFormReset=function(){this._store.dispatch((0,c.resetTo)(this._initialState))},t.prototype._highlightChoice=function(t){var e=this;void 0===t&&(t=null);var n=Array.from(this.dropdown.element.querySelectorAll("[data-choice-selectable]"));if(n.length){var i=t;Array.from(this.dropdown.element.querySelectorAll(".".concat(this.config.classNames.highlightedState))).forEach((function(t){t.classList.remove(e.config.classNames.highlightedState),t.setAttribute("aria-selected","false")})),i?this._highlightPosition=n.indexOf(i):(i=n.length>this._highlightPosition?n[this._highlightPosition]:n[n.length-1])||(i=n[0]),i.classList.add(this.config.classNames.highlightedState),i.setAttribute("aria-selected","true"),this.passedElement.triggerEvent(d.EVENTS.highlightChoice,{el:i}),this.dropdown.isActive&&(this.input.setActiveDescendant(i.id),this.containerOuter.setActiveDescendant(i.id))}},t.prototype._addItem=function(t){var e=t.value,n=t.label,i=void 0===n?null:n,r=t.choiceId,o=void 0===r?-1:r,a=t.groupId,s=void 0===a?-1:a,l=t.customProperties,c=void 0===l?{}:l,h=t.placeholder,f=void 0!==h&&h,p=t.keyCode,g=void 0===p?-1:p,m="string"==typeof e?e.trim():e,v=this._store.items,y=i||m,b=o||-1,x=s>=0?this._store.getGroupById(s):null,_=v?v.length+1:1;this.config.prependValue&&(m=this.config.prependValue+m.toString()),this.config.appendValue&&(m+=this.config.appendValue.toString()),this._store.dispatch((0,u.addItem)({value:m,label:y,id:_,choiceId:b,groupId:s,customProperties:c,placeholder:f,keyCode:g})),this._isSelectOneElement&&this.removeActiveItems(_),this.passedElement.triggerEvent(d.EVENTS.addItem,{id:_,value:m,label:y,customProperties:c,groupValue:x&&x.value?x.value:null,keyCode:g})},t.prototype._removeItem=function(t){var e=t.id,n=t.value,i=t.label,r=t.customProperties,o=t.choiceId,a=t.groupId,s=a&&a>=0?this._store.getGroupById(a):null;e&&o&&(this._store.dispatch((0,u.removeItem)(e,o)),this.passedElement.triggerEvent(d.EVENTS.removeItem,{id:e,value:n,label:i,customProperties:r,groupValue:s&&s.value?s.value:null}))},t.prototype._addChoice=function(t){var e=t.value,n=t.label,i=void 0===n?null:n,r=t.isSelected,o=void 0!==r&&r,a=t.isDisabled,l=void 0!==a&&a,u=t.groupId,c=void 0===u?-1:u,h=t.customProperties,d=void 0===h?{}:h,f=t.placeholder,p=void 0!==f&&f,g=t.keyCode,m=void 0===g?-1:g;if(null!=e){var v=this._store.choices,y=i||e,b=v?v.length+1:1,x="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(b);this._store.dispatch((0,s.addChoice)({id:b,groupId:c,elementId:x,value:e,label:y,disabled:l,customProperties:d,placeholder:p,keyCode:m})),o&&this._addItem({value:e,label:y,choiceId:b,customProperties:d,placeholder:p,keyCode:m})}},t.prototype._addGroup=function(t){var e=this,n=t.group,i=t.id,r=t.valueKey,o=void 0===r?"value":r,a=t.labelKey,s=void 0===a?"label":a,u=(0,p.isType)("Object",n)?n.choices:Array.from(n.getElementsByTagName("OPTION")),c=i||Math.floor((new Date).valueOf()*Math.random()),h=!!n.disabled&&n.disabled;u?(this._store.dispatch((0,l.addGroup)({value:n.label,id:c,active:!0,disabled:h})),u.forEach((function(t){var n=t.disabled||t.parentNode&&t.parentNode.disabled;e._addChoice({value:t[o],label:(0,p.isType)("Object",t)?t[s]:t.innerHTML,isSelected:t.selected,isDisabled:n,groupId:c,customProperties:t.customProperties,placeholder:t.placeholder})}))):this._store.dispatch((0,l.addGroup)({value:n.label,id:n.id,active:!1,disabled:n.disabled}))},t.prototype._getTemplate=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(e=this._templates[t]).call.apply(e,i([this,this.config],n,!1))},t.prototype._createTemplates=function(){var t=this.config.callbackOnCreateTemplates,e={};t&&"function"==typeof t&&(e=t.call(this,p.strToEl)),this._templates=(0,o.default)(v.default,e)},t.prototype._createElements=function(){this.containerOuter=new h.Container({element:this._getTemplate("containerOuter",this._direction,this._isSelectElement,this._isSelectOneElement,this.config.searchEnabled,this.passedElement.element.type,this.config.labelId),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.containerInner=new h.Container({element:this._getTemplate("containerInner"),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.input=new h.Input({element:this._getTemplate("input",this._placeholderValue),classNames:this.config.classNames,type:this.passedElement.element.type,preventPaste:!this.config.paste}),this.choiceList=new h.List({element:this._getTemplate("choiceList",this._isSelectOneElement)}),this.itemList=new h.List({element:this._getTemplate("itemList",this._isSelectOneElement)}),this.dropdown=new h.Dropdown({element:this._getTemplate("dropdown"),classNames:this.config.classNames,type:this.passedElement.element.type})},t.prototype._createStructure=function(){this.passedElement.conceal(),this.containerInner.wrap(this.passedElement.element),this.containerOuter.wrap(this.containerInner.element),this._isSelectOneElement?this.input.placeholder=this.config.searchPlaceholderValue||"":this._placeholderValue&&(this.input.placeholder=this._placeholderValue,this.input.setWidth()),this.containerOuter.element.appendChild(this.containerInner.element),this.containerOuter.element.appendChild(this.dropdown.element),this.containerInner.element.appendChild(this.itemList.element),this._isTextElement||this.dropdown.element.appendChild(this.choiceList.element),this._isSelectOneElement?this.config.searchEnabled&&this.dropdown.element.insertBefore(this.input.element,this.dropdown.element.firstChild):this.containerInner.element.appendChild(this.input.element),this._isSelectElement&&(this._highlightPosition=0,this._isSearching=!1,this._startLoading(),this._presetGroups.length?this._addPredefinedGroups(this._presetGroups):this._addPredefinedChoices(this._presetChoices),this._stopLoading()),this._isTextElement&&this._addPredefinedItems(this._presetItems)},t.prototype._addPredefinedGroups=function(t){var e=this,n=this.passedElement.placeholderOption;n&&n.parentNode&&"SELECT"===n.parentNode.tagName&&this._addChoice({value:n.value,label:n.innerHTML,isSelected:n.selected,isDisabled:n.disabled,placeholder:!0}),t.forEach((function(t){return e._addGroup({group:t,id:t.id||null})}))},t.prototype._addPredefinedChoices=function(t){var e=this;this.config.shouldSort&&t.sort(this.config.sorter);var n=t.some((function(t){return t.selected})),i=t.findIndex((function(t){return void 0===t.disabled||!t.disabled}));t.forEach((function(t,r){var o=t.value,a=void 0===o?"":o,s=t.label,l=t.customProperties,u=t.placeholder;if(e._isSelectElement)if(t.choices)e._addGroup({group:t,id:t.id||null});else{var c=!(!e._isSelectOneElement||n||r!==i)||t.selected,h=t.disabled;e._addChoice({value:a,label:s,isSelected:!!c,isDisabled:!!h,placeholder:!!u,customProperties:l})}else e._addChoice({value:a,label:s,isSelected:!!t.selected,isDisabled:!!t.disabled,placeholder:!!t.placeholder,customProperties:l})}))},t.prototype._addPredefinedItems=function(t){var e=this;t.forEach((function(t){"object"===lc(t)&&t.value&&e._addItem({value:t.value,label:t.label,choiceId:t.id,customProperties:t.customProperties,placeholder:t.placeholder}),"string"==typeof t&&e._addItem({value:t})}))},t.prototype._setChoiceOrItem=function(t){var e=this;({object:function(){t.value&&(e._isTextElement?e._addItem({value:t.value,label:t.label,choiceId:t.id,customProperties:t.customProperties,placeholder:t.placeholder}):e._addChoice({value:t.value,label:t.label,isSelected:!0,isDisabled:!1,customProperties:t.customProperties,placeholder:t.placeholder}))},string:function(){e._isTextElement?e._addItem({value:t}):e._addChoice({value:t,label:t,isSelected:!0,isDisabled:!1})}})[(0,p.getType)(t).toLowerCase()]()},t.prototype._findAndSelectChoiceByValue=function(t){var e=this,n=this._store.choices.find((function(n){return e.config.valueComparer(n.value,t)}));n&&!n.selected&&this._addItem({value:n.value,label:n.label,choiceId:n.id,groupId:n.groupId,customProperties:n.customProperties,placeholder:n.placeholder,keyCode:n.keyCode})},t.prototype._generatePlaceholderValue=function(){if(this._isSelectElement&&this.passedElement.placeholderOption){var t=this.passedElement.placeholderOption;return t?t.text:null}var e=this.config,n=e.placeholder,i=e.placeholderValue,r=this.passedElement.element.dataset;if(n){if(i)return i;if(r.placeholder)return r.placeholder}return null},t}();e.default=x},613:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(799),r=n(883),o=function(){function t(t){var e=t.element,n=t.type,i=t.classNames,r=t.position;this.element=e,this.classNames=i,this.type=n,this.position=r,this.isOpen=!1,this.isFlipped=!1,this.isFocussed=!1,this.isDisabled=!1,this.isLoading=!1,this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return t.prototype.addEventListeners=function(){this.element.addEventListener("focus",this._onFocus),this.element.addEventListener("blur",this._onBlur)},t.prototype.removeEventListeners=function(){this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)},t.prototype.shouldFlip=function(t){if("number"!=typeof t)return!1;var e=!1;return"auto"===this.position?e=!window.matchMedia("(min-height: ".concat(t+1,"px)")).matches:"top"===this.position&&(e=!0),e},t.prototype.setActiveDescendant=function(t){this.element.setAttribute("aria-activedescendant",t)},t.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},t.prototype.open=function(t){this.element.classList.add(this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(t)&&(this.element.classList.add(this.classNames.flippedState),this.isFlipped=!0)},t.prototype.close=function(){this.element.classList.remove(this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(this.element.classList.remove(this.classNames.flippedState),this.isFlipped=!1)},t.prototype.focus=function(){this.isFocussed||this.element.focus()},t.prototype.addFocusState=function(){this.element.classList.add(this.classNames.focusState)},t.prototype.removeFocusState=function(){this.element.classList.remove(this.classNames.focusState)},t.prototype.enable=function(){this.element.classList.remove(this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),this.type===r.SELECT_ONE_TYPE&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1},t.prototype.disable=function(){this.element.classList.add(this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),this.type===r.SELECT_ONE_TYPE&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0},t.prototype.wrap=function(t){(0,i.wrap)(t,this.element)},t.prototype.unwrap=function(t){this.element.parentNode&&(this.element.parentNode.insertBefore(t,this.element),this.element.parentNode.removeChild(this.element))},t.prototype.addLoadingState=function(){this.element.classList.add(this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0},t.prototype.removeLoadingState=function(){this.element.classList.remove(this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1},t.prototype._onFocus=function(){this.isFocussed=!0},t.prototype._onBlur=function(){this.isFocussed=!1},t}();e.default=o},217:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=t.element,n=t.type,i=t.classNames;this.element=e,this.classNames=i,this.type=n,this.isActive=!1}return Object.defineProperty(t.prototype,"distanceFromTopWindow",{get:function(){return this.element.getBoundingClientRect().bottom},enumerable:!1,configurable:!0}),t.prototype.getChild=function(t){return this.element.querySelector(t)},t.prototype.show=function(){return this.element.classList.add(this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this},t.prototype.hide=function(){return this.element.classList.remove(this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this},t}();e.default=n},520:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WrappedSelect=e.WrappedInput=e.List=e.Input=e.Container=e.Dropdown=void 0;var r=i(n(217));e.Dropdown=r.default;var o=i(n(613));e.Container=o.default;var a=i(n(11));e.Input=a.default;var s=i(n(624));e.List=s.default;var l=i(n(541));e.WrappedInput=l.default;var u=i(n(982));e.WrappedSelect=u.default},11:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(799),r=n(883),o=function(){function t(t){var e=t.element,n=t.type,i=t.classNames,r=t.preventPaste;this.element=e,this.type=n,this.classNames=i,this.preventPaste=r,this.isFocussed=this.element.isEqualNode(document.activeElement),this.isDisabled=e.disabled,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return Object.defineProperty(t.prototype,"placeholder",{set:function(t){this.element.placeholder=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return(0,i.sanitise)(this.element.value)},set:function(t){this.element.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawValue",{get:function(){return this.element.value},enumerable:!1,configurable:!0}),t.prototype.addEventListeners=function(){this.element.addEventListener("paste",this._onPaste),this.element.addEventListener("input",this._onInput,{passive:!0}),this.element.addEventListener("focus",this._onFocus,{passive:!0}),this.element.addEventListener("blur",this._onBlur,{passive:!0})},t.prototype.removeEventListeners=function(){this.element.removeEventListener("input",this._onInput),this.element.removeEventListener("paste",this._onPaste),this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)},t.prototype.enable=function(){this.element.removeAttribute("disabled"),this.isDisabled=!1},t.prototype.disable=function(){this.element.setAttribute("disabled",""),this.isDisabled=!0},t.prototype.focus=function(){this.isFocussed||this.element.focus()},t.prototype.blur=function(){this.isFocussed&&this.element.blur()},t.prototype.clear=function(t){return void 0===t&&(t=!0),this.element.value&&(this.element.value=""),t&&this.setWidth(),this},t.prototype.setWidth=function(){var t=this.element,e=t.style,n=t.value,i=t.placeholder;e.minWidth="".concat(i.length+1,"ch"),e.width="".concat(n.length+1,"ch")},t.prototype.setActiveDescendant=function(t){this.element.setAttribute("aria-activedescendant",t)},t.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},t.prototype._onInput=function(){this.type!==r.SELECT_ONE_TYPE&&this.setWidth()},t.prototype._onPaste=function(t){this.preventPaste&&t.preventDefault()},t.prototype._onFocus=function(){this.isFocussed=!0},t.prototype._onBlur=function(){this.isFocussed=!1},t}();e.default=o},624:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(883),r=function(){function t(t){var e=t.element;this.element=e,this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight}return t.prototype.clear=function(){this.element.innerHTML=""},t.prototype.append=function(t){this.element.appendChild(t)},t.prototype.getChild=function(t){return this.element.querySelector(t)},t.prototype.hasChildren=function(){return this.element.hasChildNodes()},t.prototype.scrollToTop=function(){this.element.scrollTop=0},t.prototype.scrollToChildElement=function(t,e){var n=this;if(t){var i=this.element.offsetHeight,r=this.element.scrollTop+i,o=t.offsetHeight,a=t.offsetTop+o,s=e>0?this.element.scrollTop+a-r:t.offsetTop;requestAnimationFrame((function(){n._animateScroll(s,e)}))}},t.prototype._scrollDown=function(t,e,n){var i=(n-t)/e,r=i>1?i:1;this.element.scrollTop=t+r},t.prototype._scrollUp=function(t,e,n){var i=(t-n)/e,r=i>1?i:1;this.element.scrollTop=t-r},t.prototype._animateScroll=function(t,e){var n=this,r=i.SCROLLING_SPEED,o=this.element.scrollTop,a=!1;e>0?(this._scrollDown(o,r,t),o<t&&(a=!0)):(this._scrollUp(o,r,t),o>t&&(a=!0)),a&&requestAnimationFrame((function(){n._animateScroll(t,e)}))},t}();e.default=r},730:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(799),r=function(){function t(t){var e=t.element,n=t.classNames;if(this.element=e,this.classNames=n,!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement))throw new TypeError("Invalid element passed");this.isDisabled=!1}return Object.defineProperty(t.prototype,"isActive",{get:function(){return"active"===this.element.dataset.choice},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this.element.dir},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.element.value},set:function(t){this.element.value=t},enumerable:!1,configurable:!0}),t.prototype.conceal=function(){this.element.classList.add(this.classNames.input),this.element.hidden=!0,this.element.tabIndex=-1;var t=this.element.getAttribute("style");t&&this.element.setAttribute("data-choice-orig-style",t),this.element.setAttribute("data-choice","active")},t.prototype.reveal=function(){this.element.classList.remove(this.classNames.input),this.element.hidden=!1,this.element.removeAttribute("tabindex");var t=this.element.getAttribute("data-choice-orig-style");t?(this.element.removeAttribute("data-choice-orig-style"),this.element.setAttribute("style",t)):this.element.removeAttribute("style"),this.element.removeAttribute("data-choice"),this.element.value=this.element.value},t.prototype.enable=function(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1},t.prototype.disable=function(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0},t.prototype.triggerEvent=function(t,e){(0,i.dispatchEvent)(this.element,t,e)},t}();e.default=r},541:function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=e.element,i=e.classNames,r=e.delimiter,o=t.call(this,{element:n,classNames:i})||this;return o.delimiter=r,o}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.element.value},set:function(t){this.element.setAttribute("value",t),this.element.value=t},enumerable:!1,configurable:!0}),e}(o(n(730)).default);e.default=a},982:function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=e.element,i=e.classNames,r=e.template,o=t.call(this,{element:n,classNames:i})||this;return o.template=r,o}return r(e,t),Object.defineProperty(e.prototype,"placeholderOption",{get:function(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optionGroups",{get:function(){return Array.from(this.element.getElementsByTagName("OPTGROUP"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return Array.from(this.element.options)},set:function(t){var e=this,n=document.createDocumentFragment();t.forEach((function(t){return i=t,r=e.template(i),void n.appendChild(r);var i,r})),this.appendDocFragment(n)},enumerable:!1,configurable:!0}),e.prototype.appendDocFragment=function(t){this.element.innerHTML="",this.element.appendChild(t)},e}(o(n(730)).default);e.default=a},883:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SCROLLING_SPEED=e.SELECT_MULTIPLE_TYPE=e.SELECT_ONE_TYPE=e.TEXT_TYPE=e.KEY_CODES=e.ACTION_TYPES=e.EVENTS=void 0,e.EVENTS={showDropdown:"showDropdown",hideDropdown:"hideDropdown",change:"change",choice:"choice",search:"search",addItem:"addItem",removeItem:"removeItem",highlightItem:"highlightItem",highlightChoice:"highlightChoice",unhighlightItem:"unhighlightItem"},e.ACTION_TYPES={ADD_CHOICE:"ADD_CHOICE",FILTER_CHOICES:"FILTER_CHOICES",ACTIVATE_CHOICES:"ACTIVATE_CHOICES",CLEAR_CHOICES:"CLEAR_CHOICES",ADD_GROUP:"ADD_GROUP",ADD_ITEM:"ADD_ITEM",REMOVE_ITEM:"REMOVE_ITEM",HIGHLIGHT_ITEM:"HIGHLIGHT_ITEM",CLEAR_ALL:"CLEAR_ALL",RESET_TO:"RESET_TO",SET_IS_LOADING:"SET_IS_LOADING"},e.KEY_CODES={BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34},e.TEXT_TYPE="text",e.SELECT_ONE_TYPE="select-one",e.SELECT_MULTIPLE_TYPE="select-multiple",e.SCROLLING_SPEED=4},789:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CONFIG=e.DEFAULT_CLASSNAMES=void 0;var i=n(799);e.DEFAULT_CLASSNAMES={containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",selectedState:"is-selected",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"},e.DEFAULT_CONFIG={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,addItemFilter:null,removeItems:!0,removeItemButton:!1,editItems:!1,allowHTML:!0,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sorter:i.sortByAlpha,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(t){return'Press Enter to add <b>"'.concat((0,i.sanitise)(t),'"</b>')},maxItemText:function(t){return"Only ".concat(t," values can be added")},valueComparer:function(t,e){return t===e},fuseOptions:{includeScore:!0},labelId:"",callbackOnInit:null,callbackOnCreateTemplates:null,classNames:e.DEFAULT_CLASSNAMES}},18:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},978:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},948:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},359:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},285:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},533:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},187:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(18),e),r(n(978),e),r(n(948),e),r(n(359),e),r(n(285),e),r(n(533),e),r(n(287),e),r(n(132),e),r(n(837),e),r(n(598),e),r(n(369),e),r(n(37),e),r(n(47),e),r(n(923),e),r(n(876),e)},287:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},132:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},837:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},598:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},37:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},369:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},47:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},923:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},876:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},799:function(t,e){var n;Object.defineProperty(e,"__esModule",{value:!0}),e.diff=e.cloneObject=e.existsInArray=e.dispatchEvent=e.sortByScore=e.sortByAlpha=e.strToEl=e.sanitise=e.isScrolledIntoView=e.getAdjacentEl=e.wrap=e.isType=e.getType=e.generateId=e.generateChars=e.getRandomNumber=void 0,e.getRandomNumber=function(t,e){return Math.floor(Math.random()*(e-t)+t)},e.generateChars=function(t){return Array.from({length:t},(function(){return(0,e.getRandomNumber)(0,36).toString(36)})).join("")},e.generateId=function(t,n){var i=t.id||t.name&&"".concat(t.name,"-").concat((0,e.generateChars)(2))||(0,e.generateChars)(4);return i=i.replace(/(:|\.|\[|\]|,)/g,""),i="".concat(n,"-").concat(i)},e.getType=function(t){return Object.prototype.toString.call(t).slice(8,-1)},e.isType=function(t,n){return null!=n&&(0,e.getType)(n)===t},e.wrap=function(t,e){return void 0===e&&(e=document.createElement("div")),t.parentNode&&(t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)),e.appendChild(t)},e.getAdjacentEl=function(t,e,n){void 0===n&&(n=1);for(var i="".concat(n>0?"next":"previous","ElementSibling"),r=t[i];r;){if(r.matches(e))return r;r=r[i]}return r},e.isScrolledIntoView=function(t,e,n){return void 0===n&&(n=1),!!t&&(n>0?e.scrollTop+e.offsetHeight>=t.offsetTop+t.offsetHeight:t.offsetTop>=e.scrollTop)},e.sanitise=function(t){return"string"!=typeof t?t:t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},e.strToEl=(n=document.createElement("div"),function(t){var e=t.trim();n.innerHTML=e;for(var i=n.children[0];n.firstChild;)n.removeChild(n.firstChild);return i}),e.sortByAlpha=function(t,e){var n=t.value,i=t.label,r=void 0===i?n:i,o=e.value,a=e.label,s=void 0===a?o:a;return r.localeCompare(s,[],{sensitivity:"base",ignorePunctuation:!0,numeric:!0})},e.sortByScore=function(t,e){var n=t.score,i=void 0===n?0:n,r=e.score;return i-(void 0===r?0:r)},e.dispatchEvent=function(t,e,n){void 0===n&&(n=null);var i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0});return t.dispatchEvent(i)},e.existsInArray=function(t,e,n){return void 0===n&&(n="value"),t.some((function(t){return"string"==typeof e?t[n]===e.trim():t[n]===e}))},e.cloneObject=function(t){return JSON.parse(JSON.stringify(t))},e.diff=function(t,e){var n=Object.keys(t).sort(),i=Object.keys(e).sort();return n.filter((function(t){return i.indexOf(t)<0}))}},273:function(t,e){var n=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultState=void 0,e.defaultState=[],e.default=function(t,i){switch(void 0===t&&(t=e.defaultState),void 0===i&&(i={}),i.type){case"ADD_CHOICE":var r=i,o={id:r.id,elementId:r.elementId,groupId:r.groupId,value:r.value,label:r.label||r.value,disabled:r.disabled||!1,selected:!1,active:!0,score:9999,customProperties:r.customProperties,placeholder:r.placeholder||!1};return n(n([],t,!0),[o],!1);case"ADD_ITEM":var a=i;return a.choiceId>-1?t.map((function(t){var e=t;return e.id===parseInt("".concat(a.choiceId),10)&&(e.selected=!0),e})):t;case"REMOVE_ITEM":var s=i;return s.choiceId&&s.choiceId>-1?t.map((function(t){var e=t;return e.id===parseInt("".concat(s.choiceId),10)&&(e.selected=!1),e})):t;case"FILTER_CHOICES":var l=i;return t.map((function(t){var e=t;return e.active=l.results.some((function(t){var n=t.item,i=t.score;return n.id===e.id&&(e.score=i,!0)})),e}));case"ACTIVATE_CHOICES":var u=i;return t.map((function(t){var e=t;return e.active=u.active,e}));case"CLEAR_CHOICES":return e.defaultState;default:return t}}},871:function(t,e){var n=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultState=void 0,e.defaultState=[],e.default=function(t,i){switch(void 0===t&&(t=e.defaultState),void 0===i&&(i={}),i.type){case"ADD_GROUP":var r=i;return n(n([],t,!0),[{id:r.id,value:r.value,active:r.active,disabled:r.disabled}],!1);case"CLEAR_CHOICES":return[];default:return t}}},655:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultState=void 0;var r=n(857),o=i(n(52)),a=i(n(871)),s=i(n(273)),l=i(n(502)),u=n(799);e.defaultState={groups:[],items:[],choices:[],loading:!1};var c=(0,r.combineReducers)({items:o.default,groups:a.default,choices:s.default,loading:l.default});e.default=function(t,n){var i=t;if("CLEAR_ALL"===n.type)i=e.defaultState;else if("RESET_TO"===n.type)return(0,u.cloneObject)(n.state);return c(i,n)}},52:function(t,e){var n=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultState=void 0,e.defaultState=[],e.default=function(t,i){switch(void 0===t&&(t=e.defaultState),void 0===i&&(i={}),i.type){case"ADD_ITEM":var r=i;return n(n([],t,!0),[{id:r.id,choiceId:r.choiceId,groupId:r.groupId,value:r.value,label:r.label,active:!0,highlighted:!1,customProperties:r.customProperties,placeholder:r.placeholder||!1,keyCode:null}],!1).map((function(t){var e=t;return e.highlighted=!1,e}));case"REMOVE_ITEM":return t.map((function(t){var e=t;return e.id===i.id&&(e.active=!1),e}));case"HIGHLIGHT_ITEM":var o=i;return t.map((function(t){var e=t;return e.id===o.id&&(e.highlighted=o.highlighted),e}));default:return t}}},502:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultState=void 0,e.defaultState=!1,e.default=function(t,n){return void 0===t&&(t=e.defaultState),void 0===n&&(n={}),"SET_IS_LOADING"===n.type?n.isLoading:t}},744:function(t,e,n){var i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(857),a=r(n(655)),s=function(){function t(){this._store=(0,o.createStore)(a.default,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}return t.prototype.subscribe=function(t){this._store.subscribe(t)},t.prototype.dispatch=function(t){this._store.dispatch(t)},Object.defineProperty(t.prototype,"state",{get:function(){return this._store.getState()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.state.items},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeItems",{get:function(){return this.items.filter((function(t){return!0===t.active}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"highlightedActiveItems",{get:function(){return this.items.filter((function(t){return t.active&&t.highlighted}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choices",{get:function(){return this.state.choices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeChoices",{get:function(){return this.choices.filter((function(t){return!0===t.active}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectableChoices",{get:function(){return this.choices.filter((function(t){return!0!==t.disabled}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchableChoices",{get:function(){return this.selectableChoices.filter((function(t){return!0!==t.placeholder}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholderChoice",{get:function(){return i([],this.choices,!0).reverse().find((function(t){return!0===t.placeholder}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"groups",{get:function(){return this.state.groups},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeGroups",{get:function(){var t=this.groups,e=this.choices;return t.filter((function(t){var n=!0===t.active&&!1===t.disabled,i=e.some((function(t){return!0===t.active&&!1===t.disabled}));return n&&i}),[])},enumerable:!1,configurable:!0}),t.prototype.isLoading=function(){return this.state.loading},t.prototype.getChoiceById=function(t){return this.activeChoices.find((function(e){return e.id===parseInt(t,10)}))},t.prototype.getGroupById=function(t){return this.groups.find((function(e){return e.id===t}))},t}();e.default=s},686:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={containerOuter:function(t,e,n,i,r,o,a){var s=t.classNames.containerOuter,l=Object.assign(document.createElement("div"),{className:s});return l.dataset.type=o,e&&(l.dir=e),i&&(l.tabIndex=0),n&&(l.setAttribute("role",r?"combobox":"listbox"),r&&l.setAttribute("aria-autocomplete","list")),l.setAttribute("aria-haspopup","true"),l.setAttribute("aria-expanded","false"),a&&l.setAttribute("aria-labeledby",a),l},containerInner:function(t){var e=t.classNames.containerInner;return Object.assign(document.createElement("div"),{className:e})},itemList:function(t,e){var n=t.classNames,i=n.list,r=n.listSingle,o=n.listItems;return Object.assign(document.createElement("div"),{className:"".concat(i," ").concat(e?r:o)})},placeholder:function(t,e){var n,i=t.allowHTML,r=t.classNames.placeholder;return Object.assign(document.createElement("div"),((n={className:r})[i?"innerHTML":"innerText"]=e,n))},item:function(t,e,n){var i,r,o=t.allowHTML,a=t.classNames,s=a.item,l=a.button,u=a.highlightedState,c=a.itemSelectable,h=a.placeholder,d=e.id,f=e.value,p=e.label,g=e.customProperties,m=e.active,v=e.disabled,y=e.highlighted,b=e.placeholder,x=Object.assign(document.createElement("div"),((i={className:s})[o?"innerHTML":"innerText"]=p,i));if(Object.assign(x.dataset,{item:"",id:d,value:f,customProperties:g}),m&&x.setAttribute("aria-selected","true"),v&&x.setAttribute("aria-disabled","true"),b&&x.classList.add(h),x.classList.add(y?u:c),n){v&&x.classList.remove(c),x.dataset.deletable="";var _="Remove item",E=Object.assign(document.createElement("button"),((r={type:"button",className:l})[o?"innerHTML":"innerText"]=_,r));E.setAttribute("aria-label","".concat(_,": '").concat(f,"'")),E.dataset.button="",x.appendChild(E)}return x},choiceList:function(t,e){var n=t.classNames.list,i=Object.assign(document.createElement("div"),{className:n});return e||i.setAttribute("aria-multiselectable","true"),i.setAttribute("role","listbox"),i},choiceGroup:function(t,e){var n,i=t.allowHTML,r=t.classNames,o=r.group,a=r.groupHeading,s=r.itemDisabled,l=e.id,u=e.value,c=e.disabled,h=Object.assign(document.createElement("div"),{className:"".concat(o," ").concat(c?s:"")});return h.setAttribute("role","group"),Object.assign(h.dataset,{group:"",id:l,value:u}),c&&h.setAttribute("aria-disabled","true"),h.appendChild(Object.assign(document.createElement("div"),((n={className:a})[i?"innerHTML":"innerText"]=u,n))),h},choice:function(t,e,n){var i,r=t.allowHTML,o=t.classNames,a=o.item,s=o.itemChoice,l=o.itemSelectable,u=o.selectedState,c=o.itemDisabled,h=o.placeholder,d=e.id,f=e.value,p=e.label,g=e.groupId,m=e.elementId,v=e.disabled,y=e.selected,b=e.placeholder,x=Object.assign(document.createElement("div"),((i={id:m})[r?"innerHTML":"innerText"]=p,i.className="".concat(a," ").concat(s),i));return y&&x.classList.add(u),b&&x.classList.add(h),x.setAttribute("role",g&&g>0?"treeitem":"option"),Object.assign(x.dataset,{choice:"",id:d,value:f,selectText:n}),v?(x.classList.add(c),x.dataset.choiceDisabled="",x.setAttribute("aria-disabled","true")):(x.classList.add(l),x.dataset.choiceSelectable=""),x},input:function(t,e){var n=t.classNames,i=n.input,r=n.inputCloned,o=Object.assign(document.createElement("input"),{type:"search",name:"search_terms",className:"".concat(i," ").concat(r),autocomplete:"off",autocapitalize:"off",spellcheck:!1});return o.setAttribute("role","textbox"),o.setAttribute("aria-autocomplete","list"),o.setAttribute("aria-label",e),o},dropdown:function(t){var e=t.classNames,n=e.list,i=e.listDropdown,r=document.createElement("div");return r.classList.add(n,i),r.setAttribute("aria-expanded","false"),r},notice:function(t,e,n){var i,r=t.allowHTML,o=t.classNames,a=o.item,s=o.itemChoice,l=o.noResults,u=o.noChoices;void 0===n&&(n="");var c=[a,s];return"no-choices"===n?c.push(u):"no-results"===n&&c.push(l),Object.assign(document.createElement("div"),((i={})[r?"innerHTML":"innerText"]=e,i.className=c.join(" "),i))},option:function(t){var e=t.label,n=t.value,i=t.customProperties,r=t.active,o=t.disabled,a=new Option(e,n,!1,r);return i&&(a.dataset.customProperties="".concat(i)),a.disabled=!!o,a}};e.default=n},996:function(t){var e=function(t){return function(t){return!!t&&"object"===lc(t)}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===n}(t)}(t)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(t,e){return!1!==e.clone&&e.isMergeableObject(t)?l((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function r(t,e,n){return t.concat(e).map((function(t){return i(t,n)}))}function o(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function a(t,e){try{return e in t}catch(t){return!1}}function s(t,e,n){var r={};return n.isMergeableObject(t)&&o(t).forEach((function(e){r[e]=i(t[e],n)})),o(e).forEach((function(o){(function(t,e){return a(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(a(t,o)&&n.isMergeableObject(e[o])?r[o]=function(t,e){if(!e.customMerge)return l;var n=e.customMerge(t);return"function"==typeof n?n:l}(o,n)(t[o],e[o],n):r[o]=i(e[o],n))})),r}function l(t,n,o){(o=o||{}).arrayMerge=o.arrayMerge||r,o.isMergeableObject=o.isMergeableObject||e,o.cloneUnlessOtherwiseSpecified=i;var a=Array.isArray(n);return a===Array.isArray(t)?a?o.arrayMerge(t,n,o):s(t,n,o):i(n,o)}l.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return l(t,n,e)}),{})};var u=l;t.exports=u},221:function(t,e,n){function i(t){return Array.isArray?Array.isArray(t):"[object Array]"===c(t)}function r(t){return"string"==typeof t}function o(t){return"number"==typeof t}function a(t){return!0===t||!1===t||function(t){return s(t)&&null!==t}(t)&&"[object Boolean]"==c(t)}function s(t){return"object"===lc(t)}function l(t){return null!=t}function u(t){return!t.trim().length}function c(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.r(e),n.d(e,{default:function(){return at}});var h=function(t){return"Invalid value for key ".concat(t)},d=function(t){return"Pattern length exceeds max of ".concat(t,".")},f=Object.prototype.hasOwnProperty,p=function(){function t(e){var n=this;ec(this,t),this._keys=[],this._keyMap={};var i=0;e.forEach((function(t){var e=g(t);i+=e.weight,n._keys.push(e),n._keyMap[e.id]=e,i+=e.weight})),this._keys.forEach((function(t){t.weight/=i}))}return ic(t,[{key:"get",value:function(t){return this._keyMap[t]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),t}();function g(t){var e=null,n=null,o=null,a=1;if(r(t)||i(t))o=t,e=m(t),n=v(t);else{if(!f.call(t,"name"))throw new Error(function(t){return"Missing ".concat(t," property in key")}("name"));var s=t.name;if(o=s,f.call(t,"weight")&&(a=t.weight)<=0)throw new Error(function(t){return"Property 'weight' in key '".concat(t,"' must be a positive integer")}(s));e=m(s),n=v(s)}return{path:e,id:n,weight:a,src:o}}function m(t){return i(t)?t:t.split(".")}function v(t){return i(t)?t.join("."):t}var y={useExtendedSearch:!1,getFn:function(t,e){var n=[],s=!1;return function t(e,u,c){if(l(e))if(u[c]){var h=e[u[c]];if(!l(h))return;if(c===u.length-1&&(r(h)||o(h)||a(h)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(h));else if(i(h)){s=!0;for(var d=0,f=h.length;d<f;d+=1)t(h[d],u,c+1)}else u.length&&t(h,u,c+1)}else n.push(e)}(t,r(e)?e.split("."):e,0),s?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},b=Qu(Qu(Qu(Qu({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(t,e){return t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1}}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),y),x=/[^ ]+/g;function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=new Map,i=Math.pow(10,e);return{get:function(e){var r=e.match(x).length;if(n.has(r))return n.get(r);var o=1/Math.pow(r,.5*t),a=parseFloat(Math.round(o*i)/i);return n.set(r,a),a},clear:function(){n.clear()}}}var E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getFn,i=void 0===n?b.getFn:n,r=e.fieldNormWeight,o=void 0===r?b.fieldNormWeight:r;ec(this,t),this.norm=_(o,3),this.getFn=i,this.isCreated=!1,this.setIndexRecords()}return ic(t,[{key:"setSources",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=t}},{key:"setIndexRecords",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=t}},{key:"setKeys",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach((function(e,n){t._keysMap[e.id]=n}))}},{key:"create",value:function(){var t=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,r(this.docs[0])?this.docs.forEach((function(e,n){t._addString(e,n)})):this.docs.forEach((function(e,n){t._addObject(e,n)})),this.norm.clear())}},{key:"add",value:function(t){var e=this.size();r(t)?this._addString(t,e):this._addObject(t,e)}},{key:"removeAt",value:function(t){this.records.splice(t,1);for(var e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}},{key:"getValueForItemAtKeyId",value:function(t,e){return t[this._keysMap[e]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(t,e){if(l(t)&&!u(t)){var n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}}},{key:"_addObject",value:function(t,e){var n=this,o={i:e,$:{}};this.keys.forEach((function(e,a){var s=n.getFn(t,e.path);if(l(s))if(i(s))!function(){for(var t=[],e=[{nestedArrIndex:-1,value:s}];e.length;){var c=e.pop(),h=c.nestedArrIndex,d=c.value;if(l(d))if(r(d)&&!u(d)){var f={v:d,i:h,n:n.norm.get(d)};t.push(f)}else i(d)&&d.forEach((function(t,n){e.push({nestedArrIndex:n,value:t})}))}o.$[a]=t}();else if(!u(s)){var c={v:s,n:n.norm.get(s)};o.$[a]=c}})),this.records.push(o)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),t}();function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.getFn,r=void 0===i?b.getFn:i,o=n.fieldNormWeight,a=void 0===o?b.fieldNormWeight:o,s=new E({getFn:r,fieldNormWeight:a});return s.setKeys(t.map(g)),s.setSources(e),s.create(),s}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.errors,i=void 0===n?0:n,r=e.currentLocation,o=void 0===r?0:r,a=e.expectedLocation,s=void 0===a?0:a,l=e.distance,u=void 0===l?b.distance:l,c=e.ignoreLocation,h=void 0===c?b.ignoreLocation:c,d=i/t.length;if(h)return d;var f=Math.abs(s-o);return u?d+f/u:f?1:d}function D(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.minMatchCharLength,n=[],i=-1,r=-1,o=0,a=t.length;o<a;o+=1){var s=t[o];s&&-1===i?i=o:s||-1===i||((r=o-1)-i+1>=e&&n.push([i,r]),i=-1)}return t[o-1]&&o-i>=e&&n.push([i,o-1]),n}var C=32;function k(t){for(var e={},n=0,i=t.length;n<i;n+=1){var r=t.charAt(n);e[r]=(e[r]||0)|1<<i-n-1}return e}var S=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.location,o=void 0===r?b.location:r,a=i.threshold,s=void 0===a?b.threshold:a,l=i.distance,u=void 0===l?b.distance:l,c=i.includeMatches,h=void 0===c?b.includeMatches:c,d=i.findAllMatches,f=void 0===d?b.findAllMatches:d,p=i.minMatchCharLength,g=void 0===p?b.minMatchCharLength:p,m=i.isCaseSensitive,v=void 0===m?b.isCaseSensitive:m,y=i.ignoreLocation,x=void 0===y?b.ignoreLocation:y;if(ec(this,t),this.options={location:o,threshold:s,distance:u,includeMatches:h,findAllMatches:f,minMatchCharLength:g,isCaseSensitive:v,ignoreLocation:x},this.pattern=v?e:e.toLowerCase(),this.chunks=[],this.pattern.length){var _=function(t,e){n.chunks.push({pattern:t,alphabet:k(t),startIndex:e})},E=this.pattern.length;if(E>C){for(var w=0,A=E%C,D=E-A;w<D;)_(this.pattern.substr(w,C),w),w+=C;if(A){var S=E-C;_(this.pattern.substr(S),S)}}else _(this.pattern,0)}}return ic(t,[{key:"searchIn",value:function(t){var e=this.options,n=e.isCaseSensitive,i=e.includeMatches;if(n||(t=t.toLowerCase()),this.pattern===t){var r={isMatch:!0,score:0};return i&&(r.indices=[[0,t.length-1]]),r}var o=this.options,a=o.location,s=o.distance,l=o.threshold,u=o.findAllMatches,c=o.minMatchCharLength,h=o.ignoreLocation,f=[],p=0,g=!1;this.chunks.forEach((function(e){var n=e.pattern,r=e.alphabet,o=e.startIndex,m=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.location,o=void 0===r?b.location:r,a=i.distance,s=void 0===a?b.distance:a,l=i.threshold,u=void 0===l?b.threshold:l,c=i.findAllMatches,h=void 0===c?b.findAllMatches:c,f=i.minMatchCharLength,p=void 0===f?b.minMatchCharLength:f,g=i.includeMatches,m=void 0===g?b.includeMatches:g,v=i.ignoreLocation,y=void 0===v?b.ignoreLocation:v;if(e.length>C)throw new Error(d(C));for(var x,_=e.length,E=t.length,w=Math.max(0,Math.min(o,E)),k=u,S=w,T=p>1||m,O=T?Array(E):[];(x=t.indexOf(e,S))>-1;){var I=A(e,{currentLocation:x,expectedLocation:w,distance:s,ignoreLocation:y});if(k=Math.min(I,k),S=x+_,T)for(var M=0;M<_;)O[x+M]=1,M+=1}S=-1;for(var L=[],R=1,P=_+E,F=1<<_-1,N=0;N<_;N+=1){for(var B=0,j=P;B<j;)A(e,{errors:N,currentLocation:w+j,expectedLocation:w,distance:s,ignoreLocation:y})<=k?B=j:P=j,j=Math.floor((P-B)/2+B);P=j;var z=Math.max(1,w-j+1),H=h?E:Math.min(w+j,E)+_,V=Array(H+2);V[H+1]=(1<<N)-1;for(var W=H;W>=z;W-=1){var U=W-1,G=n[t.charAt(U)];if(T&&(O[U]=+!!G),V[W]=(V[W+1]<<1|1)&G,N&&(V[W]|=(L[W+1]|L[W])<<1|1|L[W+1]),V[W]&F&&(R=A(e,{errors:N,currentLocation:U,expectedLocation:w,distance:s,ignoreLocation:y}))<=k){if(k=R,(S=U)<=w)break;z=Math.max(1,2*w-S)}}if(A(e,{errors:N+1,currentLocation:w,expectedLocation:w,distance:s,ignoreLocation:y})>k)break;L=V}var q={isMatch:S>=0,score:Math.max(.001,R)};if(T){var $=D(O,p);$.length?m&&(q.indices=$):q.isMatch=!1}return q}(t,n,r,{location:a+o,distance:s,threshold:l,findAllMatches:u,minMatchCharLength:c,includeMatches:i,ignoreLocation:h}),v=m.isMatch,y=m.score,x=m.indices;v&&(g=!0),p+=y,v&&x&&(f=[].concat(Zu(f),Zu(x)))}));var m={isMatch:g,score:g?p/this.chunks.length:1};return g&&i&&(m.indices=f),m}}]),t}(),T=function(){function t(e){ec(this,t),this.pattern=e}return ic(t,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(t){return O(t,this.multiRegex)}},{key:"isSingleMatch",value:function(t){return O(t,this.singleRegex)}}]),t}();function O(t,e){var n=t.match(e);return n?n[1]:null}var I=function(t){Uu(n,t);var e=qu(n);function n(t){return ec(this,n),e.call(this,t)}return ic(n,[{key:"search",value:function(t){var e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),n}(T),M=function(t){Uu(n,t);var e=qu(n);function n(t){return ec(this,n),e.call(this,t)}return ic(n,[{key:"search",value:function(t){var e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),n}(T),L=function(t){Uu(n,t);var e=qu(n);function n(t){return ec(this,n),e.call(this,t)}return ic(n,[{key:"search",value:function(t){var e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),n}(T),R=function(t){Uu(n,t);var e=qu(n);function n(t){return ec(this,n),e.call(this,t)}return ic(n,[{key:"search",value:function(t){var e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),n}(T),P=function(t){Uu(n,t);var e=qu(n);function n(t){return ec(this,n),e.call(this,t)}return ic(n,[{key:"search",value:function(t){var e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),n}(T),F=function(t){Uu(n,t);var e=qu(n);function n(t){return ec(this,n),e.call(this,t)}return ic(n,[{key:"search",value:function(t){var e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),n}(T),N=function(t){Uu(n,t);var e=qu(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.location,a=void 0===o?b.location:o,s=r.threshold,l=void 0===s?b.threshold:s,u=r.distance,c=void 0===u?b.distance:u,h=r.includeMatches,d=void 0===h?b.includeMatches:h,f=r.findAllMatches,p=void 0===f?b.findAllMatches:f,g=r.minMatchCharLength,m=void 0===g?b.minMatchCharLength:g,v=r.isCaseSensitive,y=void 0===v?b.isCaseSensitive:v,x=r.ignoreLocation,_=void 0===x?b.ignoreLocation:x;return ec(this,n),(i=e.call(this,t))._bitapSearch=new S(t,{location:a,threshold:l,distance:c,includeMatches:d,findAllMatches:p,minMatchCharLength:m,isCaseSensitive:y,ignoreLocation:_}),i}return ic(n,[{key:"search",value:function(t){return this._bitapSearch.searchIn(t)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),n}(T),B=function(t){Uu(n,t);var e=qu(n);function n(t){return ec(this,n),e.call(this,t)}return ic(n,[{key:"search",value:function(t){for(var e,n=0,i=[],r=this.pattern.length;(e=t.indexOf(this.pattern,n))>-1;)n=e+r,i.push([e,n-1]);var o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),n}(T),j=[I,B,L,R,F,P,M,N],z=j.length,H=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;function V(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.split("|").map((function(t){for(var n=t.trim().split(H).filter((function(t){return t&&!!t.trim()})),i=[],r=0,o=n.length;r<o;r+=1){for(var a=n[r],s=!1,l=-1;!s&&++l<z;){var u=j[l],c=u.isMultiMatch(a);c&&(i.push(new u(c,e)),s=!0)}if(!s)for(l=-1;++l<z;){var h=j[l],d=h.isSingleMatch(a);if(d){i.push(new h(d,e));break}}}return i}))}var W=new Set([N.type,B.type]),U=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.isCaseSensitive,r=void 0===i?b.isCaseSensitive:i,o=n.includeMatches,a=void 0===o?b.includeMatches:o,s=n.minMatchCharLength,l=void 0===s?b.minMatchCharLength:s,u=n.ignoreLocation,c=void 0===u?b.ignoreLocation:u,h=n.findAllMatches,d=void 0===h?b.findAllMatches:h,f=n.location,p=void 0===f?b.location:f,g=n.threshold,m=void 0===g?b.threshold:g,v=n.distance,y=void 0===v?b.distance:v;ec(this,t),this.query=null,this.options={isCaseSensitive:r,includeMatches:a,minMatchCharLength:l,findAllMatches:d,ignoreLocation:c,location:p,threshold:m,distance:y},this.pattern=r?e:e.toLowerCase(),this.query=V(this.pattern,this.options)}return ic(t,[{key:"searchIn",value:function(t){var e=this.query;if(!e)return{isMatch:!1,score:1};var n=this.options,i=n.includeMatches;t=n.isCaseSensitive?t:t.toLowerCase();for(var r=0,o=[],a=0,s=0,l=e.length;s<l;s+=1){var u=e[s];o.length=0,r=0;for(var c=0,h=u.length;c<h;c+=1){var d=u[c],f=d.search(t),p=f.isMatch,g=f.indices,m=f.score;if(!p){a=0,r=0,o.length=0;break}if(r+=1,a+=m,i){var v=d.constructor.type;W.has(v)?o=[].concat(Zu(o),Zu(g)):o.push(g)}}if(r){var y={isMatch:!0,score:a/r};return i&&(y.indices=o),y}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(t,e){return e.useExtendedSearch}}]),t}(),G=[];function q(t,e){for(var n=0,i=G.length;n<i;n+=1){var r=G[n];if(r.condition(t,e))return new r(t,e)}return new S(t,e)}var $="$and",Y="$or",X="$path",K="$val",Z=function(t){return!(!t[$]&&!t[Y])},J=function(t){return!!t[X]},Q=function(t){return!i(t)&&s(t)&&!Z(t)},tt=function(t){return tc({},$,Object.keys(t).map((function(e){return tc({},e,t[e])})))};function et(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.auto,a=void 0===o||o,s=function t(n){var o=Object.keys(n),s=J(n);if(!s&&o.length>1&&!Z(n))return t(tt(n));if(Q(n)){var l=s?n[X]:o[0],u=s?n[K]:n[l];if(!r(u))throw new Error(h(l));var c={keyId:v(l),pattern:u};return a&&(c.searcher=q(u,e)),c}var d={children:[],operator:o[0]};return o.forEach((function(e){var r=n[e];i(r)&&r.forEach((function(e){d.children.push(t(e))}))})),d};return Z(t)||(t=tt(t)),s(t)}function nt(t,e){var n=e.ignoreFieldNorm,i=void 0===n?b.ignoreFieldNorm:n;t.forEach((function(t){var e=1;t.matches.forEach((function(t){var n=t.key,r=t.norm,o=t.score,a=n?n.weight:null;e*=Math.pow(0===o&&a?Number.EPSILON:o,(a||1)*(i?1:r))})),t.score=e}))}function it(t,e){var n=t.matches;e.matches=[],l(n)&&n.forEach((function(t){if(l(t.indices)&&t.indices.length){var n={indices:t.indices,value:t.value};t.key&&(n.key=t.key.src),t.idx>-1&&(n.refIndex=t.idx),e.matches.push(n)}}))}function rt(t,e){e.score=t.score}function ot(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.includeMatches,r=void 0===i?b.includeMatches:i,o=n.includeScore,a=void 0===o?b.includeScore:o,s=[];return r&&s.push(it),a&&s.push(rt),t.map((function(t){var n=t.idx,i={item:e[n],refIndex:n};return s.length&&s.forEach((function(e){e(t,i)})),i}))}var at=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;ec(this,t),this.options=Qu(Qu({},b),n),this.options.useExtendedSearch,this._keyStore=new p(this.options.keys),this.setCollection(e,i)}return ic(t,[{key:"setCollection",value:function(t,e){if(this._docs=t,e&&!(e instanceof E))throw new Error("Incorrect 'index' type");this._myIndex=e||w(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}},{key:"add",value:function(t){l(t)&&(this._docs.push(t),this._myIndex.add(t))}},{key:"remove",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!1},e=[],n=0,i=this._docs.length;n<i;n+=1){var r=this._docs[n];t(r,n)&&(this.removeAt(n),n-=1,i-=1,e.push(r))}return e}},{key:"removeAt",value:function(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.limit,i=void 0===n?-1:n,a=this.options,s=a.includeMatches,l=a.includeScore,u=a.shouldSort,c=a.sortFn,h=a.ignoreFieldNorm,d=r(t)?r(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return nt(d,{ignoreFieldNorm:h}),u&&d.sort(c),o(i)&&i>-1&&(d=d.slice(0,i)),ot(d,this._docs,{includeMatches:s,includeScore:l})}},{key:"_searchStringList",value:function(t){var e=q(t,this.options),n=this._myIndex.records,i=[];return n.forEach((function(t){var n=t.v,r=t.i,o=t.n;if(l(n)){var a=e.searchIn(n),s=a.isMatch,u=a.score,c=a.indices;s&&i.push({item:n,idx:r,matches:[{score:u,value:n,norm:o,indices:c}]})}})),i}},{key:"_searchLogical",value:function(t){var e=this,n=et(t,this.options),i=function t(n,i,r){if(!n.children){var o=n.keyId,a=n.searcher,s=e._findMatches({key:e._keyStore.get(o),value:e._myIndex.getValueForItemAtKeyId(i,o),searcher:a});return s&&s.length?[{idx:r,item:i,matches:s}]:[]}for(var l=[],u=0,c=n.children.length;u<c;u+=1){var h=t(n.children[u],i,r);if(h.length)l.push.apply(l,Zu(h));else if(n.operator===$)return[]}return l},r=this._myIndex.records,o={},a=[];return r.forEach((function(t){var e=t.$,r=t.i;if(l(e)){var s=i(n,e,r);s.length&&(o[r]||(o[r]={idx:r,item:e,matches:[]},a.push(o[r])),s.forEach((function(t){var e,n=t.matches;(e=o[r].matches).push.apply(e,Zu(n))})))}})),a}},{key:"_searchObjectList",value:function(t){var e=this,n=q(t,this.options),i=this._myIndex,r=i.keys,o=i.records,a=[];return o.forEach((function(t){var i=t.$,o=t.i;if(l(i)){var s=[];r.forEach((function(t,r){s.push.apply(s,Zu(e._findMatches({key:t,value:i[r],searcher:n})))})),s.length&&a.push({idx:o,item:i,matches:s})}})),a}},{key:"_findMatches",value:function(t){var e=t.key,n=t.value,r=t.searcher;if(!l(n))return[];var o=[];if(i(n))n.forEach((function(t){var n=t.v,i=t.i,a=t.n;if(l(n)){var s=r.searchIn(n),u=s.isMatch,c=s.score,h=s.indices;u&&o.push({score:c,key:e,value:n,idx:i,norm:a,indices:h})}}));else{var a=n.v,s=n.n,u=r.searchIn(a),c=u.isMatch,h=u.score,d=u.indices;c&&o.push({score:h,key:e,value:a,norm:s,indices:d})}return o}}]),t}();at.version="6.5.3",at.createIndex=w,at.parseIndex=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getFn,i=void 0===n?b.getFn:n,r=e.fieldNormWeight,o=void 0===r?b.fieldNormWeight:r,a=t.keys,s=t.records,l=new E({getFn:i,fieldNormWeight:o});return l.setKeys(a),l.setIndexRecords(s),l},at.config=b,at.parseQuery=et,function(){G.push.apply(G,arguments)}(U)},857:function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}n.r(e),n.d(e,{__DO_NOT_USE__ActionTypes:function(){return u},applyMiddleware:function(){return m},bindActionCreators:function(){return p},combineReducers:function(){return d},compose:function(){return g},createStore:function(){return h}});var s="function"==typeof Symbol&&Symbol.observable||"@@observable",l=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+l(),REPLACE:"@@redux/REPLACE"+l(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+l()}};function c(t){if("object"!==lc(t)||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function h(t,e,n){var i;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(a(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(a(1));return n(h)(t,e)}if("function"!=typeof t)throw new Error(a(2));var r=t,o=e,l=[],d=l,f=!1;function p(){d===l&&(d=l.slice())}function g(){if(f)throw new Error(a(3));return o}function m(t){if("function"!=typeof t)throw new Error(a(4));if(f)throw new Error(a(5));var e=!0;return p(),d.push(t),function(){if(e){if(f)throw new Error(a(6));e=!1,p();var n=d.indexOf(t);d.splice(n,1),l=null}}}function v(t){if(!c(t))throw new Error(a(7));if(void 0===t.type)throw new Error(a(8));if(f)throw new Error(a(9));try{f=!0,o=r(o,t)}finally{f=!1}for(var e=l=d,n=0;n<e.length;n++)(0,e[n])();return t}function y(t){if("function"!=typeof t)throw new Error(a(10));r=t,v({type:u.REPLACE})}function b(){var t,e=m;return t={subscribe:function(t){if("object"!==lc(t)||null===t)throw new Error(a(11));function n(){t.next&&t.next(g())}return n(),{unsubscribe:e(n)}}},t[s]=function(){return this},t}return v({type:u.INIT}),(i={dispatch:v,subscribe:m,getState:g,replaceReducer:y})[s]=b,i}function d(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var r=e[i];"function"==typeof t[r]&&(n[r]=t[r])}var o,s=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:u.INIT}))throw new Error(a(12));if(void 0===n(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(a(13))}))}(n)}catch(t){o=t}return function(t,e){if(void 0===t&&(t={}),o)throw o;for(var i=!1,r={},l=0;l<s.length;l++){var u=s[l],c=n[u],h=t[u],d=c(h,e);if(void 0===d)throw e&&e.type,new Error(a(14));r[u]=d,i=i||d!==h}return(i=i||s.length!==Object.keys(t).length)?r:t}}function f(t,e){return function(){return e(t.apply(this,arguments))}}function p(t,e){if("function"==typeof t)return f(t,e);if("object"!==lc(t)||null===t)throw new Error(a(16));var n={};for(var i in t){var r=t[i];"function"==typeof r&&(n[i]=f(r,e))}return n}function g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function m(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),i=function(){throw new Error(a(15))},r={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=e.map((function(t){return t(r)}));return i=g.apply(void 0,s)(n.dispatch),o(o({},n),{},{dispatch:i})}}}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i,r,o={};return i=n(373),r=n.n(i),n(187),n(883),n(789),n(686),o.default=r(),o=o.default}()},"object"===lc(t)&&"object"===lc(e)?e.exports=r():"function"==typeof define&&n.amdO?define([],r):"object"===lc(t)?t.Choices=r():i.Choices=r()})),Wc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t>n?n:t<e?e:t},Uc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.pow(10,e);return Math.round(n*t)/n},Gc={grad:.9,turn:360,rad:360/(2*Math.PI)},qc=function(t){return"#"===t[0]&&(t=t.substr(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}:{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:1}},$c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"deg";return Number(t)*(Gc[e]||1)},Yc=function(t){var e=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(t);return e?Xc({h:$c(e[1],e[2]),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)}):{h:0,s:0,v:0,a:1}},Xc=function(t){var e=t.h,n=t.s,i=t.l;return{h:e,s:(n*=(i<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:t.a}},Kc=function(t){var e=t.h,n=t.s,i=t.v,r=t.a,o=(200-n)*i/100;return{h:Uc(e),s:Uc(o>0&&o<200?n*i/100/(o<=100?o:200-o)*100:0),l:Uc(o/2),a:Uc(r,2)}},Zc=function(t){var e=Kc(t),n=e.h,i=e.s,r=e.l;return"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")},Jc=function(t){var e=Kc(t),n=e.h,i=e.s,r=e.l,o=e.a;return"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(o,")")},Qc=function(t){var e=t.h,n=t.s,i=t.v,r=t.a;e=e/360*6,n/=100,i/=100;var o=Math.floor(e),a=i*(1-n),s=i*(1-(e-o)*n),l=i*(1-(1-e+o)*n),u=o%6;return{r:Uc(255*[i,s,a,a,l,i][u]),g:Uc(255*[l,i,i,s,a,a][u]),b:Uc(255*[a,a,l,i,i,s][u]),a:Uc(r,2)}},th=function(t){var e=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(t);return e?rh({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):{h:0,s:0,v:0,a:1}},eh=th,nh=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},ih=function(t){var e=t.r,n=t.g,i=t.b;return"#"+nh(e)+nh(n)+nh(i)},rh=function(t){var e=t.r,n=t.g,i=t.b,r=t.a,o=Math.max(e,n,i),a=o-Math.min(e,n,i),s=a?o===e?(n-i)/a:o===n?2+(i-e)/a:4+(e-n)/a:0;return{h:Uc(60*(s<0?s+6:s)),s:Uc(o?a/o*100:0),v:Uc(o/255*100),a:r}},oh=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0},ah=function(t,e){return t.replace(/\s/g,"")===e.replace(/\s/g,"")},sh={},lh=function(t){var e=sh[t];return e||((e=document.createElement("template")).innerHTML=t,sh[t]=e),e},uh=function(t,e,n){t.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:n}))},ch=!1,hh=function(t){return"touches"in t},dh=function(t,e){var n=hh(e)?e.touches[0]:e,i=t.el.getBoundingClientRect();uh(t.el,"move",t.getMove({x:Wc((n.pageX-(i.left+window.pageXOffset))/i.width),y:Wc((n.pageY-(i.top+window.pageYOffset))/i.height)}))},fh=function(){function t(e,n,i,r){ec(this,t);var o=lh('<div role="slider" tabindex="0" part="'.concat(n,'" ').concat(i,'><div part="').concat(n,'-pointer"></div></div>'));e.appendChild(o.content.cloneNode(!0));var a=e.querySelector("[part=".concat(n,"]"));a.addEventListener("mousedown",this),a.addEventListener("touchstart",this),a.addEventListener("keydown",this),this.el=a,this.xy=r,this.nodes=[a.firstChild,a]}return ic(t,[{key:"dragging",set:function(t){var e=t?document.addEventListener:document.removeEventListener;e(ch?"touchmove":"mousemove",this),e(ch?"touchend":"mouseup",this)}},{key:"handleEvent",value:function(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!function(t){return!(ch&&!hh(t)||(ch||(ch=hh(t)),0))}(t)||!ch&&0!=t.button)return;this.el.focus(),dh(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),dh(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":!function(t,e){var n=e.keyCode;n>40||t.xy&&n<37||n<33||(e.preventDefault(),uh(t.el,"move",t.getMove({x:39===n?.01:37===n?-.01:34===n?.05:33===n?-.05:35===n?1:36===n?-1:0,y:40===n?.01:38===n?-.01:0},!0)))}(this,t)}}},{key:"style",value:function(t){var e=this;t.forEach((function(t,n){for(var i in t)e.nodes[n].style.setProperty(i,t[i])}))}}]),t}(),ph=function(t){Uu(n,t);var e=qu(n);function n(t){return ec(this,n),e.call(this,t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}return ic(n,[{key:"update",value:function(t){var e=t.h;this.h=e,this.style([{left:"".concat(e/360*100,"%"),color:Zc({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow","".concat(Uc(e)))}},{key:"getMove",value:function(t,e){return{h:e?Wc(this.h+360*t.x,0,360):360*t.x}}}]),n}(fh),gh=function(t){Uu(n,t);var e=qu(n);function n(t){return ec(this,n),e.call(this,t,"saturation",'aria-label="Color"',!0)}return ic(n,[{key:"update",value:function(t){this.hsva=t,this.style([{top:"".concat(100-t.v,"%"),left:"".concat(t.s,"%"),color:Zc(t)},{"background-color":Zc({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext","Saturation ".concat(Uc(t.s),"%, Brightness ").concat(Uc(t.v),"%"))}},{key:"getMove",value:function(t,e){return{s:e?Wc(this.hsva.s+100*t.x,0,100):100*t.x,v:e?Wc(this.hsva.v-100*t.y,0,100):Math.round(100-100*t.y)}}}]),n}(fh),mh=Symbol("same"),vh=Symbol("color"),yh=Symbol("hsva"),bh=Symbol("change"),xh=Symbol("update"),_h=Symbol("parts"),Eh=Symbol("css"),wh=Symbol("sliders"),Ah=function(t){Uu(n,t);var e=qu(n);function n(){var t;ec(this,n),t=e.call(this);var i=lh("<style>".concat(t[Eh].join(""),"</style>")),r=t.attachShadow({mode:"open"});return r.appendChild(i.content.cloneNode(!0)),r.addEventListener("move",Yu(t)),t[_h]=t[wh].map((function(t){return new t(r)})),t}return ic(n,[{key:Eh,get:function(){return[":host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{display:block;content:'';position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}","[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}","[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}"]}},{key:wh,get:function(){return[gh,ph]}},{key:"color",get:function(){return this[vh]}},{key:"color",set:function(t){if(!this[mh](t)){var e=this.colorModel.toHsva(t);this[xh](e),this[bh](t)}}},{key:"connectedCallback",value:function(){if(this.hasOwnProperty("color")){var t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}},{key:"attributeChangedCallback",value:function(t,e,n){var i=this.colorModel.fromAttr(n);this[mh](i)||(this.color=i)}},{key:"handleEvent",value:function(t){var e,n=this[yh],i=Qu(Qu({},n),t.detail);this[xh](i),oh(i,n)||this[mh](e=this.colorModel.fromHsva(i))||this[bh](e)}},{key:mh,value:function(t){return this.color&&this.colorModel.equal(t,this.color)}},{key:xh,value:function(t){this[yh]=t,this[_h].forEach((function(e){return e.update(t)}))}},{key:bh,value:function(t){this[vh]=t,uh(this,"color-changed",{value:t})}}],[{key:"observedAttributes",get:function(){return["color"]}}]),n}(Vu(HTMLElement)),Dh={defaultColor:"#000",toHsva:function(t){return rh(qc(t))},fromHsva:function(t){return ih(Qc(t))},equal:function(t,e){return t.toLowerCase()===e.toLowerCase()||oh(qc(t),qc(e))},fromAttr:function(t){return t}},Ch=function(t){Uu(n,t);var e=qu(n);function n(){return ec(this,n),e.apply(this,arguments)}return ic(n)}(function(t){Uu(n,t);var e=qu(n);function n(){return ec(this,n),e.apply(this,arguments)}return ic(n,[{key:"colorModel",get:function(){return Dh}}]),n}(Ah));customElements.define("hex-color-picker",Ch);var kh={defaultColor:"hsl(0, 0%, 0%)",toHsva:Yc,fromHsva:Zc,equal:ah,fromAttr:function(t){return t}},Sh=function(t){Uu(n,t);var e=qu(n);function n(){return ec(this,n),e.apply(this,arguments)}return ic(n)}(function(t){Uu(n,t);var e=qu(n);function n(){return ec(this,n),e.apply(this,arguments)}return ic(n,[{key:"colorModel",get:function(){return kh}}]),n}(Ah));customElements.define("hsl-string-color-picker",Sh);var Th={defaultColor:"rgb(0, 0, 0)",toHsva:eh,fromHsva:function(t){var e=Qc(t),n=e.r,i=e.g,r=e.b;return"rgb(".concat(n,", ").concat(i,", ").concat(r,")")},equal:ah,fromAttr:function(t){return t}},Oh=function(t){Uu(n,t);var e=qu(n);function n(){return ec(this,n),e.apply(this,arguments)}return ic(n)}(function(t){Uu(n,t);var e=qu(n);function n(){return ec(this,n),e.apply(this,arguments)}return ic(n,[{key:"colorModel",get:function(){return Th}}]),n}(Ah));customElements.define("rgb-string-color-picker",Oh);var Ih=function(t){Uu(n,t);var e=qu(n);function n(t){return ec(this,n),e.call(this,t,"alpha",'aria-label="Alpha" aria-valuemin="0" aria-valuemax="1"',!1)}return ic(n,[{key:"update",value:function(t){this.hsva=t;var e=Jc(Qu(Qu({},t),{},{a:0})),n=Jc(Qu(Qu({},t),{},{a:1})),i=100*t.a;this.style([{left:"".concat(i,"%"),color:Jc(t)},{"--gradient":"linear-gradient(90deg, ".concat(e,", ").concat(n)}]);var r=Uc(i);this.el.setAttribute("aria-valuenow","".concat(r)),this.el.setAttribute("aria-valuetext","".concat(r,"%"))}},{key:"getMove",value:function(t,e){return{a:e?Wc(this.hsva.a+t.x):t.x}}}]),n}(fh),Mh={defaultColor:"rgba(0, 0, 0, 1)",toHsva:th,fromHsva:function(t){var e=Qc(t),n=e.r,i=e.g,r=e.b,o=e.a;return"rgba(".concat(n,", ").concat(i,", ").concat(r,", ").concat(o,")")},equal:ah,fromAttr:function(t){return t}},Lh=function(t){Uu(n,t);var e=qu(n);function n(){return ec(this,n),e.apply(this,arguments)}return ic(n)}(function(t){Uu(n,t);var e=qu(n);function n(){return ec(this,n),e.apply(this,arguments)}return ic(n,[{key:"colorModel",get:function(){return Mh}}]),n}(function(t){Uu(n,t);var e=qu(n);function n(){return ec(this,n),e.apply(this,arguments)}return ic(n,[{key:Eh,get:function(){return[].concat(Zu(zu(Ku(n.prototype),Eh,this)),['[part=alpha]{flex:0 0 24px}[part=alpha]::after{display:block;content:\'\';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;background-image:var(--gradient);box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part^=alpha]{background-color:#fff;background-image:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>\')}[part=alpha-pointer]{top:50%}'])}},{key:wh,get:function(){return[].concat(Zu(zu(Ku(n.prototype),wh,this)),[Ih])}}]),n}(Ah)));customElements.define("rgba-string-color-picker",Lh);var Rh=function(t){t.data("colorPickerFormComponent",(function(t){var e=t.isAutofocused,n=t.isDisabled;return{isOpen:!1,state:t.state,init:function(){var t=this;null!==this.state&&""!==this.state&&this.setState(this.state),e&&this.openPicker(),this.$refs.input.addEventListener("change",(function(e){t.setState(e.target.value)})),this.$refs.picker.addEventListener("color-changed",(function(e){t.setState(e.detail.value)}))},openPicker:function(){n||(this.isOpen=!0)},closePicker:function(){this.isOpen=!1},setState:function(t){this.state=t,this.$refs.input.value=t,this.$refs.picker.color=t}}}))},Ph=1e3,Fh=6e4,Nh=36e5,Bh="millisecond",jh="second",zh="minute",Hh="hour",Vh="day",Wh="week",Uh="month",Gh="quarter",qh="year",$h="date",Yh="Invalid Date",Xh=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Kh=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Zh={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Jh=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},Qh={s:Jh,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),r=n%60;return(e<=0?"+":"-")+Jh(i,2,"0")+":"+Jh(r,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),r=e.clone().add(i,Uh),o=n-r<0,a=e.clone().add(i+(o?-1:1),Uh);return+(-(i+(n-r)/(o?r-a:a-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:Uh,y:qh,w:Wh,d:Vh,D:$h,h:Hh,m:zh,s:jh,ms:Bh,Q:Gh}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},td="en",ed={};ed[td]=Zh;var nd=function(t){return t instanceof ad},id=function t(e,n,i){var r;if(!e)return td;if("string"==typeof e){var o=e.toLowerCase();ed[o]&&(r=o),n&&(ed[o]=n,r=o);var a=e.split("-");if(!r&&a.length>1)return t(a[0])}else{var s=e.name;ed[s]=e,r=s}return!i&&r&&(td=r),r||!i&&td},rd=function(t,e){if(nd(t))return t.clone();var n="object"===lc(e)?e:{};return n.date=t,n.args=arguments,new ad(n)},od=Qh;od.l=id,od.i=nd,od.w=function(t,e){return rd(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var ad=function(){function t(t){this.$L=id(t.locale,null,!0),this.parse(t)}var e=t.prototype;return e.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(od.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(Xh);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},e.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},e.$utils=function(){return od},e.isValid=function(){return!(this.$d.toString()===Yh)},e.isSame=function(t,e){var n=rd(t);return this.startOf(e)<=n&&n<=this.endOf(e)},e.isAfter=function(t,e){return rd(t)<this.startOf(e)},e.isBefore=function(t,e){return this.endOf(e)<rd(t)},e.$g=function(t,e,n){return od.u(t)?this[e]:this.set(n,t)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,e){var n=this,i=!!od.u(e)||e,r=od.p(t),o=function(t,e){var r=od.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return i?r:r.endOf(Vh)},a=function(t,e){return od.w(n.toDate()[t].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},s=this.$W,l=this.$M,u=this.$D,c="set"+(this.$u?"UTC":"");switch(r){case qh:return i?o(1,0):o(31,11);case Uh:return i?o(1,l):o(0,l+1);case Wh:var h=this.$locale().weekStart||0,d=(s<h?s+7:s)-h;return o(i?u-d:u+(6-d),l);case Vh:case $h:return a(c+"Hours",0);case Hh:return a(c+"Minutes",1);case zh:return a(c+"Seconds",2);case jh:return a(c+"Milliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,e){var n,i=od.p(t),r="set"+(this.$u?"UTC":""),o=(n={},n[Vh]=r+"Date",n[$h]=r+"Date",n[Uh]=r+"Month",n[qh]=r+"FullYear",n[Hh]=r+"Hours",n[zh]=r+"Minutes",n[jh]=r+"Seconds",n[Bh]=r+"Milliseconds",n)[i],a=i===Vh?this.$D+(e-this.$W):e;if(i===Uh||i===qh){var s=this.clone().set($h,1);s.$d[o](a),s.init(),this.$d=s.set($h,Math.min(this.$D,s.daysInMonth())).$d}else o&&this.$d[o](a);return this.init(),this},e.set=function(t,e){return this.clone().$set(t,e)},e.get=function(t){return this[od.p(t)]()},e.add=function(t,e){var n,i=this;t=Number(t);var r=od.p(e),o=function(e){var n=rd(i);return od.w(n.date(n.date()+Math.round(e*t)),i)};if(r===Uh)return this.set(Uh,this.$M+t);if(r===qh)return this.set(qh,this.$y+t);if(r===Vh)return o(1);if(r===Wh)return o(7);var a=(n={},n[zh]=Fh,n[Hh]=Nh,n[jh]=Ph,n)[r]||1,s=this.$d.getTime()+t*a;return od.w(s,this)},e.subtract=function(t,e){return this.add(-1*t,e)},e.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||Yh;var i=t||"YYYY-MM-DDTHH:mm:ssZ",r=od.z(this),o=this.$H,a=this.$m,s=this.$M,l=n.weekdays,u=n.months,c=function(t,n,r,o){return t&&(t[n]||t(e,i))||r[n].slice(0,o)},h=function(t){return od.s(o%12||12,t,"0")},d=n.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:od.s(s+1,2,"0"),MMM:c(n.monthsShort,s,u,3),MMMM:c(u,s),D:this.$D,DD:od.s(this.$D,2,"0"),d:String(this.$W),dd:c(n.weekdaysMin,this.$W,l,2),ddd:c(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:od.s(o,2,"0"),h:h(1),hh:h(2),a:d(o,a,!0),A:d(o,a,!1),m:String(a),mm:od.s(a,2,"0"),s:String(this.$s),ss:od.s(this.$s,2,"0"),SSS:od.s(this.$ms,3,"0"),Z:r};return i.replace(Kh,(function(t,e){return e||f[t]||r.replace(":","")}))},e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},e.diff=function(t,e,n){var i,r=od.p(e),o=rd(t),a=(o.utcOffset()-this.utcOffset())*Fh,s=this-o,l=od.m(this,o);return l=(i={},i[qh]=l/12,i[Uh]=l,i[Gh]=l/3,i[Wh]=(s-a)/6048e5,i[Vh]=(s-a)/864e5,i[Hh]=s/Nh,i[zh]=s/Fh,i[jh]=s/Ph,i)[r]||s,n?l:od.a(l)},e.daysInMonth=function(){return this.endOf(Uh).$D},e.$locale=function(){return ed[this.$L]},e.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=id(t,e,!0);return i&&(n.$L=i),n},e.clone=function(){return od.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},t}(),sd=ad.prototype;rd.prototype=sd,[["$ms",Bh],["$s",jh],["$m",zh],["$H",Hh],["$W",Vh],["$M",Uh],["$y",qh],["$D",$h]].forEach((function(t){sd[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),rd.extend=function(t,e){return t.$i||(t(e,ad,rd),t.$i=!0),rd},rd.locale=id,rd.isDayjs=nd,rd.unix=function(t){return rd(1e3*t)},rd.en=ed[td],rd.Ls=ed,rd.p={};var ld=rd,ud=yc(bc()),cd=yc(xc()),hd=yc(_c()),dd=yc(Ec());ld.extend(ud.default),ld.extend(cd.default),ld.extend(hd.default),ld.extend(dd.default),ld.extend((function(t,e,n){var i=[];n.addLocaleListeners=function(t){return i.push(t)},n.onLocaleUpdated=function(){i.forEach((function(t){return t()}))},n.updateLocale=function(t){n.locale(t),n.onLocaleUpdated()}})),window.dayjs=ld;var fd=function(t){t.data("dateTimePickerFormComponent",(function(t){var e=t.displayFormat,n=t.firstDayOfWeek,i=t.isAutofocused,r=t.state,o=ld.tz.guess();return{daysInFocusedMonth:[],displayText:"",emptyDaysInFocusedMonth:[],focusedDate:null,focusedMonth:null,focusedYear:null,hour:null,isClearingState:!1,minute:null,open:!1,second:null,state:r,dayLabels:[],months:[],init:function(){var t,e,n,r,a,s,l,u=this;this.focusedDate=ld().tz(o);var c=null!==(t=this.getSelectedDate())&&void 0!==t?t:ld().tz(o).hour(0).minute(0).second(0);(null!==this.getMaxDate()&&c.isAfter(this.getMaxDate())||null!==this.getMinDate()&&c.isBefore(this.getMinDate()))&&(c=null),this.hour=null!==(e=null===(n=c)||void 0===n?void 0:n.hour())&&void 0!==e?e:0,this.minute=null!==(r=null===(a=c)||void 0===a?void 0:a.minute())&&void 0!==r?r:0,this.second=null!==(s=null===(l=c)||void 0===l?void 0:l.second())&&void 0!==s?s:0,this.setDisplayText(),this.setMonths(),this.setDayLabels(),i&&this.$nextTick((function(){return u.openPicker()})),ld.addLocaleListeners((function(){u.setDisplayText(),u.setMonths(),u.setDayLabels()})),this.$watch("focusedMonth",(function(){u.focusedMonth=+u.focusedMonth,u.focusedDate.month()!==u.focusedMonth&&(u.focusedDate=u.focusedDate.month(u.focusedMonth))})),this.$watch("focusedYear",(function(){var t,e;if((null===(t=u.focusedYear)||void 0===t?void 0:t.length)>4&&(u.focusedYear=u.focusedYear.substring(0,4)),u.focusedYear&&4===(null===(e=u.focusedYear)||void 0===e?void 0:e.length)){var n=+u.focusedYear;Number.isInteger(n)||(n=ld().tz(o).year(),u.focusedYear=n),u.focusedDate.year()!==n&&(u.focusedDate=u.focusedDate.year(n))}})),this.$watch("focusedDate",(function(){var t=u.focusedDate.month(),e=u.focusedDate.year();u.focusedMonth!==t&&(u.focusedMonth=t),u.focusedYear!==e&&(u.focusedYear=e),u.setupDaysGrid(),u.$nextTick((function(){u.evaluatePosition()}))})),this.$watch("hour",(function(){var t,e,n=+u.hour;if(Number.isInteger(n)?u.hour=n>23?0:n<0?23:n:u.hour=0,!u.isClearingState){var i=null!==(t=u.getSelectedDate())&&void 0!==t?t:u.focusedDate;u.setState(i.hour(null!==(e=u.hour)&&void 0!==e?e:0))}})),this.$watch("minute",(function(){var t,e,n=+u.minute;if(Number.isInteger(n)?u.minute=n>59?0:n<0?59:n:u.minute=0,!u.isClearingState){var i=null!==(t=u.getSelectedDate())&&void 0!==t?t:u.focusedDate;u.setState(i.minute(null!==(e=u.minute)&&void 0!==e?e:0))}})),this.$watch("second",(function(){var t,e,n=+u.second;if(Number.isInteger(n)?u.second=n>59?0:n<0?59:n:u.second=0,!u.isClearingState){var i=null!==(t=u.getSelectedDate())&&void 0!==t?t:u.focusedDate;u.setState(i.second(null!==(e=u.second)&&void 0!==e?e:0))}})),this.$watch("state",(function(){var t,e,n,i,r,o,a=u.getSelectedDate();null!==u.getMaxDate()&&a.isAfter(u.getMaxDate())&&(a=null),null!==u.getMinDate()&&a.isBefore(u.getMinDate())&&(a=null),u.hour=null!==(t=null===(e=a)||void 0===e?void 0:e.hour())&&void 0!==t?t:0,u.minute=null!==(n=null===(i=a)||void 0===i?void 0:i.minute())&&void 0!==n?n:0,u.second=null!==(r=null===(o=a)||void 0===o?void 0:o.second())&&void 0!==r?r:0,u.setDisplayText()}))},clearState:function(){var t=this;this.isClearingState=!0,this.setState(null),this.closePicker(),this.$nextTick((function(){return t.isClearingState=!1}))},closePicker:function(){this.open=!1},dateIsDisabled:function(t){return!(!this.getMaxDate()||!t.isAfter(this.getMaxDate()))||!(!this.getMinDate()||!t.isBefore(this.getMinDate()))},dayIsDisabled:function(t){var e;return null!==(e=this.focusedDate)&&void 0!==e||(this.focusedDate=ld().tz(o)),this.dateIsDisabled(this.focusedDate.date(t))},dayIsSelected:function(t){var e,n=this.getSelectedDate();return null!==n&&(null!==(e=this.focusedDate)&&void 0!==e||(this.focusedDate=ld().tz(o)),n.date()===t&&n.month()===this.focusedDate.month()&&n.year()===this.focusedDate.year())},dayIsToday:function(t){var e,n=ld().tz(o);return null!==(e=this.focusedDate)&&void 0!==e||(this.focusedDate=n),n.date()===t&&n.month()===this.focusedDate.month()&&n.year()===this.focusedDate.year()},evaluatePosition:function(){for(var t=window.innerHeight-this.$refs.button.offsetHeight,e=this.$refs.button;e;)t-=e.offsetTop,e=e.offsetParent;this.$refs.picker.offsetHeight<=t?this.$refs.picker.style.bottom="auto":this.$refs.picker.style.bottom="".concat(this.$refs.button.offsetHeight,"px")},focusPreviousDay:function(){var t;null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=ld().tz(o)),this.focusedDate=this.focusedDate.subtract(1,"day")},focusPreviousWeek:function(){var t;null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=ld().tz(o)),this.focusedDate=this.focusedDate.subtract(1,"week")},focusNextDay:function(){var t;null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=ld().tz(o)),this.focusedDate=this.focusedDate.add(1,"day")},focusNextWeek:function(){var t;null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=ld().tz(o)),this.focusedDate=this.focusedDate.add(1,"week")},getDayLabels:function(){var t=ld.weekdaysShort();return 0===n?t:[].concat(Zu(t.slice(n)),Zu(t.slice(0,n)))},getMaxDate:function(){var t=ld(this.$refs.maxDate.value);return t.isValid()?t:null},getMinDate:function(){var t=ld(this.$refs.minDate.value);return t.isValid()?t:null},getSelectedDate:function(){var t=ld(this.state);return t.isValid()?t:null},openPicker:function(){var t,e,n=this;this.focusedDate=null!==(t=null!==(e=this.getSelectedDate())&&void 0!==e?e:this.getMinDate())&&void 0!==t?t:ld().tz(o),this.setupDaysGrid(),this.open=!0,this.$nextTick((function(){n.evaluatePosition()}))},selectDate:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&this.setFocusedDay(e),null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=ld().tz(o)),this.setState(this.focusedDate)},setDisplayText:function(){this.displayText=this.getSelectedDate()?this.getSelectedDate().format(e):""},setMonths:function(){this.months=ld.months()},setDayLabels:function(){this.dayLabels=this.getDayLabels()},setupDaysGrid:function(){var t;null!==(t=this.focusedDate)&&void 0!==t||(this.focusedDate=ld().tz(o)),this.emptyDaysInFocusedMonth=Array.from({length:this.focusedDate.date(8-n).day()},(function(t,e){return e+1})),this.daysInFocusedMonth=Array.from({length:this.focusedDate.daysInMonth()},(function(t,e){return e+1}))},setFocusedDay:function(t){var e;this.focusedDate=(null!==(e=this.focusedDate)&&void 0!==e?e:ld().tz(o)).date(t)},setState:function(t){var e,n,i;if(null===t)return this.state=null,void this.setDisplayText();this.dateIsDisabled(t)||(this.state=t.hour(null!==(e=this.hour)&&void 0!==e?e:0).minute(null!==(n=this.minute)&&void 0!==n?n:0).second(null!==(i=this.second)&&void 0!==i?i:0).format("YYYY-MM-DD HH:mm:ss"),this.setDisplayText())},togglePickerVisibility:function(){this.open?this.closePicker():this.openPicker()}}}))},pd={};vc(pd,{FileOrigin:function(){return Bv},FileStatus:function(){return Nv},OptionTypes:function(){return jv},Status:function(){return Fv},create:function(){return zv},destroy:function(){return Hv},find:function(){return Wv},getOptions:function(){return Gv},parse:function(){return Vv},registerPlugin:function(){return Uv},setOptions:function(){return qv},supported:function(){return Lv}});
>>>>>>> 454bd34d (feature: minimal easymde implementation)
/*!
 * FilePond 4.30.3
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */
var gd,md,vd=function(t){return t instanceof HTMLElement},yd=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=Qu({},t),r=[],o=[],a=function(){return Qu({},i)},s=function(){var t=[].concat(r);return r.length=0,t},l=function(){var t=[].concat(o);o.length=0,t.forEach((function(t){var e=t.type,n=t.data;u(e,n)}))},u=function(t,e,n){!n||document.hidden?(f[t]&&f[t](e),r.push({type:t,data:e})):o.push({type:t,data:e})},c=function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return d[t]?(e=d)[t].apply(e,i):null},h={getState:a,processActionQueue:s,processDispatchQueue:l,dispatch:u,query:c},d={};e.forEach((function(t){d=Qu(Qu({},t(i)),d)}));var f={};return n.forEach((function(t){f=Qu(Qu({},t(u,c,i)),f)})),h},bd=function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])},xd=function(t){var e={};return bd(t,(function(n){!function(t,e,n){"function"!=typeof n?Object.defineProperty(t,e,Qu({},n)):t[e]=n}(e,n,t[n])})),e},_d=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===n)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,n)},Ed="http://www.w3.org/2000/svg",wd=["svg","path"],Ad=function(t){return wd.includes(t)},Dd=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===lc(e)&&(n=e,e=null);var i=Ad(t)?document.createElementNS(Ed,t):document.createElement(t);return e&&(Ad(t)?_d(i,"class",e):i.className=e),bd(n,(function(t,e){_d(i,t,e)})),i},Cd=function(t){return function(e,n){void 0!==n&&t.children[n]?t.insertBefore(e,t.children[n]):t.appendChild(e)}},kd=function(t,e){return function(t,n){return void 0!==n?e.splice(n,0,t):e.push(t),t}},Sd=function(t,e){return function(n){return e.splice(e.indexOf(n),1),n.element.parentNode&&t.removeChild(n.element),n}},Td="undefined"!=typeof window&&void 0!==window.document,Od=function(){return Td},Id="children"in(Od()?Dd("svg"):{})?function(t){return t.children.length}:function(t){return t.childNodes.length},Md=function(t,e,n,i){var r=n[0]||t.left,o=n[1]||t.top,a=r+t.width,s=o+t.height*(i[1]||1),l={element:Qu({},t),inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:r,top:o,right:a,bottom:s}};return e.filter((function(t){return!t.isRectIgnored()})).map((function(t){return t.rect})).forEach((function(t){Ld(l.inner,Qu({},t.inner)),Ld(l.outer,Qu({},t.outer))})),Rd(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,Rd(l.outer),l},Ld=function(t,e){e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},Rd=function(t){t.width=t.right-t.left,t.height=t.bottom-t.top},Pd=function(t){return"number"==typeof t},Fd=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001;return Math.abs(t-e)<i&&Math.abs(n)<i},Nd=function(t){return t<.5?2*t*t:(4-2*t)*t-1},Bd={spring:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.stiffness,n=void 0===e?.5:e,i=t.damping,r=void 0===i?.75:i,o=t.mass,a=void 0===o?10:o,s=null,l=null,u=0,c=!1,h=function(t,e){if(!c){if(!Pd(s)||!Pd(l))return c=!0,void(u=0);Fd(l+=u+=-(l-s)*n/a,s,u*=r)||e?(l=s,u=0,c=!0,f.onupdate(l),f.oncomplete(l)):f.onupdate(l)}},d=function(t){if(Pd(t)&&!Pd(l)&&(l=t),null===s&&(s=t,l=t),l===(s=t)||void 0===s)return c=!0,u=0,f.onupdate(l),void f.oncomplete(l);c=!1},f=xd({interpolate:h,target:{set:d,get:function(){return s}},resting:{get:function(){return c}},onupdate:function(t){},oncomplete:function(t){}});return f},tween:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.duration,r=void 0===i?500:i,o=n.easing,a=void 0===o?Nd:o,s=n.delay,l=void 0===s?0:s,u=null,c=!0,h=!1,d=null,f=function(n,i){c||null===d||(null===u&&(u=n),n-u<l||((t=n-u-l)>=r||i?(t=1,e=h?0:1,p.onupdate(e*d),p.oncomplete(e*d),c=!0):(e=t/r,p.onupdate((t>=0?a(h?1-e:e):0)*d))))},p=xd({interpolate:f,target:{get:function(){return h?0:d},set:function(t){if(null===d)return d=t,p.onupdate(t),void p.oncomplete(t);t<d?(d=1,h=!0):(h=!1,d=t),c=!1,u=null}},resting:{get:function(){return c}},onupdate:function(t){},oncomplete:function(t){}});return p}},jd=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(e=Array.isArray(e)?e:[e]).forEach((function(e){t.forEach((function(t){var r=t,o=function(){return n[t]},a=function(e){return n[t]=e};"object"===lc(t)&&(r=t.key,o=t.getter||o,a=t.setter||a),e[r]&&!i||(e[r]={get:o,set:a})}))}))},zd=function(t){return null!=t},Hd={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Vd=function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!0;for(var n in e)if(e[n]!==t[n])return!0;return!1},Wd=function(t,e){var n=e.opacity,i=e.perspective,r=e.translateX,o=e.translateY,a=e.scaleX,s=e.scaleY,l=e.rotateX,u=e.rotateY,c=e.rotateZ,h=e.originX,d=e.originY,f=e.width,p=e.height,g="",m="";(zd(h)||zd(d))&&(m+="transform-origin: ".concat(h||0,"px ").concat(d||0,"px;")),zd(i)&&(g+="perspective(".concat(i,"px) ")),(zd(r)||zd(o))&&(g+="translate3d(".concat(r||0,"px, ").concat(o||0,"px, 0) ")),(zd(a)||zd(s))&&(g+="scale3d(".concat(zd(a)?a:1,", ").concat(zd(s)?s:1,", 1) ")),zd(c)&&(g+="rotateZ(".concat(c,"rad) ")),zd(l)&&(g+="rotateX(".concat(l,"rad) ")),zd(u)&&(g+="rotateY(".concat(u,"rad) ")),g.length&&(m+="transform:".concat(g,";")),zd(n)&&(m+="opacity:".concat(n,";"),0===n&&(m+="visibility:hidden;"),n<1&&(m+="pointer-events:none;")),zd(p)&&(m+="height:".concat(p,"px;")),zd(f)&&(m+="width:".concat(f,"px;"));var v=t.elementCurrentStyle||"";m.length===v.length&&m===v||(t.style.cssText=m,t.elementCurrentStyle=m)},Ud={styles:function(t){var e=t.mixinConfig,n=t.viewProps,i=t.viewInternalAPI,r=t.viewExternalAPI,o=t.view,a=Qu({},n),s={};jd(e,[i,r],n);var l=function(){return o.rect?Md(o.rect,o.childViews,[n.translateX||0,n.translateY||0],[n.scaleX||0,n.scaleY||0]):null};return i.rect={get:l},r.rect={get:l},e.forEach((function(t){n[t]=void 0===a[t]?Hd[t]:a[t]})),{write:function(){if(Vd(s,n))return Wd(o.element,n),Object.assign(s,Qu({},n)),!0},destroy:function(){}}},listeners:function(t){t.mixinConfig,t.viewProps,t.viewInternalAPI;var e,n=t.viewExternalAPI,i=(t.viewState,t.view),r=[],o=(e=i.element,function(t,n){e.addEventListener(t,n)}),a=function(t){return function(e,n){t.removeEventListener(e,n)}}(i.element);return n.on=function(t,e){r.push({type:t,fn:e}),o(t,e)},n.off=function(t,e){r.splice(r.findIndex((function(n){return n.type===t&&n.fn===e})),1),a(t,e)},{write:function(){return!0},destroy:function(){r.forEach((function(t){a(t.type,t.fn)}))}}},animations:function(t){var e=t.mixinConfig,n=t.viewProps,i=t.viewInternalAPI,r=t.viewExternalAPI,o=Qu({},n),a=[];return bd(e,(function(t,e){var s=function(t,e,n){var i=t[e]&&"object"===lc(t[e][n])?t[e][n]:t[e]||t,r="string"==typeof i?i:i.type,o="object"===lc(i)?Qu({},i):{};return Bd[r]?Bd[r](o):null}(e);s&&(s.onupdate=function(e){n[t]=e},s.target=o[t],jd([{key:t,setter:function(t){s.target!==t&&(s.target=t)},getter:function(){return n[t]}}],[i,r],n,!0),a.push(s))})),{write:function(t){var e=document.hidden,n=!0;return a.forEach((function(i){i.resting||(n=!1),i.interpolate(t,e)})),n},destroy:function(){}}},apis:function(t){var e=t.mixinConfig,n=t.viewProps,i=t.viewExternalAPI;jd(e,i,n)}},Gd=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.layoutCalculated||(t.paddingTop=parseInt(n.paddingTop,10)||0,t.marginTop=parseInt(n.marginTop,10)||0,t.marginRight=parseInt(n.marginRight,10)||0,t.marginBottom=parseInt(n.marginBottom,10)||0,t.marginLeft=parseInt(n.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=null===e.offsetParent,t},qd=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.tag,n=void 0===e?"div":e,i=t.name,r=void 0===i?null:i,o=t.attributes,a=void 0===o?{}:o,s=t.read,l=void 0===s?function(){}:s,u=t.write,c=void 0===u?function(){}:u,h=t.create,d=void 0===h?function(){}:h,f=t.destroy,p=void 0===f?function(){}:f,g=t.filterFrameActionsForChild,m=void 0===g?function(t,e){return e}:g,v=t.didCreateView,y=void 0===v?function(){}:v,b=t.didWriteView,x=void 0===b?function(){}:b,_=t.ignoreRect,E=void 0!==_&&_,w=t.ignoreRectUpdate,A=void 0!==w&&w,D=t.mixins,C=void 0===D?[]:D;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Dd(n,"filepond--".concat(r),a),o=window.getComputedStyle(i,null),s=Gd(),u=null,h=!1,f=[],g=[],v={},b={},_=[c],w=[l],D=[p],k=function(){return i},S=function(){return f.concat()},T=function(){return v},O=function(t){return function(e,n){return e(t,n)}},I=function(){return u||(u=Md(s,f,[0,0],[1,1]))},M=function(){return o},L=function(){u=null,f.forEach((function(t){return t._read()})),!(A&&s.width&&s.height)&&Gd(s,i,o);var t={root:z,props:e,rect:s};w.forEach((function(e){return e(t)}))},R=function(t,n,i){var r=0===n.length;return _.forEach((function(o){!1===o({props:e,root:z,actions:n,timestamp:t,shouldOptimize:i})&&(r=!1)})),g.forEach((function(e){!1===e.write(t)&&(r=!1)})),f.filter((function(t){return!!t.element.parentNode})).forEach((function(e){e._write(t,m(e,n),i)||(r=!1)})),f.forEach((function(e,o){e.element.parentNode||(z.appendChild(e.element,o),e._read(),e._write(t,m(e,n),i),r=!1)})),h=r,x({props:e,root:z,actions:n,timestamp:t}),r},P=function(){g.forEach((function(t){return t.destroy()})),D.forEach((function(t){t({root:z,props:e})})),f.forEach((function(t){return t._destroy()}))},F={element:{get:k},style:{get:M},childViews:{get:S}},N=Qu(Qu({},F),{},{rect:{get:I},ref:{get:T},is:function(t){return r===t},appendChild:Cd(i),createChildView:O(t),linkView:function(t){return f.push(t),t},unlinkView:function(t){f.splice(f.indexOf(t),1)},appendChildView:kd(0,f),removeChildView:Sd(i,f),registerWriter:function(t){return _.push(t)},registerReader:function(t){return w.push(t)},registerDestroyer:function(t){return D.push(t)},invalidateLayout:function(){return i.layoutCalculated=!1},dispatch:t.dispatch,query:t.query}),B={element:{get:k},childViews:{get:S},rect:{get:I},resting:{get:function(){return h}},isRectIgnored:function(){return E},_read:L,_write:R,_destroy:P},j=Qu(Qu({},F),{},{rect:{get:function(){return s}}});Object.keys(C).sort((function(t,e){return"styles"===t?1:"styles"===e?-1:0})).forEach((function(t){var n=Ud[t]({mixinConfig:C[t],viewProps:e,viewState:b,viewInternalAPI:N,viewExternalAPI:B,view:xd(j)});n&&g.push(n)}));var z=xd(N);d({root:z,props:e});var H=Id(i);return f.forEach((function(t,e){z.appendChild(t.element,H+e)})),y(z),xd(B)}},$d=function(t,e){return function(n){var i=n.root,r=n.props,o=n.actions,a=void 0===o?[]:o,s=n.timestamp,l=n.shouldOptimize;a.filter((function(e){return t[e.type]})).forEach((function(e){return t[e.type]({root:i,props:r,action:e.data,timestamp:s,shouldOptimize:l})})),e&&e({root:i,props:r,actions:a,timestamp:s,shouldOptimize:l})}},Yd=function(t,e){return e.parentNode.insertBefore(t,e)},Xd=function(t,e){return e.parentNode.insertBefore(t,e.nextSibling)},Kd=function(t){return Array.isArray(t)},Zd=function(t){return null==t},Jd=function(t){return t.trim()},Qd=function(t){return""+t},tf=function(t){return"boolean"==typeof t},ef=function(t){return tf(t)?t:"true"===t},nf=function(t){return"string"==typeof t},rf=function(t){return Pd(t)?t:nf(t)?Qd(t).replace(/[a-z]+/gi,""):0},of=function(t){return parseInt(rf(t),10)},af=function(t){return parseFloat(rf(t))},sf=function(t){return Pd(t)&&isFinite(t)&&Math.floor(t)===t},lf=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(sf(t))return t;var n=Qd(t).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),of(n)*e*e):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),of(n)*e):of(n)},uf=function(t){return"function"==typeof t},cf={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},hf=function(t,e,n,i,r){if(null===e)return null;if("function"==typeof e)return e;var o={url:"GET"===n||"PATCH"===n?"?".concat(t,"="):"",method:n,headers:r,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if(nf(e))return o.url=e,o;if(Object.assign(o,e),nf(o.headers)){var a=o.headers.split(/:(.+)/);o.headers={header:a[0],value:a[1]}}return o.withCredentials=ef(o.withCredentials),o},df=function(t){return"object"===lc(t)&&null!==t},ff=function(t){return Kd(t)?"array":function(t){return null===t}(t)?"null":sf(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":function(t){return df(t)&&nf(t.url)&&df(t.process)&&df(t.revert)&&df(t.restore)&&df(t.fetch)}(t)?"api":lc(t)},pf={array:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return Zd(t)?[]:Kd(t)?t:Qd(t).split(e).map(Jd).filter((function(t){return t.length}))},boolean:ef,int:function(t){return"bytes"===ff(t)?lf(t):of(t)},number:af,float:af,bytes:lf,string:function(t){return uf(t)?t:Qd(t)},function:function(t){return function(t){for(var e=self,n=t.split("."),i=null;i=n.shift();)if(!(e=e[i]))return null;return e}(t)},serverapi:function(t){return(n={}).url=nf(e=t)?e:e.url||"",n.timeout=e.timeout?parseInt(e.timeout,10):0,n.headers=e.headers?e.headers:{},bd(cf,(function(t){n[t]=hf(t,e[t],cf[t],n.timeout,n.headers)})),n.process=e.process||nf(e)||e.url?n.process:null,n.remove=e.remove||null,delete n.headers,n;var e,n},object:function(t){try{return JSON.parse(t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(t){return null}}},gf=function(t,e,n){if(t===e)return t;var i,r=ff(t);if(r!==n){var o=(i=t,pf[n](i));if(r=ff(o),null===o)throw'Trying to assign value with incorrect type to "'.concat(option,'", allowed type: "').concat(n,'"');t=o}return t},mf=function(t){var e={};return bd(t,(function(n){var i,r,o,a=t[n];e[n]=(i=a[0],r=a[1],o=i,{enumerable:!0,get:function(){return o},set:function(t){o=gf(t,i,r)}})})),xd(e)},vf=function(t){return{items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:mf(t)}},yf=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t.split(/(?=[A-Z])/).map((function(t){return t.toLowerCase()})).join(e)},bf=function(t,e){var n={};return bd(e,(function(e){n[e]={get:function(){return t.getState().options[e]},set:function(n){t.dispatch("SET_".concat(yf(e,"_").toUpperCase()),{value:n})}}})),n},xf=function(t){return function(e,n,i){var r={};return bd(t,(function(t){var n=yf(t,"_").toUpperCase();r["SET_".concat(n)]=function(r){try{i.options[t]=r.value}catch(t){}e("DID_SET_".concat(n),{value:i.options[t]})}})),r}},_f=function(t){return function(e){var n={};return bd(t,(function(t){n["GET_".concat(yf(t,"_").toUpperCase())]=function(n){return e.options[t]}})),n}},Ef=1,wf=2,Af=3,Df=4,Cf=5,kf=function(){return Math.random().toString(36).substr(2,9)},Sf=function(t,e){return t.splice(e,1)},Tf=function(){var t=[],e=function(e,n){Sf(t,t.findIndex((function(t){return t.event===e&&(t.cb===n||!n)})))},n=function(e,n,i){t.filter((function(t){return t.event===e})).map((function(t){return t.cb})).forEach((function(t){return function(t,e){e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)}((function(){return t.apply(void 0,Zu(n))}),i)}))};return{fireSync:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];n(t,i,!0)},fire:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];n(t,i,!1)},on:function(e,n){t.push({event:e,cb:n})},onOnce:function(n,i){t.push({event:n,cb:function(){e(n,i),i.apply(void 0,arguments)}})},off:e}},Of=function(t,e,n){Object.getOwnPropertyNames(t).filter((function(t){return!n.includes(t)})).forEach((function(n){return Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))},If=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Mf=function(t){var e={};return Of(t,e,If),e},Lf=function(t){t.forEach((function(e,n){e.released&&Sf(t,n)}))},Rf={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Pf={INPUT:1,LIMBO:2,LOCAL:3},Ff=function(t){return/[^0-9]+/.exec(t)},Nf=function(){return Ff(1.1.toLocaleString())[0]},Bf={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},jf=[],zf=function(t,e,n){return new Promise((function(i,r){var o=jf.filter((function(e){return e.key===t})).map((function(t){return t.cb}));if(0!==o.length){var a=o.shift();o.reduce((function(t,e){return t.then((function(t){return e(t,n)}))}),a(e,n)).then((function(t){return i(t)})).catch((function(t){return r(t)}))}else i(e)}))},Hf=function(t,e,n){return jf.filter((function(e){return e.key===t})).map((function(t){return t.cb(e,n)}))},Vf=function(t,e){return jf.push({key:t,cb:e})},Wf=function(){return Qu({},Uf)},Uf={id:[null,Bf.STRING],name:["filepond",Bf.STRING],disabled:[!1,Bf.BOOLEAN],className:[null,Bf.STRING],required:[!1,Bf.BOOLEAN],captureMethod:[null,Bf.STRING],allowSyncAcceptAttribute:[!0,Bf.BOOLEAN],allowDrop:[!0,Bf.BOOLEAN],allowBrowse:[!0,Bf.BOOLEAN],allowPaste:[!0,Bf.BOOLEAN],allowMultiple:[!1,Bf.BOOLEAN],allowReplace:[!0,Bf.BOOLEAN],allowRevert:[!0,Bf.BOOLEAN],allowRemove:[!0,Bf.BOOLEAN],allowProcess:[!0,Bf.BOOLEAN],allowReorder:[!1,Bf.BOOLEAN],allowDirectoriesOnly:[!1,Bf.BOOLEAN],storeAsFile:[!1,Bf.BOOLEAN],forceRevert:[!1,Bf.BOOLEAN],maxFiles:[null,Bf.INT],checkValidity:[!1,Bf.BOOLEAN],itemInsertLocationFreedom:[!0,Bf.BOOLEAN],itemInsertLocation:["before",Bf.STRING],itemInsertInterval:[75,Bf.INT],dropOnPage:[!1,Bf.BOOLEAN],dropOnElement:[!0,Bf.BOOLEAN],dropValidation:[!1,Bf.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],Bf.ARRAY],instantUpload:[!0,Bf.BOOLEAN],maxParallelUploads:[2,Bf.INT],allowMinimumUploadDuration:[!0,Bf.BOOLEAN],chunkUploads:[!1,Bf.BOOLEAN],chunkForce:[!1,Bf.BOOLEAN],chunkSize:[5e6,Bf.INT],chunkRetryDelays:[[500,1e3,3e3],Bf.ARRAY],server:[null,Bf.SERVER_API],fileSizeBase:[1e3,Bf.INT],labelFileSizeBytes:["bytes",Bf.STRING],labelFileSizeKilobytes:["KB",Bf.STRING],labelFileSizeMegabytes:["MB",Bf.STRING],labelFileSizeGigabytes:["GB",Bf.STRING],labelDecimalSeparator:[Nf(),Bf.STRING],labelThousandsSeparator:[(gd=Nf(),md=1e3.toLocaleString(),md!==1e3.toString()?Ff(md)[0]:"."===gd?",":"."),Bf.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',Bf.STRING],labelInvalidField:["Field contains invalid files",Bf.STRING],labelFileWaitingForSize:["Waiting for size",Bf.STRING],labelFileSizeNotAvailable:["Size not available",Bf.STRING],labelFileCountSingular:["file in list",Bf.STRING],labelFileCountPlural:["files in list",Bf.STRING],labelFileLoading:["Loading",Bf.STRING],labelFileAdded:["Added",Bf.STRING],labelFileLoadError:["Error during load",Bf.STRING],labelFileRemoved:["Removed",Bf.STRING],labelFileRemoveError:["Error during remove",Bf.STRING],labelFileProcessing:["Uploading",Bf.STRING],labelFileProcessingComplete:["Upload complete",Bf.STRING],labelFileProcessingAborted:["Upload cancelled",Bf.STRING],labelFileProcessingError:["Error during upload",Bf.STRING],labelFileProcessingRevertError:["Error during revert",Bf.STRING],labelTapToCancel:["tap to cancel",Bf.STRING],labelTapToRetry:["tap to retry",Bf.STRING],labelTapToUndo:["tap to undo",Bf.STRING],labelButtonRemoveItem:["Remove",Bf.STRING],labelButtonAbortItemLoad:["Abort",Bf.STRING],labelButtonRetryItemLoad:["Retry",Bf.STRING],labelButtonAbortItemProcessing:["Cancel",Bf.STRING],labelButtonUndoItemProcessing:["Undo",Bf.STRING],labelButtonRetryItemProcessing:["Retry",Bf.STRING],labelButtonProcessItem:["Upload",Bf.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',Bf.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',Bf.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',Bf.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',Bf.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',Bf.STRING],oninit:[null,Bf.FUNCTION],onwarning:[null,Bf.FUNCTION],onerror:[null,Bf.FUNCTION],onactivatefile:[null,Bf.FUNCTION],oninitfile:[null,Bf.FUNCTION],onaddfilestart:[null,Bf.FUNCTION],onaddfileprogress:[null,Bf.FUNCTION],onaddfile:[null,Bf.FUNCTION],onprocessfilestart:[null,Bf.FUNCTION],onprocessfileprogress:[null,Bf.FUNCTION],onprocessfileabort:[null,Bf.FUNCTION],onprocessfilerevert:[null,Bf.FUNCTION],onprocessfile:[null,Bf.FUNCTION],onprocessfiles:[null,Bf.FUNCTION],onremovefile:[null,Bf.FUNCTION],onpreparefile:[null,Bf.FUNCTION],onupdatefiles:[null,Bf.FUNCTION],onreorderfiles:[null,Bf.FUNCTION],beforeDropFile:[null,Bf.FUNCTION],beforeAddFile:[null,Bf.FUNCTION],beforeRemoveFile:[null,Bf.FUNCTION],beforePrepareFile:[null,Bf.FUNCTION],stylePanelLayout:[null,Bf.STRING],stylePanelAspectRatio:[null,Bf.STRING],styleItemPanelAspectRatio:[null,Bf.STRING],styleButtonRemoveItemPosition:["left",Bf.STRING],styleButtonProcessItemPosition:["right",Bf.STRING],styleLoadIndicatorPosition:["right",Bf.STRING],styleProgressIndicatorPosition:["right",Bf.STRING],styleButtonRemoveItemAlign:[!1,Bf.BOOLEAN],files:[[],Bf.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],Bf.ARRAY]},Gf=function(t,e){return Zd(e)?t[0]||null:sf(e)?t[e]||null:("object"===lc(e)&&(e=e.id),t.find((function(t){return t.id===e}))||null)},qf=function(t){if(Zd(t))return t;if(/:/.test(t)){var e=t.split(":");return e[1]/e[0]}return parseFloat(t)},$f=function(t){return t.filter((function(t){return!t.archived}))},Yf={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},Xf=null,Kf=[Rf.LOAD_ERROR,Rf.PROCESSING_ERROR,Rf.PROCESSING_REVERT_ERROR],Zf=[Rf.LOADING,Rf.PROCESSING,Rf.PROCESSING_QUEUED,Rf.INIT],Jf=[Rf.PROCESSING_COMPLETE],Qf=function(t){return Kf.includes(t.status)},tp=function(t){return Zf.includes(t.status)},ep=function(t){return Jf.includes(t.status)},np=function(t){return df(t.options.server)&&(df(t.options.server.process)||uf(t.options.server.process))},ip=function(t){return{GET_STATUS:function(){var e=$f(t.items),n=Yf.EMPTY,i=Yf.ERROR,r=Yf.BUSY,o=Yf.IDLE,a=Yf.READY;return 0===e.length?n:e.some(Qf)?i:e.some(tp)?r:e.some(ep)?a:o},GET_ITEM:function(e){return Gf(t.items,e)},GET_ACTIVE_ITEM:function(e){return Gf($f(t.items),e)},GET_ACTIVE_ITEMS:function(){return $f(t.items)},GET_ITEMS:function(){return t.items},GET_ITEM_NAME:function(e){var n=Gf(t.items,e);return n?n.filename:null},GET_ITEM_SIZE:function(e){var n=Gf(t.items,e);return n?n.fileSize:null},GET_STYLES:function(){return Object.keys(t.options).filter((function(t){return/^style/.test(t)})).map((function(e){return{name:e,value:t.options[e]}}))},GET_PANEL_ASPECT_RATIO:function(){return/circle/.test(t.options.stylePanelLayout)?1:qf(t.options.stylePanelAspectRatio)},GET_ITEM_PANEL_ASPECT_RATIO:function(){return t.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function(e){return $f(t.items).filter((function(t){return t.status===e}))},GET_TOTAL_ITEMS:function(){return $f(t.items).length},SHOULD_UPDATE_FILE_INPUT:function(){return t.options.storeAsFile&&function(){if(null===Xf)try{var t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));var e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,Xf=1===e.files.length}catch(t){Xf=!1}return Xf}()&&!np(t)},IS_ASYNC:function(){return np(t)},GET_FILE_SIZE_LABELS:function(t){return{labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0}}}},rp=function(t,e,n){return Math.max(Math.min(n,t),e)},op=function(t){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t)},ap=function(t){return t.split("/").pop().split("?").shift()},sp=function(t){return t.split(".").pop()},lp=function(t){if("string"!=typeof t)return"";var e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?"jpeg"===e?"jpg":e:""},up=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(e+t).slice(-e.length)},cp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(t.getFullYear(),"-").concat(up(t.getMonth()+1,"00"),"-").concat(up(t.getDate(),"00"),"_").concat(up(t.getHours(),"00"),"-").concat(up(t.getMinutes(),"00"),"-").concat(up(t.getSeconds(),"00"))},hp=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r="string"==typeof n?t.slice(0,t.size,n):t.slice(0,t.size,t.type);return r.lastModifiedDate=new Date,t._relativePath&&(r._relativePath=t._relativePath),nf(e)||(e=cp()),e&&null===i&&sp(e)?r.name=e:(i=i||lp(r.type),r.name=e+(i?"."+i:"")),r},dp=function(t,e){var n=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(n){var i=new n;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},fp=function(t){return(/^data:(.+);/.exec(t)||[])[1]||null},pp=function(t){var e=fp(t),n=function(t){return atob(function(t){return t.split(",")[1].replace(/\s/g,"")}(t))}(t);return function(t,e){for(var n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return dp(n,e)}(n,e)},gp=function(t){if(!/^content-disposition:/i.test(t))return null;var e=t.split(/filename=|filename\*=.+''/).splice(1).map((function(t){return t.trim().replace(/^["']|[;"']{0,2}$/g,"")})).filter((function(t){return t.length}));return e.length?decodeURI(e[e.length-1]):null},mp=function(t){if(/content-length:/i.test(t)){var e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},vp=function(t){return/x-content-transfer-id:/i.test(t)&&(t.split(":")[1]||"").trim()||null},yp=function(t){var e,n={source:null,name:null,size:null},i=oc(t.split("\n"));try{for(i.s();!(e=i.n()).done;){var r=e.value,o=gp(r);if(o)n.name=o;else{var a=mp(r);if(a)n.size=a;else{var s=vp(r);s&&(n.source=s)}}}}catch(t){i.e(t)}finally{i.f()}return n},bp=function(t){var e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=function(n){t?(e.timestamp=Date.now(),e.request=t(n,(function(t){e.duration=Date.now()-e.timestamp,e.complete=!0,t instanceof Blob&&(t=hp(t,t.name||ap(n))),i.fire("load",t instanceof Blob?t:t?t.body:null)}),(function(t){i.fire("error","string"==typeof t?{type:"error",code:0,body:t}:t)}),(function(t,n,r){r&&(e.size=r),e.duration=Date.now()-e.timestamp,t?(e.progress=n/r,i.fire("progress",e.progress)):e.progress=null}),(function(){i.fire("abort")}),(function(t){var n=yp("string"==typeof t?t:t.headers);i.fire("meta",{size:e.size||n.size,filename:n.name,source:n.source})}))):i.fire("error",{type:"error",body:"Can't load URL",code:400})},i=Qu(Qu({},Tf()),{},{setSource:function(t){return e.source=t},getProgress:function(){return e.progress},abort:function(){e.request&&e.request.abort&&e.request.abort()},load:function(){var t,r,o=e.source;i.fire("init",o),o instanceof File?i.fire("load",o):o instanceof Blob?i.fire("load",hp(o,o.name)):op(o)?i.fire("load",hp(pp(o),t,null,r)):n(o)}});return i},xp=function(t){return/GET|HEAD/.test(t)},_p=function(t,e,n){var i={onheaders:function(){},onprogress:function(){},onload:function(){},ontimeout:function(){},onerror:function(){},onabort:function(){},abort:function(){r=!0,a.abort()}},r=!1,o=!1;n=Qu({method:"POST",headers:{},withCredentials:!1},n),e=encodeURI(e),xp(n.method)&&t&&(e="".concat(e).concat(encodeURIComponent("string"==typeof t?t:JSON.stringify(t))));var a=new XMLHttpRequest;return(xp(n.method)?a:a.upload).onprogress=function(t){r||i.onprogress(t.lengthComputable,t.loaded,t.total)},a.onreadystatechange=function(){a.readyState<2||4===a.readyState&&0===a.status||o||(o=!0,i.onheaders(a))},a.onload=function(){a.status>=200&&a.status<300?i.onload(a):i.onerror(a)},a.onerror=function(){return i.onerror(a)},a.onabort=function(){r=!0,i.onabort()},a.ontimeout=function(){return i.ontimeout(a)},a.open(n.method,e,!0),sf(n.timeout)&&(a.timeout=n.timeout),Object.keys(n.headers).forEach((function(t){var e=unescape(encodeURIComponent(n.headers[t]));a.setRequestHeader(t,e)})),n.responseType&&(a.responseType=n.responseType),n.withCredentials&&(a.withCredentials=!0),a.send(t),i},Ep=function(t,e,n,i){return{type:t,code:e,body:n,headers:i}},wp=function(t){return function(e){t(Ep("error",0,"Timeout",e.getAllResponseHeaders()))}},Ap=function(t){return/\?/.test(t)},Dp=function(){for(var t="",e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){t+=Ap(t)&&Ap(e)?e.replace(/\?/,"&"):e})),t},Cp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;if("function"==typeof e)return e;if(!e||!nf(e.url))return null;var n=e.onload||function(t){return t},i=e.onerror||function(t){return null};return function(r,o,a,s,l,u){var c=_p(r,Dp(t,e.url),Qu(Qu({},e),{},{responseType:"blob"}));return c.onload=function(t){var i=t.getAllResponseHeaders(),a=yp(i).name||ap(r);o(Ep("load",t.status,"HEAD"===e.method?null:hp(n(t.response),a),i))},c.onerror=function(t){a(Ep("error",t.status,i(t.response)||t.statusText,t.getAllResponseHeaders()))},c.onheaders=function(t){u(Ep("headers",t.status,null,t.getAllResponseHeaders()))},c.ontimeout=wp(a),c.onprogress=s,c.onabort=l,c}},kp=0,Sp=1,Tp=2,Op=3,Ip=4,Mp=function(t,e,n,i,r,o,a,s,l,u,c){for(var h=[],d=c.chunkTransferId,f=c.chunkServer,p=c.chunkSize,g=c.chunkRetryDelays,m={serverId:d,aborted:!1},v=e.ondata||function(t){return t},y=e.onload||function(t,e){return"HEAD"===e?t.getResponseHeader("Upload-Offset"):t.response},b=e.onerror||function(t){return null},x=Math.floor(i.size/p),_=0;_<=x;_++){var E=_*p,w=i.slice(E,E+p,"application/offset+octet-stream");h[_]={index:_,size:w.size,offset:E,data:w,file:i,progress:0,retries:Zu(g),status:kp,error:null,request:null,timeout:null}}var A,D,C,k,S=function(t){return t.status===kp||t.status===Op},T=function(e){if(!m.aborted)if(e=e||h.find(S)){e.status=Tp,e.progress=null;var n=f.ondata||function(t){return t},r=f.onerror||function(t){return null},s=Dp(t,f.url,m.serverId),u="function"==typeof f.headers?f.headers(e):Qu(Qu({},f.headers),{},{"Content-Type":"application/offset+octet-stream","Upload-Offset":e.offset,"Upload-Length":i.size,"Upload-Name":i.name}),c=e.request=_p(n(e.data),s,Qu(Qu({},f),{},{headers:u}));c.onload=function(){e.status=Sp,e.request=null,M()},c.onprogress=function(t,n,i){e.progress=t?n:null,I()},c.onerror=function(t){e.status=Op,e.request=null,e.error=r(t.response)||t.statusText,O(e)||a(Ep("error",t.status,r(t.response)||t.statusText,t.getAllResponseHeaders()))},c.ontimeout=function(t){e.status=Op,e.request=null,O(e)||wp(a)(t)},c.onabort=function(){e.status=kp,e.request=null,l()}}else h.every((function(t){return t.status===Sp}))&&o(m.serverId)},O=function(t){return 0!==t.retries.length&&(t.status=Ip,clearTimeout(t.timeout),t.timeout=setTimeout((function(){T(t)}),t.retries.shift()),!0)},I=function(){var t=h.reduce((function(t,e){return null===t||null===e.progress?null:t+e.progress}),0);if(null===t)return s(!1,0,0);var e=h.reduce((function(t,e){return t+e.size}),0);s(!0,t,e)},M=function(){h.filter((function(t){return t.status===Tp})).length>=1||T()};return m.serverId?(A=function(t){m.aborted||(h.filter((function(e){return e.offset<t})).forEach((function(t){t.status=Sp,t.progress=t.size})),M())},D=Dp(t,f.url,m.serverId),C={headers:"function"==typeof e.headers?e.headers(m.serverId):Qu({},e.headers),method:"HEAD"},(k=_p(null,D,C)).onload=function(t){return A(y(t,C.method))},k.onerror=function(t){return a(Ep("error",t.status,b(t.response)||t.statusText,t.getAllResponseHeaders()))},k.ontimeout=wp(a)):function(o){var s=new FormData;df(r)&&s.append(n,JSON.stringify(r));var l="function"==typeof e.headers?e.headers(i,r):Qu(Qu({},e.headers),{},{"Upload-Length":i.size}),u=Qu(Qu({},e),{},{headers:l}),c=_p(v(s),Dp(t,e.url),u);c.onload=function(t){return o(y(t,u.method))},c.onerror=function(t){return a(Ep("error",t.status,b(t.response)||t.statusText,t.getAllResponseHeaders()))},c.ontimeout=wp(a)}((function(t){m.aborted||(u(t),m.serverId=t,M())})),{abort:function(){m.aborted=!0,h.forEach((function(t){clearTimeout(t.timeout),t.request&&t.request.abort()}))}}},Lp=function(t,e,n,i){return function(r,o,a,s,l,u,c){if(r){var h=i.chunkUploads,d=h&&r.size>i.chunkSize,f=h&&(d||i.chunkForce);if(r instanceof Blob&&f)return Mp(t,e,n,r,o,a,s,l,u,c,i);var p=e.ondata||function(t){return t},g=e.onload||function(t){return t},m=e.onerror||function(t){return null},v="function"==typeof e.headers?e.headers(r,o)||{}:Qu({},e.headers),y=Qu(Qu({},e),{},{headers:v}),b=new FormData;df(o)&&b.append(n,JSON.stringify(o)),(r instanceof Blob?[{name:null,file:r}]:r).forEach((function(t){b.append(n,t.file,null===t.name?t.file.name:"".concat(t.name).concat(t.file.name))}));var x=_p(p(b),Dp(t,e.url),y);return x.onload=function(t){a(Ep("load",t.status,g(t.response),t.getAllResponseHeaders()))},x.onerror=function(t){s(Ep("error",t.status,m(t.response)||t.statusText,t.getAllResponseHeaders()))},x.ontimeout=wp(s),x.onprogress=l,x.onabort=u,x}}},Rp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;if("function"==typeof e)return e;if(!e||!nf(e.url))return function(t,e){return e()};var n=e.onload||function(t){return t},i=e.onerror||function(t){return null};return function(r,o,a){var s=_p(r,t+e.url,e);return s.onload=function(t){o(Ep("load",t.status,n(t.response),t.getAllResponseHeaders()))},s.onerror=function(t){a(Ep("error",t.status,i(t.response)||t.statusText,t.getAllResponseHeaders()))},s.ontimeout=wp(a),s}},Pp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t+Math.random()*(e-t)},Fp=function(t,e){var n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},i=e.allowMinimumUploadDuration,r=function(){n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},o=i?function(){return n.progress?Math.min(n.progress,n.perceivedProgress):null}:function(){return n.progress||null},a=i?function(){return Math.min(n.duration,n.perceivedDuration)}:function(){return n.duration},s=Qu(Qu({},Tf()),{},{process:function(e,r){var o=function(){0!==n.duration&&null!==n.progress&&s.fire("progress",s.getProgress())},a=function(){n.complete=!0,s.fire("load-perceived",n.response.body)};s.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,r=null,o=Date.now(),a=function a(){var s=Date.now()-o,l=Pp(n,i);s+l>e&&(l=s+l-e);var u=s/e;u>=1||document.hidden?t(1):(t(u),r=setTimeout(a,l))};return e>0&&a(),{clear:function(){clearTimeout(r)}}}((function(t){n.perceivedProgress=t,n.perceivedDuration=Date.now()-n.timestamp,o(),n.response&&1===n.perceivedProgress&&!n.complete&&a()}),i?Pp(750,1500):0),n.request=t(e,r,(function(t){n.response=df(t)?t:{type:"load",code:200,body:"".concat(t),headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,s.fire("load",n.response.body),(!i||i&&1===n.perceivedProgress)&&a()}),(function(t){n.perceivedPerformanceUpdater.clear(),s.fire("error",df(t)?t:{type:"error",code:0,body:"".concat(t)})}),(function(t,e,i){n.duration=Date.now()-n.timestamp,n.progress=t?e/i:null,o()}),(function(){n.perceivedPerformanceUpdater.clear(),s.fire("abort",n.response?n.response.body:null)}),(function(t){s.fire("transfer",t)}))},abort:r,getProgress:o,getDuration:a,reset:function(){r(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null}});return s},Np=function(t){return t.substr(0,t.lastIndexOf("."))||t},Bp=function(t){var e=[t.name,t.size,t.type];return t instanceof Blob||op(t)?e[0]=t.name||cp():op(t)?(e[1]=t.length,e[2]=fp(t)):nf(t)&&(e[0]=ap(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}},jp=function(t){return!!(t instanceof File||t instanceof Blob&&t.name)},zp=function t(e){if(!df(e))return e;var n=Kd(e)?[]:{};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];n[i]=r&&df(r)?t(r):r}return n},Hp=function(t,e){var n=function(t,e){return Zd(e)?0:nf(e)?t.findIndex((function(t){return t.id===e})):-1}(t,e);if(!(n<0))return t[n]||null},Vp=function(t,e,n,i,r,o){var a=_p(null,t,{method:"GET",responseType:"blob"});return a.onload=function(n){var i=n.getAllResponseHeaders(),r=yp(i).name||ap(t);e(Ep("load",n.status,hp(n.response,r),i))},a.onerror=function(t){n(Ep("error",t.status,t.statusText,t.getAllResponseHeaders()))},a.onheaders=function(t){o(Ep("headers",t.status,null,t.getAllResponseHeaders()))},a.ontimeout=wp(n),a.onprogress=i,a.onabort=r,a},Wp=function(t){return 0===t.indexOf("//")&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},Up=function(t){return function(){return uf(t)?t.apply(void 0,arguments):t}},Gp=function(t,e){clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout((function(){t("DID_UPDATE_ITEMS",{items:$f(e.items)})}),0)},qp=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return new Promise((function(e){if(!t)return e(!0);var i=t.apply(void 0,n);return null==i?e(!0):"boolean"==typeof i?e(i):void("function"==typeof i.then&&i.then(e))}))},$p=function(t,e){t.items.sort((function(t,n){return e(Mf(t),Mf(n))}))},Yp=function(t,e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.query,r=n.success,o=void 0===r?function(){}:r,a=n.failure,s=void 0===a?function(){}:a,l=ju(n,Fu),u=Gf(t.items,i);u?e(u,o,s,l||{}):s({error:Ep("error",0,"Item not found"),file:null})}},Xp=function(t,e,n){return{ABORT_ALL:function(){$f(n.items).forEach((function(t){t.freeze(),t.abortLoad(),t.abortProcessing()}))},DID_SET_FILES:function(e){var i=e.value,r=(void 0===i?[]:i).map((function(t){return{source:t.source?t.source:t,options:t.options}})),o=$f(n.items);o.forEach((function(e){r.find((function(t){return t.source===e.source||t.source===e.file}))||t("REMOVE_ITEM",{query:e,remove:!1})})),o=$f(n.items),r.forEach((function(e,n){o.find((function(t){return t.source===e.source||t.file===e.source}))||t("ADD_ITEM",Qu(Qu({},e),{},{interactionMethod:Cf,index:n}))}))},DID_UPDATE_ITEM_METADATA:function(i){var r=i.id,o=i.action,a=i.change;a.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout((function(){var i=Hp(n.items,r);if(e("IS_ASYNC")){i.origin===Pf.LOCAL&&t("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.source});var s,l=function(){setTimeout((function(){t("REQUEST_ITEM_PROCESSING",{query:r})}),32)};return i.status===Rf.PROCESSING_COMPLETE?(s=n.options.instantUpload,void i.revert(Rp(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(s?l:function(){}).catch((function(){}))):i.status===Rf.PROCESSING?function(t){i.abortProcessing().then(t?l:function(){})}(n.options.instantUpload):void(n.options.instantUpload&&l())}zf("SHOULD_PREPARE_OUTPUT",!1,{item:i,query:e,action:o,change:a}).then((function(n){var o=e("GET_BEFORE_PREPARE_FILE");o&&(n=o(i,n)),n&&t("REQUEST_PREPARE_OUTPUT",{query:r,item:i,success:function(e){t("DID_PREPARE_OUTPUT",{id:r,file:e})}},!0)}))}),0))},MOVE_ITEM:function(t){var e=t.query,i=t.index,r=Gf(n.items,e);if(r){var o=n.items.indexOf(r);o!==(i=rp(i,0,n.items.length-1))&&n.items.splice(i,0,n.items.splice(o,1)[0])}},SORT:function(i){var r=i.compare;$p(n,r),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:function(n){var i=n.items,r=n.index,o=n.interactionMethod,a=n.success,s=void 0===a?function(){}:a,l=n.failure,u=void 0===l?function(){}:l,c=r;if(-1===r||void 0===r){var h=e("GET_ITEM_INSERT_LOCATION"),d=e("GET_TOTAL_ITEMS");c="before"===h?0:d}var f=e("GET_IGNORED_FILES"),p=i.filter((function(t){return jp(t)?!f.includes(t.name.toLowerCase()):!Zd(t)})).map((function(e){return new Promise((function(n,i){t("ADD_ITEM",{interactionMethod:o,source:e.source||e,success:n,failure:i,index:c++,options:e.options||{}})}))}));Promise.all(p).then(s).catch(u)},ADD_ITEM:function(i){var r=i.source,o=i.index,a=void 0===o?-1:o,s=i.interactionMethod,l=i.success,u=void 0===l?function(){}:l,c=i.failure,h=void 0===c?function(){}:c,d=i.options,f=void 0===d?{}:d;if(Zd(r))h({error:Ep("error",0,"No source"),file:null});else if(!jp(r)||!n.options.ignoredFiles.includes(r.name.toLowerCase())){if(!function(t){var e=$f(t.items).length;if(!t.options.allowMultiple)return 0===e;var n=t.options.maxFiles;return null===n||e<n}(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){var p=Ep("warning",0,"Max files");return t("DID_THROW_MAX_FILES",{source:r,error:p}),void h({error:p,file:null})}var g=$f(n.items)[0];if(g.status===Rf.PROCESSING_COMPLETE||g.status===Rf.PROCESSING_REVERT_ERROR){var m=e("GET_FORCE_REVERT");if(g.revert(Rp(n.options.server.url,n.options.server.revert),m).then((function(){m&&t("ADD_ITEM",{source:r,index:a,interactionMethod:s,success:u,failure:h,options:f})})).catch((function(){})),m)return}t("REMOVE_ITEM",{query:g.id})}var v="local"===f.type?Pf.LOCAL:"limbo"===f.type?Pf.LIMBO:Pf.INPUT,y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=kf(),r={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:e,transferId:null,processingAborted:!1,status:e?Rf.PROCESSING_COMPLETE:Rf.INIT,activeLoader:null,activeProcessor:null},o=null,a={},s=function(t){return r.status=t},l=function(t){if(!r.released&&!r.frozen){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];p.fire.apply(p,[t].concat(n))}},u=function(e,n,i){r.source=e,p.fireSync("init"),r.file?p.fireSync("load-skip"):(r.file=Bp(e),n.on("init",(function(){l("load-init")})),n.on("meta",(function(e){r.file.size=e.size,r.file.filename=e.filename,e.source&&(t=Pf.LIMBO,r.serverFileReference=e.source,r.status=Rf.PROCESSING_COMPLETE),l("load-meta")})),n.on("progress",(function(t){s(Rf.LOADING),l("load-progress",t)})),n.on("error",(function(t){s(Rf.LOAD_ERROR),l("load-request-error",t)})),n.on("abort",(function(){s(Rf.INIT),l("load-abort")})),n.on("load",(function(e){r.activeLoader=null;var n=function(e){r.file=jp(e)?e:r.file,t===Pf.LIMBO&&r.serverFileReference?s(Rf.PROCESSING_COMPLETE):s(Rf.IDLE),l("load")};r.serverFileReference?n(e):i(e,n,(function(t){r.file=e,l("load-meta"),s(Rf.LOAD_ERROR),l("load-file-error",t)}))})),n.setSource(e),r.activeLoader=n,n.load())},c=function t(e,n){if(r.processingAborted)r.processingAborted=!1;else if(s(Rf.PROCESSING),o=null,r.file instanceof Blob){e.on("load",(function(t){r.transferId=null,r.serverFileReference=t})),e.on("transfer",(function(t){r.transferId=t})),e.on("load-perceived",(function(t){r.activeProcessor=null,r.transferId=null,r.serverFileReference=t,s(Rf.PROCESSING_COMPLETE),l("process-complete",t)})),e.on("start",(function(){l("process-start")})),e.on("error",(function(t){r.activeProcessor=null,s(Rf.PROCESSING_ERROR),l("process-error",t)})),e.on("abort",(function(t){r.activeProcessor=null,r.serverFileReference=t,s(Rf.IDLE),l("process-abort"),o&&o()})),e.on("progress",(function(t){l("process-progress",t)}));var i=console.error;n(r.file,(function(t){r.archived||e.process(t,Qu({},a))}),i),r.activeProcessor=e}else p.on("load",(function(){t(e,n)}))},h=function(){return new Promise((function(t){if(!r.activeProcessor)return r.processingAborted=!0,s(Rf.IDLE),l("process-abort"),void t();o=function(){t()},r.activeProcessor.abort()}))},d=function(t,e){return new Promise((function(n,i){var o=null!==r.serverFileReference?r.serverFileReference:r.transferId;null!==o?(t(o,(function(){r.serverFileReference=null,r.transferId=null,n()}),(function(t){e?(s(Rf.PROCESSING_REVERT_ERROR),l("process-revert-error"),i(t)):n()})),s(Rf.IDLE),l("process-revert")):n()}))},f=function(t,e,n){var i=t.split("."),r=i[0],o=i.pop(),s=a;i.forEach((function(t){return s=s[t]})),JSON.stringify(s[o])!==JSON.stringify(e)&&(s[o]=e,l("metadata-update",{key:r,value:a[r],silent:n}))},p=Qu(Qu({id:{get:function(){return i}},origin:{get:function(){return t},set:function(e){return t=e}},serverId:{get:function(){return r.serverFileReference}},transferId:{get:function(){return r.transferId}},status:{get:function(){return r.status}},filename:{get:function(){return r.file.name}},filenameWithoutExtension:{get:function(){return Np(r.file.name)}},fileExtension:{get:function(){return sp(r.file.name)}},fileType:{get:function(){return r.file.type}},fileSize:{get:function(){return r.file.size}},file:{get:function(){return r.file}},relativePath:{get:function(){return r.file._relativePath}},source:{get:function(){return r.source}},getMetadata:function(t){return zp(t?a[t]:a)},setMetadata:function(t,e,n){if(df(t)){var i=t;return Object.keys(i).forEach((function(t){f(t,i[t],e)})),t}return f(t,e,n),e},extend:function(t,e){return g[t]=e},abortLoad:function(){r.activeLoader?r.activeLoader.abort():(s(Rf.INIT),l("load-abort"))},retryLoad:function(){r.activeLoader&&r.activeLoader.load()},requestProcessing:function(){r.processingAborted=!1,s(Rf.PROCESSING_QUEUED)},abortProcessing:h,load:u,process:c,revert:d},Tf()),{},{freeze:function(){return r.frozen=!0},release:function(){return r.released=!0},released:{get:function(){return r.released}},archive:function(){return r.archived=!0},archived:{get:function(){return r.archived}}}),g=xd(p);return g}(v,v===Pf.INPUT?null:r,f.file);Object.keys(f.metadata||{}).forEach((function(t){y.setMetadata(t,f.metadata[t])})),Hf("DID_CREATE_ITEM",y,{query:e,dispatch:t});var b=e("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(a="before"===b?-1:n.items.length),function(t,e,n){Zd(e)||(void 0===n?t.push(e):function(t,e,n){t.splice(e,0,n)}(t,n=rp(n,0,t.length),e))}(n.items,y,a),uf(b)&&r&&$p(n,b);var x=y.id;y.on("init",(function(){t("DID_INIT_ITEM",{id:x})})),y.on("load-init",(function(){t("DID_START_ITEM_LOAD",{id:x})})),y.on("load-meta",(function(){t("DID_UPDATE_ITEM_META",{id:x})})),y.on("load-progress",(function(e){t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:x,progress:e})})),y.on("load-request-error",(function(e){var i=Up(n.options.labelFileLoadError)(e);if(e.code>=400&&e.code<500)return t("DID_THROW_ITEM_INVALID",{id:x,error:e,status:{main:i,sub:"".concat(e.code," (").concat(e.body,")")}}),void h({error:e,file:Mf(y)});t("DID_THROW_ITEM_LOAD_ERROR",{id:x,error:e,status:{main:i,sub:n.options.labelTapToRetry}})})),y.on("load-file-error",(function(e){t("DID_THROW_ITEM_INVALID",{id:x,error:e.status,status:e.status}),h({error:e.status,file:Mf(y)})})),y.on("load-abort",(function(){t("REMOVE_ITEM",{query:x})})),y.on("load-skip",(function(){t("COMPLETE_LOAD_ITEM",{query:x,item:y,data:{source:r,success:u}})})),y.on("load",(function(){var i=function(i){i?(y.on("metadata-update",(function(e){t("DID_UPDATE_ITEM_METADATA",{id:x,change:e})})),zf("SHOULD_PREPARE_OUTPUT",!1,{item:y,query:e}).then((function(i){var o=e("GET_BEFORE_PREPARE_FILE");o&&(i=o(y,i));var a=function(){t("COMPLETE_LOAD_ITEM",{query:x,item:y,data:{source:r,success:u}}),Gp(t,n)};i?t("REQUEST_PREPARE_OUTPUT",{query:x,item:y,success:function(e){t("DID_PREPARE_OUTPUT",{id:x,file:e}),a()}},!0):a()}))):t("REMOVE_ITEM",{query:x})};zf("DID_LOAD_ITEM",y,{query:e,dispatch:t}).then((function(){qp(e("GET_BEFORE_ADD_FILE"),Mf(y)).then(i)})).catch((function(e){if(!e||!e.error||!e.status)return i(!1);t("DID_THROW_ITEM_INVALID",{id:x,error:e.error,status:e.status})}))})),y.on("process-start",(function(){t("DID_START_ITEM_PROCESSING",{id:x})})),y.on("process-progress",(function(e){t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:x,progress:e})})),y.on("process-error",(function(e){t("DID_THROW_ITEM_PROCESSING_ERROR",{id:x,error:e,status:{main:Up(n.options.labelFileProcessingError)(e),sub:n.options.labelTapToRetry}})})),y.on("process-revert-error",(function(e){t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:x,error:e,status:{main:Up(n.options.labelFileProcessingRevertError)(e),sub:n.options.labelTapToRetry}})})),y.on("process-complete",(function(e){t("DID_COMPLETE_ITEM_PROCESSING",{id:x,error:null,serverFileReference:e}),t("DID_DEFINE_VALUE",{id:x,value:e})})),y.on("process-abort",(function(){t("DID_ABORT_ITEM_PROCESSING",{id:x})})),y.on("process-revert",(function(){t("DID_REVERT_ITEM_PROCESSING",{id:x}),t("DID_DEFINE_VALUE",{id:x,value:null})})),t("DID_ADD_ITEM",{id:x,index:a,interactionMethod:s}),Gp(t,n);var _=n.options.server||{},E=_.url,w=_.load,A=_.restore,D=_.fetch;y.load(r,bp(v===Pf.INPUT?nf(r)&&function(t){return(t.indexOf(":")>-1||t.indexOf("//")>-1)&&Wp(location.href)!==Wp(t)}(r)&&D?Cp(E,D):Vp:Cp(E,v===Pf.LIMBO?A:w)),(function(t,n,i){zf("LOAD_FILE",t,{query:e}).then(n).catch(i)}))}},REQUEST_PREPARE_OUTPUT:function(t){var n=t.item,i=t.success,r=t.failure,o=void 0===r?function(){}:r,a={error:Ep("error",0,"Item not found"),file:null};if(n.archived)return o(a);zf("PREPARE_OUTPUT",n.file,{query:e,item:n}).then((function(t){zf("COMPLETE_PREPARE_OUTPUT",t,{query:e,item:n}).then((function(t){if(n.archived)return o(a);i(t)}))}))},COMPLETE_LOAD_ITEM:function(i){var r=i.item,o=i.data,a=o.success,s=o.source,l=e("GET_ITEM_INSERT_LOCATION");if(uf(l)&&s&&$p(n,l),t("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===Pf.INPUT?null:s}),a(Mf(r)),r.origin!==Pf.LOCAL)return r.origin===Pf.LIMBO?(t("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:s}),void t("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||s})):void(e("IS_ASYNC")&&n.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:r.id}));t("DID_LOAD_LOCAL_ITEM",{id:r.id})},RETRY_ITEM_LOAD:Yp(n,(function(t){t.retryLoad()})),REQUEST_ITEM_PREPARE:Yp(n,(function(e,n,i){t("REQUEST_PREPARE_OUTPUT",{query:e.id,item:e,success:function(i){t("DID_PREPARE_OUTPUT",{id:e.id,file:i}),n({file:e,output:i})},failure:i},!0)})),REQUEST_ITEM_PROCESSING:Yp(n,(function(i,r,o){if(i.status===Rf.IDLE||i.status===Rf.PROCESSING_ERROR)i.status!==Rf.PROCESSING_QUEUED&&(i.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),t("PROCESS_ITEM",{query:i,success:r,failure:o},!0));else{var a=function(){return t("REQUEST_ITEM_PROCESSING",{query:i,success:r,failure:o})},s=function(){return document.hidden?a():setTimeout(a,32)};i.status===Rf.PROCESSING_COMPLETE||i.status===Rf.PROCESSING_REVERT_ERROR?i.revert(Rp(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(s).catch((function(){})):i.status===Rf.PROCESSING&&i.abortProcessing().then(s)}})),PROCESS_ITEM:Yp(n,(function(i,r,o){var a=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",Rf.PROCESSING).length!==a){if(i.status!==Rf.PROCESSING){var s=function e(){var i=n.processingQueue.shift();if(i){var r=i.id,o=i.success,a=i.failure,s=Gf(n.items,r);s&&!s.archived?t("PROCESS_ITEM",{query:r,success:o,failure:a},!0):e()}};i.onOnce("process-complete",(function(){r(Mf(i)),s();var o=n.options.server;if(n.options.instantUpload&&i.origin===Pf.LOCAL&&uf(o.remove)){var a=function(){};i.origin=Pf.LIMBO,n.options.server.remove(i.source,a,a)}e("GET_ITEMS_BY_STATUS",Rf.PROCESSING_COMPLETE).length===n.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")})),i.onOnce("process-error",(function(t){o({error:t,file:Mf(i)}),s()}));var l=n.options;i.process(Fp(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return"function"==typeof e?function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.apply(void 0,[n].concat(r,[i]))}:e&&nf(e.url)?Lp(t,e,n,i):null}(l.server.url,l.server.process,l.name,{chunkTransferId:i.transferId,chunkServer:l.server.patch,chunkUploads:l.chunkUploads,chunkForce:l.chunkForce,chunkSize:l.chunkSize,chunkRetryDelays:l.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(function(n,r,o){zf("PREPARE_OUTPUT",n,{query:e,item:i}).then((function(e){t("DID_PREPARE_OUTPUT",{id:i.id,file:e}),r(e)})).catch(o)}))}}else n.processingQueue.push({id:i.id,success:r,failure:o})})),RETRY_ITEM_PROCESSING:Yp(n,(function(e){t("REQUEST_ITEM_PROCESSING",{query:e})})),REQUEST_REMOVE_ITEM:Yp(n,(function(n){qp(e("GET_BEFORE_REMOVE_FILE"),Mf(n)).then((function(e){e&&t("REMOVE_ITEM",{query:n})}))})),RELEASE_ITEM:Yp(n,(function(t){t.release()})),REMOVE_ITEM:Yp(n,(function(i,r,o,a){var s=function(){var e=i.id;Hp(n.items,e).archive(),t("DID_REMOVE_ITEM",{error:null,id:e,item:i}),Gp(t,n),r(Mf(i))},l=n.options.server;i.origin===Pf.LOCAL&&l&&uf(l.remove)&&!1!==a.remove?(t("DID_START_ITEM_REMOVE",{id:i.id}),l.remove(i.source,(function(){return s()}),(function(e){t("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:Ep("error",0,e,null),status:{main:Up(n.options.labelFileRemoveError)(e),sub:n.options.labelTapToRetry}})}))):((a.revert&&i.origin!==Pf.LOCAL&&null!==i.serverId||n.options.chunkUploads&&i.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&i.revert(Rp(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")),s())})),ABORT_ITEM_LOAD:Yp(n,(function(t){t.abortLoad()})),ABORT_ITEM_PROCESSING:Yp(n,(function(e){e.serverId?t("REVERT_ITEM_PROCESSING",{id:e.id}):e.abortProcessing().then((function(){n.options.instantUpload&&t("REMOVE_ITEM",{query:e.id})}))})),REQUEST_REVERT_ITEM_PROCESSING:Yp(n,(function(i){if(n.options.instantUpload){var r=function(e){e&&t("REVERT_ITEM_PROCESSING",{query:i})},o=e("GET_BEFORE_REMOVE_FILE");if(!o)return r(!0);var a=o(Mf(i));return null==a?r(!0):"boolean"==typeof a?r(a):void("function"==typeof a.then&&a.then(r))}t("REVERT_ITEM_PROCESSING",{query:i})})),REVERT_ITEM_PROCESSING:Yp(n,(function(i){i.revert(Rp(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then((function(){var e=n.options.instantUpload||function(t){return!jp(t.file)}(i);e&&t("REMOVE_ITEM",{query:i.id})})).catch((function(){}))})),SET_OPTIONS:function(e){var n=e.options,i=Object.keys(n),r=Kp.filter((function(t){return i.includes(t)}));[].concat(Zu(r),Zu(Object.keys(n).filter((function(t){return!r.includes(t)})))).forEach((function(e){t("SET_".concat(yf(e,"_").toUpperCase()),{value:n[e]})}))}}},Kp=["server"],Zp=function(t){return document.createElement(t)},Jp=function(t,e){var n=t.childNodes[0];n?e!==n.nodeValue&&(n.nodeValue=e):(n=document.createTextNode(e),t.appendChild(n))},Qp=function(t,e,n,i){var r=(i%360-90)*Math.PI/180;return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}},tg=function(t,e,n,i,r){var o=1;return r>i&&r-i<=.5&&(o=0),i>r&&i-r>=.5&&(o=0),function(t,e,n,i,r,o){var a=Qp(t,e,n,r),s=Qp(t,e,n,i);return["M",a.x,a.y,"A",n,n,0,o,0,s.x,s.y].join(" ")}(t,e,n,360*Math.min(.9999,i),360*Math.min(.9999,r),o)},eg=qd({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:function(t){var e=t.root,n=t.props;n.spin=!1,n.progress=0,n.opacity=0;var i=Dd("svg");e.ref.path=Dd("path",{"stroke-width":2,"stroke-linecap":"round"}),i.appendChild(e.ref.path),e.ref.svg=i,e.appendChild(i)},write:function(t){var e=t.root,n=t.props;if(0!==n.opacity){n.align&&(e.element.dataset.align=n.align);var i=parseInt(_d(e.ref.path,"stroke-width"),10),r=.5*e.rect.element.width,o=0,a=0;n.spin?(o=0,a=.5):(o=0,a=n.progress);var s=tg(r,r,r-i,o,a);_d(e.ref.path,"d",s),_d(e.ref.path,"stroke-opacity",n.spin||n.progress>0?1:0)}},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),ng=qd({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:function(t){var e=t.root,n=t.props;e.element.innerHTML=(n.icon||"")+"<span>".concat(n.label,"</span>"),n.isDisabled=!1},write:function(t){var e=t.root,n=t.props,i=n.isDisabled,r=e.query("GET_DISABLED")||0===n.opacity;r&&!i?(n.isDisabled=!0,_d(e.element,"disabled","disabled")):!r&&i&&(n.isDisabled=!1,e.element.removeAttribute("disabled"))}}),ig=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.labelBytes,o=void 0===r?"bytes":r,a=i.labelKilobytes,s=void 0===a?"KB":a,l=i.labelMegabytes,u=void 0===l?"MB":l,c=i.labelGigabytes,h=void 0===c?"GB":c,d=n,f=n*n,p=n*n*n;return(t=Math.round(Math.abs(t)))<d?"".concat(t," ").concat(o):t<f?"".concat(Math.floor(t/d)," ").concat(s):t<p?"".concat(rg(t/f,1,e)," ").concat(u):"".concat(rg(t/p,2,e)," ").concat(h)},rg=function(t,e,n){return t.toFixed(e).split(".").filter((function(t){return"0"!==t})).join(n)},og=function(t){var e=t.root,n=t.props;Jp(e.ref.fileSize,ig(e.query("GET_ITEM_SIZE",n.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),Jp(e.ref.fileName,e.query("GET_ITEM_NAME",n.id))},ag=function(t){var e=t.root,n=t.props;sf(e.query("GET_ITEM_SIZE",n.id))?og({root:e,props:n}):Jp(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},sg=qd({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:$d({DID_LOAD_ITEM:og,DID_UPDATE_ITEM_META:og,DID_THROW_ITEM_LOAD_ERROR:ag,DID_THROW_ITEM_INVALID:ag}),didCreateView:function(t){Hf("CREATE_VIEW",Qu(Qu({},t),{},{view:t}))},create:function(t){var e=t.root,n=t.props,i=Zp("span");i.className="filepond--file-info-main",_d(i,"aria-hidden","true"),e.appendChild(i),e.ref.fileName=i;var r=Zp("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,Jp(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Jp(i,e.query("GET_ITEM_NAME",n.id))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),lg=function(t){return Math.round(100*t)},ug=function(t){var e=t.root,n=t.action,i=null===n.progress?e.query("GET_LABEL_FILE_LOADING"):"".concat(e.query("GET_LABEL_FILE_LOADING")," ").concat(lg(n.progress),"%");Jp(e.ref.main,i),Jp(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},cg=function(t){var e=t.root;Jp(e.ref.main,""),Jp(e.ref.sub,"")},hg=function(t){var e=t.root,n=t.action;Jp(e.ref.main,n.status.main),Jp(e.ref.sub,n.status.sub)},dg=qd({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:$d({DID_LOAD_ITEM:cg,DID_REVERT_ITEM_PROCESSING:cg,DID_REQUEST_ITEM_PROCESSING:function(t){var e=t.root;Jp(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),Jp(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:function(t){var e=t.root;Jp(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Jp(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:function(t){var e=t.root;Jp(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Jp(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(t){var e=t.root,n=t.action,i=null===n.progress?e.query("GET_LABEL_FILE_PROCESSING"):"".concat(e.query("GET_LABEL_FILE_PROCESSING")," ").concat(lg(n.progress),"%");Jp(e.ref.main,i),Jp(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:ug,DID_THROW_ITEM_LOAD_ERROR:hg,DID_THROW_ITEM_INVALID:hg,DID_THROW_ITEM_PROCESSING_ERROR:hg,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:hg,DID_THROW_ITEM_REMOVE_ERROR:hg}),didCreateView:function(t){Hf("CREATE_VIEW",Qu(Qu({},t),{},{view:t}))},create:function(t){var e=t.root,n=Zp("span");n.className="filepond--file-status-main",e.appendChild(n),e.ref.main=n;var i=Zp("span");i.className="filepond--file-status-sub",e.appendChild(i),e.ref.sub=i,ug({root:e,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),fg={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},pg=[];bd(fg,(function(t){pg.push(t)}));var gg,mg=function(t){if("right"===xg(t))return 0;var e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},vg=function(t){return t.ref.buttonAbortItemLoad.rect.element.width},yg=function(t){return Math.floor(t.ref.buttonRemoveItem.rect.element.height/4)},bg=function(t){return Math.floor(t.ref.buttonRemoveItem.rect.element.left/2)},xg=function(t){return t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION")},_g={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:function(t){return t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}},processProgressIndicator:{opacity:0,align:function(t){return t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Eg={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:mg},status:{translateX:mg}},wg={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Ag={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:mg},status:{translateX:mg,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:mg},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:xg},info:{translateX:mg},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:xg},buttonRemoveItem:{opacity:1},info:{translateX:mg},status:{opacity:1,translateX:mg}},DID_LOAD_ITEM:Eg,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:mg},status:{translateX:mg}},DID_START_ITEM_PROCESSING:wg,DID_REQUEST_ITEM_PROCESSING:wg,DID_UPDATE_ITEM_PROCESS_PROGRESS:wg,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:mg}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:mg},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Eg},Dg=qd({create:function(t){var e=t.root;e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Cg=$d({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function(t){var e=t.root,n=t.action;e.ref.buttonAbortItemProcessing.label=n.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function(t){var e=t.root,n=t.action;e.ref.buttonAbortItemLoad.label=n.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function(t){var e=t.root,n=t.action;e.ref.buttonAbortItemRemoval.label=n.value},DID_REQUEST_ITEM_PROCESSING:function(t){var e=t.root;e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function(t){var e=t.root;e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function(t){var e=t.root;e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function(t){var e=t.root,n=t.action;e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=n.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(t){var e=t.root,n=t.action;e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=n.progress}}),kg=qd({create:function(t){var e,n=t.root,i=t.props,r=Object.keys(fg).reduce((function(t,e){return t[e]=Qu({},fg[e]),t}),{}),o=i.id,a=n.query("GET_ALLOW_REVERT"),s=n.query("GET_ALLOW_REMOVE"),l=n.query("GET_ALLOW_PROCESS"),u=n.query("GET_INSTANT_UPLOAD"),c=n.query("IS_ASYNC"),h=n.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");c?l&&!a?e=function(t){return!/RevertItemProcessing/.test(t)}:!l&&a?e=function(t){return!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(t)}:l||a||(e=function(t){return!/Process/.test(t)}):e=function(t){return!/Process/.test(t)};var d=e?pg.filter(e):pg.concat();if(u&&a&&(r.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",r.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!a){var f=Ag.DID_COMPLETE_ITEM_PROCESSING;f.info.translateX=bg,f.info.translateY=yg,f.status.translateY=yg,f.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!l&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach((function(t){Ag[t].status.translateY=yg})),Ag.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=vg),h&&a){r.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";var p=Ag.DID_COMPLETE_ITEM_PROCESSING;p.info.translateX=mg,p.status.translateY=yg,p.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}s||(r.RemoveItem.disabled=!0),bd(r,(function(t,e){var i=n.createChildView(ng,{label:n.query(e.label),icon:n.query(e.icon),opacity:0});d.includes(t)&&n.appendChildView(i),e.disabled&&(i.element.setAttribute("disabled","disabled"),i.element.setAttribute("hidden","hidden")),i.element.dataset.align=n.query("GET_STYLE_".concat(e.align)),i.element.classList.add(e.className),i.on("click",(function(t){t.stopPropagation(),e.disabled||n.dispatch(e.action,{query:o})})),n.ref["button".concat(t)]=i})),n.ref.processingCompleteIndicator=n.appendChildView(n.createChildView(Dg)),n.ref.processingCompleteIndicator.element.dataset.align=n.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),n.ref.info=n.appendChildView(n.createChildView(sg,{id:o})),n.ref.status=n.appendChildView(n.createChildView(dg,{id:o}));var g=n.appendChildView(n.createChildView(eg,{opacity:0,align:n.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));g.element.classList.add("filepond--load-indicator"),n.ref.loadProgressIndicator=g;var m=n.appendChildView(n.createChildView(eg,{opacity:0,align:n.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));m.element.classList.add("filepond--process-indicator"),n.ref.processProgressIndicator=m,n.ref.activeStyles=[]},write:function(t){var e=t.root,n=t.actions,i=t.props;Cg({root:e,actions:n,props:i});var r=n.concat().filter((function(t){return/^DID_/.test(t.type)})).reverse().find((function(t){return Ag[t.type]}));if(r){e.ref.activeStyles=[];var o=Ag[r.type];bd(_g,(function(t,n){var i=e.ref[t];bd(n,(function(n,r){var a=o[t]&&void 0!==o[t][n]?o[t][n]:r;e.ref.activeStyles.push({control:i,key:n,value:a})}))}))}e.ref.activeStyles.forEach((function(t){var n=t.control,i=t.key,r=t.value;n[i]="function"==typeof r?r(e):r}))},didCreateView:function(t){Hf("CREATE_VIEW",Qu(Qu({},t),{},{view:t}))},name:"file"}),Sg=qd({create:function(t){var e=t.root,n=t.props;e.ref.fileName=Zp("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(kg,{id:n.id})),e.ref.data=!1},ignoreRect:!0,write:$d({DID_LOAD_ITEM:function(t){var e=t.root,n=t.props;Jp(e.ref.fileName,e.query("GET_ITEM_NAME",n.id))}}),didCreateView:function(t){Hf("CREATE_VIEW",Qu(Qu({},t),{},{view:t}))},tag:"fieldset",name:"file-wrapper"}),Tg={type:"spring",damping:.6,mass:7},Og=function(t,e,n){var i=qd({name:"panel-".concat(e.name," filepond--").concat(n),mixins:e.mixins,ignoreRectUpdate:!0}),r=t.createChildView(i,e.props);t.ref[e.name]=t.appendChildView(r)},Ig=qd({name:"panel",read:function(t){var e=t.root;return t.props.heightCurrent=e.ref.bottom.translateY},write:function(t){var e=t.root,n=t.props;if(null!==e.ref.scalable&&n.scalable===e.ref.scalable||(e.ref.scalable=!tf(n.scalable)||n.scalable,e.element.dataset.scalable=e.ref.scalable),n.height){var i=e.ref.top.rect.element,r=e.ref.bottom.rect.element,o=Math.max(i.height+r.height,n.height);e.ref.center.translateY=i.height,e.ref.center.scaleY=(o-i.height-r.height)/100,e.ref.bottom.translateY=o-r.height}},create:function(t){var e=t.root,n=t.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Tg},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Tg},styles:["translateY"]}}].forEach((function(t){Og(e,t,n.name)})),e.element.classList.add("filepond--".concat(n.name)),e.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Mg={type:"spring",stiffness:.75,damping:.45,mass:10},Lg="spring",Rg={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Pg=$d({DID_UPDATE_PANEL_HEIGHT:function(t){var e=t.root,n=t.action;e.height=n.height}}),Fg=$d({DID_GRAB_ITEM:function(t){var e=t.root;t.props.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:function(t){t.root.element.dataset.dragState="drag"},DID_DROP_ITEM:function(t){var e=t.root,n=t.props;n.dragOffset=null,n.dragOrigin=null,e.element.dataset.dragState="drop"}},(function(t){var e=t.root,n=t.actions,i=t.props,r=t.shouldOptimize;"drop"===e.element.dataset.dragState&&e.scaleX<=1&&(e.element.dataset.dragState="idle");var o=n.concat().filter((function(t){return/^DID_/.test(t.type)})).reverse().find((function(t){return Rg[t.type]}));o&&o.type!==i.currentState&&(i.currentState=o.type,e.element.dataset.filepondItemState=Rg[i.currentState]||"");var a=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");a?r||(e.height=e.rect.element.width*a):(Pg({root:e,actions:n,props:i}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height})),Ng=qd({create:function(t){var e=t.root,n=t.props;if(e.ref.handleClick=function(t){return e.dispatch("DID_ACTIVATE_ITEM",{id:n.id})},e.element.id="filepond--item-".concat(n.id),e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(Sg,{id:n.id})),e.ref.panel=e.appendChildView(e.createChildView(Ig,{name:"item-panel"})),e.ref.panel.height=null,n.markedForRemoval=!1,e.query("GET_ALLOW_REORDER")){e.element.dataset.dragState="idle";e.element.addEventListener("pointerdown",(function(t){if(t.isPrimary){var i=!1,r=t.pageX,o=t.pageY;n.dragOrigin={x:e.translateX,y:e.translateY},n.dragCenter={x:t.offsetX,y:t.offsetY};var a,s,l,u=(a=e.query("GET_ACTIVE_ITEMS"),s=a.map((function(t){return t.id})),l=void 0,{setIndex:function(t){l=t},getIndex:function(){return l},getItemIndex:function(t){return s.indexOf(t.id)}});e.dispatch("DID_GRAB_ITEM",{id:n.id,dragState:u});var c=function(t){t.isPrimary&&(t.stopPropagation(),t.preventDefault(),n.dragOffset={x:t.pageX-r,y:t.pageY-o},n.dragOffset.x*n.dragOffset.x+n.dragOffset.y*n.dragOffset.y>16&&!i&&(i=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:n.id,dragState:u}))};document.addEventListener("pointermove",c),document.addEventListener("pointerup",(function t(a){a.isPrimary&&(document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",t),n.dragOffset={x:a.pageX-r,y:a.pageY-o},e.dispatch("DID_DROP_ITEM",{id:n.id,dragState:u}),i&&setTimeout((function(){return e.element.addEventListener("click",e.ref.handleClick)}),0))}))}}))}},write:Fg,destroy:function(t){var e=t.root,n=t.props;e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:n.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Lg,scaleY:Lg,translateX:Mg,translateY:Mg,opacity:{type:"tween",duration:150}}}}),Bg=function(t,e){return Math.max(1,Math.floor((t+1)/e))},jg=function(t,e,n){if(n){var i=t.rect.element.width,r=e.length,o=null;if(0===r||n.top<e[0].rect.element.top)return-1;var a=e[0].rect.element,s=a.marginLeft+a.marginRight,l=a.width+s,u=Bg(i,l);if(1===u){for(var c=0;c<r;c++){var h=e[c],d=h.rect.outer.top+.5*h.rect.element.height;if(n.top<d)return c}return r}for(var f=a.marginTop+a.marginBottom,p=a.height+f,g=0;g<r;g++){var m=g%u*l,v=Math.floor(g/u)*p,y=v-a.marginTop,b=m+l,x=v+p+a.marginBottom;if(n.top<x&&n.top>y){if(n.left<b)return g;o=g!==r-1?g:null}}return null!==o?o:r}},zg={height:0,width:0,get getHeight(){return this.height},set setHeight(t){0!==this.height&&0!==t||(this.height=t)},get getWidth(){return this.width},set setWidth(t){0!==this.width&&0!==t||(this.width=t)},setDimensions:function(t,e){0!==this.height&&0!==t||(this.height=t),0!==this.width&&0!==e||(this.width=e)}},Hg=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=n,Date.now()>t.spawnDate&&(0===t.opacity&&Vg(t,e,n,i,r),t.scaleX=1,t.scaleY=1,t.opacity=1))},Vg=function(t,e,n,i,r){t.interactionMethod===Cf?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=n):t.interactionMethod===wf?(t.translateX=null,t.translateX=e-20*i,t.translateY=null,t.translateY=n-10*r,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===Af?(t.translateY=null,t.translateY=n-30):t.interactionMethod===Ef&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},Wg=function(t){return t.rect.element.height+.5*t.rect.element.marginBottom+.5*t.rect.element.marginTop},Ug=$d({DID_ADD_ITEM:function(t){var e=t.root,n=t.action,i=n.id,r=n.index,o=n.interactionMethod;e.ref.addIndex=r;var a=Date.now(),s=a,l=1;if(o!==Cf){l=0;var u=e.query("GET_ITEM_INSERT_INTERVAL"),c=a-e.ref.lastItemSpanwDate;s=c<u?a+(u-c):a}e.ref.lastItemSpanwDate=s,e.appendChildView(e.createChildView(Ng,{spawnDate:s,id:i,opacity:l,interactionMethod:o}),r)},DID_REMOVE_ITEM:function(t){var e=t.root,n=t.action.id,i=e.childViews.find((function(t){return t.id===n}));i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},DID_DRAG_ITEM:function(t){var e=t.root,n=t.action,i=n.id,r=n.dragState,o=e.query("GET_ITEM",{id:i}),a=e.childViews.find((function(t){return t.id===i})),s=e.childViews.length,l=r.getItemIndex(o);if(a){var u,c=a.dragOrigin.x+a.dragOffset.x+a.dragCenter.x,h=a.dragOrigin.y+a.dragOffset.y+a.dragCenter.y,d=Wg(a),f=(u=a).rect.element.width+.5*u.rect.element.marginLeft+.5*u.rect.element.marginRight,p=Math.floor(e.rect.outer.width/f);p>s&&(p=s);var g=Math.floor(s/p+1);zg.setHeight=d*g,zg.setWidth=f*p;var m={y:Math.floor(h/d),x:Math.floor(c/f),getGridIndex:function(){return h>zg.getHeight||h<0||c>zg.getWidth||c<0?l:this.y*p+this.x},getColIndex:function(){for(var t=e.query("GET_ACTIVE_ITEMS"),n=e.childViews.filter((function(t){return t.rect.element.height})),i=t.map((function(t){return n.find((function(e){return e.id===t.id}))})),r=i.findIndex((function(t){return t===a})),o=Wg(a),s=i.length,l=s,u=0,c=0,d=0,f=0;f<s;f++)if(u=Wg(i[f]),h<(c=(d=c)+u)){if(r>f){if(h<d+o){l=f;break}continue}l=f;break}return l}},v=p>1?m.getGridIndex():m.getColIndex();e.dispatch("MOVE_ITEM",{query:a,index:v});var y=r.getIndex();if(void 0===y||y!==v){if(r.setIndex(v),void 0===y)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:l,target:v})}}}}),Gg=qd({create:function(t){var e=t.root;_d(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},write:function(t){var e=t.root,n=t.props,i=t.actions,r=t.shouldOptimize;Ug({root:e,props:n,actions:i});var o=n.dragCoordinates,a=e.rect.element.width,s=e.childViews.filter((function(t){return t.rect.element.height})),l=e.query("GET_ACTIVE_ITEMS").map((function(t){return s.find((function(e){return e.id===t.id}))})).filter((function(t){return t})),u=o?jg(e,l,o):null,c=e.ref.addIndex||null;e.ref.addIndex=null;var h=0,d=0,f=0;if(0!==l.length){var p=l[0].rect.element,g=p.marginTop+p.marginBottom,m=p.marginLeft+p.marginRight,v=p.width+m,y=p.height+g,b=Bg(a,v);if(1===b){var x=0,_=0;l.forEach((function(t,e){if(u){var n=e-u;_=-2===n?.25*-g:-1===n?.75*-g:0===n?.75*g:1===n?.25*g:0}r&&(t.translateX=null,t.translateY=null),t.markedForRemoval||Hg(t,0,x+_);var i=(t.rect.element.height+g)*(t.markedForRemoval?t.opacity:1);x+=i}))}else{var E=0,w=0;l.forEach((function(t,e){e===u&&(h=1),e===c&&(f+=1),t.markedForRemoval&&t.opacity<.5&&(d-=1);var n=e+f+h+d,i=n%b,o=Math.floor(n/b),a=i*v,s=o*y,l=Math.sign(a-E),p=Math.sign(s-w);E=a,w=s,t.markedForRemoval||(r&&(t.translateX=null,t.translateY=null),Hg(t,a,s,l,p))}))}}},tag:"ul",name:"list",didWriteView:function(t){var e=t.root;e.childViews.filter((function(t){return t.markedForRemoval&&0===t.opacity&&t.resting})).forEach((function(t){t._destroy(),e.removeChildView(t)}))},filterFrameActionsForChild:function(t,e){return e.filter((function(e){return!e.data||!e.data.id||t.id===e.data.id}))},mixins:{apis:["dragCoordinates"]}}),qg=$d({DID_DRAG:function(t){var e=t.root,n=t.props,i=t.action;e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(n.dragCoordinates={left:i.position.scopeLeft-e.ref.list.rect.element.left,top:i.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},DID_END_DRAG:function(t){t.props.dragCoordinates=null}}),$g=qd({create:function(t){var e=t.root,n=t.props;e.ref.list=e.appendChildView(e.createChildView(Gg)),n.dragCoordinates=null,n.overflowing=!1},write:function(t){var e=t.root,n=t.props,i=t.actions;if(qg({root:e,props:n,actions:i}),e.ref.list.dragCoordinates=n.dragCoordinates,n.overflowing&&!n.overflow&&(n.overflowing=!1,e.element.dataset.state="",e.height=null),n.overflow){var r=Math.round(n.overflow);r!==e.height&&(n.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Yg=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";n?_d(t,e,i):t.removeAttribute(e)},Xg=function(t){var e=t.root,n=t.action;e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Yg(e.element,"accept",!!n.value,n.value?n.value.join(","):"")},Kg=function(t){var e=t.root,n=t.action;Yg(e.element,"multiple",n.value)},Zg=function(t){var e=t.root,n=t.action;Yg(e.element,"webkitdirectory",n.value)},Jg=function(t){var e=t.root,n=e.query("GET_DISABLED"),i=e.query("GET_ALLOW_BROWSE"),r=n||!i;Yg(e.element,"disabled",r)},Qg=function(t){var e=t.root;t.action.value?0===e.query("GET_TOTAL_ITEMS")&&Yg(e.element,"required",!0):Yg(e.element,"required",!1)},tm=function(t){var e=t.root,n=t.action;Yg(e.element,"capture",!!n.value,!0===n.value?"":n.value)},em=function(t){var e=t.root,n=e.element;e.query("GET_TOTAL_ITEMS")>0?(Yg(n,"required",!1),Yg(n,"name",!1)):(Yg(n,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&n.setCustomValidity(""),e.query("GET_REQUIRED")&&Yg(n,"required",!0))},nm=qd({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:function(t){var e=t.root,n=t.props;e.element.id="filepond--browser-".concat(n.id),_d(e.element,"name",e.query("GET_NAME")),_d(e.element,"aria-controls","filepond--assistant-".concat(n.id)),_d(e.element,"aria-labelledby","filepond--drop-label-".concat(n.id)),Xg({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),Kg({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),Zg({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Jg({root:e}),Qg({root:e,action:{value:e.query("GET_REQUIRED")}}),tm({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=function(t){if(e.element.value){var i=Array.from(e.element.files).map((function(t){return t._relativePath=t.webkitRelativePath,t}));setTimeout((function(){n.onload(i),function(t){if(t&&""!==t.value){try{t.value=""}catch(t){}if(t.value){var e=Zp("form"),n=t.parentNode,i=t.nextSibling;e.appendChild(t),e.reset(),i?n.insertBefore(t,i):n.appendChild(t)}}}(e.element)}),250)}},e.element.addEventListener("change",e.ref.handleChange)},destroy:function(t){var e=t.root;e.element.removeEventListener("change",e.ref.handleChange)},write:$d({DID_LOAD_ITEM:em,DID_REMOVE_ITEM:em,DID_THROW_ITEM_INVALID:function(t){var e=t.root;e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:Jg,DID_SET_ALLOW_BROWSE:Jg,DID_SET_ALLOW_DIRECTORIES_ONLY:Zg,DID_SET_ALLOW_MULTIPLE:Kg,DID_SET_ACCEPTED_FILE_TYPES:Xg,DID_SET_CAPTURE_METHOD:tm,DID_SET_REQUIRED:Qg})}),im=13,rm=32,om=function(t,e){t.innerHTML=e;var n=t.querySelector(".filepond--label-action");return n&&_d(n,"tabindex","0"),e},am=qd({name:"drop-label",ignoreRect:!0,create:function(t){var e=t.root,n=t.props,i=Zp("label");_d(i,"for","filepond--browser-".concat(n.id)),_d(i,"id","filepond--drop-label-".concat(n.id)),_d(i,"aria-hidden","true"),e.ref.handleKeyDown=function(t){(t.keyCode===im||t.keyCode===rm)&&(t.preventDefault(),e.ref.label.click())},e.ref.handleClick=function(t){t.target===i||i.contains(t.target)||e.ref.label.click()},i.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),om(i,n.caption),e.appendChild(i),e.ref.label=i},destroy:function(t){var e=t.root;e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:$d({DID_SET_LABEL_IDLE:function(t){var e=t.root,n=t.action;om(e.ref.label,n.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),sm=qd({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),lm=$d({DID_DRAG:function(t){var e=t.root,n=t.action;e.ref.blob?(e.ref.blob.translateX=n.position.scopeLeft,e.ref.blob.translateY=n.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1):function(t){var e=t.root,n=.5*e.rect.element.width,i=.5*e.rect.element.height;e.ref.blob=e.appendChildView(e.createChildView(sm,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:n,translateY:i}))}({root:e})},DID_DROP:function(t){var e=t.root;e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},DID_END_DRAG:function(t){var e=t.root;e.ref.blob&&(e.ref.blob.opacity=0)}}),um=qd({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:function(t){var e=t.root,n=t.props,i=t.actions;lm({root:e,props:n,actions:i});var r=e.ref.blob;0===i.length&&r&&0===r.opacity&&(e.removeChildView(r),e.ref.blob=null)}}),cm=function(t,e){try{var n=new DataTransfer;e.forEach((function(t){t instanceof File?n.items.add(t):n.items.add(new File([t],t.name,{type:t.type}))})),t.files=n.files}catch(t){return!1}return!0},hm=function(t,e){return t.ref.fields[e]},dm=function(t){t.query("GET_ACTIVE_ITEMS").forEach((function(e){t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])}))},fm=function(t){var e=t.root;return dm(e)},pm=$d({DID_SET_DISABLED:function(t){var e=t.root;e.element.disabled=e.query("GET_DISABLED")},DID_ADD_ITEM:function(t){var e=t.root,n=t.action,i=!(e.query("GET_ITEM",n.id).origin===Pf.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),r=Zp("input");r.type=i?"file":"hidden",r.name=e.query("GET_NAME"),r.disabled=e.query("GET_DISABLED"),e.ref.fields[n.id]=r,dm(e)},DID_LOAD_ITEM:function(t){var e=t.root,n=t.action,i=hm(e,n.id);if(i&&(null!==n.serverFileReference&&(i.value=n.serverFileReference),e.query("SHOULD_UPDATE_FILE_INPUT"))){var r=e.query("GET_ITEM",n.id);cm(i,[r.file])}},DID_REMOVE_ITEM:function(t){var e=t.root,n=t.action,i=hm(e,n.id);i&&(i.parentNode&&i.parentNode.removeChild(i),delete e.ref.fields[n.id])},DID_DEFINE_VALUE:function(t){var e=t.root,n=t.action,i=hm(e,n.id);i&&(null===n.value?i.removeAttribute("value"):i.value=n.value,dm(e))},DID_PREPARE_OUTPUT:function(t){var e=t.root,n=t.action;e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout((function(){var t=hm(e,n.id);t&&cm(t,[n.file])}),0)},DID_REORDER_ITEMS:fm,DID_SORT_ITEMS:fm}),gm=qd({tag:"fieldset",name:"data",create:function(t){return t.root.ref.fields={}},write:pm,ignoreRect:!0}),mm=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],vm=["css","csv","html","txt"],ym={zip:"zip|compressed",epub:"application/epub+zip"},bm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=t.toLowerCase(),mm.includes(t)?"image/"+("jpg"===t?"jpeg":"svg"===t?"svg+xml":t):vm.includes(t)?"text/"+t:ym[t]||""},xm=function(t){return new Promise((function(e,n){var i=Om(t);if(i.length&&!_m(t))return e(i);Em(t).then(e)}))},_m=function(t){return!!t.files&&t.files.length>0},Em=function(t){return new Promise((function(e,n){var i=(t.items?Array.from(t.items):[]).filter((function(t){return wm(t)})).map((function(t){return Am(t)}));i.length?Promise.all(i).then((function(t){var n=[];t.forEach((function(t){n.push.apply(n,t)})),e(n.filter((function(t){return t})).map((function(t){return t._relativePath||(t._relativePath=t.webkitRelativePath),t})))})).catch(console.error):e(t.files?Array.from(t.files):[])}))},wm=function(t){if(Sm(t)){var e=Tm(t);if(e)return e.isFile||e.isDirectory}return"file"===t.kind},Am=function(t){return new Promise((function(e,n){km(t)?Dm(Tm(t)).then(e).catch(n):e([t.getAsFile()])}))},Dm=function(t){return new Promise((function(e,n){var i=[],r=0,o=0,a=function(){0===o&&0===r&&e(i)};!function t(e){r++;var s=e.createReader();!function e(){s.readEntries((function(n){if(0===n.length)return r--,void a();n.forEach((function(e){e.isDirectory?t(e):(o++,e.file((function(t){var n=Cm(t);e.fullPath&&(n._relativePath=e.fullPath),i.push(n),o--,a()})))})),e()}),n)}()}(t)}))},Cm=function(t){if(t.type.length)return t;var e=t.lastModifiedDate,n=t.name,i=bm(sp(t.name));return i.length?((t=t.slice(0,t.size,i)).name=n,t.lastModifiedDate=e,t):t},km=function(t){return Sm(t)&&(Tm(t)||{}).isDirectory},Sm=function(t){return"webkitGetAsEntry"in t},Tm=function(t){return t.webkitGetAsEntry()},Om=function(t){var e=[];try{if((e=Mm(t)).length)return e;e=Im(t)}catch(t){}return e},Im=function(t){var e=t.getData("url");return"string"==typeof e&&e.length?[e]:[]},Mm=function(t){var e=t.getData("text/html");if("string"==typeof e&&e.length){var n=e.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},Lm=[],Rm=function(t){return{pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}},Pm=function(t){var e=Lm.find((function(e){return e.element===t}));if(e)return e;var n=Fm(t);return Lm.push(n),n},Fm=function(t){var e=[],n={dragenter:zm,dragover:Hm,dragleave:Wm,drop:Vm},i={};bd(n,(function(n,r){i[n]=r(t,e),t.addEventListener(n,i[n],!1)}));var r={element:t,addListener:function(o){return e.push(o),function(){e.splice(e.indexOf(o),1),0===e.length&&(Lm.splice(Lm.indexOf(r),1),bd(n,(function(e){t.removeEventListener(e,i[e],!1)})))}}};return r},Nm=function(t,e){var n,i=function(t,e){return"elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)}("getRootNode"in(n=e)?n.getRootNode():document,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return i===e||e.contains(i)},Bm=null,jm=function(t,e){try{t.dropEffect=e}catch(t){}},zm=function(t,e){return function(t){t.preventDefault(),Bm=t.target,e.forEach((function(e){var n=e.element,i=e.onenter;Nm(t,n)&&(e.state="enter",i(Rm(t)))}))}},Hm=function(t,e){return function(t){t.preventDefault();var n=t.dataTransfer;xm(n).then((function(i){var r=!1;e.some((function(e){var o=e.filterElement,a=e.element,s=e.onenter,l=e.onexit,u=e.ondrag,c=e.allowdrop;jm(n,"copy");var h=c(i);if(h)if(Nm(t,a)){if(r=!0,null===e.state)return e.state="enter",void s(Rm(t));if(e.state="over",o&&!h)return void jm(n,"none");u(Rm(t))}else o&&!r&&jm(n,"none"),e.state&&(e.state=null,l(Rm(t)));else jm(n,"none")}))}))}},Vm=function(t,e){return function(t){t.preventDefault();var n=t.dataTransfer;xm(n).then((function(n){e.forEach((function(e){var i=e.filterElement,r=e.element,o=e.ondrop,a=e.onexit,s=e.allowdrop;if(e.state=null,!i||Nm(t,r))return s(n)?void o(Rm(t),n):a(Rm(t))}))}))}},Wm=function(t,e){return function(t){Bm===t.target&&e.forEach((function(e){var n=e.onexit;e.state=null,n(Rm(t))}))}},Um=function(t,e,n){t.classList.add("filepond--hopper");var i=n.catchesDropsOnPage,r=n.requiresDropOnElement,o=n.filterItems,a=void 0===o?function(t){return t}:o,s=function(t,e,n){var i=Pm(e),r={element:t,filterElement:n,state:null,ondrop:function(){},onenter:function(){},ondrag:function(){},onexit:function(){},onload:function(){},allowdrop:function(){}};return r.destroy=i.addListener(r),r}(t,i?document.documentElement:t,r),l="",u="";s.allowdrop=function(t){return e(a(t))},s.ondrop=function(t,n){var i=a(n);e(i)?(u="drag-drop",c.onload(i,t)):c.ondragend(t)},s.ondrag=function(t){c.ondrag(t)},s.onenter=function(t){u="drag-over",c.ondragstart(t)},s.onexit=function(t){u="drag-exit",c.ondragend(t)};var c={updateHopperState:function(){l!==u&&(t.dataset.hopperState=u,l=u)},onload:function(){},ondragstart:function(){},ondrag:function(){},ondragend:function(){},destroy:function(){s.destroy()}};return c},Gm=!1,qm=[],$m=function(t){var e=document.activeElement;if(e&&/textarea|input/i.test(e.nodeName)){for(var n=!1,i=e;i!==document.body;){if(i.classList.contains("filepond--root")){n=!0;break}i=i.parentNode}if(!n)return}xm(t.clipboardData).then((function(t){t.length&&qm.forEach((function(e){return e(t)}))}))},Ym=function(){var t=function(t){e.onload(t)},e={destroy:function(){var e;e=t,Sf(qm,qm.indexOf(e)),0===qm.length&&(document.removeEventListener("paste",$m),Gm=!1)},onload:function(){}};return function(t){qm.includes(t)||(qm.push(t),Gm||(Gm=!0,document.addEventListener("paste",$m)))}(t),e},Xm=null,Km=null,Zm=[],Jm=function(t,e){t.element.textContent=e},Qm=function(t,e,n){var i=t.query("GET_TOTAL_ITEMS");Jm(t,"".concat(n," ").concat(e,", ").concat(i," ").concat(1===i?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL"))),clearTimeout(Km),Km=setTimeout((function(){!function(t){t.element.textContent=""}(t)}),1500)},tv=function(t){return t.element.parentNode.contains(document.activeElement)},ev=function(t){var e=t.root,n=t.action,i=e.query("GET_ITEM",n.id).filename,r=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Jm(e,"".concat(i," ").concat(r))},nv=function(t){var e=t.root,n=t.action,i=e.query("GET_ITEM",n.id).filename;Jm(e,"".concat(n.status.main," ").concat(i," ").concat(n.status.sub))},iv=qd({create:function(t){var e=t.root,n=t.props;e.element.id="filepond--assistant-".concat(n.id),_d(e.element,"role","status"),_d(e.element,"aria-live","polite"),_d(e.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:$d({DID_LOAD_ITEM:function(t){var e=t.root,n=t.action;if(tv(e)){e.element.textContent="";var i=e.query("GET_ITEM",n.id);Zm.push(i.filename),clearTimeout(Xm),Xm=setTimeout((function(){Qm(e,Zm.join(", "),e.query("GET_LABEL_FILE_ADDED")),Zm.length=0}),750)}},DID_REMOVE_ITEM:function(t){var e=t.root,n=t.action;if(tv(e)){var i=n.item;Qm(e,i.filename,e.query("GET_LABEL_FILE_REMOVED"))}},DID_COMPLETE_ITEM_PROCESSING:function(t){var e=t.root,n=t.action,i=e.query("GET_ITEM",n.id).filename,r=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Jm(e,"".concat(i," ").concat(r))},DID_ABORT_ITEM_PROCESSING:ev,DID_REVERT_ITEM_PROCESSING:ev,DID_THROW_ITEM_REMOVE_ERROR:nv,DID_THROW_ITEM_LOAD_ERROR:nv,DID_THROW_ITEM_INVALID:nv,DID_THROW_ITEM_PROCESSING_ERROR:nv}),tag:"span",name:"assistant"}),rv=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t.replace(new RegExp("".concat(e,"."),"g"),(function(t){return t.charAt(1).toUpperCase()}))},ov=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Date.now(),r=null;return function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];clearTimeout(r);var l=Date.now()-i,u=function(){i=Date.now(),t.apply(void 0,a)};l<e?n||(r=setTimeout(u,e-l)):u()}},av=function(t){return t.preventDefault()},sv=function(t){var e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},lv=function(t){var e=0,n=0,i=t.ref.list,r=i.childViews[0],o=r.childViews.filter((function(t){return t.rect.element.height})),a=t.query("GET_ACTIVE_ITEMS").map((function(t){return o.find((function(e){return e.id===t.id}))})).filter((function(t){return t}));if(0===a.length)return{visual:e,bounds:n};var s=r.rect.element.width,l=jg(r,a,i.dragCoordinates),u=a[0].rect.element,c=u.marginTop+u.marginBottom,h=u.marginLeft+u.marginRight,d=u.width+h,f=u.height+c,p=void 0!==l&&l>=0?1:0,g=a.find((function(t){return t.markedForRemoval&&t.opacity<.45}))?-1:0,m=a.length+p+g,v=Bg(s,d);return 1===v?a.forEach((function(t){var i=t.rect.element.height+c;n+=i,e+=i*t.opacity})):(n=Math.ceil(m/v)*f,e=n),{visual:e,bounds:n}},uv=function(t){var e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:0===e?null:e}},cv=function(t,e){var n=t.query("GET_ALLOW_REPLACE"),i=t.query("GET_ALLOW_MULTIPLE"),r=t.query("GET_TOTAL_ITEMS"),o=t.query("GET_MAX_FILES"),a=e.length;return!i&&a>1||!!(sf(o=i||n?o:1)&&r+a>o)&&(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Ep("warning",0,"Max files")}),!0)},hv=function(t,e,n){var i=t.childViews[0];return jg(i,e,{left:n.scopeLeft-i.rect.element.left,top:n.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},dv=function(t){var e=t.query("GET_ALLOW_DROP"),n=t.query("GET_DISABLED"),i=e&&!n;if(i&&!t.ref.hopper){var r=Um(t.element,(function(e){var n=t.query("GET_BEFORE_DROP_FILE")||function(){return!0};return!t.query("GET_DROP_VALIDATION")||e.every((function(e){return Hf("ALLOW_HOPPER_ITEM",e,{query:t.query}).every((function(t){return!0===t}))&&n(e)}))}),{filterItems:function(e){var n=t.query("GET_IGNORED_FILES");return e.filter((function(t){return!jp(t)||!n.includes(t.name.toLowerCase())}))},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});r.onload=function(e,n){var i=t.ref.list.childViews[0].childViews.filter((function(t){return t.rect.element.height})),r=t.query("GET_ACTIVE_ITEMS").map((function(t){return i.find((function(e){return e.id===t.id}))})).filter((function(t){return t}));zf("ADD_ITEMS",e,{dispatch:t.dispatch}).then((function(e){if(cv(t,e))return!1;t.dispatch("ADD_ITEMS",{items:e,index:hv(t.ref.list,r,n),interactionMethod:wf})})),t.dispatch("DID_DROP",{position:n}),t.dispatch("DID_END_DRAG",{position:n})},r.ondragstart=function(e){t.dispatch("DID_START_DRAG",{position:e})},r.ondrag=ov((function(e){t.dispatch("DID_DRAG",{position:e})})),r.ondragend=function(e){t.dispatch("DID_END_DRAG",{position:e})},t.ref.hopper=r,t.ref.drip=t.appendChildView(t.createChildView(um))}else!i&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},fv=function(t,e){var n=t.query("GET_ALLOW_BROWSE"),i=t.query("GET_DISABLED"),r=n&&!i;r&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView(nm,Qu(Qu({},e),{},{onload:function(e){zf("ADD_ITEMS",e,{dispatch:t.dispatch}).then((function(e){if(cv(t,e))return!1;t.dispatch("ADD_ITEMS",{items:e,index:-1,interactionMethod:Af})}))}})),0):!r&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},pv=function(t){var e=t.query("GET_ALLOW_PASTE"),n=t.query("GET_DISABLED"),i=e&&!n;i&&!t.ref.paster?(t.ref.paster=Ym(),t.ref.paster.onload=function(e){zf("ADD_ITEMS",e,{dispatch:t.dispatch}).then((function(e){if(cv(t,e))return!1;t.dispatch("ADD_ITEMS",{items:e,index:-1,interactionMethod:Df})}))}):!i&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},gv=$d({DID_SET_ALLOW_BROWSE:function(t){var e=t.root,n=t.props;fv(e,n)},DID_SET_ALLOW_DROP:function(t){var e=t.root;dv(e)},DID_SET_ALLOW_PASTE:function(t){var e=t.root;pv(e)},DID_SET_DISABLED:function(t){var e=t.root,n=t.props;dv(e),pv(e),fv(e,n),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),mv=qd({name:"root",read:function(t){var e=t.root;e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:function(t){var e=t.root,n=t.props,i=e.query("GET_ID");i&&(e.element.id=i);var r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter((function(t){return t.length})).forEach((function(t){e.element.classList.add(t)})),e.ref.label=e.appendChildView(e.createChildView(am,Qu(Qu({},n),{},{translateY:null,caption:e.query("GET_LABEL_IDLE")}))),e.ref.list=e.appendChildView(e.createChildView($g,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Ig,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(iv,Qu({},n))),e.ref.data=e.appendChildView(e.createChildView(gm,Qu({},n))),e.ref.measure=Zp("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter((function(t){return!Zd(t.value)})).map((function(t){var n=t.name,i=t.value;e.element.dataset[n]=i})),e.ref.widthPrevious=null,e.ref.widthUpdated=ov((function(){e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")}),250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];var o=window.matchMedia("(pointer: fine) and (hover: hover)").matches,a="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&a&&!o&&(e.element.addEventListener("touchmove",av,{passive:!1}),e.element.addEventListener("gesturestart",av));var s=e.query("GET_CREDITS");if(2===s.length){var l=document.createElement("a");l.className="filepond--credits",l.setAttribute("aria-hidden","true"),l.href=s[0],l.tabindex=-1,l.target="_blank",l.rel="noopener noreferrer",l.textContent=s[1],e.element.appendChild(l),e.ref.credits=l}},write:function(t){var e=t.root,n=t.props,i=t.actions;if(gv({root:e,props:n,actions:i}),i.filter((function(t){return/^DID_SET_STYLE_/.test(t.type)})).filter((function(t){return!Zd(t.data.value)})).map((function(t){var n=t.type,i=t.data,r=rv(n.substr(8).toLowerCase(),"_");e.element.dataset[r]=i.value,e.invalidateLayout()})),!e.rect.element.hidden){e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());var r=e.ref.bounds;r||(r=e.ref.bounds=uv(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);var o=e.ref,a=o.hopper,s=o.label,l=o.list,u=o.panel;a&&a.updateHopperState();var c=e.query("GET_PANEL_ASPECT_RATIO"),h=e.query("GET_ALLOW_MULTIPLE"),d=e.query("GET_TOTAL_ITEMS"),f=d===(h?e.query("GET_MAX_FILES")||1e6:1),p=i.find((function(t){return"DID_ADD_ITEM"===t.type}));if(f&&p){var g=p.data.interactionMethod;s.opacity=0,h?s.translateY=-40:g===Ef?s.translateX=40:s.translateY=g===Af?40:30}else f||(s.opacity=1,s.translateX=0,s.translateY=0);var m=sv(e),v=lv(e),y=s.rect.element.height,b=!h||f?0:y,x=f?l.rect.element.marginTop:0,_=0===d?0:l.rect.element.marginBottom,E=b+x+v.visual+_,w=b+x+v.bounds+_;if(l.translateY=Math.max(0,b-l.rect.element.marginTop)-m.top,c){var A=e.rect.element.width,D=A*c;c!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=c,e.ref.updateHistory=[]);var C=e.ref.updateHistory;C.push(A);if(C.length>4)for(var k=C.length,S=k-10,T=0,O=k;O>=S;O--)if(C[O]===C[O-2]&&T++,T>=2)return;u.scalable=!1,u.height=D;var I=D-b-(_-m.bottom)-(f?x:0);v.visual>I?l.overflow=I:l.overflow=null,e.height=D}else if(r.fixedHeight){u.scalable=!1;var M=r.fixedHeight-b-(_-m.bottom)-(f?x:0);v.visual>M?l.overflow=M:l.overflow=null}else if(r.cappedHeight){var L=E>=r.cappedHeight,R=Math.min(r.cappedHeight,E);u.scalable=!0,u.height=L?R:R-m.top-m.bottom;var P=R-b-(_-m.bottom)-(f?x:0);E>r.cappedHeight&&v.visual>P?l.overflow=P:l.overflow=null,e.height=Math.min(r.cappedHeight,w-m.top-m.bottom)}else{var F=d>0?m.top+m.bottom:0;u.scalable=!0,u.height=Math.max(y,E-F),e.height=Math.max(y,w-F)}e.ref.credits&&u.heightCurrent&&(e.ref.credits.style.transform="translateY(".concat(u.heightCurrent,"px)"))}},destroy:function(t){var e=t.root;e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",av),e.element.removeEventListener("gesturestart",av)},mixins:{styles:["height"]}}),vv=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=null,n=Wf(),i=yd(vf(n),[ip,_f(n)],[Xp,xf(n)]);i.dispatch("SET_OPTIONS",{options:t});var r=function(){document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",r);var o=null,a=!1,s=!1,l=null,u=null,c=function(){a||(a=!0),clearTimeout(o),o=setTimeout((function(){a=!1,l=null,u=null,s&&(s=!1,i.dispatch("DID_STOP_RESIZE"))}),500)};window.addEventListener("resize",c);var h=mv(i,{id:kf()}),d=!1,f=!1,p={_read:function(){a&&(u=window.innerWidth,l||(l=u),s||u===l||(i.dispatch("DID_START_RESIZE"),s=!0)),f&&d&&(d=null===h.element.offsetParent),d||(h._read(),f=h.rect.element.hidden)},_write:function(t){var e=i.processActionQueue().filter((function(t){return!/^SET_/.test(t.type)}));d&&!e.length||(y(e),d=h._write(t,e,s),Lf(i.query("GET_ITEMS")),d&&i.processDispatchQueue())}},g=function(t){return function(e){var n={type:t};if(!e)return n;if(e.hasOwnProperty("error")&&(n.error=e.error?Qu({},e.error):null),e.status&&(n.status=Qu({},e.status)),e.file&&(n.output=e.file),e.source)n.file=e.source;else if(e.item||e.id){var r=e.item?e.item:i.query("GET_ITEM",e.id);n.file=r?Mf(r):null}return e.items&&(n.items=e.items.map(Mf)),/progress/.test(t)&&(n.progress=e.progress),e.hasOwnProperty("origin")&&e.hasOwnProperty("target")&&(n.origin=e.origin,n.target=e.target),n}},m={DID_DESTROY:g("destroy"),DID_INIT:g("init"),DID_THROW_MAX_FILES:g("warning"),DID_INIT_ITEM:g("initfile"),DID_START_ITEM_LOAD:g("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:g("addfileprogress"),DID_LOAD_ITEM:g("addfile"),DID_THROW_ITEM_INVALID:[g("error"),g("addfile")],DID_THROW_ITEM_LOAD_ERROR:[g("error"),g("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[g("error"),g("removefile")],DID_PREPARE_OUTPUT:g("preparefile"),DID_START_ITEM_PROCESSING:g("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:g("processfileprogress"),DID_ABORT_ITEM_PROCESSING:g("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:g("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:g("processfiles"),DID_REVERT_ITEM_PROCESSING:g("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[g("error"),g("processfile")],DID_REMOVE_ITEM:g("removefile"),DID_UPDATE_ITEMS:g("updatefiles"),DID_ACTIVATE_ITEM:g("activatefile"),DID_REORDER_ITEMS:g("reorderfiles")},v=function(t){var e=Qu({pond:I},t);delete e.type,h.element.dispatchEvent(new CustomEvent("FilePond:".concat(t.type),{detail:e,bubbles:!0,cancelable:!0,composed:!0}));var n=[];t.hasOwnProperty("error")&&n.push(t.error),t.hasOwnProperty("file")&&n.push(t.file);var r=["type","error","file"];Object.keys(t).filter((function(t){return!r.includes(t)})).forEach((function(e){return n.push(t[e])})),I.fire.apply(I,[t.type].concat(n));var o=i.query("GET_ON".concat(t.type.toUpperCase()));o&&o.apply(void 0,n)},y=function(t){t.length&&t.filter((function(t){return m[t.type]})).forEach((function(t){var e=m[t.type];(Array.isArray(e)?e:[e]).forEach((function(e){"DID_INIT_ITEM"===t.type?v(e(t.data)):setTimeout((function(){v(e(t.data))}),0)}))}))},b=function(t){return i.dispatch("SET_OPTIONS",{options:t})},x=function(t){return i.query("GET_ACTIVE_ITEM",t)},_=function(t){return new Promise((function(e,n){i.dispatch("REQUEST_ITEM_PREPARE",{query:t,success:function(t){e(t)},failure:function(t){n(t)}})}))},E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){D([{source:t,options:e}],{index:e.index}).then((function(t){return n(t&&t[0])})).catch(i)}))},w=function(t){return t.file&&t.id},A=function(t,e){return"object"!==lc(t)||w(t)||e||(e=t,t=void 0),i.dispatch("REMOVE_ITEM",Qu(Qu({},e),{},{query:t})),null===i.query("GET_ACTIVE_ITEM",t)},D=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Promise((function(t,n){var r=[],o={};if(Kd(e[0]))r.push.apply(r,e[0]),Object.assign(o,e[1]||{});else{var a=e[e.length-1];"object"!==lc(a)||a instanceof Blob||Object.assign(o,e.pop()),r.push.apply(r,e)}i.dispatch("ADD_ITEMS",{items:r,index:o.index,interactionMethod:Ef,success:t,failure:n})}))},C=function(){return i.query("GET_ACTIVE_ITEMS")},k=function(t){return new Promise((function(e,n){i.dispatch("REQUEST_ITEM_PROCESSING",{query:t,success:function(t){e(t)},failure:function(t){n(t)}})}))},S=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=Array.isArray(e[0])?e[0]:e,r=i.length?i:C();return Promise.all(r.map(_))},T=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=Array.isArray(e[0])?e[0]:e;if(!i.length){var r=C().filter((function(t){return!(t.status===Rf.IDLE&&t.origin===Pf.LOCAL)&&t.status!==Rf.PROCESSING&&t.status!==Rf.PROCESSING_COMPLETE&&t.status!==Rf.PROCESSING_REVERT_ERROR}));return Promise.all(r.map(k))}return Promise.all(i.map(k))},O=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i,r=Array.isArray(e[0])?e[0]:e;"object"===lc(r[r.length-1])?i=r.pop():Array.isArray(e[0])&&(i=e[1]);var o=C();if(!r.length)return Promise.all(o.map((function(t){return A(t,i)})));var a=r.map((function(t){return Pd(t)?o[t]?o[t].id:null:t})).filter((function(t){return t}));return a.map((function(t){return A(t,i)}))},I=Qu(Qu(Qu(Qu({},Tf()),p),bf(i,n)),{},{setOptions:b,addFile:E,addFiles:D,getFile:x,processFile:k,prepareFile:_,removeFile:A,moveFile:function(t,e){return i.dispatch("MOVE_ITEM",{query:t,index:e})},getFiles:C,processFiles:T,removeFiles:O,prepareFiles:S,sort:function(t){return i.dispatch("SORT",{compare:t})},browse:function(){var t=h.element.querySelector("input[type=file]");t&&t.click()},destroy:function(){I.fire("destroy",h.element),i.dispatch("ABORT_ALL"),h._destroy(),window.removeEventListener("resize",c),document.removeEventListener("visibilitychange",r),i.dispatch("DID_DESTROY")},insertBefore:function(t){return Yd(h.element,t)},insertAfter:function(t){return Xd(h.element,t)},appendTo:function(t){return t.appendChild(h.element)},replaceElement:function(t){Yd(h.element,t),t.parentNode.removeChild(t),e=t},restoreElement:function(){e&&(Xd(e,h.element),h.element.parentNode.removeChild(h.element),e=null)},isAttachedTo:function(t){return h.element===t||e===t},element:{get:function(){return h.element}},status:{get:function(){return i.query("GET_STATUS")}}});return i.dispatch("DID_INIT"),xd(I)},yv=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};bd(Wf(),(function(t,n){e[t]=n[0]}));var n=vv(Qu(Qu({},e),t));return n},bv=function(t){return rv(t.replace(/^data-/,""))},xv=function t(e,n){bd(n,(function(n,i){bd(e,(function(t,r){var o=new RegExp(n);if(o.test(t)&&(delete e[t],!1!==i))if(nf(i))e[i]=r;else{var a,s=i.group;df(i)&&!e[s]&&(e[s]={}),e[s][(a=t.replace(o,""),a.charAt(0).toLowerCase()+a.slice(1))]=r}})),i.mapping&&t(e[i.group],i.mapping)}))},_v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];bd(t.attributes,(function(e){n.push(t.attributes[e])}));var i=n.filter((function(t){return t.name})).reduce((function(e,n){var i=_d(t,n.name);return e[bv(n.name)]=i===n.name||i,e}),{});return xv(i,e),i},Ev=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Hf("SET_ATTRIBUTE_TO_OPTION_MAP",n);var i=Qu({},e),r=_v("FIELDSET"===t.nodeName?t.querySelector("input[type=file]"):t,n);Object.keys(r).forEach((function(t){df(r[t])?(df(i[t])||(i[t]={}),Object.assign(i[t],r[t])):i[t]=r[t]})),i.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map((function(t){return{source:t.value,options:{type:t.dataset.type}}})));var o=yv(i);return t.files&&Array.from(t.files).forEach((function(t){o.addFile(t)})),o.replaceElement(t),o},wv=function(){return vd(arguments.length<=0?void 0:arguments[0])?Ev.apply(void 0,arguments):yv.apply(void 0,arguments)},Av=["fire","_read","_write"],Dv=function(t){var e={};return Of(t,e,Av),e},Cv=function(t,e){return t.replace(/(?:{([a-zA-Z]+)})/g,(function(t,n){return e[n]}))},kv=function(t){var e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(e),i=new Worker(n);return{transfer:function(t,e){},post:function(t,e,n){var r=kf();i.onmessage=function(t){t.data.id===r&&e(t.data.message)},i.postMessage({id:r,message:t},n)},terminate:function(){i.terminate(),URL.revokeObjectURL(n)}}},Sv=function(t){return new Promise((function(e,n){var i=new Image;i.onload=function(){e(i)},i.onerror=function(t){n(t)},i.src=t}))},Tv=function(t,e){var n=t.slice(0,t.size,t.type);return n.lastModifiedDate=t.lastModifiedDate,n.name=e,n},Ov=function(t){return Tv(t,t.name)},Iv=[],Mv=function(t){if(!Iv.includes(t)){Iv.push(t);var e,n=t({addFilter:Vf,utils:{Type:Bf,forin:bd,isString:nf,isFile:jp,toNaturalFileSize:ig,replaceInString:Cv,getExtensionFromFilename:sp,getFilenameWithoutExtension:Np,guesstimateMimeType:bm,getFileFromBlob:hp,getFilenameFromURL:ap,createRoute:$d,createWorker:kv,createView:qd,createItemAPI:Mf,loadImage:Sv,copyFile:Ov,renameFile:Tv,createBlob:dp,applyFilterChain:zf,text:Jp,getNumericAspectRatioFromString:qf},views:{fileActionButton:ng}});e=n.options,Object.assign(Uf,e)}},Lv=(gg=Od()&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window&&("supports"in(window.CSS||{})||/MSIE|Trident/.test(window.navigator.userAgent)),function(){return gg}),Rv={apps:[]},Pv=function(){},Fv={},Nv={},Bv={},jv={},zv=Pv,Hv=Pv,Vv=Pv,Wv=Pv,Uv=Pv,Gv=Pv,qv=Pv;if(Lv()){!function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,i="__framePainter";if(window[i])return window[i].readers.push(t),void window[i].writers.push(e);window[i]={readers:[t],writers:[e]};var r=window[i],o=1e3/n,a=null,s=null,l=null,u=null,c=function(){document.hidden?(l=function(){return window.setTimeout((function(){return h(performance.now())}),o)},u=function(){return window.clearTimeout(s)}):(l=function(){return window.requestAnimationFrame(h)},u=function(){return window.cancelAnimationFrame(s)})};document.addEventListener("visibilitychange",(function(){u&&u(),c(),h(performance.now())}));var h=function t(e){s=l(t),a||(a=e);var n=e-a;n<=o||(a=e-n%o,r.readers.forEach((function(t){return t()})),r.writers.forEach((function(t){return t(e)})))};c(),h(performance.now())}((function(){Rv.apps.forEach((function(t){return t._read()}))}),(function(t){Rv.apps.forEach((function(e){return e._write(t)}))}));var $v=function t(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Lv,create:zv,destroy:Hv,parse:Vv,find:Wv,registerPlugin:Uv,setOptions:qv}})),document.removeEventListener("DOMContentLoaded",t)};"loading"!==document.readyState?setTimeout((function(){return $v()}),0):document.addEventListener("DOMContentLoaded",$v);var Yv=function(){return bd(Wf(),(function(t,e){jv[t]=e[1]}))};Fv=Qu({},Yf),Bv=Qu({},Pf),Nv=Qu({},Rf),jv={},Yv(),zv=function(){var t=wv.apply(void 0,arguments);return t.on("destroy",Hv),Rv.apps.push(t),Dv(t)},Hv=function(t){var e=Rv.apps.findIndex((function(e){return e.isAttachedTo(t)}));return e>=0&&(Rv.apps.splice(e,1)[0].restoreElement(),!0)},Vv=function(t){return Array.from(t.querySelectorAll(".".concat("filepond"))).filter((function(t){return!Rv.apps.find((function(e){return e.isAttachedTo(t)}))})).map((function(t){return zv(t)}))},Wv=function(t){var e=Rv.apps.find((function(e){return e.isAttachedTo(t)}));return e?Dv(e):null},Uv=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(Mv),Yv()},Gv=function(){var t={};return bd(Wf(),(function(e,n){t[e]=n[0]})),t},qv=function(t){return df(t)&&(Rv.apps.forEach((function(e){e.setOptions(t)})),function(t){bd(t,(function(t,e){Uf[t]&&(Uf[t][0]=gf(e,Uf[t][0],Uf[t][1]))}))}(t)),Gv()}}
/*!
 * FilePondPluginFileValidateSize 2.2.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */var Xv=function(t){var e=t.addFilter,n=t.utils,i=n.Type,r=n.replaceInString,o=n.toNaturalFileSize;return e("ALLOW_HOPPER_ITEM",(function(t,e){var n=e.query;if(!n("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;var i=n("GET_MAX_FILE_SIZE");if(null!==i&&t.size>i)return!1;var r=n("GET_MIN_FILE_SIZE");return!(null!==r&&t.size<r)})),e("LOAD_FILE",(function(t,e){var n=e.query;return new Promise((function(e,i){if(!n("GET_ALLOW_FILE_SIZE_VALIDATION"))return e(t);var a=n("GET_FILE_VALIDATE_SIZE_FILTER");if(a&&!a(t))return e(t);var s=n("GET_MAX_FILE_SIZE");if(null!==s&&t.size>s)i({status:{main:n("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:r(n("GET_LABEL_MAX_FILE_SIZE"),{filesize:o(s,".",n("GET_FILE_SIZE_BASE"),n("GET_FILE_SIZE_LABELS",n))})}});else{var l=n("GET_MIN_FILE_SIZE");if(null!==l&&t.size<l)i({status:{main:n("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:r(n("GET_LABEL_MIN_FILE_SIZE"),{filesize:o(l,".",n("GET_FILE_SIZE_BASE"),n("GET_FILE_SIZE_LABELS",n))})}});else{var u=n("GET_MAX_TOTAL_FILE_SIZE");if(null!==u)if(n("GET_ACTIVE_ITEMS").reduce((function(t,e){return t+e.fileSize}),0)>u)return void i({status:{main:n("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:r(n("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:o(u,".",n("GET_FILE_SIZE_BASE"),n("GET_FILE_SIZE_LABELS",n))})}});e(t)}}}))})),{options:{allowFileSizeValidation:[!0,i.BOOLEAN],maxFileSize:[null,i.INT],minFileSize:[null,i.INT],maxTotalFileSize:[null,i.INT],fileValidateSizeFilter:[null,i.FUNCTION],labelMinFileSizeExceeded:["File is too small",i.STRING],labelMinFileSize:["Minimum file size is {filesize}",i.STRING],labelMaxFileSizeExceeded:["File is too large",i.STRING],labelMaxFileSize:["Maximum file size is {filesize}",i.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",i.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",i.STRING]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Xv}));var Kv=Xv,Zv=function(t){var e=t.addFilter,n=t.utils,i=n.Type,r=n.isString,o=n.replaceInString,a=n.guesstimateMimeType,s=n.getExtensionFromFilename,l=n.getFilenameFromURL,u=function(t,e){return t.some((function(t){return/\*$/.test(t)?(n=t,(/^[^/]+/.exec(e)||[]).pop()===n.slice(0,-2)):t===e;var n}))},c=function(t,e,n){if(0===e.length)return!0;var i=function(t){var e="";if(r(t)){var n=l(t),i=s(n);i&&(e=a(i))}else e=t.type;return e}(t);return n?new Promise((function(r,o){n(t,i).then((function(t){u(e,t)?r():o()})).catch(o)})):u(e,i)};return e("SET_ATTRIBUTE_TO_OPTION_MAP",(function(t){return Object.assign(t,{accept:"acceptedFileTypes"})})),e("ALLOW_HOPPER_ITEM",(function(t,e){var n=e.query;return!n("GET_ALLOW_FILE_TYPE_VALIDATION")||c(t,n("GET_ACCEPTED_FILE_TYPES"))})),e("LOAD_FILE",(function(t,e){var n=e.query;return new Promise((function(e,i){if(n("GET_ALLOW_FILE_TYPE_VALIDATION")){var r=n("GET_ACCEPTED_FILE_TYPES"),a=n("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),s=c(t,r,a),l=function(){var t,e=r.map((t=n("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"),function(e){return null!==t[e]&&(t[e]||e)})).filter((function(t){return!1!==t})),a=e.filter((function(t,n){return e.indexOf(t)===n}));i({status:{main:n("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:o(n("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:a.join(", "),allButLastType:a.slice(0,-1).join(", "),lastType:a[e.length-1]})}})};if("boolean"==typeof s)return s?e(t):l();s.then((function(){e(t)})).catch(l)}else e(t)}))})),{options:{allowFileTypeValidation:[!0,i.BOOLEAN],acceptedFileTypes:[[],i.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",i.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",i.STRING],fileValidateTypeLabelExpectedTypesMap:[{},i.OBJECT],fileValidateTypeDetectType:[null,i.FUNCTION]}}};
/*!
 * FilePondPluginFileValidateType 1.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Zv}));var Jv=Zv,Qv=function(t){return/^image/.test(t.type)},ty=function(t){var e=t.addFilter,n=t.utils,i=n.Type,r=n.isFile,o=n.getNumericAspectRatioFromString,a=function(t,e){return!(!Qv(t.file)||!e("GET_ALLOW_IMAGE_CROP"))},s=function(t){return"object"===lc(t)},l=function(t){return"number"==typeof t},u=function(t,e){return t.setMetadata("crop",Object.assign({},t.getMetadata("crop"),e))};return e("DID_CREATE_ITEM",(function(t,e){var n=e.query;t.extend("setImageCrop",(function(e){if(a(t,n)&&s(center))return t.setMetadata("crop",e),e})),t.extend("setImageCropCenter",(function(e){if(a(t,n)&&s(e))return u(t,{center:e})})),t.extend("setImageCropZoom",(function(e){if(a(t,n)&&l(e))return u(t,{zoom:Math.max(1,e)})})),t.extend("setImageCropRotation",(function(e){if(a(t,n)&&l(e))return u(t,{rotation:e})})),t.extend("setImageCropFlip",(function(e){if(a(t,n)&&s(e))return u(t,{flip:e})})),t.extend("setImageCropAspectRatio",(function(e){if(a(t,n)&&void 0!==e){var i=t.getMetadata("crop"),r=o(e),s={center:{x:.5,y:.5},flip:i?Object.assign({},i.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:r};return t.setMetadata("crop",s),s}}))})),e("DID_LOAD_ITEM",(function(t,e){var n=e.query;return new Promise((function(e,i){var a=t.file;if(!r(a)||!Qv(a)||!n("GET_ALLOW_IMAGE_CROP"))return e(t);if(t.getMetadata("crop"))return e(t);var s=n("GET_IMAGE_CROP_ASPECT_RATIO");t.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:s?o(s):null}),e(t)}))})),{options:{allowImageCrop:[!0,i.BOOLEAN],imageCropAspectRatio:[null,i.STRING]}}};
/*!
 * FilePondPluginImageCrop 2.0.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:ty}));var ey=ty,ny=65496,iy=65505,ry=1165519206,oy=18761,ay=274,sy=65280,ly=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.getUint16(e,n)},uy=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.getUint32(e,n)},cy="undefined"!=typeof window&&void 0!==window.document,hy=void 0,dy=cy?new Image:{};
/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */dy.onload=function(){return hy=dy.naturalWidth>dy.naturalHeight},dy.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";var fy=function(t){var e=t.addFilter,n=t.utils,i=n.Type,r=n.isFile;return e("DID_LOAD_ITEM",(function(t,e){var n=e.query;return new Promise((function(e,i){var o=t.file;if(!(r(o)&&function(t){return/^image\/jpeg/.test(t.type)}(o)&&n("GET_ALLOW_IMAGE_EXIF_ORIENTATION")&&hy))return e(t);(function(t){return new Promise((function(e,n){var i=new FileReader;i.onload=function(t){var n=new DataView(t.target.result);if(ly(n,0)===ny){for(var i=n.byteLength,r=2;r<i;){var o=ly(n,r);if(r+=2,o===iy){if(uy(n,r+=2)!==ry)break;var a=ly(n,r+=6)===oy;r+=uy(n,r+4,a);var s=ly(n,r,a);r+=2;for(var l=0;l<s;l++)if(ly(n,r+12*l,a)===ay)return void e(ly(n,r+12*l+8,a))}else{if((o&sy)!==sy)break;r+=ly(n,r)}}e(-1)}else e(-1)},i.readAsArrayBuffer(t.slice(0,65536))}))})(o).then((function(n){t.setMetadata("exif",{orientation:n}),e(t)}))}))})),{options:{allowImageExifOrientation:[!0,i.BOOLEAN]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:fy}));var py=fy,gy=function(t,e){return yy(t.x*e,t.y*e)},my=function(t,e){return yy(t.x+e.x,t.y+e.y)},vy=function(t,e,n){var i=Math.cos(e),r=Math.sin(e),o=yy(t.x-n.x,t.y-n.y);return yy(n.x+i*o.x-r*o.y,n.y+r*o.x+i*o.y)},yy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{x:t,y:e}},by=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0;return"string"==typeof t?parseFloat(t)*n:"number"==typeof t?t*(i?e[i]:Math.min(e.width,e.height)):void 0},xy=function(t){return null!=t},_y=function(t,e){return Object.keys(e).forEach((function(n){return t.setAttribute(n,e[n])}))},Ey=function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);return e&&_y(n,e),n},wy={contain:"xMidYMid meet",cover:"xMidYMid slice"},Ay={left:"start",center:"middle",right:"end"},Dy=function(t){return function(e){return Ey(t,{id:e.id})}},Cy={image:function(t){var e=Ey("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=function(){e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},rect:Dy("rect"),ellipse:Dy("ellipse"),text:Dy("text"),path:Dy("path"),line:function(t){var e=Ey("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=Ey("line");e.appendChild(n);var i=Ey("path");e.appendChild(i);var r=Ey("path");return e.appendChild(r),e}},ky={rect:function(t){return _y(t,Qu(Qu({},t.rect),t.styles))},ellipse:function(t){var e=t.rect.x+.5*t.rect.width,n=t.rect.y+.5*t.rect.height,i=.5*t.rect.width,r=.5*t.rect.height;return _y(t,Qu({cx:e,cy:n,rx:i,ry:r},t.styles))},image:function(t,e){_y(t,Qu(Qu(Qu({},t.rect),t.styles),{},{preserveAspectRatio:wy[e.fit]||"none"}))},text:function(t,e,n,i){var r=by(e.fontSize,n,i),o=e.fontFamily||"sans-serif",a=e.fontWeight||"normal",s=Ay[e.textAlign]||"start";_y(t,Qu(Qu(Qu({},t.rect),t.styles),{},{"stroke-width":0,"font-weight":a,"font-size":r,"font-family":o,"text-anchor":s})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},path:function(t,e,n,i){var r;_y(t,Qu(Qu({},t.styles),{},{fill:"none",d:(r=e.points.map((function(t){return{x:by(t.x,n,i,"width"),y:by(t.y,n,i,"height")}})),r.map((function(t,e){return"".concat(0===e?"M":"L"," ").concat(t.x," ").concat(t.y)})).join(" "))}))},line:function(t,e,n,i){_y(t,Qu(Qu(Qu({},t.rect),t.styles),{},{fill:"none"}));var r=t.childNodes[0],o=t.childNodes[1],a=t.childNodes[2],s=t.rect,l={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(_y(r,{x1:s.x,y1:s.y,x2:l.x,y2:l.y}),e.lineDecoration){o.style.display="none",a.style.display="none";var u=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?{x:0,y:0}:yy(t.x/e,t.y/e)}({x:l.x-s.x,y:l.y-s.y}),c=by(.05,n,i);if(-1!==e.lineDecoration.indexOf("arrow-begin")){var h=gy(u,c),d=my(s,h),f=vy(s,2,d),p=vy(s,-2,d);_y(o,{style:"display:block;",d:"M".concat(f.x,",").concat(f.y," L").concat(s.x,",").concat(s.y," L").concat(p.x,",").concat(p.y)})}if(-1!==e.lineDecoration.indexOf("arrow-end")){var g=gy(u,-c),m=my(l,g),v=vy(l,2,m),y=vy(l,-2,m);_y(a,{style:"display:block;",d:"M".concat(v.x,",").concat(v.y," L").concat(l.x,",").concat(l.y," L").concat(y.x,",").concat(y.y)})}}}},Sy=function(t,e,n,i,r){"path"!==e&&(t.rect=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=by(t.x,e,n,"width")||by(t.left,e,n,"width"),r=by(t.y,e,n,"height")||by(t.top,e,n,"height"),o=by(t.width,e,n,"width"),a=by(t.height,e,n,"height"),s=by(t.right,e,n,"width"),l=by(t.bottom,e,n,"height");return xy(r)||(r=xy(a)&&xy(l)?e.height-a-l:l),xy(i)||(i=xy(o)&&xy(s)?e.width-o-s:s),xy(o)||(o=xy(i)&&xy(s)?e.width-i-s:0),xy(a)||(a=xy(r)&&xy(l)?e.height-r-l:0),{x:i||0,y:r||0,width:o||0,height:a||0}}(n,i,r)),t.styles=function(t,e,n){var i=t.borderStyle||t.lineStyle||"solid",r=t.backgroundColor||t.fontColor||"transparent",o=t.borderColor||t.lineColor||"transparent",a=by(t.borderWidth||t.lineWidth,e,n);return{"stroke-linecap":t.lineCap||"round","stroke-linejoin":t.lineJoin||"round","stroke-width":a||0,"stroke-dasharray":"string"==typeof i?"":i.map((function(t){return by(t,e,n)})).join(","),stroke:o,fill:r,opacity:t.opacity||1}}(n,i,r),ky[e](t,n,i,r)},Ty=["x","y","left","top","right","bottom","width","height"],Oy=function(t){var e=rc(t,2),n=e[0],i=e[1],r=i.points?{}:Ty.reduce((function(t,e){var n;return t[e]="string"==typeof(n=i[e])&&/%/.test(n)?parseFloat(n)/100:n,t}),{});return[n,Qu(Qu({zIndex:0},i),r)]},Iy=function(t,e){return t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0},My=function(t){return t.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:function(t){var e=t.root,n=t.props;if(n.dirty){var i=n.crop,r=n.resize,o=n.markup,a=n.width,s=n.height,l=i.width,u=i.height;if(r){var c=r.size,h=c&&c.width,d=c&&c.height,f=r.mode,p=r.upscale;h&&!d&&(d=h),d&&!h&&(h=d);var g=l<h&&u<d;if(!g||g&&p){var m,v=h/l,y=d/u;if("force"===f)l=h,u=d;else"cover"===f?m=Math.max(v,y):"contain"===f&&(m=Math.min(v,y)),l*=m,u*=m}}var b={width:a,height:s};e.element.setAttribute("width",b.width),e.element.setAttribute("height",b.height);var x=Math.min(a/l,s/u);e.element.innerHTML="";var _=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");o.filter(_).map(Oy).sort(Iy).forEach((function(t){var n=rc(t,2),i=n[0],r=n[1],o=function(t,e){return Cy[t](e)}(i,r);Sy(o,i,r,b,x),e.element.appendChild(o)}))}}})},Ly=function(t,e){return{x:t,y:e}},Ry=function(t,e){return Ly(t.x-e.x,t.y-e.y)},Py=function(t,e){return Math.sqrt(function(t,e){return function(t,e){return t.x*e.x+t.y*e.y}(Ry(t,e),Ry(t,e))}(t,e))},Fy=function(t,e){var n=t,i=e,r=1.5707963267948966-e,o=Math.sin(1.5707963267948966),a=Math.sin(i),s=Math.sin(r),l=Math.cos(r),u=n/o;return Ly(l*(u*a),l*(u*s))},Ny=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.height/t.width,r=1,o=e,a=1,s=i;s>o&&(a=(s=o)/i);var l=Math.max(r/a,o/s),u=t.width/(n*l*a),c=u*e;return{width:u,height:c}},By=function(t,e,n,i){var r=i.x>.5?1-i.x:i.x,o=i.y>.5?1-i.y:i.y,a=2*r*t.width,s=2*o*t.height,l=function(t,e){var n=t.width,i=t.height,r=Fy(n,e),o=Fy(i,e),a=Ly(t.x+Math.abs(r.x),t.y-Math.abs(r.y)),s=Ly(t.x+t.width+Math.abs(o.y),t.y+Math.abs(o.x)),l=Ly(t.x-Math.abs(o.y),t.y+t.height-Math.abs(o.x));return{width:Py(a,s),height:Py(a,l)}}(e,n);return Math.max(l.width/a,l.height/s)},jy=function(t,e){var n=t.width,i=n*e;return i>t.height&&(n=(i=t.height)/e),{x:.5*(t.width-n),y:.5*(t.height-i),width:n,height:i}},zy={type:"spring",stiffness:.5,damping:.45,mass:10},Hy=function(t){return t.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function(t){var e=t.root,n=t.props;n.background&&(e.element.style.backgroundColor=n.background)},create:function(e){var n=e.root,i=e.props;n.ref.image=n.appendChildView(n.createChildView(function(t){return t.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:zy,originY:zy,scaleX:zy,scaleY:zy,translateX:zy,translateY:zy,rotateZ:zy}},create:function(e){var n=e.root,i=e.props;i.width=i.image.width,i.height=i.image.height,n.ref.bitmap=n.appendChildView(n.createChildView(function(t){return t.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:function(t){var e=t.root,n=t.props;e.appendChild(n.image)}})}(t),{image:i.image}))},write:function(t){var e=t.root,n=t.props.crop.flip,i=e.ref.bitmap;i.scaleX=n.horizontal?-1:1,i.scaleY=n.vertical?-1:1}})}(t),Object.assign({},i))),n.ref.createMarkup=function(){n.ref.markup||(n.ref.markup=n.appendChildView(n.createChildView(My(t),Object.assign({},i))))},n.ref.destroyMarkup=function(){n.ref.markup&&(n.removeChildView(n.ref.markup),n.ref.markup=null)};var r=n.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");null!==r&&(n.element.dataset.transparencyIndicator="grid"===r?r:"color")},write:function(t){var e=t.root,n=t.props,i=t.shouldOptimize,r=n.crop,o=n.markup,a=n.resize,s=n.dirty,l=n.width,u=n.height;e.ref.image.crop=r;var c={x:0,y:0,width:l,height:u,center:{x:.5*l,y:.5*u}},h={width:e.ref.image.width,height:e.ref.image.height},d={x:r.center.x*h.width,y:r.center.y*h.height},f={x:c.center.x-h.width*r.center.x,y:c.center.y-h.height*r.center.y},p=2*Math.PI+r.rotation%(2*Math.PI),g=r.aspectRatio||h.height/h.width,m=void 0===r.scaleToFit||r.scaleToFit,v=By(h,jy(c,g),p,m?r.center:{x:.5,y:.5}),y=r.zoom*v;o&&o.length?(e.ref.createMarkup(),e.ref.markup.width=l,e.ref.markup.height=u,e.ref.markup.resize=a,e.ref.markup.dirty=s,e.ref.markup.markup=o,e.ref.markup.crop=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.zoom,i=e.rotation,r=e.center,o=e.aspectRatio;o||(o=t.height/t.width);var a=Ny(t,o,n),s={x:.5*a.width,y:.5*a.height},l={x:0,y:0,width:a.width,height:a.height,center:s},u=void 0===e.scaleToFit||e.scaleToFit,c=By(t,jy(l,o),i,u?r:{x:.5,y:.5}),h=n*c;return{widthFloat:a.width/h,heightFloat:a.height/h,width:Math.round(a.width/h),height:Math.round(a.height/h)}}(h,r)):e.ref.markup&&e.ref.destroyMarkup();var b=e.ref.image;if(i)return b.originX=null,b.originY=null,b.translateX=null,b.translateY=null,b.rotateZ=null,b.scaleX=null,void(b.scaleY=null);b.originX=d.x,b.originY=d.y,b.translateX=f.x,b.translateY=f.y,b.rotateZ=p,b.scaleX=y,b.scaleY=y}})},Vy=0,Wy=function(){self.onmessage=function(t){createImageBitmap(t.data.message.file).then((function(e){self.postMessage({id:t.data.id,message:e},[e])}))}},Uy=function(){self.onmessage=function(t){for(var e=t.data.message.imageData,n=t.data.message.colorMatrix,i=e.data,r=i.length,o=n[0],a=n[1],s=n[2],l=n[3],u=n[4],c=n[5],h=n[6],d=n[7],f=n[8],p=n[9],g=n[10],m=n[11],v=n[12],y=n[13],b=n[14],x=n[15],_=n[16],E=n[17],w=n[18],A=n[19],D=0,C=0,k=0,S=0,T=0;D<r;D+=4)C=i[D]/255,k=i[D+1]/255,S=i[D+2]/255,T=i[D+3]/255,i[D]=Math.max(0,Math.min(255*(C*o+k*a+S*s+T*l+u),255)),i[D+1]=Math.max(0,Math.min(255*(C*c+k*h+S*d+T*f+p),255)),i[D+2]=Math.max(0,Math.min(255*(C*g+k*m+S*v+T*y+b),255)),i[D+3]=Math.max(0,Math.min(255*(C*x+k*_+S*E+T*w+A),255));self.postMessage({id:t.data.id,message:e},[e.data.buffer])}},Gy={1:function(){return[1,0,0,1,0,0]},2:function(t){return[-1,0,0,1,t,0]},3:function(t,e){return[-1,0,0,-1,t,e]},4:function(t,e){return[1,0,0,-1,0,e]},5:function(){return[0,1,1,0,0,0]},6:function(t,e){return[0,1,-1,0,e,0]},7:function(t,e){return[0,-1,-1,0,e,t]},8:function(t){return[0,-1,1,0,0,t]}},qy=function(t,e,n,i){e=Math.round(e),n=Math.round(n);var r=document.createElement("canvas");r.width=e,r.height=n;var o=r.getContext("2d");if(i>=5&&i<=8){var a=[n,e];e=a[0],n=a[1]}return function(t,e,n,i){-1!==i&&t.transform.apply(t,Gy[i](e,n))}(o,e,n,i),o.drawImage(t,0,0,e,n),r},$y=function(t){return/^image/.test(t.type)&&!/svg/.test(t.type)},Yy=function(t,e){return Math.floor(Math.sqrt(t/(e/4)))},Xy=function(t){var e=t.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:function(t){var e=t.root,n=t.props,i='<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">\n    <defs>\n        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">\n            <stop offset=\'50%\' stop-color=\'#000000\'/>\n            <stop offset=\'56%\' stop-color=\'#0a0a0a\'/>\n            <stop offset=\'63%\' stop-color=\'#262626\'/>\n            <stop offset=\'69%\' stop-color=\'#4f4f4f\'/>\n            <stop offset=\'75%\' stop-color=\'#808080\'/>\n            <stop offset=\'81%\' stop-color=\'#b1b1b1\'/>\n            <stop offset=\'88%\' stop-color=\'#dadada\'/>\n            <stop offset=\'94%\' stop-color=\'#f6f6f6\'/>\n            <stop offset=\'100%\' stop-color=\'#ffffff\'/>\n        </radialGradient>\n        <mask id="mask-__UID__">\n            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>\n        </mask>\n    </defs>\n    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>\n</svg>';if(document.querySelector("base")){var r=new URL(window.location.href.replace(window.location.hash,"")).href;i=i.replace(/url\(\#/g,"url("+r+"#")}Vy++,e.element.classList.add("filepond--image-preview-overlay-".concat(n.status)),e.element.innerHTML=i.replace(/__UID__/g,Vy)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),n=function(t){return t.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:zy,scaleY:zy,translateY:zy,opacity:{type:"tween",duration:400}}},create:function(e){var n=e.root,i=e.props;n.ref.clip=n.appendChildView(n.createChildView(Hy(t),{id:i.id,image:i.image,crop:i.crop,markup:i.markup,resize:i.resize,dirty:i.dirty,background:i.background}))},write:function(t){var e=t.root,n=t.props,i=t.shouldOptimize,r=e.ref.clip,o=n.image,a=n.crop,s=n.markup,l=n.resize,u=n.dirty;if(r.crop=a,r.markup=s,r.resize=l,r.dirty=u,r.opacity=i?0:1,!i&&!e.rect.element.hidden){var c=o.height/o.width,h=a.aspectRatio||c,d=e.rect.inner.width,f=e.rect.inner.height,p=e.query("GET_IMAGE_PREVIEW_HEIGHT"),g=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),m=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),v=e.query("GET_PANEL_ASPECT_RATIO"),y=e.query("GET_ALLOW_MULTIPLE");v&&!y&&(p=d*v,h=v);var b=null!==p?p:Math.max(g,Math.min(d*h,m)),x=b/h;x>d&&(b=(x=d)*h),b>f&&(b=f,x=f/h),r.width=x,r.height=b}}})}(t),i=t.utils.createWorker,r=function(t,e,n){return new Promise((function(r){t.ref.imageData||(t.ref.imageData=n.getContext("2d").getImageData(0,0,n.width,n.height));var o=function(t){var e;try{e=new ImageData(t.width,t.height)}catch(n){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(new Uint8ClampedArray(t.data)),e}(t.ref.imageData);if(!e||20!==e.length)return n.getContext("2d").putImageData(o,0,0),r();var a=i(Uy);a.post({imageData:o,colorMatrix:e},(function(t){n.getContext("2d").putImageData(t,0,0),a.terminate(),r()}),[o.data.buffer])}))},o=function(t){var e=t.root,i=t.props,r=t.image,o=i.id,a=e.query("GET_ITEM",{id:o});if(a){var s,l,u=a.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},c=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),h=!1;e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(s=a.getMetadata("markup")||[],l=a.getMetadata("resize"),h=!0);var d=e.appendChildView(e.createChildView(n,{id:o,image:r,crop:u,resize:l,markup:s,dirty:h,background:c,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),e.childViews.length);e.ref.images.push(d),d.opacity=1,d.scaleX=1,d.scaleY=1,d.translateY=0,setTimeout((function(){e.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:o})}),250)}},a=function(t){var e=t.root;e.ref.overlayShadow.opacity=1,e.ref.overlayError.opacity=0,e.ref.overlaySuccess.opacity=0},s=function(t){var e=t.root;e.ref.overlayShadow.opacity=.25,e.ref.overlayError.opacity=1};return t.utils.createView({name:"image-preview-wrapper",create:function(t){var n=t.root;n.ref.images=[],n.ref.imageData=null,n.ref.imageViewBin=[],n.ref.overlayShadow=n.appendChildView(n.createChildView(e,{opacity:0,status:"idle"})),n.ref.overlaySuccess=n.appendChildView(n.createChildView(e,{opacity:0,status:"success"})),n.ref.overlayError=n.appendChildView(n.createChildView(e,{opacity:0,status:"failure"}))},styles:["height"],apis:["height"],destroy:function(t){t.root.ref.images.forEach((function(t){t.image.width=1,t.image.height=1}))},didWriteView:function(t){t.root.ref.images.forEach((function(t){t.dirty=!1}))},write:t.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:function(t){var e=t.root,n=e.ref.images[e.ref.images.length-1];n.translateY=0,n.scaleX=1,n.scaleY=1,n.opacity=1},DID_IMAGE_PREVIEW_CONTAINER_CREATE:function(t){var e=t.root,n=t.props.id,i=e.query("GET_ITEM",n);if(i){var r,o,a,s=URL.createObjectURL(i.file);r=s,o=function(t,i){e.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:n,width:t,height:i})},(a=new Image).onload=function(){var t=a.naturalWidth,e=a.naturalHeight;a=null,o(t,e)},a.src=r}},DID_FINISH_CALCULATE_PREVIEWSIZE:function(t){var e=t.root,n=t.props,a=n.id,s=e.query("GET_ITEM",a);if(s){var l,u,c=URL.createObjectURL(s.file),h=function(){var t;(t=c,new Promise((function(e,n){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){e(i)},i.onerror=function(t){n(t)},i.src=t}))).then(d)},d=function(t){URL.revokeObjectURL(c);var i=(s.getMetadata("exif")||{}).orientation||-1,a=t.width,l=t.height;if(a&&l){if(i>=5&&i<=8){var u=[l,a];a=u[0],l=u[1]}var h=Math.max(1,.75*window.devicePixelRatio),d=e.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*h,f=l/a,p=e.rect.element.width,g=e.rect.element.height,m=p,v=m*f;f>1?v=(m=Math.min(a,p*d))*f:m=(v=Math.min(l,g*d))/f;var y=qy(t,m,v,i),b=function(){var i=e.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?function(t){var e=Math.min(10/t.width,10/t.height),n=document.createElement("canvas"),i=n.getContext("2d"),r=n.width=Math.ceil(t.width*e),o=n.height=Math.ceil(t.height*e);i.drawImage(t,0,0,r,o);var a=null;try{a=i.getImageData(0,0,r,o).data}catch(t){return null}for(var s=a.length,l=0,u=0,c=0,h=0;h<s;h+=4)l+=a[h]*a[h],u+=a[h+1]*a[h+1],c+=a[h+2]*a[h+2];return{r:l=Yy(l,s),g:u=Yy(u,s),b:c=Yy(c,s)}}(data):null;s.setMetadata("color",i,!0),"close"in t&&t.close(),e.ref.overlayShadow.opacity=1,o({root:e,props:n,image:y})},x=s.getMetadata("filter");x?r(e,x,y).then(b):b()}};if(l=s.file,((u=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./))?parseInt(u[1]):null)<=58||!("createImageBitmap"in window)||!$y(l))h();else{var f=i(Wy);f.post({file:s.file},(function(t){f.terminate(),t?d(t):h()}))}}},DID_UPDATE_ITEM_METADATA:function(t){var e=t.root,n=t.props,i=t.action;if(/crop|filter|markup|resize/.test(i.change.key)&&e.ref.images.length){var a=e.query("GET_ITEM",{id:n.id});if(a)if(/filter/.test(i.change.key)){var s=e.ref.images[e.ref.images.length-1];r(e,i.change.value,s.image)}else{if(/crop|markup|resize/.test(i.change.key)){var l=a.getMetadata("crop"),u=e.ref.images[e.ref.images.length-1];if(l&&l.aspectRatio&&u.crop&&u.crop.aspectRatio&&Math.abs(l.aspectRatio-u.crop.aspectRatio)>1e-5){var c=function(t){var e=t.root,n=e.ref.images.shift();return n.opacity=0,n.translateY=-15,e.ref.imageViewBin.push(n),n}({root:e});o({root:e,props:n,image:(h=c.image,(d=d||document.createElement("canvas")).width=h.width,d.height=h.height,d.getContext("2d").drawImage(h,0,0),d)})}else!function(t){var e=t.root,n=t.props,i=e.query("GET_ITEM",{id:n.id});if(i){var r=e.ref.images[e.ref.images.length-1];r.crop=i.getMetadata("crop"),r.background=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(r.dirty=!0,r.resize=i.getMetadata("resize"),r.markup=i.getMetadata("markup"))}}({root:e,props:n})}var h,d}}},DID_THROW_ITEM_LOAD_ERROR:s,DID_THROW_ITEM_PROCESSING_ERROR:s,DID_THROW_ITEM_INVALID:s,DID_COMPLETE_ITEM_PROCESSING:function(t){var e=t.root;e.ref.overlayShadow.opacity=.25,e.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:a,DID_REVERT_ITEM_PROCESSING:a},(function(t){var e=t.root,n=e.ref.imageViewBin.filter((function(t){return 0===t.opacity}));e.ref.imageViewBin=e.ref.imageViewBin.filter((function(t){return t.opacity>0})),n.forEach((function(t){return function(t,e){t.removeChildView(e),e.image.width=1,e.image.height=1,e._destroy()}(e,t)})),n.length=0}))})},Ky=function(t){var e=t.addFilter,n=t.utils,i=n.Type,r=n.createRoute,o=n.isFile,a=Xy(t);return e("CREATE_VIEW",(function(t){var e=t.is,n=t.view,i=t.query;if(e("file")&&i("GET_ALLOW_IMAGE_PREVIEW")){var s=function(t){t.root.ref.shouldRescale=!0};n.registerWriter(r({DID_RESIZE_ROOT:s,DID_STOP_RESIZE:s,DID_LOAD_ITEM:function(t){var e=t.root,r=t.props.id,s=i("GET_ITEM",r);if(s&&o(s.file)&&!s.archived){var l=s.file;if(function(t){return/^image/.test(t.type)}(l)&&i("GET_IMAGE_PREVIEW_FILTER_ITEM")(s)){var u="createImageBitmap"in(window||{}),c=i("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!(!u&&c&&l.size>c)){e.ref.imagePreview=n.appendChildView(n.createChildView(a,{id:r}));var h=e.query("GET_IMAGE_PREVIEW_HEIGHT");h&&e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:s.id,height:h});var d=!u&&l.size>i("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");e.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:r},d)}}}},DID_IMAGE_PREVIEW_CALCULATE_SIZE:function(t){var e=t.root,n=t.action;e.ref.imageWidth=n.width,e.ref.imageHeight=n.height,e.ref.shouldRescale=!0,e.ref.shouldDrawPreview=!0,e.dispatch("KICK")},DID_UPDATE_ITEM_METADATA:function(t){var e=t.root;"crop"===t.action.change.key&&(e.ref.shouldRescale=!0)}},(function(t){var e=t.root,n=t.props;e.ref.imagePreview&&(e.rect.element.hidden||(e.ref.shouldRescale&&(!function(t,e){if(t.ref.imagePreview){var n=e.id,i=t.query("GET_ITEM",{id:n});if(i){var r=t.query("GET_PANEL_ASPECT_RATIO"),o=t.query("GET_ITEM_PANEL_ASPECT_RATIO"),a=t.query("GET_IMAGE_PREVIEW_HEIGHT");if(!(r||o||a)){var s=t.ref,l=s.imageWidth,u=s.imageHeight;if(l&&u){var c=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),h=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),d=(i.getMetadata("exif")||{}).orientation||-1;if(d>=5&&d<=8){var f=[u,l];l=f[0],u=f[1]}if(!$y(i.file)||t.query("GET_IMAGE_PREVIEW_UPSCALE")){var p=2048/l;l*=p,u*=p}var g=u/l,m=(i.getMetadata("crop")||{}).aspectRatio||g,v=Math.max(c,Math.min(u,h)),y=t.rect.element.width,b=Math.min(y*m,v);t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i.id,height:b})}}}}}(e,n),e.ref.shouldRescale=!1),e.ref.shouldDrawPreview&&(requestAnimationFrame((function(){requestAnimationFrame((function(){e.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:n.id})}))})),e.ref.shouldDrawPreview=!1)))})))}})),{options:{allowImagePreview:[!0,i.BOOLEAN],imagePreviewFilterItem:[function(){return!0},i.FUNCTION],imagePreviewHeight:[null,i.INT],imagePreviewMinHeight:[44,i.INT],imagePreviewMaxHeight:[256,i.INT],imagePreviewMaxFileSize:[null,i.INT],imagePreviewZoomFactor:[2,i.INT],imagePreviewUpscale:[!1,i.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,i.INT],imagePreviewTransparencyIndicator:[null,i.STRING],imagePreviewCalculateAverageImageColor:[!1,i.BOOLEAN],imagePreviewMarkupShow:[!0,i.BOOLEAN],imagePreviewMarkupFilter:[function(){return!0},i.FUNCTION]}}};
/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ky}));var Zy=Ky,Jy=function(t){var e=t.addFilter,n=t.utils.Type;return e("DID_LOAD_ITEM",(function(t,e){var n=e.query;return new Promise((function(e,i){var r=t.file;if(!function(t){return/^image/.test(t.type)}(r)||!n("GET_ALLOW_IMAGE_RESIZE"))return e(t);var o=n("GET_IMAGE_RESIZE_MODE"),a=n("GET_IMAGE_RESIZE_TARGET_WIDTH"),s=n("GET_IMAGE_RESIZE_TARGET_HEIGHT"),l=n("GET_IMAGE_RESIZE_UPSCALE");if(null===a&&null===s)return e(t);var u,c,h,d=null===a?s:a,f=null===s?d:s,p=URL.createObjectURL(r);u=p,c=function(n){if(URL.revokeObjectURL(p),!n)return e(t);var i=n.width,r=n.height,a=(t.getMetadata("exif")||{}).orientation||-1;if(a>=5&&a<=8){var s=[r,i];i=s[0],r=s[1]}if(i===d&&r===f)return e(t);if(!l)if("cover"===o){if(i<=d||r<=f)return e(t)}else if(i<=d&&r<=d)return e(t);t.setMetadata("resize",{mode:o,upscale:l,size:{width:d,height:f}}),e(t)},(h=new Image).onload=function(){var t=h.naturalWidth,e=h.naturalHeight;h=null,c({width:t,height:e})},h.onerror=function(){return c(null)},h.src=u}))})),{options:{allowImageResize:[!0,n.BOOLEAN],imageResizeMode:["cover",n.STRING],imageResizeUpscale:[!0,n.BOOLEAN],imageResizeTargetWidth:[null,n.INT],imageResizeTargetHeight:[null,n.INT]}}};
/*!
 * FilePondPluginImageResize 2.0.10
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Jy}));var Qy=Jy,tb={jpeg:"jpg","svg+xml":"svg"},eb=function(t){return/^image/.test(t.type)},nb={1:function(){return[1,0,0,1,0,0]},2:function(t){return[-1,0,0,1,t,0]},3:function(t,e){return[-1,0,0,-1,t,e]},4:function(t,e){return[1,0,0,-1,0,e]},5:function(){return[0,1,1,0,0,0]},6:function(t,e){return[0,1,-1,0,e,0]},7:function(t,e){return[0,-1,-1,0,e,t]},8:function(t){return[0,-1,1,0,0,t]}},ib=function(t,e){return{x:t,y:e}},rb=function(t,e){return ib(t.x-e.x,t.y-e.y)},ob=function(t,e){return Math.sqrt(function(t,e){return function(t,e){return t.x*e.x+t.y*e.y}(rb(t,e),rb(t,e))}(t,e))},ab=function(t,e){var n=t,i=e,r=1.5707963267948966-e,o=Math.sin(1.5707963267948966),a=Math.sin(i),s=Math.sin(r),l=Math.cos(r),u=n/o;return ib(l*(u*a),l*(u*s))},sb=function(t,e){var n=t.width,i=t.height,r=ab(n,e),o=ab(i,e),a=ib(t.x+Math.abs(r.x),t.y-Math.abs(r.y)),s=ib(t.x+t.width+Math.abs(o.y),t.y+Math.abs(o.x)),l=ib(t.x-Math.abs(o.y),t.y+t.height-Math.abs(o.x));return{width:ob(a,s),height:ob(a,l)}},lb=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:.5,y:.5},r=i.x>.5?1-i.x:i.x,o=i.y>.5?1-i.y:i.y,a=2*r*t.width,s=2*o*t.height,l=sb(e,n);return Math.max(l.width/a,l.height/s)},ub=function(t,e){var n=t.width,i=n*e;return i>t.height&&(n=(i=t.height)/e),{x:.5*(t.width-n),y:.5*(t.height-i),width:n,height:i}},cb=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.height/t.width,r=1,o=e,a=1,s=i;s>o&&(a=(s=o)/i);var l=Math.max(r/a,o/s),u=t.width/(n*l*a),c=u*e;return{width:u,height:c}},hb=function(t){t.width=1,t.height=1,t.getContext("2d").clearRect(0,0,1,1)},db=function(t){return t&&(t.horizontal||t.vertical)},fb=function(t,e,n){if(e<=1&&!db(n))return t.width=t.naturalWidth,t.height=t.naturalHeight,t;var i=document.createElement("canvas"),r=t.naturalWidth,o=t.naturalHeight,a=e>=5&&e<=8;a?(i.width=o,i.height=r):(i.width=r,i.height=o);var s=i.getContext("2d");if(e&&s.transform.apply(s,function(t,e,n){return-1===n&&(n=1),nb[n](t,e)}(r,o,e)),db(n)){var l=[1,0,0,1,0,0];(!a&&n.horizontal||a&n.vertical)&&(l[0]=-1,l[4]=r),(!a&&n.vertical||a&&n.horizontal)&&(l[3]=-1,l[5]=o),s.transform.apply(s,l)}return s.drawImage(t,0,0,r,o),i},pb=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.canvasMemoryLimit,o=i.background,a=void 0===o?null:o,s=n.zoom||1,l=fb(t,e,n.flip),u={width:l.width,height:l.height},c=n.aspectRatio||u.height/u.width,h=cb(u,c,s);if(r){var d=h.width*h.height;if(d>r){var f=Math.sqrt(r)/Math.sqrt(d);u.width=Math.floor(u.width*f),u.height=Math.floor(u.height*f),h=cb(u,c,s)}}var p=document.createElement("canvas"),g={x:.5*h.width,y:.5*h.height},m={x:0,y:0,width:h.width,height:h.height,center:g},v=void 0===n.scaleToFit||n.scaleToFit,y=s*lb(u,ub(m,c),n.rotation,v?n.center:{x:.5,y:.5});p.width=Math.round(h.width/y),p.height=Math.round(h.height/y),g.x/=y,g.y/=y;var b={x:g.x-u.width*(n.center?n.center.x:.5),y:g.y-u.height*(n.center?n.center.y:.5)},x=p.getContext("2d");a&&(x.fillStyle=a,x.fillRect(0,0,p.width,p.height)),x.translate(g.x,g.y),x.rotate(n.rotation||0),x.drawImage(l,b.x-g.x,b.y-g.y,u.width,u.height);var _=x.getImageData(0,0,p.width,p.height);return hb(p),_};
/*!
 * FilePondPluginImageTransform 3.8.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */"undefined"!=typeof window&&void 0!==window.document&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){var i=this.toDataURL(e,n).split(",")[1];setTimeout((function(){for(var n=atob(i),r=n.length,o=new Uint8Array(r),a=0;a<r;a++)o[a]=n.charCodeAt(a);t(new Blob([o],{type:e||"image/png"}))}))}}));var gb=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(i){var r=n?n(t):t;Promise.resolve(r).then((function(t){t.toBlob(i,e.type,e.quality)}))}))},mb=function(t,e){return xb(t.x*e,t.y*e)},vb=function(t,e){return xb(t.x+e.x,t.y+e.y)},yb=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?{x:0,y:0}:xb(t.x/e,t.y/e)},bb=function(t,e,n){var i=Math.cos(e),r=Math.sin(e),o=xb(t.x-n.x,t.y-n.y);return xb(n.x+i*o.x-r*o.y,n.y+r*o.x+i*o.y)},xb=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{x:t,y:e}},_b=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0;return"string"==typeof t?parseFloat(t)*n:"number"==typeof t?t*(i?e[i]:Math.min(e.width,e.height)):void 0},Eb=function(t,e,n){var i=t.borderStyle||t.lineStyle||"solid",r=t.backgroundColor||t.fontColor||"transparent",o=t.borderColor||t.lineColor||"transparent",a=_b(t.borderWidth||t.lineWidth,e,n);return{"stroke-linecap":t.lineCap||"round","stroke-linejoin":t.lineJoin||"round","stroke-width":a||0,"stroke-dasharray":"string"==typeof i?"":i.map((function(t){return _b(t,e,n)})).join(","),stroke:o,fill:r,opacity:t.opacity||1}},wb=function(t){return null!=t},Ab=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=_b(t.x,e,n,"width")||_b(t.left,e,n,"width"),r=_b(t.y,e,n,"height")||_b(t.top,e,n,"height"),o=_b(t.width,e,n,"width"),a=_b(t.height,e,n,"height"),s=_b(t.right,e,n,"width"),l=_b(t.bottom,e,n,"height");return wb(r)||(r=wb(a)&&wb(l)?e.height-a-l:l),wb(i)||(i=wb(o)&&wb(s)?e.width-o-s:s),wb(o)||(o=wb(i)&&wb(s)?e.width-i-s:0),wb(a)||(a=wb(r)&&wb(l)?e.height-r-l:0),{x:i||0,y:r||0,width:o||0,height:a||0}},Db=function(t,e){return Object.keys(e).forEach((function(n){return t.setAttribute(n,e[n])}))},Cb=function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);return e&&Db(n,e),n},kb={contain:"xMidYMid meet",cover:"xMidYMid slice"},Sb={left:"start",center:"middle",right:"end"},Tb=function(t){return function(e){return Cb(t,{id:e.id})}},Ob={image:function(t){var e=Cb("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=function(){e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},rect:Tb("rect"),ellipse:Tb("ellipse"),text:Tb("text"),path:Tb("path"),line:function(t){var e=Cb("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=Cb("line");e.appendChild(n);var i=Cb("path");e.appendChild(i);var r=Cb("path");return e.appendChild(r),e}},Ib={rect:function(t){return Db(t,Qu(Qu({},t.rect),t.styles))},ellipse:function(t){var e=t.rect.x+.5*t.rect.width,n=t.rect.y+.5*t.rect.height,i=.5*t.rect.width,r=.5*t.rect.height;return Db(t,Qu({cx:e,cy:n,rx:i,ry:r},t.styles))},image:function(t,e){Db(t,Qu(Qu(Qu({},t.rect),t.styles),{},{preserveAspectRatio:kb[e.fit]||"none"}))},text:function(t,e,n,i){var r=_b(e.fontSize,n,i),o=e.fontFamily||"sans-serif",a=e.fontWeight||"normal",s=Sb[e.textAlign]||"start";Db(t,Qu(Qu(Qu({},t.rect),t.styles),{},{"stroke-width":0,"font-weight":a,"font-size":r,"font-family":o,"text-anchor":s})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},path:function(t,e,n,i){var r;Db(t,Qu(Qu({},t.styles),{},{fill:"none",d:(r=e.points.map((function(t){return{x:_b(t.x,n,i,"width"),y:_b(t.y,n,i,"height")}})),r.map((function(t,e){return"".concat(0===e?"M":"L"," ").concat(t.x," ").concat(t.y)})).join(" "))}))},line:function(t,e,n,i){Db(t,Qu(Qu(Qu({},t.rect),t.styles),{},{fill:"none"}));var r=t.childNodes[0],o=t.childNodes[1],a=t.childNodes[2],s=t.rect,l={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(Db(r,{x1:s.x,y1:s.y,x2:l.x,y2:l.y}),e.lineDecoration){o.style.display="none",a.style.display="none";var u=yb({x:l.x-s.x,y:l.y-s.y}),c=_b(.05,n,i);if(-1!==e.lineDecoration.indexOf("arrow-begin")){var h=mb(u,c),d=vb(s,h),f=bb(s,2,d),p=bb(s,-2,d);Db(o,{style:"display:block;",d:"M".concat(f.x,",").concat(f.y," L").concat(s.x,",").concat(s.y," L").concat(p.x,",").concat(p.y)})}if(-1!==e.lineDecoration.indexOf("arrow-end")){var g=mb(u,-c),m=vb(l,g),v=bb(l,2,m),y=bb(l,-2,m);Db(a,{style:"display:block;",d:"M".concat(v.x,",").concat(v.y," L").concat(l.x,",").concat(l.y," L").concat(y.x,",").concat(y.y)})}}}},Mb=function(t,e){return Ob[t](e)},Lb=function(t,e,n,i,r){"path"!==e&&(t.rect=Ab(n,i,r)),t.styles=Eb(n,i,r),Ib[e](t,n,i,r)},Rb=function(t,e){return t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0},Pb=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return new Promise((function(r){var o=i.background,a=void 0===o?null:o,s=new FileReader;s.onloadend=function(){var t=s.result,i=document.createElement("div");i.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",i.innerHTML=t;var o=i.querySelector("svg");document.body.appendChild(i);var l=o.getBBox();i.parentNode.removeChild(i);var u=i.querySelector("title"),c=o.getAttribute("viewBox")||"",h=o.getAttribute("width")||"",d=o.getAttribute("height")||"",f=parseFloat(h)||null,p=parseFloat(d)||null,g=(h.match(/[a-z]+/)||[])[0]||"",m=(d.match(/[a-z]+/)||[])[0]||"",v=c.split(" ").map(parseFloat),y=v.length?{x:v[0],y:v[1],width:v[2],height:v[3]}:l,b=null!=f?f:y.width,x=null!=p?p:y.height;o.style.overflow="visible",o.setAttribute("width",b),o.setAttribute("height",x);var _="";if(n&&n.length){var E={width:b,height:x};_=n.sort(Rb).reduce((function(t,e){var n=Mb(e[0],e[1]);return Lb(n,e[0],e[1],E),n.removeAttribute("id"),1===n.getAttribute("opacity")&&n.removeAttribute("opacity"),t+"\n"+n.outerHTML+"\n"}),""),_="\n\n<g>".concat(_.replace(/&nbsp;/g," "),"</g>\n\n")}var w=e.aspectRatio||x/b,A=b,D=A*w,C=void 0===e.scaleToFit||e.scaleToFit,k=e.center?e.center.x:.5,S=e.center?e.center.y:.5,T=lb({width:b,height:x},ub({width:A,height:D},w),e.rotation,C?{x:k,y:S}:{x:.5,y:.5}),O=e.zoom*T,I=e.rotation*(180/Math.PI),M={x:.5*A,y:.5*D},L={x:M.x-b*k,y:M.y-x*S},R=["rotate(".concat(I," ").concat(M.x," ").concat(M.y,")"),"translate(".concat(M.x," ").concat(M.y,")"),"scale(".concat(O,")"),"translate(".concat(-M.x," ").concat(-M.y,")"),"translate(".concat(L.x," ").concat(L.y,")")],P=e.flip&&e.flip.horizontal,F=e.flip&&e.flip.vertical,N=["scale(".concat(P?-1:1," ").concat(F?-1:1,")"),"translate(".concat(P?-b:0," ").concat(F?-x:0,")")],B='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="'.concat(A).concat(g,'" height="').concat(D).concat(m,'" \nviewBox="0 0 ').concat(A," ").concat(D,'" ').concat(a?'style="background:'+a+'" ':"",'\npreserveAspectRatio="xMinYMin"\nxmlns:xlink="http://www.w3.org/1999/xlink"\nxmlns="http://www.w3.org/2000/svg">\n\x3c!-- Generated by PQINA - https://pqina.nl/ --\x3e\n<title>').concat(u?u.textContent:"",'</title>\n<g transform="').concat(R.join(" "),'">\n<g transform="').concat(N.join(" "),'">\n').concat(o.outerHTML).concat(_,"\n</g>\n</g>\n</svg>");r(B)},s.readAsText(t)}))},Fb=function(t){var e;try{e=new ImageData(t.width,t.height)}catch(n){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},Nb=function(){var t={resize:function(t,e){var i=e.mode,a=void 0===i?"contain":i,s=e.upscale,l=void 0!==s&&s,u=e.width,c=e.height,h=e.matrix;if(h=!h||r(h)?null:h,!u&&!c)return o(t,h);null===u?u=c:null===c&&(c=u);if("force"!==a){var d=u/t.width,f=c/t.height,p=1;if("cover"===a?p=Math.max(d,f):"contain"===a&&(p=Math.min(d,f)),p>1&&!1===l)return o(t,h);u=t.width*p,c=t.height*p}for(var g=t.width,m=t.height,v=Math.round(u),y=Math.round(c),b=t.data,x=new Uint8ClampedArray(v*y*4),_=g/v,E=m/y,w=Math.ceil(.5*_),A=Math.ceil(.5*E),D=0;D<y;D++)for(var C=0;C<v;C++){for(var k=4*(C+D*v),S=0,T=0,O=0,I=0,M=0,L=0,R=0,P=(D+.5)*E,F=Math.floor(D*E);F<(D+1)*E;F++)for(var N=Math.abs(P-(F+.5))/A,B=(C+.5)*_,j=N*N,z=Math.floor(C*_);z<(C+1)*_;z++){var H=Math.abs(B-(z+.5))/w,V=Math.sqrt(j+H*H);if(V>=-1&&V<=1&&(S=2*V*V*V-3*V*V+1)>0){var W=b[(H=4*(z+F*g))+3];R+=S*W,O+=S,W<255&&(S=S*W/250),I+=S*b[H],M+=S*b[H+1],L+=S*b[H+2],T+=S}}x[k]=I/T,x[k+1]=M/T,x[k+2]=L/T,x[k+3]=R/O,h&&n(k,x,h)}return{data:x,width:v,height:y}},filter:o},e=function(e,n){var i=e.transforms,r=null;if(i.forEach((function(t){"filter"===t.type&&(r=t)})),r){var o=null;i.forEach((function(t){"resize"===t.type&&(o=t)})),o&&(o.data.matrix=r.data,i=i.filter((function(t){return"filter"!==t.type})))}n(function(e,n){return e.forEach((function(e){n=t[e.type](n,e.data)})),n}(i,e.imageData))};self.onmessage=function(t){e(t.data.message,(function(e){self.postMessage({id:t.data.id,message:e},[e.data.buffer])}))};function n(t,e,n){var i=e[t]/255,r=e[t+1]/255,o=e[t+2]/255,a=e[t+3]/255,s=i*n[0]+r*n[1]+o*n[2]+a*n[3]+n[4],l=i*n[5]+r*n[6]+o*n[7]+a*n[8]+n[9],u=i*n[10]+r*n[11]+o*n[12]+a*n[13]+n[14],c=i*n[15]+r*n[16]+o*n[17]+a*n[18]+n[19],h=Math.max(0,s*c)+1*(1-c),d=Math.max(0,l*c)+1*(1-c),f=Math.max(0,u*c)+1*(1-c);e[t]=255*Math.max(0,Math.min(1,h)),e[t+1]=255*Math.max(0,Math.min(1,d)),e[t+2]=255*Math.max(0,Math.min(1,f))}var i=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function r(t){return self.JSON.stringify(t||[])===i}function o(t,e){if(!e||r(e))return t;for(var n=t.data,i=n.length,o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7],f=e[8],p=e[9],g=e[10],m=e[11],v=e[12],y=e[13],b=e[14],x=e[15],_=e[16],E=e[17],w=e[18],A=e[19],D=0,C=0,k=0,S=0,T=0,O=0,I=0,M=0,L=0,R=0,P=0,F=0;D<i;D+=4)O=(C=n[D]/255)*o+(k=n[D+1]/255)*a+(S=n[D+2]/255)*s+(T=n[D+3]/255)*l+u,I=C*c+k*h+S*d+T*f+p,M=C*g+k*m+S*v+T*y+b,L=C*x+k*_+S*E+T*w+A,R=Math.max(0,O*L)+1*(1-L),P=Math.max(0,I*L)+1*(1-L),F=Math.max(0,M*L)+1*(1-L),n[D]=255*Math.max(0,Math.min(1,R)),n[D+1]=255*Math.max(0,Math.min(1,P)),n[D+2]=255*Math.max(0,Math.min(1,F));return t}},Bb=function(t,e){if(1165519206===t.getUint32(e+4,!1)){e+=4;var n=18761===t.getUint16(e+=6,!1);e+=t.getUint32(e+4,n);var i=t.getUint16(e,n);e+=2;for(var r=0;r<i;r++)if(274===t.getUint16(e+12*r,n))return t.setUint16(e+12*r+8,1,n),!0;return!1}},jb=function(t){return new Promise((function(e){var n=new FileReader;n.onload=function(){return e(function(t){var e=new DataView(t);if(65496!==e.getUint16(0))return null;for(var n,i,r=2,o=!1;r<e.byteLength&&(n=e.getUint16(r,!1),i=e.getUint16(r+2,!1)+2,n>=65504&&n<=65519||65534===n)&&(o||(o=Bb(e,r)),!(r+i>e.byteLength));)r+=i;return t.slice(0,r)}(n.result)||null)},n.readAsArrayBuffer(t.slice(0,262144))}))},zb=function(t,e){var n=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(n){var i=new n;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},Hb=function(t){var e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(e),i=new Worker(n),r=[];return{transfer:function(){},post:function(t,e,n){var o=Math.random().toString(36).substr(2,9);r[o]=e,i.onmessage=function(t){var e=r[t.data.id];e&&(e(t.data.message),delete r[t.data.id])},i.postMessage({id:o,message:t},n)},terminate:function(){i.terminate(),URL.revokeObjectURL(n)}}},Vb=function(t){return new Promise((function(e,n){var i=new Image;i.onload=function(){e(i)},i.onerror=function(t){n(t)},i.src=t}))},Wb=function(t,e){return new Promise((function(n){var i,r={width:t.width,height:t.height},o=t.getContext("2d"),a=e.sort(Rb).map((function(t){return function(){return new Promise((function(e){qb[t[0]](o,r,t[1],e)&&e()}))}}));(i=a,i.reduce((function(t,e){return t.then((function(t){return e().then(Array.prototype.concat.bind(t))}))}),Promise.resolve([]))).then((function(){return n(t)}))}))},Ub=function(t,e){t.beginPath(),t.lineCap=e["stroke-linecap"],t.lineJoin=e["stroke-linejoin"],t.lineWidth=e["stroke-width"],e["stroke-dasharray"].length&&t.setLineDash(e["stroke-dasharray"].split(",")),t.fillStyle=e.fill,t.strokeStyle=e.stroke,t.globalAlpha=e.opacity||1},Gb=function(t){t.fill(),t.stroke(),t.globalAlpha=1},qb={rect:function(t,e,n){var i=Ab(n,e),r=Eb(n,e);return Ub(t,r),t.rect(i.x,i.y,i.width,i.height),Gb(t),!0},ellipse:function(t,e,n){var i=Ab(n,e),r=Eb(n,e);Ub(t,r);var o=i.x,a=i.y,s=i.width,l=i.height,u=.5522848,c=s/2*u,h=l/2*u,d=o+s,f=a+l,p=o+s/2,g=a+l/2;return t.moveTo(o,g),t.bezierCurveTo(o,g-h,p-c,a,p,a),t.bezierCurveTo(p+c,a,d,g-h,d,g),t.bezierCurveTo(d,g+h,p+c,f,p,f),t.bezierCurveTo(p-c,f,o,g+h,o,g),Gb(t),!0},image:function(t,e,n,i){var r=Ab(n,e),o=Eb(n,e);Ub(t,o);var a=new Image;new URL(n.src,window.location.href).origin!==window.location.origin&&(a.crossOrigin=""),a.onload=function(){if("cover"===n.fit){var e=r.width/r.height,o=e>1?a.width:a.height*e,s=e>1?a.width/e:a.height,l=.5*a.width-.5*o,u=.5*a.height-.5*s;t.drawImage(a,l,u,o,s,r.x,r.y,r.width,r.height)}else if("contain"===n.fit){var c=Math.min(r.width/a.width,r.height/a.height),h=c*a.width,d=c*a.height,f=r.x+.5*r.width-.5*h,p=r.y+.5*r.height-.5*d;t.drawImage(a,0,0,a.width,a.height,f,p,h,d)}else t.drawImage(a,0,0,a.width,a.height,r.x,r.y,r.width,r.height);Gb(t),i()},a.src=n.src},text:function(t,e,n){var i=Ab(n,e),r=Eb(n,e);Ub(t,r);var o=_b(n.fontSize,e),a=n.fontFamily||"sans-serif",s=n.fontWeight||"normal",l=n.textAlign||"left";return t.font="".concat(s," ").concat(o,"px ").concat(a),t.textAlign=l,t.fillText(n.text,i.x,i.y),Gb(t),!0},line:function(t,e,n){var i=Ab(n,e),r=Eb(n,e);Ub(t,r),t.beginPath();var o={x:i.x,y:i.y},a={x:i.x+i.width,y:i.y+i.height};t.moveTo(o.x,o.y),t.lineTo(a.x,a.y);var s=yb({x:a.x-o.x,y:a.y-o.y}),l=.04*Math.min(e.width,e.height);if(-1!==n.lineDecoration.indexOf("arrow-begin")){var u=mb(s,l),c=vb(o,u),h=bb(o,2,c),d=bb(o,-2,c);t.moveTo(h.x,h.y),t.lineTo(o.x,o.y),t.lineTo(d.x,d.y)}if(-1!==n.lineDecoration.indexOf("arrow-end")){var f=mb(s,-l),p=vb(a,f),g=bb(a,2,p),m=bb(a,-2,p);t.moveTo(g.x,g.y),t.lineTo(a.x,a.y),t.lineTo(m.x,m.y)}return Gb(t),!0},path:function(t,e,n){var i=Eb(n,e);Ub(t,i),t.beginPath();var r=n.points.map((function(t){return{x:_b(t.x,e,1,"width"),y:_b(t.y,e,1,"height")}}));t.moveTo(r[0].x,r[0].y);for(var o=r.length,a=1;a<o;a++)t.lineTo(r[a].x,r[a].y);return Gb(t),!0}},$b=function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t,0,0),e},Yb=["x","y","left","top","right","bottom","width","height"],Xb=function(t){var e=rc(t,2),n=e[0],i=e[1],r=i.points?{}:Yb.reduce((function(t,e){var n;return t[e]="string"==typeof(n=i[e])&&/%/.test(n)?parseFloat(n)/100:n,t}),{});return[n,Qu(Qu({zIndex:0},i),r)]};"undefined"!=typeof window&&void 0!==window.document&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){var i=this;setTimeout((function(){for(var r=i.toDataURL(e,n).split(",")[1],o=atob(r),a=o.length,s=new Uint8Array(a);a--;)s[a]=o.charCodeAt(a);t(new Blob([s],{type:e||"image/png"}))}))}}));var Kb="undefined"!=typeof window&&void 0!==window.document,Zb=Kb&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Jb=function(t){var e=t.addFilter,n=t.utils,i=n.Type,r=n.forin,o=n.getFileFromBlob,a=n.isFile,s=["crop","resize","filter","markup","output"],l=function(t){return null===t.aspectRatio&&0===t.rotation&&1===t.zoom&&t.center&&.5===t.center.x&&.5===t.center.y&&t.flip&&!1===t.flip.horizontal&&!1===t.flip.vertical};e("SHOULD_PREPARE_OUTPUT",(function(t,e){var n=e.query;return new Promise((function(t){t(!n("IS_ASYNC"))}))}));var u=function(t,e,n){return new Promise((function(i){if(!t("GET_ALLOW_IMAGE_TRANSFORM")||n.archived||!a(e)||!function(t){return/^image/.test(t.type)}(e))return i(!1);(function(t){return new Promise((function(e,n){var i=new Image;i.src=URL.createObjectURL(t);var r=function(){var t=i.naturalWidth,n=i.naturalHeight;t&&n&&(URL.revokeObjectURL(i.src),clearInterval(o),e({width:t,height:n}))};i.onerror=function(t){URL.revokeObjectURL(i.src),clearInterval(o),n(t)};var o=setInterval(r,1);r()}))})(e).then((function(){var n=t("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(n){var r=n(e);if(null==r)return handleRevert(!0);if("boolean"==typeof r)return i(r);if("function"==typeof r.then)return r.then(i)}i(!0)})).catch((function(t){i(!1)}))}))};return e("DID_CREATE_ITEM",(function(t,e){var n=e.query,i=e.dispatch;n("GET_ALLOW_IMAGE_TRANSFORM")&&t.extend("requestPrepare",(function(){return new Promise((function(e,n){i("REQUEST_PREPARE_OUTPUT",{query:t.id,item:t,success:e,failure:n},!0)}))}))})),e("PREPARE_OUTPUT",(function(t,e){var n=e.query,i=e.item;return new Promise((function(e){u(n,t,i).then((function(a){if(!a)return e(t);var u=[];n("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&u.push((function(){return new Promise((function(e){e({name:n("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:t})}))})),n("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&u.push((function(t,e,i){return new Promise((function(r){t(e,i).then((function(t){return r({name:n("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:t})}))}))}));var c=n("GET_IMAGE_TRANSFORM_VARIANTS")||{};r(c,(function(t,e){var n,i=(n=e,function(t,e,i){return t(e,n?n(i):i)});u.push((function(e,n,r){return new Promise((function(o){i(e,n,r).then((function(e){return o({name:t,file:e})}))}))}))}));var h=n("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),d=n("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),f=null===h?null:h/100,p=n("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),g=n("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||s;i.setMetadata("output",{type:p,quality:f,client:g},!0);var m=function(t,e){return new Promise((function(i,r){var a=Qu({},e);Object.keys(a).filter((function(t){return"exif"!==t})).forEach((function(t){-1===g.indexOf(t)&&delete a[t]}));var s=a.resize,u=a.exif,c=a.output,h=a.crop,f=a.filter,p=a.markup,m={image:{orientation:u?u.orientation:null},output:c&&(c.type||"number"==typeof c.quality||c.background)?{type:c.type,quality:"number"==typeof c.quality?100*c.quality:null,background:c.background||n("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:s&&(s.size.width||s.size.height)?Qu({mode:s.mode,upscale:s.upscale},s.size):void 0,crop:h&&!l(h)?Qu({},h):void 0,markup:p&&p.length?p.map(Xb):[],filter:f};if(m.output){var v=!!c.type&&c.type!==t.type,y=/\/jpe?g$/.test(t.type),b=null!==c.quality&&(y&&"always"===d);if(!!!(m.size||m.crop||m.filter||v||b))return i(t)}var x={beforeCreateBlob:n("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:n("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:n("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:n("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};(function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(i,r){if(!t||!eb(t))return r({status:"not an image file",file:t});var o=n.stripImageHead,a=n.beforeCreateBlob,s=n.afterCreateBlob,l=n.canvasMemoryLimit,u=e.crop,c=e.size,h=e.filter,d=e.markup,f=e.output,p=e.image&&e.image.orientation?Math.max(1,Math.min(8,e.image.orientation)):null,g=f&&f.quality,m=null===g?null:g/100,v=f&&f.type||null,y=f&&f.background||null,b=[];!c||"number"!=typeof c.width&&"number"!=typeof c.height||b.push({type:"resize",data:c}),h&&20===h.length&&b.push({type:"filter",data:h});var x=function(t){var e=s?s(t):t;Promise.resolve(e).then(i)},_=function(e,n){var i=$b(e),s=d.length?Wb(i,d):i;Promise.resolve(s).then((function(e){gb(e,n,a).then((function(n){if(hb(e),o)return x(n);jb(t).then((function(t){null!==t&&(n=new Blob([t,n.slice(20)],{type:n.type})),x(n)}))})).catch(r)}))};if(/svg/.test(t.type)&&null===v)return Pb(t,u,d,{background:y}).then((function(t){i(zb(t,"image/svg+xml"))}));var E=URL.createObjectURL(t);Vb(E).then((function(e){URL.revokeObjectURL(E);var n=pb(e,p,u,{canvasMemoryLimit:l,background:y}),i={quality:m,type:v||t.type};if(!b.length)return _(n,i);var r=Hb(Nb);r.post({transforms:b,imageData:n},(function(t){_(Fb(t),i),r.terminate()}),[n.data.buffer])})).catch(r)}))})(t,m,x).then((function(e){var n=o(e,function(t,e){var n=function(t){return t.substr(0,t.lastIndexOf("."))||t}(t),i=e.split("/")[1],r=tb[i]||i;return"".concat(n,".").concat(r)}(t.name,function(t){return/jpeg|png|svg\+xml/.test(t)?t:"image/jpeg"}(e.type)));i(n)})).catch(r)}))},v=u.map((function(e){return e(m,t,i.getMetadata())}));Promise.all(v).then((function(t){e(1===t.length&&null===t[0].name?t[0].file:t)}))}))}))})),{options:{allowImageTransform:[!0,i.BOOLEAN],imageTransformImageFilter:[null,i.FUNCTION],imageTransformOutputMimeType:[null,i.STRING],imageTransformOutputQuality:[null,i.INT],imageTransformOutputStripImageHead:[!0,i.BOOLEAN],imageTransformClientTransforms:[null,i.ARRAY],imageTransformOutputQualityMode:["always",i.STRING],imageTransformVariants:[null,i.OBJECT],imageTransformVariantsIncludeDefault:[!0,i.BOOLEAN],imageTransformVariantsDefaultName:[null,i.STRING],imageTransformVariantsIncludeOriginal:[!1,i.BOOLEAN],imageTransformVariantsOriginalName:["original_",i.STRING],imageTransformBeforeCreateBlob:[null,i.FUNCTION],imageTransformAfterCreateBlob:[null,i.FUNCTION],imageTransformCanvasMemoryLimit:[Kb&&Zb?16777216:null,i.INT],imageTransformCanvasBackgroundColor:[null,i.STRING]}}};Kb&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Jb}));var Qb=Jb,tx=function(t){return/^video/.test(t.type)},ex=function(t){return/^audio/.test(t.type)},nx=function(){function t(e,n){ec(this,t),this.mediaEl=e,this.audioElems=n,this.onplayhead=!1,this.duration=0,this.timelineWidth=this.audioElems.timeline.offsetWidth-this.audioElems.playhead.offsetWidth,this.moveplayheadFn=this.moveplayhead.bind(this),this.registerListeners()}return ic(t,[{key:"registerListeners",value:function(){var t=this;this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1),this.mediaEl.addEventListener("canplaythrough",(function(){return t.duration=t.mediaEl.duration}),!1),this.audioElems.timeline.addEventListener("click",this.timelineClicked.bind(this),!1),this.audioElems.button.addEventListener("click",this.play.bind(this)),this.audioElems.playhead.addEventListener("mousedown",this.mouseDown.bind(this),!1),window.addEventListener("mouseup",this.mouseUp.bind(this),!1)}},{key:"play",value:function(){this.mediaEl.paused?this.mediaEl.play():this.mediaEl.pause(),this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause")}},{key:"timeUpdate",value:function(){var t=this.mediaEl.currentTime/this.duration*100;this.audioElems.playhead.style.marginLeft=t+"%",this.mediaEl.currentTime===this.duration&&(this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause"))}},{key:"moveplayhead",value:function(t){var e=t.clientX-this.getPosition(this.audioElems.timeline);e>=0&&e<=this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=e+"px"),e<0&&(this.audioElems.playhead.style.marginLeft="0px"),e>this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=this.timelineWidth-4+"px")}},{key:"timelineClicked",value:function(t){this.moveplayhead(t),this.mediaEl.currentTime=this.duration*this.clickPercent(t)}},{key:"mouseDown",value:function(){this.onplayhead=!0,window.addEventListener("mousemove",this.moveplayheadFn,!0),this.mediaEl.removeEventListener("timeupdate",this.timeUpdate.bind(this),!1)}},{key:"mouseUp",value:function(t){window.removeEventListener("mousemove",this.moveplayheadFn,!0),1==this.onplayhead&&(this.moveplayhead(t),this.mediaEl.currentTime=this.duration*this.clickPercent(t),this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1)),this.onplayhead=!1}},{key:"clickPercent",value:function(t){return(t.clientX-this.getPosition(this.audioElems.timeline))/this.timelineWidth}},{key:"getPosition",value:function(t){return t.getBoundingClientRect().left}}]),t}(),ix=function(t){return t.utils.createView({name:"media-preview-wrapper",create:function(e){var n=e.root,i=e.props,r=function(t){return t.utils.createView({name:"media-preview",tag:"div",ignoreRect:!0,create:function(t){var e=t.root,n=t.props,i=(n.id,e.query("GET_ITEM",{id:n.id})),r=ex(i.file)?"audio":"video";if(e.ref.media=document.createElement(r),e.ref.media.setAttribute("controls",!0),e.element.appendChild(e.ref.media),ex(i.file)){var o=document.createDocumentFragment();e.ref.audio=[],e.ref.audio.container=document.createElement("div"),e.ref.audio.button=document.createElement("span"),e.ref.audio.timeline=document.createElement("div"),e.ref.audio.playhead=document.createElement("div"),e.ref.audio.container.className="audioplayer",e.ref.audio.button.className="playpausebtn play",e.ref.audio.timeline.className="timeline",e.ref.audio.playhead.className="playhead",e.ref.audio.timeline.appendChild(e.ref.audio.playhead),e.ref.audio.container.appendChild(e.ref.audio.button),e.ref.audio.container.appendChild(e.ref.audio.timeline),o.appendChild(e.ref.audio.container),e.element.appendChild(o)}},write:t.utils.createRoute({DID_MEDIA_PREVIEW_LOAD:function(t){var e=t.root,n=t.props,i=(n.id,e.query("GET_ITEM",{id:n.id}));if(i){var r=window.URL||window.webkitURL,o=new Blob([i.file],{type:i.file.type});e.ref.media.type=i.file.type,e.ref.media.src=i.file.mock&&i.file.url||r.createObjectURL(o),ex(i.file)&&new nx(e.ref.media,e.ref.audio),e.ref.media.addEventListener("loadeddata",(function(){var t=75;if(tx(i.file)){var r=e.ref.media.offsetWidth,o=e.ref.media.videoWidth/r;t=e.ref.media.videoHeight/o}e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:n.id,height:t})}),!1)}}})})}(t);n.ref.media=n.appendChildView(n.createChildView(r,{id:i.id}))},write:t.utils.createRoute({DID_MEDIA_PREVIEW_CONTAINER_CREATE:function(t){var e=t.root,n=t.props.id;e.query("GET_ITEM",n)&&e.dispatch("DID_MEDIA_PREVIEW_LOAD",{id:n})}})})},rx=function(t){var e=t.addFilter,n=t.utils,i=n.Type,r=n.createRoute,o=ix(t);return e("CREATE_VIEW",(function(t){var e=t.is,n=t.view,i=t.query;if(e("file")){n.registerWriter(r({DID_LOAD_ITEM:function(t){var e=t.root,r=t.props.id,a=i("GET_ITEM",r),s=i("GET_ALLOW_VIDEO_PREVIEW"),l=i("GET_ALLOW_AUDIO_PREVIEW");a&&!a.archived&&(tx(a.file)&&s||ex(a.file)&&l)&&(e.ref.mediaPreview=n.appendChildView(n.createChildView(o,{id:r})),e.dispatch("DID_MEDIA_PREVIEW_CONTAINER_CREATE",{id:r}))}},(function(t){var e=t.root,n=t.props.id,r=i("GET_ITEM",n),o=e.query("GET_ALLOW_VIDEO_PREVIEW"),a=e.query("GET_ALLOW_AUDIO_PREVIEW");r&&(tx(r.file)&&o||ex(r.file)&&a)&&e.rect.element.hidden})))}})),{options:{allowVideoPreview:[!0,i.BOOLEAN],allowAudioPreview:[!0,i.BOOLEAN]}}};
/*!
 * FilePondPluginMediaPreview 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
<<<<<<< HEAD
 */"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Bb})),Av(Iv),Av(Mv),Av(Pv),Av(Yv),Av(Oy),Av(Ry),Av(Rb),Av(Bb),window.FilePond=Yh;var jb=function(t){t.data("fileUploadFormComponent",(function(t){var e,n,i,r=t.acceptedFileTypes,o=t.canReorder,a=t.canPreview,s=t.deleteUploadedFileUsing,u=t.getUploadedFileUrlsUsing,l=t.imageCropAspectRatio,c=t.imagePreviewHeight,h=t.imageResizeTargetHeight,d=t.imageResizeTargetWidth,f=t.loadingIndicatorPosition,p=t.panelAspectRatio,g=t.panelLayout,m=t.placeholder,v=t.maxSize,y=t.minSize,b=t.removeUploadedFileButtonPosition,_=t.removeUploadedFileUsing,E=t.reorderUploadedFilesUsing,x=t.shouldAppendFiles,w=t.shouldTransformImage,A=t.state,D=t.uploadButtonPosition,C=t.uploadProgressIndicatorPosition,T=t.uploadUsing;return{fileKeyIndex:{},pond:null,shouldUpdateState:!0,state:A,uploadedFileUrlIndex:{},init:(i=Bl(Pl().mark((function t(){var e=this;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_v,t.t1=this.$refs.input,t.t2=tc,t.t3=tc,t.t4=r,t.t5=o,t.t6=a,t.t7=a,t.t8=a,t.t9=w,t.next=12,this.getFiles();case 12:t.t10=t.sent,t.t11=l,t.t12=c,t.t13=h,t.t14=d,t.t15=x?"after":"before",t.t16={acceptedFileTypes:t.t4,allowReorder:t.t5,allowImagePreview:t.t6,allowVideoPreview:t.t7,allowAudioPreview:t.t8,allowImageTransform:t.t9,credits:!1,files:t.t10,imageCropAspectRatio:t.t11,imagePreviewHeight:t.t12,imageResizeTargetHeight:t.t13,imageResizeTargetWidth:t.t14,itemInsertLocation:t.t15},t.t17=m&&{labelIdle:m},t.t18=(0,t.t3)(t.t16,t.t17),t.t19={},t.t20={maxFileSize:v,minFileSize:y,styleButtonProcessItemPosition:D,styleButtonRemoveItemPosition:b,styleLoadIndicatorPosition:f,stylePanelAspectRatio:p,stylePanelLayout:g,styleProgressIndicatorPosition:C,server:{load:function(){var t=Bl(Pl().mark((function t(e,n){var i,r;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return i=t.sent,t.next=5,i.blob();case 5:r=t.sent,n(r);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),process:function(t,n,i,r,o,a){e.shouldUpdateState=!1;var s=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}));T(s,n,(function(t){e.shouldUpdateState=!0,r(t)}),o,a)},remove:function(){var t=Bl(Pl().mark((function t(n,i){var r,o;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null!==(r=e.uploadedFileUrlIndex[n])&&void 0!==r?r:null){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,s(o);case 5:i();case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),revert:function(){var t=Bl(Pl().mark((function t(e,n){return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(e);case 2:n();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},t.t21=(0,t.t2)(t.t18,t.t19,t.t20),this.pond=(0,t.t0)(t.t1,t.t21),this.$watch("state",Bl(Pl().mark((function t(){return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.shouldUpdateState){t.next=2;break}return t.abrupt("return");case 2:if(!Object.values(e.state).filter((function(t){return t.startsWith("livewire-file:")})).length){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.getFiles();case 6:e.pond.files=t.sent;case 7:case"end":return t.stop()}}),t)})))),this.pond.on("reorderfiles",function(){var t=Bl(Pl().mark((function t(n){var i;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.map((function(t){var n;return t.source instanceof File?t.serverId:null!==(n=e.uploadedFileUrlIndex[t.source])&&void 0!==n?n:null})).filter((function(t){return t})),t.next=3,E(x?i:i.reverse());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.pond.on("processfilestart",Bl(Pl().mark((function t(){return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-started");case 1:case"end":return t.stop()}}),t)})))),this.pond.on("processfileprogress",Bl(Pl().mark((function t(){return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-started");case 1:case"end":return t.stop()}}),t)})))),this.pond.on("processfile",Bl(Pl().mark((function t(){return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-finished");case 1:case"end":return t.stop()}}),t)})))),this.pond.on("processfiles",Bl(Pl().mark((function t(){return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-finished");case 1:case"end":return t.stop()}}),t)})))),this.pond.on("processfileabort",Bl(Pl().mark((function t(){return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-finished");case 1:case"end":return t.stop()}}),t)})))),this.pond.on("processfilerevert",Bl(Pl().mark((function t(){return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-finished");case 1:case"end":return t.stop()}}),t)}))));case 33:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),dispatchFormEvent:function(t){var e;null===(e=this.$el.closest("form"))||void 0===e||e.dispatchEvent(new CustomEvent(t,{composed:!0,cancelable:!0}))},getUploadedFileUrls:(n=Bl(Pl().mark((function t(){var e;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u();case 2:e=t.sent,this.fileKeyIndex=null!=e?e:{},this.uploadedFileUrlIndex=Object.entries(this.fileKeyIndex).filter((function(t){return t})).reduce((function(t,e){var n=jl(e,2),i=n[0];return t[n[1]]=i,t}),{});case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)}),getFiles:(e=Bl(Pl().mark((function t(){var e,n,i,r;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getUploadedFileUrls();case 2:e=[],n=0,i=Object.values(this.fileKeyIndex);case 4:if(!(n<i.length)){t.next=12;break}if(r=i[n]){t.next=8;break}return t.abrupt("continue",9);case 8:e.push({source:r,options:{type:"local"}});case 9:n++,t.next=4;break;case 12:return t.abrupt("return",x?e:e.reverse());case 13:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}}))},Vb=function(t){t.data("keyValueFormComponent",(function(t){return{state:t.state,rows:[],shouldUpdateRows:!0,init:function(){var t=this;this.updateRows(),this.rows.length<=0&&this.addRow(),this.$watch("state",(function(){t.shouldUpdateRows?t.updateRows():t.shouldUpdateRows=!0}))},addRow:function(){this.rows.push({key:"",value:""}),this.updateState()},deleteRow:function(t){this.rows.splice(t,1),this.rows.length<=0&&this.addRow(),this.updateState(),this.shouldUpdateRows=!0},updateRows:function(){for(var t=[],e=0,n=Object.entries(null!==(i=this.state)&&void 0!==i?i:{});e<n.length;e++){var i,r=jl(n[e],2),o=r[0],a=r[1];t.push({key:o,value:a})}this.rows=t},updateState:function(){var t={};this.rows.forEach((function(e){""!==e.key&&null!==e.key&&(t[e.key]=e.value)})),this.shouldUpdateRows=!1,this.state=t}}}))},zb=function(){function t(e,n){nc(this,t),this.file=e,this.directory=n,this.state="pending",this.id=null,this.href=null,this.name=null,this.percent=0}return rc(t,[{key:"fullPath",get:function(){return this.directory?"".concat(this.directory,"/").concat(this.file.name):this.file.name}},{key:"isImage",value:function(){return["image/gif","image/png","image/jpg","image/jpeg"].indexOf(this.file.type)>-1}},{key:"saving",value:function(t){if("pending"!==this.state&&"saving"!==this.state)throw new Error("Unexpected transition from ".concat(this.state," to saving"));this.state="saving",this.percent=t}},{key:"saved",value:function(t){var e,n,i;if("pending"!==this.state&&"saving"!==this.state)throw new Error("Unexpected transition from ".concat(this.state," to saved"));this.state="saved",this.id=null!==(e=null==t?void 0:t.id)&&void 0!==e?e:null,this.href=null!==(n=null==t?void 0:t.href)&&void 0!==n?n:null,this.name=null!==(i=null==t?void 0:t.name)&&void 0!==i?i:null}},{key:"isPending",value:function(){return"pending"===this.state}},{key:"isSaving",value:function(){return"saving"===this.state}},{key:"isSaved",value:function(){return"saved"===this.state}}],[{key:"traverse",value:function(t,e){return Ub(t,e)}},{key:"from",value:function(e){var n,i=[],r=oc(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o instanceof File)i.push(new t(o));else{if(!(o instanceof t))throw new Error("Unexpected type");i.push(o)}}}catch(t){r.e(t)}finally{r.f()}return i}}]),t}();function Ub(t,e){return e&&function(t){return t.items&&Array.from(t.items).some((function(t){var e=t.webkitGetAsEntry&&t.webkitGetAsEntry();return e&&e.isDirectory}))}(t)?qb("",function(t){return Array.from(t.items).map((function(t){return t.webkitGetAsEntry()})).filter((function(t){return null!=t}))}(t)):Promise.resolve(Gb(Array.from(t.files||[])).map((function(t){return new zb(t)})))}function Gb(t){return Array.from(t).filter((function(t){return!function(t){return t.name.startsWith(".")}(t)}))}function Wb(t){return new Promise((function(e,n){t.file(e,n)}))}function Hb(t){return new Promise((function(e,n){var i=[],r=t.createReader();!function t(){r.readEntries((function(n){n.length>0?(i.push.apply(i,Jl(n)),t()):e(i)}),n)}()}))}function qb(t,e){return $b.apply(this,arguments)}function $b(){return($b=Bl(Pl().mark((function t(e,n){var i,r,o,a,s;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],r=oc(Gb(n)),t.prev=2,r.s();case 4:if((o=r.n()).done){t.next=28;break}if(!(a=o.value).isDirectory){t.next=22;break}return t.t0=i.push,t.t1=i,t.t2=Jl,t.t3=qb,t.t4=a.fullPath,t.next=14,Hb(a);case 14:return t.t5=t.sent,t.next=17,(0,t.t3)(t.t4,t.t5);case 17:t.t6=t.sent,t.t7=(0,t.t2)(t.t6),t.t0.apply.call(t.t0,t.t1,t.t7),t.next=26;break;case 22:return t.next=24,Wb(a);case 24:s=t.sent,i.push(new zb(s,e));case 26:t.next=4;break;case 28:t.next=33;break;case 30:t.prev=30,t.t8=t.catch(2),r.e(t.t8);case 33:return t.prev=33,r.f(),t.finish(33);case 36:return t.abrupt("return",i);case 37:case"end":return t.stop()}}),t,null,[[2,30,33,36]])})))).apply(this,arguments)}var Yb=function(t){Hl(i,t);var e,n=$l(i);function i(){return nc(this,i),n.apply(this,arguments)}return rc(i,[{key:"connectedCallback",value:function(){this.addEventListener("dragenter",Zb),this.addEventListener("dragover",Zb),this.addEventListener("dragleave",Jb),this.addEventListener("drop",Qb),this.addEventListener("paste",e_),this.addEventListener("change",n_)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("dragenter",Zb),this.removeEventListener("dragover",Zb),this.removeEventListener("dragleave",Jb),this.removeEventListener("drop",Qb),this.removeEventListener("paste",e_),this.removeEventListener("change",n_)}},{key:"directory",get:function(){return this.hasAttribute("directory")},set:function(t){t?this.setAttribute("directory",""):this.removeAttribute("directory")}},{key:"attach",value:(e=Bl(Pl().mark((function t(e){var n;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e instanceof DataTransfer)){t.next=6;break}return t.next=3,zb.traverse(e,this.directory);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=zb.from(e);case 7:n=t.t0,this.dispatchEvent(new CustomEvent("file-attachment-accept",{bubbles:!0,cancelable:!0,detail:{attachments:n}}))&&n.length&&this.dispatchEvent(new CustomEvent("file-attachment-accepted",{bubbles:!0,detail:{attachments:n}}));case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),i}(Gl(HTMLElement));function Xb(t){return Array.from(t.types).indexOf("Files")>=0}var Kb=null;function Zb(t){var e=t.currentTarget;Kb&&clearTimeout(Kb),Kb=window.setTimeout((function(){return e.removeAttribute("hover")}),200);var n=t.dataTransfer;n&&Xb(n)&&(n.dropEffect="copy",e.setAttribute("hover",""),t.stopPropagation(),t.preventDefault())}function Jb(t){t.dataTransfer&&(t.dataTransfer.dropEffect="none"),t.currentTarget.removeAttribute("hover"),t.stopPropagation(),t.preventDefault()}function Qb(t){var e=t.currentTarget;if(e instanceof Yb){e.removeAttribute("hover");var n=t.dataTransfer;n&&Xb(n)&&(e.attach(n),t.stopPropagation(),t.preventDefault())}}var t_=/^image\/(gif|png|jpeg)$/;function e_(t){if(t.clipboardData&&t.clipboardData.items){var e=t.currentTarget;if(e instanceof Yb){var n=function(t){var e,n=oc(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(t_.test(i.type))return i.getAsFile()}}catch(t){n.e(t)}finally{n.f()}return null}(t.clipboardData.items);if(n){var i=[n];e.attach(i),t.preventDefault()}}}}function n_(t){var e=t.currentTarget;if(e instanceof Yb){var n=t.target;if(n instanceof HTMLInputElement){var i=e.getAttribute("input");if(!i||n.id===i){var r=n.files;r&&0!==r.length&&(e.attach(r),n.value="")}}}}window.customElements.get("file-attachment")||(window.FileAttachmentElement=Yb,window.customElements.define("file-attachment",Yb));var i_=["[data-md-button]","md-header","md-bold","md-italic","md-quote","md-code","md-link","md-image","md-unordered-list","md-ordered-list","md-task-list","md-mention","md-ref","md-strikethrough"];function r_(t){var e,n=[],i=oc(t.querySelectorAll(i_.join(", ")));try{for(i.s();!(e=i.n()).done;){var r=e.value;r.hidden||r.offsetWidth<=0&&r.offsetHeight<=0||r.closest("markdown-toolbar")===t&&n.push(r)}}catch(t){i.e(t)}finally{i.f()}return n}var o_=new WeakMap,a_=function(t){Hl(n,t);var e=$l(n);function n(){var t;nc(this,n);var i,r=function(){var e=o_.get(Xl(t));e&&R_(Xl(t),e)};return(t=e.call(this)).addEventListener("keydown",(i=r,function(t){" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),i(t))})),t.addEventListener("click",r),t}return rc(n,[{key:"connectedCallback",value:function(){this.hasAttribute("role")||this.setAttribute("role","button")}},{key:"click",value:function(){var t=o_.get(this);t&&R_(this,t)}}]),n}(Gl(HTMLElement)),s_=function(t){Hl(n,t);var e=$l(n);function n(){var t;nc(this,n),t=e.call(this);var i=parseInt(t.getAttribute("level")||"3",10);if(i<1||i>6)return Yl(t);var r="".concat("#".repeat(i)," ");return o_.set(Xl(t),{prefix:r}),t}return rc(n)}(a_);window.customElements.get("md-header")||(window.MarkdownHeaderButtonElement=s_,window.customElements.define("md-header",s_));var u_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"**",suffix:"**",trimFirst:!0}),t}return rc(n,[{key:"connectedCallback",value:function(){zl(Zl(n.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","b")}}]),n}(a_);window.customElements.get("md-bold")||(window.MarkdownBoldButtonElement=u_,window.customElements.define("md-bold",u_));var l_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"_",suffix:"_",trimFirst:!0}),t}return rc(n,[{key:"connectedCallback",value:function(){zl(Zl(n.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","i")}}]),n}(a_);window.customElements.get("md-italic")||(window.MarkdownItalicButtonElement=l_,window.customElements.define("md-italic",l_));var c_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"> ",multiline:!0,surroundWithNewlines:!0}),t}return rc(n,[{key:"connectedCallback",value:function(){zl(Zl(n.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","."),this.setAttribute("hotkey-requires-shift","true")}}]),n}(a_);window.customElements.get("md-quote")||(window.MarkdownQuoteButtonElement=c_,window.customElements.define("md-quote",c_));var h_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"`",suffix:"`",blockPrefix:"```",blockSuffix:"```"}),t}return rc(n,[{key:"connectedCallback",value:function(){zl(Zl(n.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","e")}}]),n}(a_);window.customElements.get("md-code")||(window.MarkdownCodeButtonElement=h_,window.customElements.define("md-code",h_));var d_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"[",suffix:"](url)",replaceNext:"url",scanFor:"https?://"}),t}return rc(n,[{key:"connectedCallback",value:function(){zl(Zl(n.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","k")}}]),n}(a_);window.customElements.get("md-link")||(window.MarkdownLinkButtonElement=d_,window.customElements.define("md-link",d_));var f_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"![",suffix:"](url)",replaceNext:"url",scanFor:"https?://"}),t}return rc(n)}(a_);window.customElements.get("md-image")||(window.MarkdownImageButtonElement=f_,window.customElements.define("md-image",f_));var p_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"- ",multiline:!0,surroundWithNewlines:!0}),t}return rc(n,[{key:"connectedCallback",value:function(){zl(Zl(n.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","8"),this.setAttribute("hotkey-requires-shift","true")}}]),n}(a_);window.customElements.get("md-unordered-list")||(window.MarkdownUnorderedListButtonElement=p_,window.customElements.define("md-unordered-list",p_));var g_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"1. ",multiline:!0,orderedList:!0}),t}return rc(n,[{key:"connectedCallback",value:function(){zl(Zl(n.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","7"),this.setAttribute("hotkey-requires-shift","true")}}]),n}(a_);window.customElements.get("md-ordered-list")||(window.MarkdownOrderedListButtonElement=g_,window.customElements.define("md-ordered-list",g_));var m_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"- [ ] ",multiline:!0,surroundWithNewlines:!0}),t}return rc(n,[{key:"connectedCallback",value:function(){zl(Zl(n.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","L")}}]),n}(a_);window.customElements.get("md-task-list")||(window.MarkdownTaskListButtonElement=m_,window.customElements.define("md-task-list",m_));var v_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"@",prefixSpace:!0}),t}return rc(n)}(a_);window.customElements.get("md-mention")||(window.MarkdownMentionButtonElement=v_,window.customElements.define("md-mention",v_));var y_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"#",prefixSpace:!0}),t}return rc(n)}(a_);window.customElements.get("md-ref")||(window.MarkdownRefButtonElement=y_,window.customElements.define("md-ref",y_));var b_=function(t){Hl(n,t);var e=$l(n);function n(){var t;return nc(this,n),t=e.call(this),o_.set(Xl(t),{prefix:"~~",suffix:"~~",trimFirst:!0}),t}return rc(n)}(a_);window.customElements.get("md-strikethrough")||(window.MarkdownStrikethroughButtonElement=b_,window.customElements.define("md-strikethrough",b_));var __=navigator.userAgent.match(/Macintosh/)?"Meta":"Control",E_=function(t){Hl(n,t);var e=$l(n);function n(){return nc(this,n),e.call(this)}return rc(n,[{key:"connectedCallback",value:function(){this.hasAttribute("role")||this.setAttribute("role","toolbar"),this.addEventListener("keydown",w_);var t=D_.bind(null,this);this.field&&(this.field.addEventListener("keydown",t),A_.set(this,t)),this.setAttribute("tabindex","0"),this.addEventListener("focus",x_,{once:!0})}},{key:"disconnectedCallback",value:function(){var t=A_.get(this);t&&this.field&&(this.field.removeEventListener("keydown",t),A_.delete(this)),this.removeEventListener("keydown",w_)}},{key:"field",get:function(){var t=this.getAttribute("for");if(!t)return null;var e,n="getRootNode"in this?this.getRootNode():document;return(n instanceof Document||n instanceof ShadowRoot)&&(e=n.getElementById(t)),e instanceof HTMLTextAreaElement?e:null}}]),n}(Gl(HTMLElement));function x_(t){var e=t.target;if(e instanceof Element){e.removeAttribute("tabindex");var n,i="0",r=oc(r_(e));try{for(r.s();!(n=r.n()).done;){var o=n.value;o.setAttribute("tabindex",i),"0"===i&&(o.focus(),i="-1")}}catch(t){r.e(t)}finally{r.f()}}}function w_(t){var e=t.key;if("ArrowRight"===e||"ArrowLeft"===e||"Home"===e||"End"===e){var n=t.currentTarget;if(n instanceof HTMLElement){var i=r_(n),r=i.indexOf(t.target),o=i.length;if(-1!==r){var a=0;"ArrowLeft"===e&&(a=r-1),"ArrowRight"===e&&(a=r+1),"End"===e&&(a=o-1),a<0&&(a=o-1),a>o-1&&(a=0);for(var s=0;s<o;s+=1)i[s].setAttribute("tabindex",s===a?"0":"-1");t.preventDefault(),i[a].focus()}}}}var A_=new WeakMap;function D_(t,e){if(e.metaKey&&"Meta"===__||e.ctrlKey&&"Control"===__){var n=function(t,e,n){var i,r,o=oc(t.querySelectorAll("[hotkey]"));try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a.getAttribute("hotkey")===e&&(!(r=a).hasAttribute("hotkey-requires-shift")||"false"===r.getAttribute("hotkey-requires-shift")||n))return a}}catch(t){o.e(t)}finally{o.f()}return null}(t,e.shiftKey?e.key.toUpperCase():e.key,e.shiftKey);n&&(n.click(),e.preventDefault())}}function C_(t){return t.trim().split("\n").length>1}function T_(t,e){return Array(e+1).join(t)}function k_(t,e){for(var n=e;t[n]&&null!=t[n-1]&&!t[n-1].match(/\s/);)n--;return n}function S_(t,e,n){for(var i=e,r=n?/\n/:/\s/;t[i]&&!t[i].match(r);)i++;return i}window.customElements.get("markdown-toolbar")||(window.MarkdownToolbarElement=E_,window.customElements.define("markdown-toolbar",E_));var I_=null;function O_(t,e){var n,i=t.value.slice(t.selectionStart,t.selectionEnd);n=e.orderedList?function(t){var e,n,i,r,o=/^\d+\.\s+/,a=t.selectionStart===t.selectionEnd,s=t.value.slice(t.selectionStart,t.selectionEnd),u=s,l=s.split("\n");if(a){var c=t.value.slice(0,t.selectionStart).split(/\n/);i=t.selectionStart-c[c.length-1].length,r=S_(t.value,t.selectionStart,!0),u=t.value.slice(i,r)}var h=u.split("\n");if(h.every((function(t){return o.test(t)}))){if(s=(l=h.map((function(t){return t.replace(o,"")}))).join("\n"),a&&i&&r){var d=h[0].length-l[0].length;n=e=t.selectionStart-d,t.selectionStart=i,t.selectionEnd=r}}else{s=(l=function(t){var e,n,i,r=[];for(i=e=0,n=t.length;e<n;i=++e){var o=t[i];r.push("".concat(i+1,". ").concat(o))}return r}(l)).join("\n");var f=M_(t),p=f.newlinesToAppend,g=f.newlinesToPrepend;e=(n=t.selectionStart+p.length)+s.length,a&&(n=e),s=p+s+g}return{text:s,selectionStart:n,selectionEnd:e}}(t):e.multiline&&C_(i)?function(t,e){var n=e.prefix,i=e.suffix,r=e.surroundWithNewlines,o=t.value.slice(t.selectionStart,t.selectionEnd),a=t.selectionStart,s=t.selectionEnd,u=o.split("\n");if(u.every((function(t){return t.startsWith(n)&&t.endsWith(i)})))s=a+(o=u.map((function(t){return t.slice(n.length,t.length-i.length)})).join("\n")).length;else if(o=u.map((function(t){return n+t+i})).join("\n"),r){var l=M_(t),c=l.newlinesToAppend,h=l.newlinesToPrepend;s=(a+=c.length)+o.length,o=c+o+h}return{text:o,selectionStart:a,selectionEnd:s}}(t,e):function(t,e){var n=e.prefix,i=e.suffix,r=e.blockPrefix,o=e.blockSuffix,a=e.replaceNext,s=e.prefixSpace,u=e.scanFor,l=e.surroundWithNewlines,c=t.selectionStart,h=t.selectionEnd,d=t.value.slice(t.selectionStart,t.selectionEnd),f=C_(d)&&r.length>0?"".concat(r,"\n"):n,p=C_(d)&&o.length>0?"\n".concat(o):i;if(s){var g=t.value[t.selectionStart-1];0===t.selectionStart||null==g||g.match(/\s/)||(f=" ".concat(f))}d=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.selectionStart===t.selectionEnd)t.selectionStart=k_(t.value,t.selectionStart),t.selectionEnd=S_(t.value,t.selectionEnd,i);else{var r=t.selectionStart-e.length,o=t.selectionEnd+n.length,a=t.value.slice(r,t.selectionStart)===e,s=t.value.slice(t.selectionEnd,o)===n;a&&s&&(t.selectionStart=r,t.selectionEnd=o)}return t.value.slice(t.selectionStart,t.selectionEnd)}(t,f,p,e.multiline);var m=t.selectionStart,v=t.selectionEnd,y=a.length>0&&p.indexOf(a)>-1&&d.length>0;if(l){var b=M_(t);f=b.newlinesToAppend+n,p+=b.newlinesToPrepend}if(d.startsWith(f)&&d.endsWith(p)){var _=d.slice(f.length,d.length-p.length);if(c===h){var E=c-f.length;E=Math.max(E,m),m=v=E=Math.min(E,m+_.length)}else v=m+_.length;return{text:_,selectionStart:m,selectionEnd:v}}if(y)return u.length>0&&d.match(u)?{text:f+(p=p.replace(a,d)),selectionStart:m=v=m+f.length,selectionEnd:v}:{text:f+d+p,selectionStart:m=m+f.length+d.length+p.indexOf(a),selectionEnd:v=m+a.length};var x=f+d+p;m=c+f.length,v=h+f.length;var w=d.match(/^\s*|\s*$/g);if(e.trimFirst&&w){var A=w[0]||"",D=w[1]||"";x=A+f+d.trim()+p+D,m+=A.length,v-=D.length}return{text:x,selectionStart:m,selectionEnd:v}}(t,e),function(t,e){var n=e.text,i=e.selectionStart,r=e.selectionEnd,o=t.selectionStart,a=t.value.slice(0,o),s=t.value.slice(t.selectionEnd);if(null===I_||!0===I_){t.contentEditable="true";try{I_=document.execCommand("insertText",!1,n)}catch(t){I_=!1}t.contentEditable="false"}if(I_&&!t.value.slice(0,t.selectionStart).endsWith(n)&&(I_=!1),!I_){try{document.execCommand("ms-beginUndoUnit")}catch(t){}t.value=a+n+s;try{document.execCommand("ms-endUndoUnit")}catch(t){}t.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))}null!=i&&null!=r?t.setSelectionRange(i,r):t.setSelectionRange(o,t.selectionEnd)}(t,n)}function M_(t){var e,n,i=t.value.slice(0,t.selectionStart),r=t.value.slice(t.selectionEnd),o=i.match(/\n*$/),a=r.match(/^\n*/),s=o?o[0].length:0,u=a?a[0].length:0;return i.match(/\S/)&&s<2&&(e=T_("\n",2-s)),r.match(/\S/)&&u<2&&(n=T_("\n",2-u)),null==e&&(e=""),null==n&&(n=""),{newlinesToAppend:e,newlinesToPrepend:n}}function R_(t,e){var n=t.closest("markdown-toolbar");if(n instanceof E_){var i=Object.assign(Object.assign({},{prefix:"",suffix:"",blockPrefix:"",blockSuffix:"",multiline:!1,replaceNext:"",prefixSpace:!1,scanFor:"",surroundWithNewlines:!1,orderedList:!1,trimFirst:!1}),e),r=n.field;r&&(r.focus(),O_(r,i))}}function L_(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var P_={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var F_=/[&<>"']/,N_=/[&<>"']/g,B_=/[<>"']|&(?!#?\w+;)/,j_=/[<>"']|&(?!#?\w+;)/g,V_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},z_=function(t){return V_[t]};function U_(t,e){if(e){if(F_.test(t))return t.replace(N_,z_)}else if(B_.test(t))return t.replace(j_,z_);return t}var G_=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function W_(t){return t.replace(G_,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}var H_=/(^|[^\[])\^/g;function q_(t,e){t="string"==typeof t?t:t.source,e=e||"";var n={replace:function(e,i){return i=(i=i.source||i).replace(H_,"$1"),t=t.replace(e,i),n},getRegex:function(){return new RegExp(t,e)}};return n}var $_=/[^\w:]/g,Y_=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function X_(t,e,n){if(t){var i;try{i=decodeURIComponent(W_(n)).replace($_,"").toLowerCase()}catch(t){return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!Y_.test(n)&&(n=function(t,e){K_[" "+t]||(Z_.test(t)?K_[" "+t]=t+"/":K_[" "+t]=iE(t,"/",!0));var n=-1===(t=K_[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(J_,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(Q_,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n}var K_={},Z_=/^[^:]+:\/*[^/]*$/,J_=/^([^:]+:)[\s\S]*$/,Q_=/^([^:]+:\/*[^/]*)[\s\S]*$/;var tE={exec:function(){}};function eE(t){for(var e,n,i=1;i<arguments.length;i++)for(n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function nE(t,e){var n=t.replace(/\|/g,(function(t,e,n){for(var i=!1,r=e;--r>=0&&"\\"===n[r];)i=!i;return i?"|":" |"})).split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function iE(t,e,n){var i=t.length;if(0===i)return"";for(var r=0;r<i;){var o=t.charAt(i-r-1);if(o!==e||n){if(o===e||!n)break;r++}else r++}return t.slice(0,i-r)}function rE(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function oE(t,e){if(e<1)return"";for(var n="";e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t}function aE(t,e,n,i){var r=e.href,o=e.title?U_(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;var s={type:"link",raw:n,href:r,title:o,text:a,tokens:i.inlineTokens(a,[])};return i.state.inLink=!1,s}return{type:"image",raw:n,href:r,title:o,text:U_(a)}}var sE=function(){function t(e){nc(this,t),this.options=e||P_}return rc(t,[{key:"space",value:function(t){var e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}},{key:"code",value:function(t){var e=this.rules.block.code.exec(t);if(e){var n=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:iE(n,"\n")}}}},{key:"fences",value:function(t){var e=this.rules.block.fences.exec(t);if(e){var n=e[0],i=function(t,e){var n=t.match(/^(\s+)(?:```)/);if(null===n)return e;var i=n[1];return e.split("\n").map((function(t){var e=t.match(/^\s+/);return null===e?t:jl(e,1)[0].length>=i.length?t.slice(i.length):t})).join("\n")}(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim():e[2],text:i}}}},{key:"heading",value:function(t){var e=this.rules.block.heading.exec(t);if(e){var n=e[2].trim();if(/#$/.test(n)){var i=iE(n,"#");this.options.pedantic?n=i.trim():i&&!/ $/.test(i)||(n=i.trim())}var r={type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}},{key:"hr",value:function(t){var e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}},{key:"blockquote",value:function(t){var e=this.rules.block.blockquote.exec(t);if(e){var n=e[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:e[0],tokens:this.lexer.blockTokens(n,[]),text:n}}}},{key:"list",value:function(t){var e=this.rules.block.list.exec(t);if(e){var n,i,r,o,a,s,u,l,c,h,d,f,p=e[1].trim(),g=p.length>1,m={type:"list",raw:"",ordered:g,start:g?+p.slice(0,-1):"",loose:!1,items:[]};p=g?"\\d{1,9}\\".concat(p.slice(-1)):"\\".concat(p),this.options.pedantic&&(p=g?p:"[*+-]");for(var v=new RegExp("^( {0,3}".concat(p,")((?:[\t ][^\\n]*)?(?:\\n|$))"));t&&(f=!1,e=v.exec(t))&&!this.rules.block.hr.test(t);){if(n=e[0],t=t.substring(n.length),l=e[2].split("\n",1)[0],c=t.split("\n",1)[0],this.options.pedantic?(o=2,d=l.trimLeft()):(o=(o=e[2].search(/[^ ]/))>4?1:o,d=l.slice(o),o+=e[1].length),s=!1,!l&&/^ *$/.test(c)&&(n+=c+"\n",t=t.substring(c.length+1),f=!0),!f)for(var y=new RegExp("^ {0,".concat(Math.min(3,o-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),b=new RegExp("^ {0,".concat(Math.min(3,o-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"));t&&(l=h=t.split("\n",1)[0],this.options.pedantic&&(l=l.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!y.test(l))&&!b.test(t);){if(l.search(/[^ ]/)>=o||!l.trim())d+="\n"+l.slice(o);else{if(s)break;d+="\n"+l}s||l.trim()||(s=!0),n+=h+"\n",t=t.substring(h.length+1)}m.loose||(u?m.loose=!0:/\n *\n *$/.test(n)&&(u=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(d))&&(r="[ ] "!==i[0],d=d.replace(/^\[[ xX]\] +/,"")),m.items.push({type:"list_item",raw:n,task:!!i,checked:r,loose:!1,text:d}),m.raw+=n}m.items[m.items.length-1].raw=n.trimRight(),m.items[m.items.length-1].text=d.trimRight(),m.raw=m.raw.trimRight();var _=m.items.length;for(a=0;a<_;a++){this.lexer.state.top=!1,m.items[a].tokens=this.lexer.blockTokens(m.items[a].text,[]);var E=m.items[a].tokens.filter((function(t){return"space"===t.type})),x=E.every((function(t){var e,n=0,i=oc(t.raw.split(""));try{for(i.s();!(e=i.n()).done;){if("\n"===e.value&&(n+=1),n>1)return!0}}catch(t){i.e(t)}finally{i.f()}return!1}));!m.loose&&E.length&&x&&(m.loose=!0,m.items[a].loose=!0)}return m}}},{key:"html",value:function(t){var e=this.rules.block.html.exec(t);if(e){var n={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};return this.options.sanitize&&(n.type="paragraph",n.text=this.options.sanitizer?this.options.sanitizer(e[0]):U_(e[0]),n.tokens=[],this.lexer.inline(n.text,n.tokens)),n}}},{key:"def",value:function(t){var e=this.rules.block.def.exec(t);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{type:"def",tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}}},{key:"table",value:function(t){var e=this.rules.block.table.exec(t);if(e){var n={type:"table",header:nE(e[1]).map((function(t){return{text:t}})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=e[0];var i,r,o,a,s=n.align.length;for(i=0;i<s;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]="right":/^ *:-+: *$/.test(n.align[i])?n.align[i]="center":/^ *:-+ *$/.test(n.align[i])?n.align[i]="left":n.align[i]=null;for(s=n.rows.length,i=0;i<s;i++)n.rows[i]=nE(n.rows[i],n.header.length).map((function(t){return{text:t}}));for(s=n.header.length,r=0;r<s;r++)n.header[r].tokens=[],this.lexer.inline(n.header[r].text,n.header[r].tokens);for(s=n.rows.length,r=0;r<s;r++)for(a=n.rows[r],o=0;o<a.length;o++)a[o].tokens=[],this.lexer.inline(a[o].text,a[o].tokens);return n}}}},{key:"lheading",value:function(t){var e=this.rules.block.lheading.exec(t);if(e){var n={type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}},{key:"paragraph",value:function(t){var e=this.rules.block.paragraph.exec(t);if(e){var n={type:"paragraph",raw:e[0],text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}},{key:"text",value:function(t){var e=this.rules.block.text.exec(t);if(e){var n={type:"text",raw:e[0],text:e[0],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}},{key:"escape",value:function(t){var e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:U_(e[1])}}},{key:"tag",value:function(t){var e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):U_(e[0]):e[0]}}},{key:"link",value:function(t){var e=this.rules.inline.link.exec(t);if(e){var n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var i=iE(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{var r=function(t,e){if(-1===t.indexOf(e[1]))return-1;for(var n=t.length,i=0,r=0;r<n;r++)if("\\"===t[r])r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&--i<0)return r;return-1}(e[2],"()");if(r>-1){var o=(0===e[0].indexOf("!")?5:4)+e[1].length+r;e[2]=e[2].substring(0,r),e[0]=e[0].substring(0,o).trim(),e[3]=""}}var a=e[2],s="";if(this.options.pedantic){var u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);u&&(a=u[1],s=u[3])}else s=e[3]?e[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(n)?a.slice(1):a.slice(1,-1)),aE(e,{href:a?a.replace(this.rules.inline._escapes,"$1"):a,title:s?s.replace(this.rules.inline._escapes,"$1"):s},e[0],this.lexer)}}},{key:"reflink",value:function(t,e){var n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){var i=(n[2]||n[1]).replace(/\s+/g," ");if(!(i=e[i.toLowerCase()])||!i.href){var r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return aE(n,i,n[0],this.lexer)}}},{key:"emStrong",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this.rules.inline.emStrong.lDelim.exec(t);if(i&&(!i[3]||!n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var r=i[1]||i[2]||"";if(!r||r&&(""===n||this.rules.inline.punctuation.exec(n))){var o,a,s=i[0].length-1,u=s,l=0,c="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+s);null!=(i=c.exec(e));)if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6])if(a=o.length,i[3]||i[4])u+=a;else if(!((i[5]||i[6])&&s%3)||(s+a)%3){if(!((u-=a)>0)){if(a=Math.min(a,a+u+l),Math.min(s,a)%2){var h=t.slice(1,s+i.index+a);return{type:"em",raw:t.slice(0,s+i.index+a+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}var d=t.slice(2,s+i.index+a-1);return{type:"strong",raw:t.slice(0,s+i.index+a+1),text:d,tokens:this.lexer.inlineTokens(d,[])}}}else l+=a}}}},{key:"codespan",value:function(t){var e=this.rules.inline.code.exec(t);if(e){var n=e[2].replace(/\n/g," "),i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=U_(n,!0),{type:"codespan",raw:e[0],text:n}}}},{key:"br",value:function(t){var e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}},{key:"del",value:function(t){var e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2],[])}}},{key:"autolink",value:function(t,e){var n,i,r=this.rules.inline.autolink.exec(t);if(r)return i="@"===r[2]?"mailto:"+(n=U_(this.options.mangle?e(r[1]):r[1])):n=U_(r[1]),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}},{key:"url",value:function(t,e){var n;if(n=this.rules.inline.url.exec(t)){var i,r;if("@"===n[2])r="mailto:"+(i=U_(this.options.mangle?e(n[0]):n[0]));else{var o;do{o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(o!==n[0]);i=U_(n[0]),r="www."===n[1]?"http://"+i:i}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}},{key:"inlineText",value:function(t,e){var n,i=this.rules.inline.text.exec(t);if(i)return n=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):U_(i[0]):i[0]:U_(this.options.smartypants?e(i[0]):i[0]),{type:"text",raw:i[0],text:n}}}]),t}(),uE={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:tE,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};uE.def=q_(uE.def).replace("label",uE._label).replace("title",uE._title).getRegex(),uE.bullet=/(?:[*+-]|\d{1,9}[.)])/,uE.listItemStart=q_(/^( *)(bull) */).replace("bull",uE.bullet).getRegex(),uE.list=q_(uE.list).replace(/bull/g,uE.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+uE.def.source+")").getRegex(),uE._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",uE._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,uE.html=q_(uE.html,"i").replace("comment",uE._comment).replace("tag",uE._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),uE.paragraph=q_(uE._paragraph).replace("hr",uE.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",uE._tag).getRegex(),uE.blockquote=q_(uE.blockquote).replace("paragraph",uE.paragraph).getRegex(),uE.normal=eE({},uE),uE.gfm=eE({},uE.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),uE.gfm.table=q_(uE.gfm.table).replace("hr",uE.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",uE._tag).getRegex(),uE.gfm.paragraph=q_(uE._paragraph).replace("hr",uE.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",uE.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",uE._tag).getRegex(),uE.pedantic=eE({},uE.normal,{html:q_("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",uE._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:tE,paragraph:q_(uE.normal._paragraph).replace("hr",uE.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",uE.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var lE={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:tE,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:tE,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function cE(t){return t.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function hE(t){var e,n,i="",r=t.length;for(e=0;e<r;e++)n=t.charCodeAt(e),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i}lE._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",lE.punctuation=q_(lE.punctuation).replace(/punctuation/g,lE._punctuation).getRegex(),lE.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,lE.escapedEmSt=/\\\*|\\_/g,lE._comment=q_(uE._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),lE.emStrong.lDelim=q_(lE.emStrong.lDelim).replace(/punct/g,lE._punctuation).getRegex(),lE.emStrong.rDelimAst=q_(lE.emStrong.rDelimAst,"g").replace(/punct/g,lE._punctuation).getRegex(),lE.emStrong.rDelimUnd=q_(lE.emStrong.rDelimUnd,"g").replace(/punct/g,lE._punctuation).getRegex(),lE._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,lE._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,lE._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,lE.autolink=q_(lE.autolink).replace("scheme",lE._scheme).replace("email",lE._email).getRegex(),lE._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,lE.tag=q_(lE.tag).replace("comment",lE._comment).replace("attribute",lE._attribute).getRegex(),lE._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,lE._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,lE._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,lE.link=q_(lE.link).replace("label",lE._label).replace("href",lE._href).replace("title",lE._title).getRegex(),lE.reflink=q_(lE.reflink).replace("label",lE._label).replace("ref",uE._label).getRegex(),lE.nolink=q_(lE.nolink).replace("ref",uE._label).getRegex(),lE.reflinkSearch=q_(lE.reflinkSearch,"g").replace("reflink",lE.reflink).replace("nolink",lE.nolink).getRegex(),lE.normal=eE({},lE),lE.pedantic=eE({},lE.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:q_(/^!?\[(label)\]\((.*?)\)/).replace("label",lE._label).getRegex(),reflink:q_(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",lE._label).getRegex()}),lE.gfm=eE({},lE.normal,{escape:q_(lE.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),lE.gfm.url=q_(lE.gfm.url,"i").replace("email",lE.gfm._extended_email).getRegex(),lE.breaks=eE({},lE.gfm,{br:q_(lE.br).replace("{2,}","*").getRegex(),text:q_(lE.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var dE=function(){function t(e){nc(this,t),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||P_,this.options.tokenizer=this.options.tokenizer||new sE,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var n={block:uE.normal,inline:lE.normal};this.options.pedantic?(n.block=uE.pedantic,n.inline=lE.pedantic):this.options.gfm&&(n.block=uE.gfm,this.options.breaks?n.inline=lE.breaks:n.inline=lE.gfm),this.tokenizer.rules=n}return rc(t,[{key:"lex",value:function(t){var e;for(t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}},{key:"blockTokens",value:function(t){var e,n,i,r,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,(function(t,e,n){return e+"    ".repeat(n.length)}));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(n){return!!(e=n.call({lexer:o},t,a))&&(t=t.substring(e.raw.length),a.push(e),!0)}))))if(e=this.tokenizer.space(t))t=t.substring(e.raw.length),1===e.raw.length&&a.length>0?a[a.length-1].raw+="\n":a.push(e);else if(e=this.tokenizer.code(t))t=t.substring(e.raw.length),!(n=a[a.length-1])||"paragraph"!==n.type&&"text"!==n.type?a.push(e):(n.raw+="\n"+e.raw,n.text+="\n"+e.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(e=this.tokenizer.fences(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.heading(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.hr(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.blockquote(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.list(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.html(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.def(t))t=t.substring(e.raw.length),!(n=a[a.length-1])||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[e.tag]||(this.tokens.links[e.tag]={href:e.href,title:e.title}):(n.raw+="\n"+e.raw,n.text+="\n"+e.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(e=this.tokenizer.table(t))t=t.substring(e.raw.length),a.push(e);else if(e=this.tokenizer.lheading(t))t=t.substring(e.raw.length),a.push(e);else if(i=t,this.options.extensions&&this.options.extensions.startBlock&&function(){var e=1/0,n=t.slice(1),r=void 0;o.options.extensions.startBlock.forEach((function(t){"number"==typeof(r=t.call({lexer:this},n))&&r>=0&&(e=Math.min(e,r))})),e<1/0&&e>=0&&(i=t.substring(0,e+1))}(),this.state.top&&(e=this.tokenizer.paragraph(i)))n=a[a.length-1],r&&"paragraph"===n.type?(n.raw+="\n"+e.raw,n.text+="\n"+e.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):a.push(e),r=i.length!==t.length,t=t.substring(e.raw.length);else if(e=this.tokenizer.text(t))t=t.substring(e.raw.length),(n=a[a.length-1])&&"text"===n.type?(n.raw+="\n"+e.raw,n.text+="\n"+e.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):a.push(e);else if(t){var s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}return this.state.top=!0,a}},{key:"inline",value:function(t,e){this.inlineQueue.push({src:t,tokens:e})}},{key:"inlineTokens",value:function(t){var e,n,i,r,o,a,s=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=t;if(this.tokens.links){var c=Object.keys(this.tokens.links);if(c.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(l));)c.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,r.index)+"["+oE("a",r[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,r.index)+"["+oE("a",r[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,r.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(o||(a=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(n){return!!(e=n.call({lexer:s},t,u))&&(t=t.substring(e.raw.length),u.push(e),!0)}))))if(e=this.tokenizer.escape(t))t=t.substring(e.raw.length),u.push(e);else if(e=this.tokenizer.tag(t))t=t.substring(e.raw.length),(n=u[u.length-1])&&"text"===e.type&&"text"===n.type?(n.raw+=e.raw,n.text+=e.text):u.push(e);else if(e=this.tokenizer.link(t))t=t.substring(e.raw.length),u.push(e);else if(e=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(e.raw.length),(n=u[u.length-1])&&"text"===e.type&&"text"===n.type?(n.raw+=e.raw,n.text+=e.text):u.push(e);else if(e=this.tokenizer.emStrong(t,l,a))t=t.substring(e.raw.length),u.push(e);else if(e=this.tokenizer.codespan(t))t=t.substring(e.raw.length),u.push(e);else if(e=this.tokenizer.br(t))t=t.substring(e.raw.length),u.push(e);else if(e=this.tokenizer.del(t))t=t.substring(e.raw.length),u.push(e);else if(e=this.tokenizer.autolink(t,hE))t=t.substring(e.raw.length),u.push(e);else if(this.state.inLink||!(e=this.tokenizer.url(t,hE))){if(i=t,this.options.extensions&&this.options.extensions.startInline&&function(){var e=1/0,n=t.slice(1),r=void 0;s.options.extensions.startInline.forEach((function(t){"number"==typeof(r=t.call({lexer:this},n))&&r>=0&&(e=Math.min(e,r))})),e<1/0&&e>=0&&(i=t.substring(0,e+1))}(),e=this.tokenizer.inlineText(i,cE))t=t.substring(e.raw.length),"_"!==e.raw.slice(-1)&&(a=e.raw.slice(-1)),o=!0,(n=u[u.length-1])&&"text"===n.type?(n.raw+=e.raw,n.text+=e.text):u.push(e);else if(t){var h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}throw new Error(h)}}else t=t.substring(e.raw.length),u.push(e);return u}}],[{key:"rules",get:function(){return{block:uE,inline:lE}}},{key:"lex",value:function(e,n){return new t(n).lex(e)}},{key:"lexInline",value:function(e,n){return new t(n).inlineTokens(e)}}]),t}(),fE=function(){function t(e){nc(this,t),this.options=e||P_}return rc(t,[{key:"code",value:function(t,e,n){var i=(e||"").match(/\S*/)[0];if(this.options.highlight){var r=this.options.highlight(t,i);null!=r&&r!==t&&(n=!0,t=r)}return t=t.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+U_(i,!0)+'">'+(n?t:U_(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:U_(t,!0))+"</code></pre>\n"}},{key:"blockquote",value:function(t){return"<blockquote>\n".concat(t,"</blockquote>\n")}},{key:"html",value:function(t){return t}},{key:"heading",value:function(t,e,n,i){if(this.options.headerIds){var r=this.options.headerPrefix+i.slug(n);return"<h".concat(e,' id="').concat(r,'">').concat(t,"</h").concat(e,">\n")}return"<h".concat(e,">").concat(t,"</h").concat(e,">\n")}},{key:"hr",value:function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}},{key:"list",value:function(t,e,n){var i=e?"ol":"ul";return"<"+i+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+i+">\n"}},{key:"listitem",value:function(t){return"<li>".concat(t,"</li>\n")}},{key:"checkbox",value:function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}},{key:"paragraph",value:function(t){return"<p>".concat(t,"</p>\n")}},{key:"table",value:function(t,e){return e&&(e="<tbody>".concat(e,"</tbody>")),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}},{key:"tablerow",value:function(t){return"<tr>\n".concat(t,"</tr>\n")}},{key:"tablecell",value:function(t,e){var n=e.header?"th":"td";return(e.align?"<".concat(n,' align="').concat(e.align,'">'):"<".concat(n,">"))+t+"</".concat(n,">\n")}},{key:"strong",value:function(t){return"<strong>".concat(t,"</strong>")}},{key:"em",value:function(t){return"<em>".concat(t,"</em>")}},{key:"codespan",value:function(t){return"<code>".concat(t,"</code>")}},{key:"br",value:function(){return this.options.xhtml?"<br/>":"<br>"}},{key:"del",value:function(t){return"<del>".concat(t,"</del>")}},{key:"link",value:function(t,e,n){if(null===(t=X_(this.options.sanitize,this.options.baseUrl,t)))return n;var i='<a href="'+U_(t)+'"';return e&&(i+=' title="'+e+'"'),i+=">"+n+"</a>"}},{key:"image",value:function(t,e,n){if(null===(t=X_(this.options.sanitize,this.options.baseUrl,t)))return n;var i='<img src="'.concat(t,'" alt="').concat(n,'"');return e&&(i+=' title="'.concat(e,'"')),i+=this.options.xhtml?"/>":">"}},{key:"text",value:function(t){return t}}]),t}(),pE=function(){function t(){nc(this,t)}return rc(t,[{key:"strong",value:function(t){return t}},{key:"em",value:function(t){return t}},{key:"codespan",value:function(t){return t}},{key:"del",value:function(t){return t}},{key:"html",value:function(t){return t}},{key:"text",value:function(t){return t}},{key:"link",value:function(t,e,n){return""+n}},{key:"image",value:function(t,e,n){return""+n}},{key:"br",value:function(){return""}}]),t}(),gE=function(){function t(){nc(this,t),this.seen={}}return rc(t,[{key:"serialize",value:function(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}},{key:"getNextSafeSlug",value:function(t,e){var n=t,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[t];do{n=t+"-"+ ++i}while(this.seen.hasOwnProperty(n))}return e||(this.seen[t]=i,this.seen[n]=0),n}},{key:"slug",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serialize(t);return this.getNextSafeSlug(n,e.dryrun)}}]),t}(),mE=function(){function t(e){nc(this,t),this.options=e||P_,this.options.renderer=this.options.renderer||new fE,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new pE,this.slugger=new gE}return rc(t,[{key:"parse",value:function(t){var e,n,i,r,o,a,s,u,l,c,h,d,f,p,g,m,v,y,b,_=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],E="",x=t.length;for(e=0;e<x;e++)if(c=t[e],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[c.type])||!1===(b=this.options.extensions.renderers[c.type].call({parser:this},c))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type))switch(c.type){case"space":continue;case"hr":E+=this.renderer.hr();continue;case"heading":E+=this.renderer.heading(this.parseInline(c.tokens),c.depth,W_(this.parseInline(c.tokens,this.textRenderer)),this.slugger);continue;case"code":E+=this.renderer.code(c.text,c.lang,c.escaped);continue;case"table":for(u="",s="",r=c.header.length,n=0;n<r;n++)s+=this.renderer.tablecell(this.parseInline(c.header[n].tokens),{header:!0,align:c.align[n]});for(u+=this.renderer.tablerow(s),l="",r=c.rows.length,n=0;n<r;n++){for(s="",o=(a=c.rows[n]).length,i=0;i<o;i++)s+=this.renderer.tablecell(this.parseInline(a[i].tokens),{header:!1,align:c.align[i]});l+=this.renderer.tablerow(s)}E+=this.renderer.table(u,l);continue;case"blockquote":l=this.parse(c.tokens),E+=this.renderer.blockquote(l);continue;case"list":for(h=c.ordered,d=c.start,f=c.loose,r=c.items.length,l="",n=0;n<r;n++)m=(g=c.items[n]).checked,v=g.task,p="",g.task&&(y=this.renderer.checkbox(m),f?g.tokens.length>0&&"paragraph"===g.tokens[0].type?(g.tokens[0].text=y+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=y+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:y}):p+=y),p+=this.parse(g.tokens,f),l+=this.renderer.listitem(p,v,m);E+=this.renderer.list(l,h,d);continue;case"html":E+=this.renderer.html(c.text);continue;case"paragraph":E+=this.renderer.paragraph(this.parseInline(c.tokens));continue;case"text":for(l=c.tokens?this.parseInline(c.tokens):c.text;e+1<x&&"text"===t[e+1].type;)l+="\n"+((c=t[++e]).tokens?this.parseInline(c.tokens):c.text);E+=_?this.renderer.paragraph(l):l;continue;default:var w='Token with "'+c.type+'" type was not found.';if(this.options.silent)return void console.error(w);throw new Error(w)}else E+=b||"";return E}},{key:"parseInline",value:function(t,e){e=e||this.renderer;var n,i,r,o="",a=t.length;for(n=0;n<a;n++)if(i=t[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type])||!1===(r=this.options.extensions.renderers[i.type].call({parser:this},i))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type))switch(i.type){case"escape":case"text":o+=e.text(i.text);break;case"html":o+=e.html(i.text);break;case"link":o+=e.link(i.href,i.title,this.parseInline(i.tokens,e));break;case"image":o+=e.image(i.href,i.title,i.text);break;case"strong":o+=e.strong(this.parseInline(i.tokens,e));break;case"em":o+=e.em(this.parseInline(i.tokens,e));break;case"codespan":o+=e.codespan(i.text);break;case"br":o+=e.br();break;case"del":o+=e.del(this.parseInline(i.tokens,e));break;default:var s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return void console.error(s);throw new Error(s)}else o+=r||"";return o}}],[{key:"parse",value:function(e,n){return new t(n).parse(e)}},{key:"parseInline",value:function(e,n){return new t(n).parseInline(e)}}]),t}();function vE(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if("function"==typeof e&&(n=e,e=null),rE(e=eE({},vE.defaults,e||{})),n){var i,r=e.highlight;try{i=dE.lex(t,e)}catch(t){return n(t)}var o=function(t){var o;if(!t)try{e.walkTokens&&vE.walkTokens(i,e.walkTokens),o=mE.parse(i,e)}catch(e){t=e}return e.highlight=r,t?n(t):n(null,o)};if(!r||r.length<3)return o();if(delete e.highlight,!i.length)return o();var a=0;return vE.walkTokens(i,(function(t){"code"===t.type&&(a++,setTimeout((function(){r(t.text,t.lang,(function(e,n){if(e)return o(e);null!=n&&n!==t.text&&(t.text=n,t.escaped=!0),0===--a&&o()}))}),0))})),void(0===a&&o())}try{var s=dE.lex(t,e);return e.walkTokens&&vE.walkTokens(s,e.walkTokens),mE.parse(s,e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+U_(t.message+"",!0)+"</pre>";throw t}}vE.options=vE.setOptions=function(t){var e;return eE(vE.defaults,t),e=vE.defaults,P_=e,vE},vE.getDefaults=L_,vE.defaults=P_,vE.use=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i,r=eE.apply(void 0,[{}].concat(e)),o=vE.defaults.extensions||{renderers:{},childTokens:{}};e.forEach((function(t){if(t.extensions&&(i=!0,t.extensions.forEach((function(t){if(!t.name)throw new Error("extension name required");if(t.renderer){var e=o.renderers?o.renderers[t.name]:null;o.renderers[t.name]=e?function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=t.renderer.apply(this,i);return!1===o&&(o=e.apply(this,i)),o}:t.renderer}if(t.tokenizer){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");o[t.level]?o[t.level].unshift(t.tokenizer):o[t.level]=[t.tokenizer],t.start&&("block"===t.level?o.startBlock?o.startBlock.push(t.start):o.startBlock=[t.start]:"inline"===t.level&&(o.startInline?o.startInline.push(t.start):o.startInline=[t.start]))}t.childTokens&&(o.childTokens[t.name]=t.childTokens)}))),t.renderer&&function(){var e=vE.defaults.renderer||new fE,n=function(n){var i=e[n];e[n]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=t.renderer[n].apply(e,o);return!1===s&&(s=i.apply(e,o)),s}};for(var i in t.renderer)n(i);r.renderer=e}(),t.tokenizer&&function(){var e=vE.defaults.tokenizer||new sE,n=function(n){var i=e[n];e[n]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=t.tokenizer[n].apply(e,o);return!1===s&&(s=i.apply(e,o)),s}};for(var i in t.tokenizer)n(i);r.tokenizer=e}(),t.walkTokens){var e=vE.defaults.walkTokens;r.walkTokens=function(n){t.walkTokens.call(this,n),e&&e.call(this,n)}}i&&(r.extensions=o),vE.setOptions(r)}))},vE.walkTokens=function(t,e){var n,i=oc(t);try{var r=function(){var t=n.value;switch(e.call(vE,t),t.type){case"table":var i,r=oc(t.header);try{for(r.s();!(i=r.n()).done;){var o=i.value;vE.walkTokens(o.tokens,e)}}catch(t){r.e(t)}finally{r.f()}var a,s=oc(t.rows);try{for(s.s();!(a=s.n()).done;){var u,l=oc(a.value);try{for(l.s();!(u=l.n()).done;){var c=u.value;vE.walkTokens(c.tokens,e)}}catch(t){l.e(t)}finally{l.f()}}}catch(t){s.e(t)}finally{s.f()}break;case"list":vE.walkTokens(t.items,e);break;default:vE.defaults.extensions&&vE.defaults.extensions.childTokens&&vE.defaults.extensions.childTokens[t.type]?vE.defaults.extensions.childTokens[t.type].forEach((function(n){vE.walkTokens(t[n],e)})):t.tokens&&vE.walkTokens(t.tokens,e)}};for(i.s();!(n=i.n()).done;)r()}catch(t){i.e(t)}finally{i.f()}},vE.parseInline=function(t,e){if(null==t)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");rE(e=eE({},vE.defaults,e||{}));try{var n=dE.lexInline(t,e);return e.walkTokens&&vE.walkTokens(n,e.walkTokens),mE.parseInline(n,e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+U_(t.message+"",!0)+"</pre>";throw t}},vE.Parser=mE,vE.parser=mE.parse,vE.Renderer=fE,vE.TextRenderer=pE,vE.Lexer=dE,vE.lexer=dE.lex,vE.Tokenizer=sE,vE.Slugger=gE,vE.parse=vE;vE.options,vE.setOptions,vE.use,vE.walkTokens,vE.parseInline,mE.parse,dE.lex;function yE(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var bE={space:/^\n+/,blockCode:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)(\n)(|[\s\S]*?\n)( {0,3}\1[~`]* *(?:\n+|$)|$)/,heading:/^#{1,6} [^\n]+(\n|$)/,lheading:/^[^\n]+\n {0,3}(=+|-+) *(\n+|$)/,hr:/^(([-_*]) *){3,}(\n+|$)/,list:/^( {0})((?:[*+-]|\d{1,9}\.)) [\s\S]+?(?:\n+(?! )(?!\1(?:[*+-]|\d{1,9}\.) )\n*|\s*$)/,blockquote:/^( {0,3}> ?([^\n]*)(?:\n|$))+/,html:/^ {0,3}(?:<(script|pre|style)[\s>][\s\S]*?(?:<\/\1>[^\n]*\n+|$)|<!--(?!-?>)[\s\S]*?-->[^\n]*(\n+|$)|<\/?(\w+)(?: +|\n|\/?>)[\s\S]*?(?:\n{2,}|$))/,paragraph:/^[^\n]+/},_E={strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,inlineCode:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,link:/^!?\[([\s\S]+)\]\(\s*([\s\S]+)(?:\s+([\s\S]+))?\s*\)/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/},EE=function(t,e,n){return"<".concat(t,' class="mdhl-').concat(n,'">').concat(e,"</").concat(t,">")},xE={codeInFences:function(t,e){return EE("span",yE(t),"codeInFences")},heading:function(t,e,n){return EE("b",n(t.text,e),t.type)},lheading:function(t,e,n){return EE("b",n(t.text,e),"heading")},paragraph:function(t,e,n){return EE("span",n(t.text,e),t.type)},list:function(t,e,n){var i=t.text.split("\n").map((function(t){var i=t.substr(0,1),r=t.substr(1),o=n(r,e);return"".concat(EE("span",i,"bullet")).concat(o)})).join("\n");return EE("span",i,"list")},fences:function(t,e){var n=jl(t.cap,6),i=n[1],r=n[2],o=n[3],a=n[4],s=n[5],u=e.codeInFences(a,r);return"".concat(i).concat(yE(r)).concat(o).concat(u).concat(s)},space:function(t){return t.text},text:function(t){return t.text},em:function(t){return EE("i",t.text,t.type)},strong:function(t){return EE("b",t.text,t.type)},defaultInlineRenderer:function(t){return EE("span",t.text,t.type)},defaultBlockRenderer:function(t){return EE("span",yE(t.text),t.type)}};function wE(t,e){for(var n="";t;)if(!Object.keys(_E).some((function(i){var r=_E[i].exec(t);if(r){var o=r[0];t=t.substring(o.length);var a=yE(o);return n+=(e[i]||e.defaultInlineRenderer)({type:i,text:a,cap:r},e,wE),!0}return!1})))throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return n}function AE(t){var e=[];for(t=t.replace(/^ +$/gm,"");t;)if(!Object.keys(bE).some((function(n){var i=bE[n].exec(t);if(i){var r=i[0];return t=t.substring(r.length),e.push({text:r,type:n,cap:i}),!0}return!1})))throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return e}function DE(t,e){return t.map((function(t){return(e[t.type]||e.defaultBlockRenderer)(t,e,wE)})).join("").replace(/\n/g,"<br/>")}var CE=function(t){t.data("markdownEditorFormComponent",(function(t){return{attachment:null,overlay:null,preview:"",state:t.state,tab:t.tab,init:function(){var t=this;null!==this.state&&this.$nextTick((function(){t.render()})),this.$watch("state",(function(){t.render()}))},render:function(){this.$refs.textarea.scrollHeight>0&&(this.$refs.overlay.style.height="150px",this.$refs.overlay.style.height=this.$refs.textarea.scrollHeight+"px"),this.overlay=null,this.overlay=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xE;return DE(AE(t),e)}(this.state),this.preview=null,this.preview=vE(this.state)},checkForAutoInsertion:function(t){var e=this.$refs.textarea.value.split("\n"),n=this.$refs.textarea.value.substring(0,this.$refs.textarea.value.selectionStart).split("\n").length,i=e[n-2];if(i.match(/^(\*\s|-\s)|^(\d)+\./)){if(i.match(/^(\*\s)/))i.trim().length>1?e[n-1]="* ":delete e[n-2];else if(i.match(/^(-\s)/))i.trim().length>1?e[n-1]="- ":delete e[n-2];else{var r=i.match(/^(\d)+/)[0];i.trim().length>r.length+2?e[n-1]="".concat(parseInt(r)+1,". "):delete e[n-2]}this.state=e.join("\n"),this.render()}}}}))},TE=mc(Ec());TE.default.config.blockAttributes.default.tagName="p",TE.default.config.blockAttributes.default.breakOnReturn=!0,TE.default.config.blockAttributes.heading={tagName:"h2",terminal:!0,breakOnReturn:!0,group:!1},TE.default.config.blockAttributes.subHeading={tagName:"h3",terminal:!0,breakOnReturn:!0,group:!1},TE.default.Block.prototype.breaksOnReturn=function(){var t,e=this.getLastAttribute(),n=TE.default.getBlockConfig(e||"default");return null!==(t=null==n?void 0:n.breakOnReturn)&&void 0!==t&&t},TE.default.LineBreakInsertion.prototype.shouldInsertBlockBreak=function(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset>0:!this.shouldBreakFormattedBlock()&&this.breaksOnReturn};var kE=function(t){t.data("richEditorFormComponent",(function(t){return{state:t.state,init:function(){var t,e,n=this;null===(t=this.$refs.trix)||void 0===t||null===(e=t.editor)||void 0===e||e.loadHTML(this.state),this.$watch("state",(function(){var t,e;document.activeElement!==n.$refs.trix&&(null===(t=n.$refs.trix)||void 0===t||null===(e=t.editor)||void 0===e||e.loadHTML(n.state))}))}}}))},SE=mc(xc()),IE=function(t){t.data("selectFormComponent",(function(e){var n,i,r,o,a,s=e.getOptionLabelUsing,u=e.getOptionLabelsUsing,l=e.getOptionsUsing,c=e.getSearchResultsUsing,h=e.isAutofocused,d=e.isMultiple,f=e.hasDynamicOptions,p=e.hasDynamicSearchResults,g=e.loadingMessage,m=e.maxItems,v=e.noSearchResultsMessage,y=e.options,b=e.placeholder,_=e.searchingMessage,E=e.searchPrompt;return{isSearching:!1,select:null,selectedOptions:[],isStateBeingUpdated:!1,state:e.state,init:(a=Bl(Pl().mark((function e(){var n=this;return Pl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.select=new SE.default(this.$refs.input,{allowHTML:!1,duplicateItemsAllowed:!1,itemSelectText:"",loadingText:g,maxItemCount:null!=m?m:-1,noChoicesText:E,noResultsText:v,placeholderValue:b,removeItemButton:!0,renderChoiceLimit:50,searchChoices:!p,searchFields:["label"],searchResultLimit:50,shouldSort:!1}),e.next=3,this.refreshChoices({withInitialOptions:!0});case 3:[null,void 0,""].includes(this.state)||this.select.setChoiceByValue(this.formatState(this.state)),this.refreshPlaceholder(),h&&this.select.showDropdown(),this.$refs.input.addEventListener("change",(function(){var t;n.refreshPlaceholder(),n.isStateBeingUpdated||(n.isStateBeingUpdated=!0,n.state=null!==(t=n.select.getValue(!0))&&void 0!==t?t:null,n.$nextTick((function(){return n.isStateBeingUpdated=!1})))})),f&&this.$refs.input.addEventListener("showDropdown",Bl(Pl().mark((function t(){return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.select.clearChoices(),t.next=3,n.select.setChoices([{value:"",label:g,disabled:!0}]);case 3:return t.next=5,n.refreshChoices();case 5:case"end":return t.stop()}}),t)})))),p&&(this.$refs.input.addEventListener("search",function(){var t=Bl(Pl().mark((function t(e){var i,r;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(i=e.detail.value)||void 0===i?void 0:i.trim(),![null,void 0,""].includes(r)){t.next=3;break}return t.abrupt("return");case 3:return n.isSearching=!0,n.select.clearChoices(),t.next=7,n.select.setChoices([{value:"",label:_,disabled:!0}]);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.$refs.input.addEventListener("search",t.debounce(function(){var t=Bl(Pl().mark((function t(e){var i;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.refreshChoices({search:null===(i=e.detail.value)||void 0===i?void 0:i.trim()});case 2:n.isSearching=!1;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),1e3))),this.$watch("state",Bl(Pl().mark((function t(){var e;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.refreshPlaceholder(),!n.isStateBeingUpdated){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.getChoices({withInitialOptions:!f});case 5:e=t.sent,n.select.clearStore(),n.setChoices(e),[null,void 0,""].includes(n.state)||n.select.setChoiceByValue(n.formatState(n.state));case 9:case"end":return t.stop()}}),t)}))));case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),refreshChoices:(o=Bl(Pl().mark((function t(){var e,n=arguments;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},t.t0=this,t.next=4,this.getChoices(e);case 4:t.t1=t.sent,t.t0.setChoices.call(t.t0,t.t1);case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),setChoices:function(t){this.select.setChoices(t,"value","label",!0)},getChoices:(r=Bl(Pl().mark((function t(){var e,n,i=arguments;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,this.getOptions(e);case 3:return n=t.sent,t.t0=this,t.t1=tc,t.t2=tc({},n),t.next=9,this.getMissingOptions(n);case 9:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.abrupt("return",t.t0.transformOptionsIntoChoices.call(t.t0,t.t4));case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),getOptions:(i=Bl(Pl().mark((function t(e){var n;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.search,!e.withInitialOptions){t.next=3;break}return t.abrupt("return",y);case 3:if(""===n||null==n){t.next=7;break}return t.next=6,c(n);case 6:case 9:return t.abrupt("return",t.sent);case 7:return t.next=9,l();case 10:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)}),transformOptionsIntoChoices:function(t){return Object.entries(t).map((function(t){var e=jl(t,2),n=e[0];return{label:e[1],value:n}}))},refreshPlaceholder:function(){d||(this.select._renderItems(),[null,void 0,""].includes(this.state)&&(this.$el.querySelector(".choices__list--single").innerHTML='<div class="choices__placeholder choices__item">'.concat(b,"</div>")))},formatState:function(t){return d?(null!=t?t:[]).map((function(t){return null==t?void 0:t.toString()})):null==t?void 0:t.toString()},getMissingOptions:(n=Bl(Pl().mark((function t(e){var n;return Pl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(![null,void 0,"",[],{}].includes(this.state)){t.next=2;break}return t.abrupt("return",{});case 2:if(e.length||(e={}),!d){t.next=9;break}if(!this.state.every((function(t){return t in e}))){t.next=6;break}return t.abrupt("return",{});case 6:return t.next=8,u();case 8:return t.abrupt("return",t.sent);case 9:if(!(this.state in e)){t.next=11;break}return t.abrupt("return",e);case 11:return n={},t.next=14,s();case 14:return n[this.state]=t.sent,t.abrupt("return",n);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}}))},OE=function(t){t.data("tagsInputFormComponent",(function(t){return{newTag:"",state:t.state,createTag:function(){this.newTag=this.newTag.trim(),""!==this.newTag&&(this.state.includes(this.newTag)||this.state.push(this.newTag),this.newTag="")},deleteTag:function(t){this.state=this.state.filter((function(e){return e!==t}))}}}))};function ME(t){return(ME="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LE(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function PE(t,e,n){return e&&LE(t.prototype,e),n&&LE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function FE(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BE(t,e)}function NE(t){return(NE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function BE(t,e){return(BE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jE(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function VE(t,e){if(e&&("object"===uc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=NE(t);if(e){var r=NE(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return VE(this,n)}}function UE(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=NE(t)););return t}function GE(){return GE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=UE(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},GE.apply(this,arguments)}function WE(t,e,n,i){return WE="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,i){var r,o=UE(t,e);if(o){if((r=Object.getOwnPropertyDescriptor(o,e)).set)return r.set.call(i,n),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(i,e)){if(!r.writable)return!1;r.value=n,Object.defineProperty(i,e,r)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(i,e,n);return!0},WE(t,e,n,i)}function HE(t,e,n,i,r){if(!WE(t,e,n,i||t)&&r)throw new Error("failed to set property");return n}function qE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $E(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var YE=function(){function t(e){RE(this,t),Object.assign(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},e)}return PE(t,[{key:"aggregate",value:function(t){return this.rawInserted+=t.rawInserted,this.skip=this.skip||t.skip,this.inserted+=t.inserted,this.tailShift+=t.tailShift,this}},{key:"offset",get:function(){return this.tailShift+this.inserted.length}}]),t}();function XE(t){return"string"==typeof t||t instanceof String}var KE="NONE",ZE="LEFT",JE="FORCE_LEFT",QE="RIGHT",tx="FORCE_RIGHT";function ex(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function nx(t){return Array.isArray(t)?t:[t,new YE]}function ix(t,e){if(e===t)return!0;var n,i=Array.isArray(e),r=Array.isArray(t);if(i&&r){if(e.length!=t.length)return!1;for(n=0;n<e.length;n++)if(!ix(e[n],t[n]))return!1;return!0}if(i!=r)return!1;if(e&&t&&"object"===ME(e)&&"object"===ME(t)){var o=e instanceof Date,a=t instanceof Date;if(o&&a)return e.getTime()==t.getTime();if(o!=a)return!1;var s=e instanceof RegExp,u=t instanceof RegExp;if(s&&u)return e.toString()==t.toString();if(s!=u)return!1;var l=Object.keys(e);for(n=0;n<l.length;n++)if(!Object.prototype.hasOwnProperty.call(t,l[n]))return!1;for(n=0;n<l.length;n++)if(!ix(t[l[n]],e[l[n]]))return!1;return!0}return!(!e||!t||"function"!=typeof e||"function"!=typeof t)&&e.toString()===t.toString()}var rx=function(){function t(e,n,i,r){for(RE(this,t),this.value=e,this.cursorPos=n,this.oldValue=i,this.oldSelection=r;this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}return PE(t,[{key:"startChangePos",get:function(){return Math.min(this.cursorPos,this.oldSelection.start)}},{key:"insertedCount",get:function(){return this.cursorPos-this.startChangePos}},{key:"inserted",get:function(){return this.value.substr(this.startChangePos,this.insertedCount)}},{key:"removedCount",get:function(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}},{key:"removed",get:function(){return this.oldValue.substr(this.startChangePos,this.removedCount)}},{key:"head",get:function(){return this.value.substring(0,this.startChangePos)}},{key:"tail",get:function(){return this.value.substring(this.startChangePos+this.insertedCount)}},{key:"removeDirection",get:function(){return!this.removedCount||this.insertedCount?KE:this.oldSelection.end!==this.cursorPos&&this.oldSelection.start!==this.cursorPos||this.oldSelection.end!==this.oldSelection.start?ZE:QE}}]),t}(),ox=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;RE(this,t),this.value=e,this.from=n,this.stop=i}return PE(t,[{key:"toString",value:function(){return this.value}},{key:"extend",value:function(t){this.value+=String(t)}},{key:"appendTo",value:function(t){return t.append(this.toString(),{tail:!0}).aggregate(t._appendPlaceholder())}},{key:"state",get:function(){return{value:this.value,from:this.from,stop:this.stop}},set:function(t){Object.assign(this,t)}},{key:"unshift",value:function(t){if(!this.value.length||null!=t&&this.from>=t)return"";var e=this.value[0];return this.value=this.value.slice(1),e}},{key:"shift",value:function(){if(!this.value.length)return"";var t=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),t}}]),t}();function ax(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new ax.InputMask(t,e)}var sx=function(){function t(e){RE(this,t),this._value="",this._update(Object.assign({},t.DEFAULTS,e)),this.isInitialized=!0}return PE(t,[{key:"updateOptions",value:function(t){Object.keys(t).length&&this.withValueRefresh(this._update.bind(this,t))}},{key:"_update",value:function(t){Object.assign(this,t)}},{key:"state",get:function(){return{_value:this.value}},set:function(t){this._value=t._value}},{key:"reset",value:function(){this._value=""}},{key:"value",get:function(){return this._value},set:function(t){this.resolve(t)}},{key:"resolve",value:function(t){return this.reset(),this.append(t,{input:!0},""),this.doCommit(),this.value}},{key:"unmaskedValue",get:function(){return this.value},set:function(t){this.reset(),this.append(t,{},""),this.doCommit()}},{key:"typedValue",get:function(){return this.doParse(this.value)},set:function(t){this.value=this.doFormat(t)}},{key:"rawInputValue",get:function(){return this.extractInput(0,this.value.length,{raw:!0})},set:function(t){this.reset(),this.append(t,{raw:!0},""),this.doCommit()}},{key:"isComplete",get:function(){return!0}},{key:"isFilled",get:function(){return this.isComplete}},{key:"nearestInputPos",value:function(t,e){return t}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this.value.slice(t,e)}},{key:"extractTail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return new ox(this.extractInput(t,e),t)}},{key:"appendTail",value:function(t){return XE(t)&&(t=new ox(String(t))),t.appendTo(this)}},{key:"_appendCharRaw",value:function(t){return t?(this._value+=t,new YE({inserted:t,rawInserted:t})):new YE}},{key:"_appendChar",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,r=this.state,o=nx(this.doPrepare(t,n)),a=qE(o,2);if(t=a[0],(e=(e=a[1]).aggregate(this._appendCharRaw(t,n))).inserted){var s,u=!1!==this.doValidate(n);if(u&&null!=i){var l=this.state;!0===this.overwrite&&(s=i.state,i.unshift(this.value.length));var c=this.appendTail(i);(u=c.rawInserted===i.toString())&&c.inserted||"shift"!==this.overwrite||(this.state=l,s=i.state,i.shift(),u=(c=this.appendTail(i)).rawInserted===i.toString()),u&&c.inserted&&(this.state=l)}u||(e=new YE,this.state=r,i&&s&&(i.state=s))}return e}},{key:"_appendPlaceholder",value:function(){return new YE}},{key:"_appendEager",value:function(){return new YE}},{key:"append",value:function(t,e,n){if(!XE(t))throw new Error("value should be string");var i=new YE,r=XE(n)?new ox(String(n)):n;e&&e.tail&&(e._beforeTailState=this.state);for(var o=0;o<t.length;++o)i.aggregate(this._appendChar(t[o],e,r));return null!=r&&(i.tailShift+=this.appendTail(r).tailShift),this.eager&&null!=e&&e.input&&t&&i.aggregate(this._appendEager()),i}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this._value=this.value.slice(0,t)+this.value.slice(e),new YE}},{key:"withValueRefresh",value:function(t){if(this._refreshing||!this.isInitialized)return t();this._refreshing=!0;var e=this.rawInputValue,n=this.value,i=t();return this.rawInputValue=e,this.value&&this.value!==n&&0===n.indexOf(this.value)&&this.append(n.slice(this.value.length),{},""),delete this._refreshing,i}},{key:"runIsolated",value:function(t){if(this._isolated||!this.isInitialized)return t(this);this._isolated=!0;var e=this.state,n=t(this);return this.state=e,delete this._isolated,n}},{key:"doPrepare",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.prepare?this.prepare(t,this,e):t}},{key:"doValidate",value:function(t){return(!this.validate||this.validate(this.value,this,t))&&(!this.parent||this.parent.doValidate(t))}},{key:"doCommit",value:function(){this.commit&&this.commit(this.value,this)}},{key:"doFormat",value:function(t){return this.format?this.format(t,this):t}},{key:"doParse",value:function(t){return this.parse?this.parse(t,this):t}},{key:"splice",value:function(t,e,n,i){var r,o=t+e,a=this.extractTail(o);this.eager&&(i=function(t){switch(t){case ZE:return JE;case QE:return tx;default:return t}}(i),r=this.extractInput(0,o,{raw:!0}));var s=this.nearestInputPos(t,e>1&&0!==t&&!this.eager?KE:i),u=new YE({tailShift:s-t}).aggregate(this.remove(s));if(this.eager&&i!==KE&&r===this.rawInputValue)if(i===JE)for(var l;r===this.rawInputValue&&(l=this.value.length);)u.aggregate(new YE({tailShift:-1})).aggregate(this.remove(l-1));else i===tx&&a.unshift();return u.aggregate(this.append(n,{input:!0},a))}},{key:"maskEquals",value:function(t){return this.mask===t}}]),t}();function ux(t){if(null==t)throw new Error("mask property should be defined");return t instanceof RegExp?ax.MaskedRegExp:XE(t)?ax.MaskedPattern:t instanceof Date||t===Date?ax.MaskedDate:t instanceof Number||"number"==typeof t||t===Number?ax.MaskedNumber:Array.isArray(t)||t===Array?ax.MaskedDynamic:ax.Masked&&t.prototype instanceof ax.Masked?t:t instanceof ax.Masked?t.constructor:t instanceof Function?ax.MaskedFunction:(console.warn("Mask not found for mask",t),ax.Masked)}function lx(t){if(ax.Masked&&t instanceof ax.Masked)return t;var e=(t=Object.assign({},t)).mask;if(ax.Masked&&e instanceof ax.Masked)return e;var n=ux(e);if(!n)throw new Error("Masked class is not found for provided mask, appropriate module needs to be import manually before creating mask.");return new n(t)}sx.DEFAULTS={format:function(t){return t},parse:function(t){return t}},ax.Masked=sx,ax.createMask=lx;var cx=["mask"],hx={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},dx=function(){function t(e){RE(this,t);var n=e.mask,i=jE(e,cx);this.masked=lx({mask:n}),Object.assign(this,i)}return PE(t,[{key:"reset",value:function(){this.isFilled=!1,this.masked.reset()}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return 0===t&&e>=1?(this.isFilled=!1,this.masked.remove(t,e)):new YE}},{key:"value",get:function(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}},{key:"unmaskedValue",get:function(){return this.masked.unmaskedValue}},{key:"isComplete",get:function(){return Boolean(this.masked.value)||this.isOptional}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isFilled)return new YE;var n=this.masked.state,i=this.masked._appendChar(t,e);return i.inserted&&!1===this.doValidate(e)&&(i.inserted=i.rawInserted="",this.masked.state=n),i.inserted||this.isOptional||this.lazy||e.input||(i.inserted=this.placeholderChar),i.skip=!i.inserted&&!this.isOptional,this.isFilled=Boolean(i.inserted),i}},{key:"append",value:function(){var t;return(t=this.masked).append.apply(t,arguments)}},{key:"_appendPlaceholder",value:function(){var t=new YE;return this.isFilled||this.isOptional||(this.isFilled=!0,t.inserted=this.placeholderChar),t}},{key:"_appendEager",value:function(){return new YE}},{key:"extractTail",value:function(){var t;return(t=this.masked).extractTail.apply(t,arguments)}},{key:"appendTail",value:function(){var t;return(t=this.masked).appendTail.apply(t,arguments)}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:void 0;return this.masked.extractInput(t,e,n)}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KE,n=0,i=this.value.length,r=Math.min(Math.max(t,n),i);switch(e){case ZE:case JE:return this.isComplete?r:n;case QE:case tx:return this.isComplete?r:i;default:return r}}},{key:"doValidate",value:function(){var t,e;return(t=this.masked).doValidate.apply(t,arguments)&&(!this.parent||(e=this.parent).doValidate.apply(e,arguments))}},{key:"doCommit",value:function(){this.masked.doCommit()}},{key:"state",get:function(){return{masked:this.masked.state,isFilled:this.isFilled}},set:function(t){this.masked.state=t.masked,this.isFilled=t.isFilled}}]),t}(),fx=function(){function t(e){RE(this,t),Object.assign(this,e),this._value="",this.isFixed=!0}return PE(t,[{key:"value",get:function(){return this._value}},{key:"unmaskedValue",get:function(){return this.isUnmasking?this.value:""}},{key:"reset",value:function(){this._isRawInput=!1,this._value=""}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length;return this._value=this._value.slice(0,t)+this._value.slice(e),this._value||(this._isRawInput=!1),new YE}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KE,n=0,i=this._value.length;switch(e){case ZE:case JE:return n;default:return i}}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.raw&&this._isRawInput&&this._value.slice(t,e)||""}},{key:"isComplete",get:function(){return!0}},{key:"isFilled",get:function(){return Boolean(this._value)}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new YE;if(this._value)return n;var i=this.char===t,r=i&&(this.isUnmasking||e.input||e.raw)&&!this.eager&&!e.tail;return r&&(n.rawInserted=this.char),this._value=n.inserted=this.char,this._isRawInput=r&&(e.raw||e.input),n}},{key:"_appendEager",value:function(){return this._appendChar(this.char)}},{key:"_appendPlaceholder",value:function(){var t=new YE;return this._value||(this._value=t.inserted=this.char),t}},{key:"extractTail",value:function(){return arguments.length>1&&void 0!==arguments[1]||this.value.length,new ox("")}},{key:"appendTail",value:function(t){return XE(t)&&(t=new ox(String(t))),t.appendTo(this)}},{key:"append",value:function(t,e,n){var i=this._appendChar(t[0],e);return null!=n&&(i.tailShift+=this.appendTail(n).tailShift),i}},{key:"doCommit",value:function(){}},{key:"state",get:function(){return{_value:this._value,_isRawInput:this._isRawInput}},set:function(t){Object.assign(this,t)}}]),t}(),px=["chunks"],gx=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;RE(this,t),this.chunks=e,this.from=n}return PE(t,[{key:"toString",value:function(){return this.chunks.map(String).join("")}},{key:"extend",value:function(e){if(String(e)){XE(e)&&(e=new ox(String(e)));var n=this.chunks[this.chunks.length-1],i=n&&(n.stop===e.stop||null==e.stop)&&e.from===n.from+n.toString().length;if(e instanceof ox)i?n.extend(e.toString()):this.chunks.push(e);else if(e instanceof t){if(null==e.stop)for(var r;e.chunks.length&&null==e.chunks[0].stop;)(r=e.chunks.shift()).from+=e.from,this.extend(r);e.toString()&&(e.stop=e.blockIndex,this.chunks.push(e))}}}},{key:"appendTo",value:function(e){if(!(e instanceof ax.MaskedPattern))return new ox(this.toString()).appendTo(e);for(var n=new YE,i=0;i<this.chunks.length&&!n.skip;++i){var r=this.chunks[i],o=e._mapPosToBlock(e.value.length),a=r.stop,s=void 0;if(null!=a&&(!o||o.index<=a)&&((r instanceof t||e._stops.indexOf(a)>=0)&&n.aggregate(e._appendPlaceholder(a)),s=r instanceof t&&e._blocks[a]),s){var u=s.appendTail(r);u.skip=!1,n.aggregate(u),e._value+=u.inserted;var l=r.toString().slice(u.rawInserted.length);l&&n.aggregate(e.append(l,{tail:!0}))}else n.aggregate(e.append(r.toString(),{tail:!0}))}return n}},{key:"state",get:function(){return{chunks:this.chunks.map((function(t){return t.state})),from:this.from,stop:this.stop,blockIndex:this.blockIndex}},set:function(e){var n=e.chunks,i=jE(e,px);Object.assign(this,i),this.chunks=n.map((function(e){var n="chunks"in e?new t:new ox;return n.state=e,n}))}},{key:"unshift",value:function(t){if(!this.chunks.length||null!=t&&this.from>=t)return"";for(var e=null!=t?t-this.from:t,n=0;n<this.chunks.length;){var i=this.chunks[n],r=i.unshift(e);if(i.toString()){if(!r)break;++n}else this.chunks.splice(n,1);if(r)return r}return""}},{key:"shift",value:function(){if(!this.chunks.length)return"";for(var t=this.chunks.length-1;0<=t;){var e=this.chunks[t],n=e.shift();if(e.toString()){if(!n)break;--t}else this.chunks.splice(t,1);if(n)return n}return""}}]),t}(),mx=function(){function t(e,n){RE(this,t),this.masked=e,this._log=[];var i=e._mapPosToBlock(n)||(n<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0}),r=i.offset,o=i.index;this.offset=r,this.index=o,this.ok=!1}return PE(t,[{key:"block",get:function(){return this.masked._blocks[this.index]}},{key:"pos",get:function(){return this.masked._blockStartPos(this.index)+this.offset}},{key:"state",get:function(){return{index:this.index,offset:this.offset,ok:this.ok}},set:function(t){Object.assign(this,t)}},{key:"pushState",value:function(){this._log.push(this.state)}},{key:"popState",value:function(){var t=this._log.pop();return this.state=t,t}},{key:"bindBlock",value:function(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.value.length))}},{key:"_pushLeft",value:function(t){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=(null===(e=this.block)||void 0===e?void 0:e.value.length)||0){var e;if(t())return this.ok=!0}return this.ok=!1}},{key:"_pushRight",value:function(t){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(t())return this.ok=!0;return this.ok=!1}},{key:"pushLeftBeforeFilled",value:function(){var t=this;return this._pushLeft((function(){if(!t.block.isFixed&&t.block.value)return t.offset=t.block.nearestInputPos(t.offset,JE),0!==t.offset||void 0}))}},{key:"pushLeftBeforeInput",value:function(){var t=this;return this._pushLeft((function(){if(!t.block.isFixed)return t.offset=t.block.nearestInputPos(t.offset,ZE),!0}))}},{key:"pushLeftBeforeRequired",value:function(){var t=this;return this._pushLeft((function(){if(!(t.block.isFixed||t.block.isOptional&&!t.block.value))return t.offset=t.block.nearestInputPos(t.offset,ZE),!0}))}},{key:"pushRightBeforeFilled",value:function(){var t=this;return this._pushRight((function(){if(!t.block.isFixed&&t.block.value)return t.offset=t.block.nearestInputPos(t.offset,tx),t.offset!==t.block.value.length||void 0}))}},{key:"pushRightBeforeInput",value:function(){var t=this;return this._pushRight((function(){if(!t.block.isFixed)return t.offset=t.block.nearestInputPos(t.offset,KE),!0}))}},{key:"pushRightBeforeRequired",value:function(){var t=this;return this._pushRight((function(){if(!(t.block.isFixed||t.block.isOptional&&!t.block.value))return t.offset=t.block.nearestInputPos(t.offset,KE),!0}))}}]),t}(),vx=function(t){FE(n,t);var e=zE(n);function n(){return RE(this,n),e.apply(this,arguments)}return PE(n,[{key:"_update",value:function(t){t.mask&&(t.validate=function(e){return e.search(t.mask)>=0}),GE(NE(n.prototype),"_update",this).call(this,t)}}]),n}(sx);ax.MaskedRegExp=vx;var yx=["_blocks"],bx=function(t){FE(n,t);var e=zE(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return RE(this,n),t.definitions=Object.assign({},hx,t.definitions),e.call(this,Object.assign({},n.DEFAULTS,t))}return PE(n,[{key:"_update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.definitions=Object.assign({},this.definitions,t.definitions),GE(NE(n.prototype),"_update",this).call(this,t),this._rebuildMask()}},{key:"_rebuildMask",value:function(){var t=this,e=this.definitions;this._blocks=[],this._stops=[],this._maskedBlocks={};var i=this.mask;if(i&&e)for(var r=!1,o=!1,a=0;a<i.length;++a){if(this.blocks)if("continue"===function(){var e=i.slice(a),n=Object.keys(t.blocks).filter((function(t){return 0===e.indexOf(t)}));n.sort((function(t,e){return e.length-t.length}));var r=n[0];if(r){var o=lx(Object.assign({parent:t,lazy:t.lazy,eager:t.eager,placeholderChar:t.placeholderChar,overwrite:t.overwrite},t.blocks[r]));return o&&(t._blocks.push(o),t._maskedBlocks[r]||(t._maskedBlocks[r]=[]),t._maskedBlocks[r].push(t._blocks.length-1)),a+=r.length-1,"continue"}}())continue;var s=i[a],u=s in e;if(s!==n.STOP_CHAR)if("{"!==s&&"}"!==s)if("["!==s&&"]"!==s){if(s===n.ESCAPE_CHAR){if(++a,!(s=i[a]))break;u=!1}var l=u?new dx({parent:this,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,mask:e[s],isOptional:o}):new fx({char:s,eager:this.eager,isUnmasking:r});this._blocks.push(l)}else o=!o;else r=!r;else this._stops.push(this._blocks.length)}}},{key:"state",get:function(){return Object.assign({},GE(NE(n.prototype),"state",this),{_blocks:this._blocks.map((function(t){return t.state}))})},set:function(t){var e=t._blocks,i=jE(t,yx);this._blocks.forEach((function(t,n){return t.state=e[n]})),HE(NE(n.prototype),"state",i,this,!0)}},{key:"reset",value:function(){GE(NE(n.prototype),"reset",this).call(this),this._blocks.forEach((function(t){return t.reset()}))}},{key:"isComplete",get:function(){return this._blocks.every((function(t){return t.isComplete}))}},{key:"isFilled",get:function(){return this._blocks.every((function(t){return t.isFilled}))}},{key:"isFixed",get:function(){return this._blocks.every((function(t){return t.isFixed}))}},{key:"isOptional",get:function(){return this._blocks.every((function(t){return t.isOptional}))}},{key:"doCommit",value:function(){this._blocks.forEach((function(t){return t.doCommit()})),GE(NE(n.prototype),"doCommit",this).call(this)}},{key:"unmaskedValue",get:function(){return this._blocks.reduce((function(t,e){return t+e.unmaskedValue}),"")},set:function(t){HE(NE(n.prototype),"unmaskedValue",t,this,!0)}},{key:"value",get:function(){return this._blocks.reduce((function(t,e){return t+e.value}),"")},set:function(t){HE(NE(n.prototype),"value",t,this,!0)}},{key:"appendTail",value:function(t){return GE(NE(n.prototype),"appendTail",this).call(this,t).aggregate(this._appendPlaceholder())}},{key:"_appendEager",value:function(){var t,e=new YE,n=null===(t=this._mapPosToBlock(this.value.length))||void 0===t?void 0:t.index;if(null==n)return e;this._blocks[n].isFilled&&++n;for(var i=n;i<this._blocks.length;++i){var r=this._blocks[i]._appendEager();if(!r.inserted)break;e.aggregate(r)}return e}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._mapPosToBlock(this.value.length),i=new YE;if(!n)return i;for(var r=n.index;;++r){var o,a=this._blocks[r];if(!a)break;var s=a._appendChar(t,Object.assign({},e,{_beforeTailState:null===(o=e._beforeTailState)||void 0===o?void 0:o._blocks[r]})),u=s.skip;if(i.aggregate(s),u||s.rawInserted)break}return i}},{key:"extractTail",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=new gx;return e===n||this._forEachBlocksInRange(e,n,(function(e,n,r,o){var a=e.extractTail(r,o);a.stop=t._findStopBefore(n),a.from=t._blockStartPos(n),a instanceof gx&&(a.blockIndex=n),i.extend(a)})),i}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t===e)return"";var i="";return this._forEachBlocksInRange(t,e,(function(t,e,r,o){i+=t.extractInput(r,o,n)})),i}},{key:"_findStopBefore",value:function(t){for(var e,n=0;n<this._stops.length;++n){var i=this._stops[n];if(!(i<=t))break;e=i}return e}},{key:"_appendPlaceholder",value:function(t){var e=this,n=new YE;if(this.lazy&&null==t)return n;var i=this._mapPosToBlock(this.value.length);if(!i)return n;var r=i.index,o=null!=t?t:this._blocks.length;return this._blocks.slice(r,o).forEach((function(i){if(!i.lazy||null!=t){var r=null!=i._blocks?[i._blocks.length]:[],o=i._appendPlaceholder.apply(i,r);e._value+=o.inserted,n.aggregate(o)}})),n}},{key:"_mapPosToBlock",value:function(t){for(var e="",n=0;n<this._blocks.length;++n){var i=this._blocks[n],r=e.length;if(t<=(e+=i.value).length)return{index:n,offset:t-r}}}},{key:"_blockStartPos",value:function(t){return this._blocks.slice(0,t).reduce((function(t,e){return t+e.value.length}),0)}},{key:"_forEachBlocksInRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:void 0,i=this._mapPosToBlock(t);if(i){var r=this._mapPosToBlock(e),o=r&&i.index===r.index,a=i.offset,s=r&&o?r.offset:this._blocks[i.index].value.length;if(n(this._blocks[i.index],i.index,a,s),r&&!o){for(var u=i.index+1;u<r.index;++u)n(this._blocks[u],u,0,this._blocks[u].value.length);n(this._blocks[r.index],r.index,0,r.offset)}}}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=GE(NE(n.prototype),"remove",this).call(this,t,e);return this._forEachBlocksInRange(t,e,(function(t,e,n,r){i.aggregate(t.remove(n,r))})),i}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KE;if(!this._blocks.length)return 0;var n=new mx(this,t);if(e===KE)return n.pushRightBeforeInput()?n.pos:(n.popState(),n.pushLeftBeforeInput()?n.pos:this.value.length);if(e===ZE||e===JE){if(e===ZE){if(n.pushRightBeforeFilled(),n.ok&&n.pos===t)return t;n.popState()}if(n.pushLeftBeforeInput(),n.pushLeftBeforeRequired(),n.pushLeftBeforeFilled(),e===ZE){if(n.pushRightBeforeInput(),n.pushRightBeforeRequired(),n.ok&&n.pos<=t)return n.pos;if(n.popState(),n.ok&&n.pos<=t)return n.pos;n.popState()}return n.ok?n.pos:e===JE?0:(n.popState(),n.ok?n.pos:(n.popState(),n.ok?n.pos:0))}return e===QE||e===tx?(n.pushRightBeforeInput(),n.pushRightBeforeRequired(),n.pushRightBeforeFilled()?n.pos:e===tx?this.value.length:(n.popState(),n.ok?n.pos:(n.popState(),n.ok?n.pos:this.nearestInputPos(t,ZE)))):t}},{key:"maskedBlock",value:function(t){return this.maskedBlocks(t)[0]}},{key:"maskedBlocks",value:function(t){var e=this,n=this._maskedBlocks[t];return n?n.map((function(t){return e._blocks[t]})):[]}}]),n}(sx);bx.DEFAULTS={lazy:!0,placeholderChar:"_"},bx.STOP_CHAR="`",bx.ESCAPE_CHAR="\\",bx.InputDefinition=dx,bx.FixedDefinition=fx,ax.MaskedPattern=bx;var _x=function(t){FE(n,t);var e=zE(n);function n(){return RE(this,n),e.apply(this,arguments)}return PE(n,[{key:"_matchFrom",get:function(){return this.maxLength-String(this.from).length}},{key:"_update",value:function(t){t=Object.assign({to:this.to||0,from:this.from||0,maxLength:this.maxLength||0},t);var e=String(t.to).length;null!=t.maxLength&&(e=Math.max(e,t.maxLength)),t.maxLength=e;for(var i=String(t.from).padStart(e,"0"),r=String(t.to).padStart(e,"0"),o=0;o<r.length&&r[o]===i[o];)++o;t.mask=r.slice(0,o).replace(/0/g,"\\0")+"0".repeat(e-o),GE(NE(n.prototype),"_update",this).call(this,t)}},{key:"isComplete",get:function(){return GE(NE(n.prototype),"isComplete",this)&&Boolean(this.value)}},{key:"boundaries",value:function(t){var e="",n="",i=qE(t.match(/^(\D*)(\d*)(\D*)/)||[],3),r=i[1],o=i[2];return o&&(e="0".repeat(r.length)+o,n="9".repeat(r.length)+o),[e=e.padEnd(this.maxLength,"0"),n=n.padEnd(this.maxLength,"9")]}},{key:"doPrepare",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=nx(GE(NE(n.prototype),"doPrepare",this).call(this,t.replace(/\D/g,""),i)),o=qE(r,2);if(t=o[0],e=o[1],!this.autofix||!t)return t;var a=String(this.from).padStart(this.maxLength,"0"),s=String(this.to).padStart(this.maxLength,"0"),u=this.value+t;if(u.length>this.maxLength)return"";var l=this.boundaries(u),c=qE(l,2),h=c[0],d=c[1];return Number(d)<this.from?a[u.length-1]:Number(h)>this.to?"pad"===this.autofix&&u.length<this.maxLength?["",e.aggregate(this.append(a[u.length-1]+t,i))]:s[u.length-1]:t}},{key:"doValidate",value:function(){var t,e=this.value,i=e.search(/[^0]/);if(-1===i&&e.length<=this._matchFrom)return!0;for(var r=this.boundaries(e),o=qE(r,2),a=o[0],s=o[1],u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return this.from<=Number(s)&&Number(a)<=this.to&&(t=GE(NE(n.prototype),"doValidate",this)).call.apply(t,[this].concat(l))}}]),n}(bx);ax.MaskedRange=_x;var Ex=function(t){FE(n,t);var e=zE(n);function n(t){return RE(this,n),e.call(this,Object.assign({},n.DEFAULTS,t))}return PE(n,[{key:"_update",value:function(t){t.mask===Date&&delete t.mask,t.pattern&&(t.mask=t.pattern);var e=t.blocks;t.blocks=Object.assign({},n.GET_DEFAULT_BLOCKS()),t.min&&(t.blocks.Y.from=t.min.getFullYear()),t.max&&(t.blocks.Y.to=t.max.getFullYear()),t.min&&t.max&&t.blocks.Y.from===t.blocks.Y.to&&(t.blocks.m.from=t.min.getMonth()+1,t.blocks.m.to=t.max.getMonth()+1,t.blocks.m.from===t.blocks.m.to&&(t.blocks.d.from=t.min.getDate(),t.blocks.d.to=t.max.getDate())),Object.assign(t.blocks,this.blocks,e),Object.keys(t.blocks).forEach((function(e){var n=t.blocks[e];!("autofix"in n)&&"autofix"in t&&(n.autofix=t.autofix)})),GE(NE(n.prototype),"_update",this).call(this,t)}},{key:"doValidate",value:function(){for(var t,e=this.date,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=GE(NE(n.prototype),"doValidate",this)).call.apply(t,[this].concat(r))&&(!this.isComplete||this.isDateExist(this.value)&&null!=e&&(null==this.min||this.min<=e)&&(null==this.max||e<=this.max))}},{key:"isDateExist",value:function(t){return this.format(this.parse(t,this),this).indexOf(t)>=0}},{key:"date",get:function(){return this.typedValue},set:function(t){this.typedValue=t}},{key:"typedValue",get:function(){return this.isComplete?GE(NE(n.prototype),"typedValue",this):null},set:function(t){HE(NE(n.prototype),"typedValue",t,this,!0)}},{key:"maskEquals",value:function(t){return t===Date||GE(NE(n.prototype),"maskEquals",this).call(this,t)}}]),n}(bx);Ex.DEFAULTS={pattern:"d{.}`m{.}`Y",format:function(t){return t?[String(t.getDate()).padStart(2,"0"),String(t.getMonth()+1).padStart(2,"0"),t.getFullYear()].join("."):""},parse:function(t){var e=qE(t.split("."),3),n=e[0],i=e[1],r=e[2];return new Date(r,i-1,n)}},Ex.GET_DEFAULT_BLOCKS=function(){return{d:{mask:_x,from:1,to:31,maxLength:2},m:{mask:_x,from:1,to:12,maxLength:2},Y:{mask:_x,from:1900,to:9999}}},ax.MaskedDate=Ex;var xx=function(){function t(){RE(this,t)}return PE(t,[{key:"selectionStart",get:function(){var t;try{t=this._unsafeSelectionStart}catch(t){}return null!=t?t:this.value.length}},{key:"selectionEnd",get:function(){var t;try{t=this._unsafeSelectionEnd}catch(t){}return null!=t?t:this.value.length}},{key:"select",value:function(t,e){if(null!=t&&null!=e&&(t!==this.selectionStart||e!==this.selectionEnd))try{this._unsafeSelect(t,e)}catch(t){}}},{key:"_unsafeSelect",value:function(t,e){}},{key:"isActive",get:function(){return!1}},{key:"bindEvents",value:function(t){}},{key:"unbindEvents",value:function(){}}]),t}();ax.MaskElement=xx;var wx=function(t){FE(n,t);var e=zE(n);function n(t){var i;return RE(this,n),(i=e.call(this)).input=t,i._handlers={},i}return PE(n,[{key:"rootElement",get:function(){var t,e,n;return null!==(t=null===(e=(n=this.input).getRootNode)||void 0===e?void 0:e.call(n))&&void 0!==t?t:document}},{key:"isActive",get:function(){return this.input===this.rootElement.activeElement}},{key:"_unsafeSelectionStart",get:function(){return this.input.selectionStart}},{key:"_unsafeSelectionEnd",get:function(){return this.input.selectionEnd}},{key:"_unsafeSelect",value:function(t,e){this.input.setSelectionRange(t,e)}},{key:"value",get:function(){return this.input.value},set:function(t){this.input.value=t}},{key:"bindEvents",value:function(t){var e=this;Object.keys(t).forEach((function(i){return e._toggleEventHandler(n.EVENTS_MAP[i],t[i])}))}},{key:"unbindEvents",value:function(){var t=this;Object.keys(this._handlers).forEach((function(e){return t._toggleEventHandler(e)}))}},{key:"_toggleEventHandler",value:function(t,e){this._handlers[t]&&(this.input.removeEventListener(t,this._handlers[t]),delete this._handlers[t]),e&&(this.input.addEventListener(t,e),this._handlers[t]=e)}}]),n}(xx);wx.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"},ax.HTMLMaskElement=wx;var Ax=function(t){FE(n,t);var e=zE(n);function n(){return RE(this,n),e.apply(this,arguments)}return PE(n,[{key:"_unsafeSelectionStart",get:function(){var t=this.rootElement,e=t.getSelection&&t.getSelection(),n=e&&e.anchorOffset,i=e&&e.focusOffset;return null==i||null==n||n<i?n:i}},{key:"_unsafeSelectionEnd",get:function(){var t=this.rootElement,e=t.getSelection&&t.getSelection(),n=e&&e.anchorOffset,i=e&&e.focusOffset;return null==i||null==n||n>i?n:i}},{key:"_unsafeSelect",value:function(t,e){if(this.rootElement.createRange){var n=this.rootElement.createRange();n.setStart(this.input.firstChild||this.input,t),n.setEnd(this.input.lastChild||this.input,e);var i=this.rootElement,r=i.getSelection&&i.getSelection();r&&(r.removeAllRanges(),r.addRange(n))}}},{key:"value",get:function(){return this.input.textContent},set:function(t){this.input.textContent=t}}]),n}(wx);ax.HTMLContenteditableMaskElement=Ax;var Dx=["mask"],Cx=function(){function t(e,n){RE(this,t),this.el=e instanceof xx?e:e.isContentEditable&&"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName?new Ax(e):new wx(e),this.masked=lx(n),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}return PE(t,[{key:"mask",get:function(){return this.masked.mask},set:function(t){if(!this.maskEquals(t))if(t instanceof ax.Masked||this.masked.constructor!==ux(t)){var e=lx({mask:t});e.unmaskedValue=this.masked.unmaskedValue,this.masked=e}else this.masked.updateOptions({mask:t})}},{key:"maskEquals",value:function(t){var e;return null==t||(null===(e=this.masked)||void 0===e?void 0:e.maskEquals(t))}},{key:"value",get:function(){return this._value},set:function(t){this.masked.value=t,this.updateControl(),this.alignCursor()}},{key:"unmaskedValue",get:function(){return this._unmaskedValue},set:function(t){this.masked.unmaskedValue=t,this.updateControl(),this.alignCursor()}},{key:"typedValue",get:function(){return this.masked.typedValue},set:function(t){this.masked.typedValue=t,this.updateControl(),this.alignCursor()}},{key:"_bindEvents",value:function(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange})}},{key:"_unbindEvents",value:function(){this.el&&this.el.unbindEvents()}},{key:"_fireEvent",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=this._listeners[t];r&&r.forEach((function(t){return t.apply(void 0,n)}))}},{key:"selectionStart",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}},{key:"cursorPos",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd},set:function(t){this.el&&this.el.isActive&&(this.el.select(t,t),this._saveSelection())}},{key:"_saveSelection",value:function(){this.value!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}},{key:"updateValue",value:function(){this.masked.value=this.el.value,this._value=this.masked.value}},{key:"updateControl",value:function(){var t=this.masked.unmaskedValue,e=this.masked.value,n=this.unmaskedValue!==t||this.value!==e;this._unmaskedValue=t,this._value=e,this.el.value!==e&&(this.el.value=e),n&&this._fireChangeEvents()}},{key:"updateOptions",value:function(t){var e=t.mask,n=jE(t,Dx),i=!this.maskEquals(e),r=!ix(this.masked,n);i&&(this.mask=e),r&&this.masked.updateOptions(n),(i||r)&&this.updateControl()}},{key:"updateCursor",value:function(t){null!=t&&(this.cursorPos=t,this._delayUpdateCursor(t))}},{key:"_delayUpdateCursor",value:function(t){var e=this;this._abortUpdateCursor(),this._changingCursorPos=t,this._cursorChanging=setTimeout((function(){e.el&&(e.cursorPos=e._changingCursorPos,e._abortUpdateCursor())}),10)}},{key:"_fireChangeEvents",value:function(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}},{key:"_abortUpdateCursor",value:function(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}},{key:"alignCursor",value:function(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,ZE))}},{key:"alignCursorFriendly",value:function(){this.selectionStart===this.cursorPos&&this.alignCursor()}},{key:"on",value:function(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this}},{key:"off",value:function(t,e){if(!this._listeners[t])return this;if(!e)return delete this._listeners[t],this;var n=this._listeners[t].indexOf(e);return n>=0&&this._listeners[t].splice(n,1),this}},{key:"_onInput",value:function(t){if(this._inputEvent=t,this._abortUpdateCursor(),!this._selection)return this.updateValue();var e=new rx(this.el.value,this.cursorPos,this.value,this._selection),n=this.masked.rawInputValue,i=this.masked.splice(e.startChangePos,e.removed.length,e.inserted,e.removeDirection).offset,r=n===this.masked.rawInputValue?e.removeDirection:KE,o=this.masked.nearestInputPos(e.startChangePos+i,r);r!==KE&&(o=this.masked.nearestInputPos(o,KE)),this.updateControl(),this.updateCursor(o),delete this._inputEvent}},{key:"_onChange",value:function(){this.value!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}},{key:"_onDrop",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"_onFocus",value:function(t){this.alignCursorFriendly()}},{key:"_onClick",value:function(t){this.alignCursorFriendly()}},{key:"destroy",value:function(){this._unbindEvents(),this._listeners.length=0,delete this.el}}]),t}();ax.InputMask=Cx;var Tx=function(t){FE(n,t);var e=zE(n);function n(){return RE(this,n),e.apply(this,arguments)}return PE(n,[{key:"_update",value:function(t){t.enum&&(t.mask="*".repeat(t.enum[0].length)),GE(NE(n.prototype),"_update",this).call(this,t)}},{key:"doValidate",value:function(){for(var t,e=this,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return this.enum.some((function(t){return t.indexOf(e.unmaskedValue)>=0}))&&(t=GE(NE(n.prototype),"doValidate",this)).call.apply(t,[this].concat(r))}}]),n}(bx);ax.MaskedEnum=Tx;var kx=function(t){FE(n,t);var e=zE(n);function n(t){return RE(this,n),e.call(this,Object.assign({},n.DEFAULTS,t))}return PE(n,[{key:"_update",value:function(t){GE(NE(n.prototype),"_update",this).call(this,t),this._updateRegExps()}},{key:"_updateRegExps",value:function(){var t="^"+(this.allowNegative?"[+|\\-]?":""),e=(this.scale?"("+ex(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExpInput=new RegExp(t+"(0|([1-9]+\\d*))?"+e),this._numberRegExp=new RegExp(t+"\\d*"+e),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(ex).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(ex(this.thousandsSeparator),"g")}},{key:"_removeThousandsSeparators",value:function(t){return t.replace(this._thousandsSeparatorRegExp,"")}},{key:"_insertThousandsSeparators",value:function(t){var e=t.split(this.radix);return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),e.join(this.radix)}},{key:"doPrepare",value:function(t){var e;t=t.replace(this._mapToRadixRegExp,this.radix);for(var i=this._removeThousandsSeparators(t),r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];var s=nx((e=GE(NE(n.prototype),"doPrepare",this)).call.apply(e,[this,i].concat(o))),u=qE(s,2),l=u[0],c=u[1];return t&&!i&&(c.skip=!0),[l,c]}},{key:"_separatorsCount",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,i=0;i<t;++i)this._value.indexOf(this.thousandsSeparator,i)===i&&(++n,e&&(t+=this.thousandsSeparator.length));return n}},{key:"_separatorsCountFromSlice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._value;return this._separatorsCount(this._removeThousandsSeparators(t).length,!0)}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=arguments.length>2?arguments[2]:void 0,r=this._adjustRangeWithSeparators(t,e),o=qE(r,2);return t=o[0],e=o[1],this._removeThousandsSeparators(GE(NE(n.prototype),"extractInput",this).call(this,t,e,i))}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.thousandsSeparator)return GE(NE(n.prototype),"_appendCharRaw",this).call(this,t,e);var i=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,r=this._separatorsCountFromSlice(i);this._value=this._removeThousandsSeparators(this.value);var o=GE(NE(n.prototype),"_appendCharRaw",this).call(this,t,e);this._value=this._insertThousandsSeparators(this._value);var a=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,s=this._separatorsCountFromSlice(a);return o.tailShift+=(s-r)*this.thousandsSeparator.length,o.skip=!o.rawInserted&&t===this.thousandsSeparator,o}},{key:"_findSeparatorAround",value:function(t){if(this.thousandsSeparator){var e=t-this.thousandsSeparator.length+1,n=this.value.indexOf(this.thousandsSeparator,e);if(n<=t)return n}return-1}},{key:"_adjustRangeWithSeparators",value:function(t,e){var n=this._findSeparatorAround(t);n>=0&&(t=n);var i=this._findSeparatorAround(e);return i>=0&&(e=i+this.thousandsSeparator.length),[t,e]}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=this._adjustRangeWithSeparators(t,e),i=qE(n,2);t=i[0],e=i[1];var r=this.value.slice(0,t),o=this.value.slice(e),a=this._separatorsCount(r.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(r+o));var s=this._separatorsCountFromSlice(r);return new YE({tailShift:(s-a)*this.thousandsSeparator.length})}},{key:"nearestInputPos",value:function(t,e){if(!this.thousandsSeparator)return t;switch(e){case KE:case ZE:case JE:var n=this._findSeparatorAround(t-1);if(n>=0){var i=n+this.thousandsSeparator.length;if(t<i||this.value.length<=i||e===JE)return n}break;case QE:case tx:var r=this._findSeparatorAround(t);if(r>=0)return r+this.thousandsSeparator.length}return t}},{key:"doValidate",value:function(t){var e=(t.input?this._numberRegExpInput:this._numberRegExp).test(this._removeThousandsSeparators(this.value));if(e){var i=this.number;e=e&&!isNaN(i)&&(null==this.min||this.min>=0||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)}return e&&GE(NE(n.prototype),"doValidate",this).call(this,t)}},{key:"doCommit",value:function(){if(this.value){var t=this.number,e=t;null!=this.min&&(e=Math.max(e,this.min)),null!=this.max&&(e=Math.min(e,this.max)),e!==t&&(this.unmaskedValue=String(e));var i=this.value;this.normalizeZeros&&(i=this._normalizeZeros(i)),this.padFractionalZeros&&this.scale>0&&(i=this._padFractionalZeros(i)),this._value=i}GE(NE(n.prototype),"doCommit",this).call(this)}},{key:"_normalizeZeros",value:function(t){var e=this._removeThousandsSeparators(t).split(this.radix);return e[0]=e[0].replace(/^(\D*)(0*)(\d*)/,(function(t,e,n,i){return e+i})),t.length&&!/\d$/.test(e[0])&&(e[0]=e[0]+"0"),e.length>1&&(e[1]=e[1].replace(/0*$/,""),e[1].length||(e.length=1)),this._insertThousandsSeparators(e.join(this.radix))}},{key:"_padFractionalZeros",value:function(t){if(!t)return t;var e=t.split(this.radix);return e.length<2&&e.push(""),e[1]=e[1].padEnd(this.scale,"0"),e.join(this.radix)}},{key:"unmaskedValue",get:function(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,".")},set:function(t){HE(NE(n.prototype),"unmaskedValue",t.replace(".",this.radix),this,!0)}},{key:"typedValue",get:function(){return Number(this.unmaskedValue)},set:function(t){HE(NE(n.prototype),"unmaskedValue",String(t),this,!0)}},{key:"number",get:function(){return this.typedValue},set:function(t){this.typedValue=t}},{key:"allowNegative",get:function(){return this.signed||null!=this.min&&this.min<0||null!=this.max&&this.max<0}}]),n}(sx);kx.DEFAULTS={radix:",",thousandsSeparator:"",mapToRadix:["."],scale:2,signed:!1,normalizeZeros:!0,padFractionalZeros:!1},ax.MaskedNumber=kx;var Sx=function(t){FE(n,t);var e=zE(n);function n(){return RE(this,n),e.apply(this,arguments)}return PE(n,[{key:"_update",value:function(t){t.mask&&(t.validate=t.mask),GE(NE(n.prototype),"_update",this).call(this,t)}}]),n}(sx);ax.MaskedFunction=Sx;var Ix=["compiledMasks","currentMaskRef","currentMask"],Ox=function(t){FE(n,t);var e=zE(n);function n(t){var i;return RE(this,n),(i=e.call(this,Object.assign({},n.DEFAULTS,t))).currentMask=null,i}return PE(n,[{key:"_update",value:function(t){GE(NE(n.prototype),"_update",this).call(this,t),"mask"in t&&(this.compiledMasks=Array.isArray(t.mask)?t.mask.map((function(t){return lx(t)})):[])}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._applyDispatch(t,e);return this.currentMask&&n.aggregate(this.currentMask._appendChar(t,e)),n}},{key:"_applyDispatch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.tail&&null!=e._beforeTailState?e._beforeTailState._value:this.value,i=this.rawInputValue,r=e.tail&&null!=e._beforeTailState?e._beforeTailState._rawInputValue:i,o=i.slice(r.length),a=this.currentMask,s=new YE,u=a&&a.state;if(this.currentMask=this.doDispatch(t,Object.assign({},e)),this.currentMask)if(this.currentMask!==a){if(this.currentMask.reset(),r){var l=this.currentMask.append(r,{raw:!0});s.tailShift=l.inserted.length-n.length}o&&(s.tailShift+=this.currentMask.append(o,{raw:!0,tail:!0}).tailShift)}else this.currentMask.state=u;return s}},{key:"_appendPlaceholder",value:function(){var t=this._applyDispatch.apply(this,arguments);return this.currentMask&&t.aggregate(this.currentMask._appendPlaceholder()),t}},{key:"_appendEager",value:function(){var t=this._applyDispatch.apply(this,arguments);return this.currentMask&&t.aggregate(this.currentMask._appendEager()),t}},{key:"doDispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.dispatch(t,this,e)}},{key:"doValidate",value:function(){for(var t,e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=GE(NE(n.prototype),"doValidate",this)).call.apply(t,[this].concat(r))&&(!this.currentMask||(e=this.currentMask).doValidate.apply(e,r))}},{key:"reset",value:function(){var t;null===(t=this.currentMask)||void 0===t||t.reset(),this.compiledMasks.forEach((function(t){return t.reset()}))}},{key:"value",get:function(){return this.currentMask?this.currentMask.value:""},set:function(t){HE(NE(n.prototype),"value",t,this,!0)}},{key:"unmaskedValue",get:function(){return this.currentMask?this.currentMask.unmaskedValue:""},set:function(t){HE(NE(n.prototype),"unmaskedValue",t,this,!0)}},{key:"typedValue",get:function(){return this.currentMask?this.currentMask.typedValue:""},set:function(t){var e=String(t);this.currentMask&&(this.currentMask.typedValue=t,e=this.currentMask.unmaskedValue),this.unmaskedValue=e}},{key:"isComplete",get:function(){var t;return Boolean(null===(t=this.currentMask)||void 0===t?void 0:t.isComplete)}},{key:"isFilled",get:function(){var t;return Boolean(null===(t=this.currentMask)||void 0===t?void 0:t.isFilled)}},{key:"remove",value:function(){var t,e=new YE;this.currentMask&&e.aggregate((t=this.currentMask).remove.apply(t,arguments)).aggregate(this._applyDispatch());return e}},{key:"state",get:function(){return Object.assign({},GE(NE(n.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map((function(t){return t.state})),currentMaskRef:this.currentMask,currentMask:this.currentMask&&this.currentMask.state})},set:function(t){var e=t.compiledMasks,i=t.currentMaskRef,r=t.currentMask,o=jE(t,Ix);this.compiledMasks.forEach((function(t,n){return t.state=e[n]})),null!=i&&(this.currentMask=i,this.currentMask.state=r),HE(NE(n.prototype),"state",o,this,!0)}},{key:"extractInput",value:function(){var t;return this.currentMask?(t=this.currentMask).extractInput.apply(t,arguments):""}},{key:"extractTail",value:function(){for(var t,e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return this.currentMask?(t=this.currentMask).extractTail.apply(t,r):(e=GE(NE(n.prototype),"extractTail",this)).call.apply(e,[this].concat(r))}},{key:"doCommit",value:function(){this.currentMask&&this.currentMask.doCommit(),GE(NE(n.prototype),"doCommit",this).call(this)}},{key:"nearestInputPos",value:function(){for(var t,e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return this.currentMask?(t=this.currentMask).nearestInputPos.apply(t,r):(e=GE(NE(n.prototype),"nearestInputPos",this)).call.apply(e,[this].concat(r))}},{key:"overwrite",get:function(){return this.currentMask?this.currentMask.overwrite:GE(NE(n.prototype),"overwrite",this)},set:function(t){console.warn('"overwrite" option is not available in dynamic mask, use this option in siblings')}},{key:"eager",get:function(){return this.currentMask?this.currentMask.eager:GE(NE(n.prototype),"eager",this)},set:function(t){console.warn('"eager" option is not available in dynamic mask, use this option in siblings')}},{key:"maskEquals",value:function(t){return Array.isArray(t)&&this.compiledMasks.every((function(e,n){var i;return e.maskEquals(null===(i=t[n])||void 0===i?void 0:i.mask)}))}}]),n}(sx);Ox.DEFAULTS={dispatch:function(t,e,n){if(e.compiledMasks.length){var i=e.rawInputValue,r=e.compiledMasks.map((function(e,r){return e.reset(),e.append(i,{raw:!0}),e.append(t,n),{weight:e.rawInputValue.length,index:r}}));return r.sort((function(t,e){return e.weight-t.weight})),e.compiledMasks[r[0].index]}}},ax.MaskedDynamic=Ox;var Mx={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function Rx(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mx.MASKED,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mx.MASKED,i=lx(t);return function(t){return i.runIsolated((function(i){return i[e]=t,i[n]}))}}ax.PIPE_TYPE=Mx,ax.createPipe=Rx,ax.pipe=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Rx.apply(void 0,n)(t)};try{globalThis.IMask=ax}catch(t){}var Lx=function(t){t.data("textInputFormComponent",(function(t){var e=t.getMaskOptionsUsing;return{mask:null,state:t.state,init:function(){var t=this;if(e){var n;if(this.state)this.$el.value=null===(n=this.state)||void 0===n?void 0:n.valueOf();this.mask=ax(this.$el,e(ax)).on("accept",(function(){t.state=t.mask.unmaskedValue})),this.$watch("state",(function(){var e,n;t.mask.unmaskedValue=null!==(e=null===(n=t.state)||void 0===n?void 0:n.valueOf())&&void 0!==e?e:""}))}}}}))},Px=function(t){t.data("textareaFormComponent",(function(){return{init:function(){var t=this;this.$nextTick((function(){t.render()}))},render:function(){this.$el.scrollHeight>0&&(this.$el.style.height="150px",this.$el.style.height=this.$el.scrollHeight+2+"px")}}}))};
=======
 */"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:rx})),Uv(Kv),Uv(Jv),Uv(ey),Uv(py),Uv(Zy),Uv(Qy),Uv(Qb),Uv(rx),window.FilePond=pd;var ox=function(t){t.data("fileUploadFormComponent",(function(t){var e,n,i,r=t.acceptedFileTypes,o=t.canReorder,a=t.canPreview,s=t.deleteUploadedFileUsing,l=t.getUploadedFileUrlsUsing,u=t.imageCropAspectRatio,c=t.imagePreviewHeight,h=t.imageResizeTargetHeight,d=t.imageResizeTargetWidth,f=t.loadingIndicatorPosition,p=t.panelAspectRatio,g=t.panelLayout,m=t.placeholder,v=t.maxSize,y=t.minSize,b=t.removeUploadedFileButtonPosition,x=t.removeUploadedFileUsing,_=t.reorderUploadedFilesUsing,E=t.shouldAppendFiles,w=t.shouldTransformImage,A=t.state,D=t.uploadButtonPosition,C=t.uploadProgressIndicatorPosition,k=t.uploadUsing;return{fileKeyIndex:{},pond:null,shouldUpdateState:!0,state:A,uploadedFileUrlIndex:{},init:(i=Bu(Pu().mark((function t(){var e=this;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=zv,t.t1=this.$refs.input,t.t2=Qu,t.t3=Qu,t.t4=r,t.t5=o,t.t6=a,t.t7=a,t.t8=a,t.t9=w,t.next=12,this.getFiles();case 12:t.t10=t.sent,t.t11=u,t.t12=c,t.t13=h,t.t14=d,t.t15=E?"after":"before",t.t16={acceptedFileTypes:t.t4,allowReorder:t.t5,allowImagePreview:t.t6,allowVideoPreview:t.t7,allowAudioPreview:t.t8,allowImageTransform:t.t9,credits:!1,files:t.t10,imageCropAspectRatio:t.t11,imagePreviewHeight:t.t12,imageResizeTargetHeight:t.t13,imageResizeTargetWidth:t.t14,itemInsertLocation:t.t15},t.t17=m&&{labelIdle:m},t.t18=(0,t.t3)(t.t16,t.t17),t.t19={},t.t20={maxFileSize:v,minFileSize:y,styleButtonProcessItemPosition:D,styleButtonRemoveItemPosition:b,styleLoadIndicatorPosition:f,stylePanelAspectRatio:p,stylePanelLayout:g,styleProgressIndicatorPosition:C,server:{load:function(){var t=Bu(Pu().mark((function t(e,n){var i,r;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return i=t.sent,t.next=5,i.blob();case 5:r=t.sent,n(r);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),process:function(t,n,i,r,o,a){e.shouldUpdateState=!1;var s=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}));k(s,n,(function(t){e.shouldUpdateState=!0,r(t)}),o,a)},remove:function(){var t=Bu(Pu().mark((function t(n,i){var r,o;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null!==(r=e.uploadedFileUrlIndex[n])&&void 0!==r?r:null){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,s(o);case 5:i();case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),revert:function(){var t=Bu(Pu().mark((function t(e,n){return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e);case 2:n();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},t.t21=(0,t.t2)(t.t18,t.t19,t.t20),this.pond=(0,t.t0)(t.t1,t.t21),this.$watch("state",Bu(Pu().mark((function t(){return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.shouldUpdateState){t.next=2;break}return t.abrupt("return");case 2:if(!Object.values(e.state).filter((function(t){return t.startsWith("livewire-file:")})).length){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.getFiles();case 6:e.pond.files=t.sent;case 7:case"end":return t.stop()}}),t)})))),this.pond.on("reorderfiles",function(){var t=Bu(Pu().mark((function t(n){var i;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.map((function(t){var n;return t.source instanceof File?t.serverId:null!==(n=e.uploadedFileUrlIndex[t.source])&&void 0!==n?n:null})).filter((function(t){return t})),t.next=3,_(E?i:i.reverse());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.pond.on("processfilestart",Bu(Pu().mark((function t(){return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-started");case 1:case"end":return t.stop()}}),t)})))),this.pond.on("processfileprogress",Bu(Pu().mark((function t(){return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-started");case 1:case"end":return t.stop()}}),t)})))),this.pond.on("processfile",Bu(Pu().mark((function t(){return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-finished");case 1:case"end":return t.stop()}}),t)})))),this.pond.on("processfiles",Bu(Pu().mark((function t(){return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-finished");case 1:case"end":return t.stop()}}),t)})))),this.pond.on("processfileabort",Bu(Pu().mark((function t(){return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-finished");case 1:case"end":return t.stop()}}),t)})))),this.pond.on("processfilerevert",Bu(Pu().mark((function t(){return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchFormEvent("file-upload-finished");case 1:case"end":return t.stop()}}),t)}))));case 33:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),dispatchFormEvent:function(t){var e;null===(e=this.$el.closest("form"))||void 0===e||e.dispatchEvent(new CustomEvent(t,{composed:!0,cancelable:!0}))},getUploadedFileUrls:(n=Bu(Pu().mark((function t(){var e;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:e=t.sent,this.fileKeyIndex=null!=e?e:{},this.uploadedFileUrlIndex=Object.entries(this.fileKeyIndex).filter((function(t){return t})).reduce((function(t,e){var n=rc(e,2),i=n[0];return t[n[1]]=i,t}),{});case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)}),getFiles:(e=Bu(Pu().mark((function t(){var e,n,i,r;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getUploadedFileUrls();case 2:e=[],n=0,i=Object.values(this.fileKeyIndex);case 4:if(!(n<i.length)){t.next=12;break}if(r=i[n]){t.next=8;break}return t.abrupt("continue",9);case 8:e.push({source:r,options:{type:"local"}});case 9:n++,t.next=4;break;case 12:return t.abrupt("return",E?e:e.reverse());case 13:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}}))},ax=function(t){t.data("keyValueFormComponent",(function(t){return{state:t.state,rows:[],shouldUpdateRows:!0,init:function(){var t=this;this.updateRows(),this.rows.length<=0&&this.addRow(),this.$watch("state",(function(){t.shouldUpdateRows?t.updateRows():t.shouldUpdateRows=!0}))},addRow:function(){this.rows.push({key:"",value:""}),this.updateState()},deleteRow:function(t){this.rows.splice(t,1),this.rows.length<=0&&this.addRow(),this.updateState(),this.shouldUpdateRows=!0},updateRows:function(){for(var t=[],e=0,n=Object.entries(null!==(i=this.state)&&void 0!==i?i:{});e<n.length;e++){var i,r=rc(n[e],2),o=r[0],a=r[1];t.push({key:o,value:a})}this.rows=t},updateState:function(){var t={};this.rows.forEach((function(e){""!==e.key&&null!==e.key&&(t[e.key]=e.value)})),this.shouldUpdateRows=!1,this.state=t}}}))},sx=yc(zc()),lx=function(t){t.data("markdownEditorFormComponent",(function(t){var e=t.state,n=t.tab,i=t.darkMode;return{preview:"",state:e,tab:n,editor:null,isStateBeingUpdated:!1,init:function(){var t=this;this.editor=new sx.default({element:this.$refs.textarea,spellChecker:!1,status:!1,initialValue:this.state,toolbar:["upload-image"],styleSelectedText:!1,previewClass:"editor-preview-side editor-preview prose max-w-none rounded-lg border border-gray-300 bg-white p-3 shadow-sm ".concat(i?"dark:prose-invert dark:border-gray-600 dark:bg-gray-700":"").trim()}),this.editor.codemirror.on("change",(function(){t.isStateBeingUpdated=!0,t.state=t.editor.value(),t.$nextTick((function(){return t.isStateBeingUpdated=!1}))})),this.$watch("state",(function(){t.isStateBeingUpdated||t.editor.value(t.state)}))}}}))},ux=yc(Hc());ux.default.config.blockAttributes.default.tagName="p",ux.default.config.blockAttributes.default.breakOnReturn=!0,ux.default.config.blockAttributes.heading={tagName:"h2",terminal:!0,breakOnReturn:!0,group:!1},ux.default.config.blockAttributes.subHeading={tagName:"h3",terminal:!0,breakOnReturn:!0,group:!1},ux.default.Block.prototype.breaksOnReturn=function(){var t,e=this.getLastAttribute(),n=ux.default.getBlockConfig(e||"default");return null!==(t=null==n?void 0:n.breakOnReturn)&&void 0!==t&&t},ux.default.LineBreakInsertion.prototype.shouldInsertBlockBreak=function(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset>0:!this.shouldBreakFormattedBlock()&&this.breaksOnReturn};var cx=function(t){t.data("richEditorFormComponent",(function(t){return{state:t.state,init:function(){var t,e,n=this;null===(t=this.$refs.trix)||void 0===t||null===(e=t.editor)||void 0===e||e.loadHTML(this.state),this.$watch("state",(function(){var t,e;document.activeElement!==n.$refs.trix&&(null===(t=n.$refs.trix)||void 0===t||null===(e=t.editor)||void 0===e||e.loadHTML(n.state))}))}}}))},hx=yc(Vc()),dx=function(t){t.data("selectFormComponent",(function(e){var n,i,r,o,a,s=e.getOptionLabelUsing,l=e.getOptionLabelsUsing,u=e.getOptionsUsing,c=e.getSearchResultsUsing,h=e.isAutofocused,d=e.isMultiple,f=e.hasDynamicOptions,p=e.hasDynamicSearchResults,g=e.loadingMessage,m=e.maxItems,v=e.noSearchResultsMessage,y=e.options,b=e.placeholder,x=e.searchingMessage,_=e.searchPrompt;return{isSearching:!1,select:null,selectedOptions:[],isStateBeingUpdated:!1,state:e.state,init:(a=Bu(Pu().mark((function e(){var n=this;return Pu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.select=new hx.default(this.$refs.input,{allowHTML:!1,duplicateItemsAllowed:!1,itemSelectText:"",loadingText:g,maxItemCount:null!=m?m:-1,noChoicesText:_,noResultsText:v,placeholderValue:b,removeItemButton:!0,renderChoiceLimit:50,searchChoices:!p,searchFields:["label"],searchResultLimit:50}),e.next=3,this.refreshChoices({withInitialOptions:!0});case 3:[null,void 0,""].includes(this.state)||this.select.setChoiceByValue(this.formatState(this.state)),this.refreshPlaceholder(),h&&this.select.showDropdown(),this.$refs.input.addEventListener("change",(function(){var t;n.refreshPlaceholder(),n.isStateBeingUpdated||(n.isStateBeingUpdated=!0,n.state=null!==(t=n.select.getValue(!0))&&void 0!==t?t:null,n.$nextTick((function(){return n.isStateBeingUpdated=!1})))})),f&&this.$refs.input.addEventListener("showDropdown",Bu(Pu().mark((function t(){return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.select.clearChoices(),t.next=3,n.select.setChoices([{value:"",label:g,disabled:!0}]);case 3:return t.next=5,n.refreshChoices();case 5:case"end":return t.stop()}}),t)})))),p&&(this.$refs.input.addEventListener("search",function(){var t=Bu(Pu().mark((function t(e){var i,r;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(i=e.detail.value)||void 0===i?void 0:i.trim(),![null,void 0,""].includes(r)){t.next=3;break}return t.abrupt("return");case 3:return n.isSearching=!0,n.select.clearChoices(),t.next=7,n.select.setChoices([{value:"",label:x,disabled:!0}]);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.$refs.input.addEventListener("search",t.debounce(function(){var t=Bu(Pu().mark((function t(e){var i;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.refreshChoices({search:null===(i=e.detail.value)||void 0===i?void 0:i.trim()});case 2:n.isSearching=!1;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),1e3))),this.$watch("state",Bu(Pu().mark((function t(){var e;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.refreshPlaceholder(),!n.isStateBeingUpdated){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.getChoices({withInitialOptions:!f});case 5:e=t.sent,n.select.clearStore(),n.setChoices(e),[null,void 0,""].includes(n.state)||n.select.setChoiceByValue(n.formatState(n.state));case 9:case"end":return t.stop()}}),t)}))));case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),refreshChoices:(o=Bu(Pu().mark((function t(){var e,n=arguments;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},t.t0=this,t.next=4,this.getChoices(e);case 4:t.t1=t.sent,t.t0.setChoices.call(t.t0,t.t1);case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),setChoices:function(t){this.select.setChoices(t,"value","label",!0)},getChoices:(r=Bu(Pu().mark((function t(){var e,n,i=arguments;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,this.getOptions(e);case 3:return n=t.sent,t.t0=this,t.t1=Qu,t.t2=Qu({},n),t.next=9,this.getMissingOptions(n);case 9:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.abrupt("return",t.t0.transformOptionsIntoChoices.call(t.t0,t.t4));case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),getOptions:(i=Bu(Pu().mark((function t(e){var n;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.search,!e.withInitialOptions){t.next=3;break}return t.abrupt("return",y);case 3:if(""===n||null==n){t.next=7;break}return t.next=6,c(n);case 6:case 9:return t.abrupt("return",t.sent);case 7:return t.next=9,u();case 10:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)}),transformOptionsIntoChoices:function(t){return Object.entries(t).map((function(t){var e=rc(t,2),n=e[0];return{label:e[1],value:n}}))},refreshPlaceholder:function(){d||(this.select._renderItems(),[null,void 0,""].includes(this.state)&&(this.$el.querySelector(".choices__list--single").innerHTML='<div class="choices__placeholder choices__item">'.concat(b,"</div>")))},formatState:function(t){return d?(null!=t?t:[]).map((function(t){return null==t?void 0:t.toString()})):null==t?void 0:t.toString()},getMissingOptions:(n=Bu(Pu().mark((function t(e){var n;return Pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(![null,void 0,"",[],{}].includes(this.state)){t.next=2;break}return t.abrupt("return",{});case 2:if(e.length||(e={}),!d){t.next=9;break}if(!this.state.every((function(t){return t in e}))){t.next=6;break}return t.abrupt("return",{});case 6:return t.next=8,l();case 8:return t.abrupt("return",t.sent);case 9:if(!(this.state in e)){t.next=11;break}return t.abrupt("return",e);case 11:return n={},t.next=14,s();case 14:return n[this.state]=t.sent,t.abrupt("return",n);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}}))},fx=function(t){t.data("tagsInputFormComponent",(function(t){return{newTag:"",state:t.state,createTag:function(){this.newTag=this.newTag.trim(),""!==this.newTag&&(this.state.includes(this.newTag)||this.state.push(this.newTag),this.newTag="")},deleteTag:function(t){this.state=this.state.filter((function(e){return e!==t}))}}}))};function px(t){return(px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mx(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function vx(t,e,n){return e&&mx(t.prototype,e),n&&mx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yx(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xx(t,e)}function bx(t){return(bx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xx(t,e){return(xx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _x(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ex(t,e){if(e&&("object"===lc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function wx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=bx(t);if(e){var r=bx(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ex(this,n)}}function Ax(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bx(t)););return t}function Dx(){return Dx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=Ax(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Dx.apply(this,arguments)}function Cx(t,e,n,i){return Cx="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,i){var r,o=Ax(t,e);if(o){if((r=Object.getOwnPropertyDescriptor(o,e)).set)return r.set.call(i,n),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(i,e)){if(!r.writable)return!1;r.value=n,Object.defineProperty(i,e,r)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(i,e,n);return!0},Cx(t,e,n,i)}function kx(t,e,n,i,r){if(!Cx(t,e,n,i||t)&&r)throw new Error("failed to set property");return n}function Sx(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Tx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tx(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ox=function(){function t(e){gx(this,t),Object.assign(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},e)}return vx(t,[{key:"aggregate",value:function(t){return this.rawInserted+=t.rawInserted,this.skip=this.skip||t.skip,this.inserted+=t.inserted,this.tailShift+=t.tailShift,this}},{key:"offset",get:function(){return this.tailShift+this.inserted.length}}]),t}();function Ix(t){return"string"==typeof t||t instanceof String}var Mx="NONE",Lx="LEFT",Rx="FORCE_LEFT",Px="RIGHT",Fx="FORCE_RIGHT";function Nx(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function Bx(t){return Array.isArray(t)?t:[t,new Ox]}function jx(t,e){if(e===t)return!0;var n,i=Array.isArray(e),r=Array.isArray(t);if(i&&r){if(e.length!=t.length)return!1;for(n=0;n<e.length;n++)if(!jx(e[n],t[n]))return!1;return!0}if(i!=r)return!1;if(e&&t&&"object"===px(e)&&"object"===px(t)){var o=e instanceof Date,a=t instanceof Date;if(o&&a)return e.getTime()==t.getTime();if(o!=a)return!1;var s=e instanceof RegExp,l=t instanceof RegExp;if(s&&l)return e.toString()==t.toString();if(s!=l)return!1;var u=Object.keys(e);for(n=0;n<u.length;n++)if(!Object.prototype.hasOwnProperty.call(t,u[n]))return!1;for(n=0;n<u.length;n++)if(!jx(t[u[n]],e[u[n]]))return!1;return!0}return!(!e||!t||"function"!=typeof e||"function"!=typeof t)&&e.toString()===t.toString()}var zx=function(){function t(e,n,i,r){for(gx(this,t),this.value=e,this.cursorPos=n,this.oldValue=i,this.oldSelection=r;this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}return vx(t,[{key:"startChangePos",get:function(){return Math.min(this.cursorPos,this.oldSelection.start)}},{key:"insertedCount",get:function(){return this.cursorPos-this.startChangePos}},{key:"inserted",get:function(){return this.value.substr(this.startChangePos,this.insertedCount)}},{key:"removedCount",get:function(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}},{key:"removed",get:function(){return this.oldValue.substr(this.startChangePos,this.removedCount)}},{key:"head",get:function(){return this.value.substring(0,this.startChangePos)}},{key:"tail",get:function(){return this.value.substring(this.startChangePos+this.insertedCount)}},{key:"removeDirection",get:function(){return!this.removedCount||this.insertedCount?Mx:this.oldSelection.end!==this.cursorPos&&this.oldSelection.start!==this.cursorPos||this.oldSelection.end!==this.oldSelection.start?Lx:Px}}]),t}(),Hx=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;gx(this,t),this.value=e,this.from=n,this.stop=i}return vx(t,[{key:"toString",value:function(){return this.value}},{key:"extend",value:function(t){this.value+=String(t)}},{key:"appendTo",value:function(t){return t.append(this.toString(),{tail:!0}).aggregate(t._appendPlaceholder())}},{key:"state",get:function(){return{value:this.value,from:this.from,stop:this.stop}},set:function(t){Object.assign(this,t)}},{key:"unshift",value:function(t){if(!this.value.length||null!=t&&this.from>=t)return"";var e=this.value[0];return this.value=this.value.slice(1),e}},{key:"shift",value:function(){if(!this.value.length)return"";var t=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),t}}]),t}();function Vx(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Vx.InputMask(t,e)}var Wx=function(){function t(e){gx(this,t),this._value="",this._update(Object.assign({},t.DEFAULTS,e)),this.isInitialized=!0}return vx(t,[{key:"updateOptions",value:function(t){Object.keys(t).length&&this.withValueRefresh(this._update.bind(this,t))}},{key:"_update",value:function(t){Object.assign(this,t)}},{key:"state",get:function(){return{_value:this.value}},set:function(t){this._value=t._value}},{key:"reset",value:function(){this._value=""}},{key:"value",get:function(){return this._value},set:function(t){this.resolve(t)}},{key:"resolve",value:function(t){return this.reset(),this.append(t,{input:!0},""),this.doCommit(),this.value}},{key:"unmaskedValue",get:function(){return this.value},set:function(t){this.reset(),this.append(t,{},""),this.doCommit()}},{key:"typedValue",get:function(){return this.doParse(this.value)},set:function(t){this.value=this.doFormat(t)}},{key:"rawInputValue",get:function(){return this.extractInput(0,this.value.length,{raw:!0})},set:function(t){this.reset(),this.append(t,{raw:!0},""),this.doCommit()}},{key:"isComplete",get:function(){return!0}},{key:"isFilled",get:function(){return this.isComplete}},{key:"nearestInputPos",value:function(t,e){return t}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this.value.slice(t,e)}},{key:"extractTail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return new Hx(this.extractInput(t,e),t)}},{key:"appendTail",value:function(t){return Ix(t)&&(t=new Hx(String(t))),t.appendTo(this)}},{key:"_appendCharRaw",value:function(t){return t?(this._value+=t,new Ox({inserted:t,rawInserted:t})):new Ox}},{key:"_appendChar",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,r=this.state,o=Bx(this.doPrepare(t,n)),a=Sx(o,2);if(t=a[0],(e=(e=a[1]).aggregate(this._appendCharRaw(t,n))).inserted){var s,l=!1!==this.doValidate(n);if(l&&null!=i){var u=this.state;!0===this.overwrite&&(s=i.state,i.unshift(this.value.length));var c=this.appendTail(i);(l=c.rawInserted===i.toString())&&c.inserted||"shift"!==this.overwrite||(this.state=u,s=i.state,i.shift(),l=(c=this.appendTail(i)).rawInserted===i.toString()),l&&c.inserted&&(this.state=u)}l||(e=new Ox,this.state=r,i&&s&&(i.state=s))}return e}},{key:"_appendPlaceholder",value:function(){return new Ox}},{key:"_appendEager",value:function(){return new Ox}},{key:"append",value:function(t,e,n){if(!Ix(t))throw new Error("value should be string");var i=new Ox,r=Ix(n)?new Hx(String(n)):n;e&&e.tail&&(e._beforeTailState=this.state);for(var o=0;o<t.length;++o)i.aggregate(this._appendChar(t[o],e,r));return null!=r&&(i.tailShift+=this.appendTail(r).tailShift),this.eager&&null!=e&&e.input&&t&&i.aggregate(this._appendEager()),i}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this._value=this.value.slice(0,t)+this.value.slice(e),new Ox}},{key:"withValueRefresh",value:function(t){if(this._refreshing||!this.isInitialized)return t();this._refreshing=!0;var e=this.rawInputValue,n=this.value,i=t();return this.rawInputValue=e,this.value&&this.value!==n&&0===n.indexOf(this.value)&&this.append(n.slice(this.value.length),{},""),delete this._refreshing,i}},{key:"runIsolated",value:function(t){if(this._isolated||!this.isInitialized)return t(this);this._isolated=!0;var e=this.state,n=t(this);return this.state=e,delete this._isolated,n}},{key:"doPrepare",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.prepare?this.prepare(t,this,e):t}},{key:"doValidate",value:function(t){return(!this.validate||this.validate(this.value,this,t))&&(!this.parent||this.parent.doValidate(t))}},{key:"doCommit",value:function(){this.commit&&this.commit(this.value,this)}},{key:"doFormat",value:function(t){return this.format?this.format(t,this):t}},{key:"doParse",value:function(t){return this.parse?this.parse(t,this):t}},{key:"splice",value:function(t,e,n,i){var r,o=t+e,a=this.extractTail(o);this.eager&&(i=function(t){switch(t){case Lx:return Rx;case Px:return Fx;default:return t}}(i),r=this.extractInput(0,o,{raw:!0}));var s=this.nearestInputPos(t,e>1&&0!==t&&!this.eager?Mx:i),l=new Ox({tailShift:s-t}).aggregate(this.remove(s));if(this.eager&&i!==Mx&&r===this.rawInputValue)if(i===Rx)for(var u;r===this.rawInputValue&&(u=this.value.length);)l.aggregate(new Ox({tailShift:-1})).aggregate(this.remove(u-1));else i===Fx&&a.unshift();return l.aggregate(this.append(n,{input:!0},a))}},{key:"maskEquals",value:function(t){return this.mask===t}}]),t}();function Ux(t){if(null==t)throw new Error("mask property should be defined");return t instanceof RegExp?Vx.MaskedRegExp:Ix(t)?Vx.MaskedPattern:t instanceof Date||t===Date?Vx.MaskedDate:t instanceof Number||"number"==typeof t||t===Number?Vx.MaskedNumber:Array.isArray(t)||t===Array?Vx.MaskedDynamic:Vx.Masked&&t.prototype instanceof Vx.Masked?t:t instanceof Vx.Masked?t.constructor:t instanceof Function?Vx.MaskedFunction:(console.warn("Mask not found for mask",t),Vx.Masked)}function Gx(t){if(Vx.Masked&&t instanceof Vx.Masked)return t;var e=(t=Object.assign({},t)).mask;if(Vx.Masked&&e instanceof Vx.Masked)return e;var n=Ux(e);if(!n)throw new Error("Masked class is not found for provided mask, appropriate module needs to be import manually before creating mask.");return new n(t)}Wx.DEFAULTS={format:function(t){return t},parse:function(t){return t}},Vx.Masked=Wx,Vx.createMask=Gx;var qx=["mask"],$x={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},Yx=function(){function t(e){gx(this,t);var n=e.mask,i=_x(e,qx);this.masked=Gx({mask:n}),Object.assign(this,i)}return vx(t,[{key:"reset",value:function(){this.isFilled=!1,this.masked.reset()}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return 0===t&&e>=1?(this.isFilled=!1,this.masked.remove(t,e)):new Ox}},{key:"value",get:function(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}},{key:"unmaskedValue",get:function(){return this.masked.unmaskedValue}},{key:"isComplete",get:function(){return Boolean(this.masked.value)||this.isOptional}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isFilled)return new Ox;var n=this.masked.state,i=this.masked._appendChar(t,e);return i.inserted&&!1===this.doValidate(e)&&(i.inserted=i.rawInserted="",this.masked.state=n),i.inserted||this.isOptional||this.lazy||e.input||(i.inserted=this.placeholderChar),i.skip=!i.inserted&&!this.isOptional,this.isFilled=Boolean(i.inserted),i}},{key:"append",value:function(){var t;return(t=this.masked).append.apply(t,arguments)}},{key:"_appendPlaceholder",value:function(){var t=new Ox;return this.isFilled||this.isOptional||(this.isFilled=!0,t.inserted=this.placeholderChar),t}},{key:"_appendEager",value:function(){return new Ox}},{key:"extractTail",value:function(){var t;return(t=this.masked).extractTail.apply(t,arguments)}},{key:"appendTail",value:function(){var t;return(t=this.masked).appendTail.apply(t,arguments)}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:void 0;return this.masked.extractInput(t,e,n)}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mx,n=0,i=this.value.length,r=Math.min(Math.max(t,n),i);switch(e){case Lx:case Rx:return this.isComplete?r:n;case Px:case Fx:return this.isComplete?r:i;default:return r}}},{key:"doValidate",value:function(){var t,e;return(t=this.masked).doValidate.apply(t,arguments)&&(!this.parent||(e=this.parent).doValidate.apply(e,arguments))}},{key:"doCommit",value:function(){this.masked.doCommit()}},{key:"state",get:function(){return{masked:this.masked.state,isFilled:this.isFilled}},set:function(t){this.masked.state=t.masked,this.isFilled=t.isFilled}}]),t}(),Xx=function(){function t(e){gx(this,t),Object.assign(this,e),this._value="",this.isFixed=!0}return vx(t,[{key:"value",get:function(){return this._value}},{key:"unmaskedValue",get:function(){return this.isUnmasking?this.value:""}},{key:"reset",value:function(){this._isRawInput=!1,this._value=""}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length;return this._value=this._value.slice(0,t)+this._value.slice(e),this._value||(this._isRawInput=!1),new Ox}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mx,n=0,i=this._value.length;switch(e){case Lx:case Rx:return n;default:return i}}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.raw&&this._isRawInput&&this._value.slice(t,e)||""}},{key:"isComplete",get:function(){return!0}},{key:"isFilled",get:function(){return Boolean(this._value)}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Ox;if(this._value)return n;var i=this.char===t,r=i&&(this.isUnmasking||e.input||e.raw)&&!this.eager&&!e.tail;return r&&(n.rawInserted=this.char),this._value=n.inserted=this.char,this._isRawInput=r&&(e.raw||e.input),n}},{key:"_appendEager",value:function(){return this._appendChar(this.char)}},{key:"_appendPlaceholder",value:function(){var t=new Ox;return this._value||(this._value=t.inserted=this.char),t}},{key:"extractTail",value:function(){return arguments.length>1&&void 0!==arguments[1]||this.value.length,new Hx("")}},{key:"appendTail",value:function(t){return Ix(t)&&(t=new Hx(String(t))),t.appendTo(this)}},{key:"append",value:function(t,e,n){var i=this._appendChar(t[0],e);return null!=n&&(i.tailShift+=this.appendTail(n).tailShift),i}},{key:"doCommit",value:function(){}},{key:"state",get:function(){return{_value:this._value,_isRawInput:this._isRawInput}},set:function(t){Object.assign(this,t)}}]),t}(),Kx=["chunks"],Zx=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;gx(this,t),this.chunks=e,this.from=n}return vx(t,[{key:"toString",value:function(){return this.chunks.map(String).join("")}},{key:"extend",value:function(e){if(String(e)){Ix(e)&&(e=new Hx(String(e)));var n=this.chunks[this.chunks.length-1],i=n&&(n.stop===e.stop||null==e.stop)&&e.from===n.from+n.toString().length;if(e instanceof Hx)i?n.extend(e.toString()):this.chunks.push(e);else if(e instanceof t){if(null==e.stop)for(var r;e.chunks.length&&null==e.chunks[0].stop;)(r=e.chunks.shift()).from+=e.from,this.extend(r);e.toString()&&(e.stop=e.blockIndex,this.chunks.push(e))}}}},{key:"appendTo",value:function(e){if(!(e instanceof Vx.MaskedPattern))return new Hx(this.toString()).appendTo(e);for(var n=new Ox,i=0;i<this.chunks.length&&!n.skip;++i){var r=this.chunks[i],o=e._mapPosToBlock(e.value.length),a=r.stop,s=void 0;if(null!=a&&(!o||o.index<=a)&&((r instanceof t||e._stops.indexOf(a)>=0)&&n.aggregate(e._appendPlaceholder(a)),s=r instanceof t&&e._blocks[a]),s){var l=s.appendTail(r);l.skip=!1,n.aggregate(l),e._value+=l.inserted;var u=r.toString().slice(l.rawInserted.length);u&&n.aggregate(e.append(u,{tail:!0}))}else n.aggregate(e.append(r.toString(),{tail:!0}))}return n}},{key:"state",get:function(){return{chunks:this.chunks.map((function(t){return t.state})),from:this.from,stop:this.stop,blockIndex:this.blockIndex}},set:function(e){var n=e.chunks,i=_x(e,Kx);Object.assign(this,i),this.chunks=n.map((function(e){var n="chunks"in e?new t:new Hx;return n.state=e,n}))}},{key:"unshift",value:function(t){if(!this.chunks.length||null!=t&&this.from>=t)return"";for(var e=null!=t?t-this.from:t,n=0;n<this.chunks.length;){var i=this.chunks[n],r=i.unshift(e);if(i.toString()){if(!r)break;++n}else this.chunks.splice(n,1);if(r)return r}return""}},{key:"shift",value:function(){if(!this.chunks.length)return"";for(var t=this.chunks.length-1;0<=t;){var e=this.chunks[t],n=e.shift();if(e.toString()){if(!n)break;--t}else this.chunks.splice(t,1);if(n)return n}return""}}]),t}(),Jx=function(){function t(e,n){gx(this,t),this.masked=e,this._log=[];var i=e._mapPosToBlock(n)||(n<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0}),r=i.offset,o=i.index;this.offset=r,this.index=o,this.ok=!1}return vx(t,[{key:"block",get:function(){return this.masked._blocks[this.index]}},{key:"pos",get:function(){return this.masked._blockStartPos(this.index)+this.offset}},{key:"state",get:function(){return{index:this.index,offset:this.offset,ok:this.ok}},set:function(t){Object.assign(this,t)}},{key:"pushState",value:function(){this._log.push(this.state)}},{key:"popState",value:function(){var t=this._log.pop();return this.state=t,t}},{key:"bindBlock",value:function(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.value.length))}},{key:"_pushLeft",value:function(t){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=(null===(e=this.block)||void 0===e?void 0:e.value.length)||0){var e;if(t())return this.ok=!0}return this.ok=!1}},{key:"_pushRight",value:function(t){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(t())return this.ok=!0;return this.ok=!1}},{key:"pushLeftBeforeFilled",value:function(){var t=this;return this._pushLeft((function(){if(!t.block.isFixed&&t.block.value)return t.offset=t.block.nearestInputPos(t.offset,Rx),0!==t.offset||void 0}))}},{key:"pushLeftBeforeInput",value:function(){var t=this;return this._pushLeft((function(){if(!t.block.isFixed)return t.offset=t.block.nearestInputPos(t.offset,Lx),!0}))}},{key:"pushLeftBeforeRequired",value:function(){var t=this;return this._pushLeft((function(){if(!(t.block.isFixed||t.block.isOptional&&!t.block.value))return t.offset=t.block.nearestInputPos(t.offset,Lx),!0}))}},{key:"pushRightBeforeFilled",value:function(){var t=this;return this._pushRight((function(){if(!t.block.isFixed&&t.block.value)return t.offset=t.block.nearestInputPos(t.offset,Fx),t.offset!==t.block.value.length||void 0}))}},{key:"pushRightBeforeInput",value:function(){var t=this;return this._pushRight((function(){if(!t.block.isFixed)return t.offset=t.block.nearestInputPos(t.offset,Mx),!0}))}},{key:"pushRightBeforeRequired",value:function(){var t=this;return this._pushRight((function(){if(!(t.block.isFixed||t.block.isOptional&&!t.block.value))return t.offset=t.block.nearestInputPos(t.offset,Mx),!0}))}}]),t}(),Qx=function(t){yx(n,t);var e=wx(n);function n(){return gx(this,n),e.apply(this,arguments)}return vx(n,[{key:"_update",value:function(t){t.mask&&(t.validate=function(e){return e.search(t.mask)>=0}),Dx(bx(n.prototype),"_update",this).call(this,t)}}]),n}(Wx);Vx.MaskedRegExp=Qx;var t_=["_blocks"],e_=function(t){yx(n,t);var e=wx(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return gx(this,n),t.definitions=Object.assign({},$x,t.definitions),e.call(this,Object.assign({},n.DEFAULTS,t))}return vx(n,[{key:"_update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.definitions=Object.assign({},this.definitions,t.definitions),Dx(bx(n.prototype),"_update",this).call(this,t),this._rebuildMask()}},{key:"_rebuildMask",value:function(){var t=this,e=this.definitions;this._blocks=[],this._stops=[],this._maskedBlocks={};var i=this.mask;if(i&&e)for(var r=!1,o=!1,a=0;a<i.length;++a){if(this.blocks)if("continue"===function(){var e=i.slice(a),n=Object.keys(t.blocks).filter((function(t){return 0===e.indexOf(t)}));n.sort((function(t,e){return e.length-t.length}));var r=n[0];if(r){var o=Gx(Object.assign({parent:t,lazy:t.lazy,eager:t.eager,placeholderChar:t.placeholderChar,overwrite:t.overwrite},t.blocks[r]));return o&&(t._blocks.push(o),t._maskedBlocks[r]||(t._maskedBlocks[r]=[]),t._maskedBlocks[r].push(t._blocks.length-1)),a+=r.length-1,"continue"}}())continue;var s=i[a],l=s in e;if(s!==n.STOP_CHAR)if("{"!==s&&"}"!==s)if("["!==s&&"]"!==s){if(s===n.ESCAPE_CHAR){if(++a,!(s=i[a]))break;l=!1}var u=l?new Yx({parent:this,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,mask:e[s],isOptional:o}):new Xx({char:s,eager:this.eager,isUnmasking:r});this._blocks.push(u)}else o=!o;else r=!r;else this._stops.push(this._blocks.length)}}},{key:"state",get:function(){return Object.assign({},Dx(bx(n.prototype),"state",this),{_blocks:this._blocks.map((function(t){return t.state}))})},set:function(t){var e=t._blocks,i=_x(t,t_);this._blocks.forEach((function(t,n){return t.state=e[n]})),kx(bx(n.prototype),"state",i,this,!0)}},{key:"reset",value:function(){Dx(bx(n.prototype),"reset",this).call(this),this._blocks.forEach((function(t){return t.reset()}))}},{key:"isComplete",get:function(){return this._blocks.every((function(t){return t.isComplete}))}},{key:"isFilled",get:function(){return this._blocks.every((function(t){return t.isFilled}))}},{key:"isFixed",get:function(){return this._blocks.every((function(t){return t.isFixed}))}},{key:"isOptional",get:function(){return this._blocks.every((function(t){return t.isOptional}))}},{key:"doCommit",value:function(){this._blocks.forEach((function(t){return t.doCommit()})),Dx(bx(n.prototype),"doCommit",this).call(this)}},{key:"unmaskedValue",get:function(){return this._blocks.reduce((function(t,e){return t+e.unmaskedValue}),"")},set:function(t){kx(bx(n.prototype),"unmaskedValue",t,this,!0)}},{key:"value",get:function(){return this._blocks.reduce((function(t,e){return t+e.value}),"")},set:function(t){kx(bx(n.prototype),"value",t,this,!0)}},{key:"appendTail",value:function(t){return Dx(bx(n.prototype),"appendTail",this).call(this,t).aggregate(this._appendPlaceholder())}},{key:"_appendEager",value:function(){var t,e=new Ox,n=null===(t=this._mapPosToBlock(this.value.length))||void 0===t?void 0:t.index;if(null==n)return e;this._blocks[n].isFilled&&++n;for(var i=n;i<this._blocks.length;++i){var r=this._blocks[i]._appendEager();if(!r.inserted)break;e.aggregate(r)}return e}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._mapPosToBlock(this.value.length),i=new Ox;if(!n)return i;for(var r=n.index;;++r){var o,a=this._blocks[r];if(!a)break;var s=a._appendChar(t,Object.assign({},e,{_beforeTailState:null===(o=e._beforeTailState)||void 0===o?void 0:o._blocks[r]})),l=s.skip;if(i.aggregate(s),l||s.rawInserted)break}return i}},{key:"extractTail",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=new Zx;return e===n||this._forEachBlocksInRange(e,n,(function(e,n,r,o){var a=e.extractTail(r,o);a.stop=t._findStopBefore(n),a.from=t._blockStartPos(n),a instanceof Zx&&(a.blockIndex=n),i.extend(a)})),i}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t===e)return"";var i="";return this._forEachBlocksInRange(t,e,(function(t,e,r,o){i+=t.extractInput(r,o,n)})),i}},{key:"_findStopBefore",value:function(t){for(var e,n=0;n<this._stops.length;++n){var i=this._stops[n];if(!(i<=t))break;e=i}return e}},{key:"_appendPlaceholder",value:function(t){var e=this,n=new Ox;if(this.lazy&&null==t)return n;var i=this._mapPosToBlock(this.value.length);if(!i)return n;var r=i.index,o=null!=t?t:this._blocks.length;return this._blocks.slice(r,o).forEach((function(i){if(!i.lazy||null!=t){var r=null!=i._blocks?[i._blocks.length]:[],o=i._appendPlaceholder.apply(i,r);e._value+=o.inserted,n.aggregate(o)}})),n}},{key:"_mapPosToBlock",value:function(t){for(var e="",n=0;n<this._blocks.length;++n){var i=this._blocks[n],r=e.length;if(t<=(e+=i.value).length)return{index:n,offset:t-r}}}},{key:"_blockStartPos",value:function(t){return this._blocks.slice(0,t).reduce((function(t,e){return t+e.value.length}),0)}},{key:"_forEachBlocksInRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:void 0,i=this._mapPosToBlock(t);if(i){var r=this._mapPosToBlock(e),o=r&&i.index===r.index,a=i.offset,s=r&&o?r.offset:this._blocks[i.index].value.length;if(n(this._blocks[i.index],i.index,a,s),r&&!o){for(var l=i.index+1;l<r.index;++l)n(this._blocks[l],l,0,this._blocks[l].value.length);n(this._blocks[r.index],r.index,0,r.offset)}}}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=Dx(bx(n.prototype),"remove",this).call(this,t,e);return this._forEachBlocksInRange(t,e,(function(t,e,n,r){i.aggregate(t.remove(n,r))})),i}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mx;if(!this._blocks.length)return 0;var n=new Jx(this,t);if(e===Mx)return n.pushRightBeforeInput()?n.pos:(n.popState(),n.pushLeftBeforeInput()?n.pos:this.value.length);if(e===Lx||e===Rx){if(e===Lx){if(n.pushRightBeforeFilled(),n.ok&&n.pos===t)return t;n.popState()}if(n.pushLeftBeforeInput(),n.pushLeftBeforeRequired(),n.pushLeftBeforeFilled(),e===Lx){if(n.pushRightBeforeInput(),n.pushRightBeforeRequired(),n.ok&&n.pos<=t)return n.pos;if(n.popState(),n.ok&&n.pos<=t)return n.pos;n.popState()}return n.ok?n.pos:e===Rx?0:(n.popState(),n.ok?n.pos:(n.popState(),n.ok?n.pos:0))}return e===Px||e===Fx?(n.pushRightBeforeInput(),n.pushRightBeforeRequired(),n.pushRightBeforeFilled()?n.pos:e===Fx?this.value.length:(n.popState(),n.ok?n.pos:(n.popState(),n.ok?n.pos:this.nearestInputPos(t,Lx)))):t}},{key:"maskedBlock",value:function(t){return this.maskedBlocks(t)[0]}},{key:"maskedBlocks",value:function(t){var e=this,n=this._maskedBlocks[t];return n?n.map((function(t){return e._blocks[t]})):[]}}]),n}(Wx);e_.DEFAULTS={lazy:!0,placeholderChar:"_"},e_.STOP_CHAR="`",e_.ESCAPE_CHAR="\\",e_.InputDefinition=Yx,e_.FixedDefinition=Xx,Vx.MaskedPattern=e_;var n_=function(t){yx(n,t);var e=wx(n);function n(){return gx(this,n),e.apply(this,arguments)}return vx(n,[{key:"_matchFrom",get:function(){return this.maxLength-String(this.from).length}},{key:"_update",value:function(t){t=Object.assign({to:this.to||0,from:this.from||0,maxLength:this.maxLength||0},t);var e=String(t.to).length;null!=t.maxLength&&(e=Math.max(e,t.maxLength)),t.maxLength=e;for(var i=String(t.from).padStart(e,"0"),r=String(t.to).padStart(e,"0"),o=0;o<r.length&&r[o]===i[o];)++o;t.mask=r.slice(0,o).replace(/0/g,"\\0")+"0".repeat(e-o),Dx(bx(n.prototype),"_update",this).call(this,t)}},{key:"isComplete",get:function(){return Dx(bx(n.prototype),"isComplete",this)&&Boolean(this.value)}},{key:"boundaries",value:function(t){var e="",n="",i=Sx(t.match(/^(\D*)(\d*)(\D*)/)||[],3),r=i[1],o=i[2];return o&&(e="0".repeat(r.length)+o,n="9".repeat(r.length)+o),[e=e.padEnd(this.maxLength,"0"),n=n.padEnd(this.maxLength,"9")]}},{key:"doPrepare",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Bx(Dx(bx(n.prototype),"doPrepare",this).call(this,t.replace(/\D/g,""),i)),o=Sx(r,2);if(t=o[0],e=o[1],!this.autofix||!t)return t;var a=String(this.from).padStart(this.maxLength,"0"),s=String(this.to).padStart(this.maxLength,"0"),l=this.value+t;if(l.length>this.maxLength)return"";var u=this.boundaries(l),c=Sx(u,2),h=c[0],d=c[1];return Number(d)<this.from?a[l.length-1]:Number(h)>this.to?"pad"===this.autofix&&l.length<this.maxLength?["",e.aggregate(this.append(a[l.length-1]+t,i))]:s[l.length-1]:t}},{key:"doValidate",value:function(){var t,e=this.value,i=e.search(/[^0]/);if(-1===i&&e.length<=this._matchFrom)return!0;for(var r=this.boundaries(e),o=Sx(r,2),a=o[0],s=o[1],l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return this.from<=Number(s)&&Number(a)<=this.to&&(t=Dx(bx(n.prototype),"doValidate",this)).call.apply(t,[this].concat(u))}}]),n}(e_);Vx.MaskedRange=n_;var i_=function(t){yx(n,t);var e=wx(n);function n(t){return gx(this,n),e.call(this,Object.assign({},n.DEFAULTS,t))}return vx(n,[{key:"_update",value:function(t){t.mask===Date&&delete t.mask,t.pattern&&(t.mask=t.pattern);var e=t.blocks;t.blocks=Object.assign({},n.GET_DEFAULT_BLOCKS()),t.min&&(t.blocks.Y.from=t.min.getFullYear()),t.max&&(t.blocks.Y.to=t.max.getFullYear()),t.min&&t.max&&t.blocks.Y.from===t.blocks.Y.to&&(t.blocks.m.from=t.min.getMonth()+1,t.blocks.m.to=t.max.getMonth()+1,t.blocks.m.from===t.blocks.m.to&&(t.blocks.d.from=t.min.getDate(),t.blocks.d.to=t.max.getDate())),Object.assign(t.blocks,this.blocks,e),Object.keys(t.blocks).forEach((function(e){var n=t.blocks[e];!("autofix"in n)&&"autofix"in t&&(n.autofix=t.autofix)})),Dx(bx(n.prototype),"_update",this).call(this,t)}},{key:"doValidate",value:function(){for(var t,e=this.date,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=Dx(bx(n.prototype),"doValidate",this)).call.apply(t,[this].concat(r))&&(!this.isComplete||this.isDateExist(this.value)&&null!=e&&(null==this.min||this.min<=e)&&(null==this.max||e<=this.max))}},{key:"isDateExist",value:function(t){return this.format(this.parse(t,this),this).indexOf(t)>=0}},{key:"date",get:function(){return this.typedValue},set:function(t){this.typedValue=t}},{key:"typedValue",get:function(){return this.isComplete?Dx(bx(n.prototype),"typedValue",this):null},set:function(t){kx(bx(n.prototype),"typedValue",t,this,!0)}},{key:"maskEquals",value:function(t){return t===Date||Dx(bx(n.prototype),"maskEquals",this).call(this,t)}}]),n}(e_);i_.DEFAULTS={pattern:"d{.}`m{.}`Y",format:function(t){return t?[String(t.getDate()).padStart(2,"0"),String(t.getMonth()+1).padStart(2,"0"),t.getFullYear()].join("."):""},parse:function(t){var e=Sx(t.split("."),3),n=e[0],i=e[1],r=e[2];return new Date(r,i-1,n)}},i_.GET_DEFAULT_BLOCKS=function(){return{d:{mask:n_,from:1,to:31,maxLength:2},m:{mask:n_,from:1,to:12,maxLength:2},Y:{mask:n_,from:1900,to:9999}}},Vx.MaskedDate=i_;var r_=function(){function t(){gx(this,t)}return vx(t,[{key:"selectionStart",get:function(){var t;try{t=this._unsafeSelectionStart}catch(t){}return null!=t?t:this.value.length}},{key:"selectionEnd",get:function(){var t;try{t=this._unsafeSelectionEnd}catch(t){}return null!=t?t:this.value.length}},{key:"select",value:function(t,e){if(null!=t&&null!=e&&(t!==this.selectionStart||e!==this.selectionEnd))try{this._unsafeSelect(t,e)}catch(t){}}},{key:"_unsafeSelect",value:function(t,e){}},{key:"isActive",get:function(){return!1}},{key:"bindEvents",value:function(t){}},{key:"unbindEvents",value:function(){}}]),t}();Vx.MaskElement=r_;var o_=function(t){yx(n,t);var e=wx(n);function n(t){var i;return gx(this,n),(i=e.call(this)).input=t,i._handlers={},i}return vx(n,[{key:"rootElement",get:function(){var t,e,n;return null!==(t=null===(e=(n=this.input).getRootNode)||void 0===e?void 0:e.call(n))&&void 0!==t?t:document}},{key:"isActive",get:function(){return this.input===this.rootElement.activeElement}},{key:"_unsafeSelectionStart",get:function(){return this.input.selectionStart}},{key:"_unsafeSelectionEnd",get:function(){return this.input.selectionEnd}},{key:"_unsafeSelect",value:function(t,e){this.input.setSelectionRange(t,e)}},{key:"value",get:function(){return this.input.value},set:function(t){this.input.value=t}},{key:"bindEvents",value:function(t){var e=this;Object.keys(t).forEach((function(i){return e._toggleEventHandler(n.EVENTS_MAP[i],t[i])}))}},{key:"unbindEvents",value:function(){var t=this;Object.keys(this._handlers).forEach((function(e){return t._toggleEventHandler(e)}))}},{key:"_toggleEventHandler",value:function(t,e){this._handlers[t]&&(this.input.removeEventListener(t,this._handlers[t]),delete this._handlers[t]),e&&(this.input.addEventListener(t,e),this._handlers[t]=e)}}]),n}(r_);o_.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"},Vx.HTMLMaskElement=o_;var a_=function(t){yx(n,t);var e=wx(n);function n(){return gx(this,n),e.apply(this,arguments)}return vx(n,[{key:"_unsafeSelectionStart",get:function(){var t=this.rootElement,e=t.getSelection&&t.getSelection(),n=e&&e.anchorOffset,i=e&&e.focusOffset;return null==i||null==n||n<i?n:i}},{key:"_unsafeSelectionEnd",get:function(){var t=this.rootElement,e=t.getSelection&&t.getSelection(),n=e&&e.anchorOffset,i=e&&e.focusOffset;return null==i||null==n||n>i?n:i}},{key:"_unsafeSelect",value:function(t,e){if(this.rootElement.createRange){var n=this.rootElement.createRange();n.setStart(this.input.firstChild||this.input,t),n.setEnd(this.input.lastChild||this.input,e);var i=this.rootElement,r=i.getSelection&&i.getSelection();r&&(r.removeAllRanges(),r.addRange(n))}}},{key:"value",get:function(){return this.input.textContent},set:function(t){this.input.textContent=t}}]),n}(o_);Vx.HTMLContenteditableMaskElement=a_;var s_=["mask"],l_=function(){function t(e,n){gx(this,t),this.el=e instanceof r_?e:e.isContentEditable&&"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName?new a_(e):new o_(e),this.masked=Gx(n),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}return vx(t,[{key:"mask",get:function(){return this.masked.mask},set:function(t){if(!this.maskEquals(t))if(t instanceof Vx.Masked||this.masked.constructor!==Ux(t)){var e=Gx({mask:t});e.unmaskedValue=this.masked.unmaskedValue,this.masked=e}else this.masked.updateOptions({mask:t})}},{key:"maskEquals",value:function(t){var e;return null==t||(null===(e=this.masked)||void 0===e?void 0:e.maskEquals(t))}},{key:"value",get:function(){return this._value},set:function(t){this.masked.value=t,this.updateControl(),this.alignCursor()}},{key:"unmaskedValue",get:function(){return this._unmaskedValue},set:function(t){this.masked.unmaskedValue=t,this.updateControl(),this.alignCursor()}},{key:"typedValue",get:function(){return this.masked.typedValue},set:function(t){this.masked.typedValue=t,this.updateControl(),this.alignCursor()}},{key:"_bindEvents",value:function(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange})}},{key:"_unbindEvents",value:function(){this.el&&this.el.unbindEvents()}},{key:"_fireEvent",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=this._listeners[t];r&&r.forEach((function(t){return t.apply(void 0,n)}))}},{key:"selectionStart",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}},{key:"cursorPos",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd},set:function(t){this.el&&this.el.isActive&&(this.el.select(t,t),this._saveSelection())}},{key:"_saveSelection",value:function(){this.value!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}},{key:"updateValue",value:function(){this.masked.value=this.el.value,this._value=this.masked.value}},{key:"updateControl",value:function(){var t=this.masked.unmaskedValue,e=this.masked.value,n=this.unmaskedValue!==t||this.value!==e;this._unmaskedValue=t,this._value=e,this.el.value!==e&&(this.el.value=e),n&&this._fireChangeEvents()}},{key:"updateOptions",value:function(t){var e=t.mask,n=_x(t,s_),i=!this.maskEquals(e),r=!jx(this.masked,n);i&&(this.mask=e),r&&this.masked.updateOptions(n),(i||r)&&this.updateControl()}},{key:"updateCursor",value:function(t){null!=t&&(this.cursorPos=t,this._delayUpdateCursor(t))}},{key:"_delayUpdateCursor",value:function(t){var e=this;this._abortUpdateCursor(),this._changingCursorPos=t,this._cursorChanging=setTimeout((function(){e.el&&(e.cursorPos=e._changingCursorPos,e._abortUpdateCursor())}),10)}},{key:"_fireChangeEvents",value:function(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}},{key:"_abortUpdateCursor",value:function(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}},{key:"alignCursor",value:function(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,Lx))}},{key:"alignCursorFriendly",value:function(){this.selectionStart===this.cursorPos&&this.alignCursor()}},{key:"on",value:function(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this}},{key:"off",value:function(t,e){if(!this._listeners[t])return this;if(!e)return delete this._listeners[t],this;var n=this._listeners[t].indexOf(e);return n>=0&&this._listeners[t].splice(n,1),this}},{key:"_onInput",value:function(t){if(this._inputEvent=t,this._abortUpdateCursor(),!this._selection)return this.updateValue();var e=new zx(this.el.value,this.cursorPos,this.value,this._selection),n=this.masked.rawInputValue,i=this.masked.splice(e.startChangePos,e.removed.length,e.inserted,e.removeDirection).offset,r=n===this.masked.rawInputValue?e.removeDirection:Mx,o=this.masked.nearestInputPos(e.startChangePos+i,r);r!==Mx&&(o=this.masked.nearestInputPos(o,Mx)),this.updateControl(),this.updateCursor(o),delete this._inputEvent}},{key:"_onChange",value:function(){this.value!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}},{key:"_onDrop",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"_onFocus",value:function(t){this.alignCursorFriendly()}},{key:"_onClick",value:function(t){this.alignCursorFriendly()}},{key:"destroy",value:function(){this._unbindEvents(),this._listeners.length=0,delete this.el}}]),t}();Vx.InputMask=l_;var u_=function(t){yx(n,t);var e=wx(n);function n(){return gx(this,n),e.apply(this,arguments)}return vx(n,[{key:"_update",value:function(t){t.enum&&(t.mask="*".repeat(t.enum[0].length)),Dx(bx(n.prototype),"_update",this).call(this,t)}},{key:"doValidate",value:function(){for(var t,e=this,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return this.enum.some((function(t){return t.indexOf(e.unmaskedValue)>=0}))&&(t=Dx(bx(n.prototype),"doValidate",this)).call.apply(t,[this].concat(r))}}]),n}(e_);Vx.MaskedEnum=u_;var c_=function(t){yx(n,t);var e=wx(n);function n(t){return gx(this,n),e.call(this,Object.assign({},n.DEFAULTS,t))}return vx(n,[{key:"_update",value:function(t){Dx(bx(n.prototype),"_update",this).call(this,t),this._updateRegExps()}},{key:"_updateRegExps",value:function(){var t="^"+(this.allowNegative?"[+|\\-]?":""),e=(this.scale?"("+Nx(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExpInput=new RegExp(t+"(0|([1-9]+\\d*))?"+e),this._numberRegExp=new RegExp(t+"\\d*"+e),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(Nx).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(Nx(this.thousandsSeparator),"g")}},{key:"_removeThousandsSeparators",value:function(t){return t.replace(this._thousandsSeparatorRegExp,"")}},{key:"_insertThousandsSeparators",value:function(t){var e=t.split(this.radix);return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),e.join(this.radix)}},{key:"doPrepare",value:function(t){var e;t=t.replace(this._mapToRadixRegExp,this.radix);for(var i=this._removeThousandsSeparators(t),r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];var s=Bx((e=Dx(bx(n.prototype),"doPrepare",this)).call.apply(e,[this,i].concat(o))),l=Sx(s,2),u=l[0],c=l[1];return t&&!i&&(c.skip=!0),[u,c]}},{key:"_separatorsCount",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,i=0;i<t;++i)this._value.indexOf(this.thousandsSeparator,i)===i&&(++n,e&&(t+=this.thousandsSeparator.length));return n}},{key:"_separatorsCountFromSlice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._value;return this._separatorsCount(this._removeThousandsSeparators(t).length,!0)}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=arguments.length>2?arguments[2]:void 0,r=this._adjustRangeWithSeparators(t,e),o=Sx(r,2);return t=o[0],e=o[1],this._removeThousandsSeparators(Dx(bx(n.prototype),"extractInput",this).call(this,t,e,i))}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.thousandsSeparator)return Dx(bx(n.prototype),"_appendCharRaw",this).call(this,t,e);var i=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,r=this._separatorsCountFromSlice(i);this._value=this._removeThousandsSeparators(this.value);var o=Dx(bx(n.prototype),"_appendCharRaw",this).call(this,t,e);this._value=this._insertThousandsSeparators(this._value);var a=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,s=this._separatorsCountFromSlice(a);return o.tailShift+=(s-r)*this.thousandsSeparator.length,o.skip=!o.rawInserted&&t===this.thousandsSeparator,o}},{key:"_findSeparatorAround",value:function(t){if(this.thousandsSeparator){var e=t-this.thousandsSeparator.length+1,n=this.value.indexOf(this.thousandsSeparator,e);if(n<=t)return n}return-1}},{key:"_adjustRangeWithSeparators",value:function(t,e){var n=this._findSeparatorAround(t);n>=0&&(t=n);var i=this._findSeparatorAround(e);return i>=0&&(e=i+this.thousandsSeparator.length),[t,e]}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=this._adjustRangeWithSeparators(t,e),i=Sx(n,2);t=i[0],e=i[1];var r=this.value.slice(0,t),o=this.value.slice(e),a=this._separatorsCount(r.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(r+o));var s=this._separatorsCountFromSlice(r);return new Ox({tailShift:(s-a)*this.thousandsSeparator.length})}},{key:"nearestInputPos",value:function(t,e){if(!this.thousandsSeparator)return t;switch(e){case Mx:case Lx:case Rx:var n=this._findSeparatorAround(t-1);if(n>=0){var i=n+this.thousandsSeparator.length;if(t<i||this.value.length<=i||e===Rx)return n}break;case Px:case Fx:var r=this._findSeparatorAround(t);if(r>=0)return r+this.thousandsSeparator.length}return t}},{key:"doValidate",value:function(t){var e=(t.input?this._numberRegExpInput:this._numberRegExp).test(this._removeThousandsSeparators(this.value));if(e){var i=this.number;e=e&&!isNaN(i)&&(null==this.min||this.min>=0||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)}return e&&Dx(bx(n.prototype),"doValidate",this).call(this,t)}},{key:"doCommit",value:function(){if(this.value){var t=this.number,e=t;null!=this.min&&(e=Math.max(e,this.min)),null!=this.max&&(e=Math.min(e,this.max)),e!==t&&(this.unmaskedValue=String(e));var i=this.value;this.normalizeZeros&&(i=this._normalizeZeros(i)),this.padFractionalZeros&&this.scale>0&&(i=this._padFractionalZeros(i)),this._value=i}Dx(bx(n.prototype),"doCommit",this).call(this)}},{key:"_normalizeZeros",value:function(t){var e=this._removeThousandsSeparators(t).split(this.radix);return e[0]=e[0].replace(/^(\D*)(0*)(\d*)/,(function(t,e,n,i){return e+i})),t.length&&!/\d$/.test(e[0])&&(e[0]=e[0]+"0"),e.length>1&&(e[1]=e[1].replace(/0*$/,""),e[1].length||(e.length=1)),this._insertThousandsSeparators(e.join(this.radix))}},{key:"_padFractionalZeros",value:function(t){if(!t)return t;var e=t.split(this.radix);return e.length<2&&e.push(""),e[1]=e[1].padEnd(this.scale,"0"),e.join(this.radix)}},{key:"unmaskedValue",get:function(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,".")},set:function(t){kx(bx(n.prototype),"unmaskedValue",t.replace(".",this.radix),this,!0)}},{key:"typedValue",get:function(){return Number(this.unmaskedValue)},set:function(t){kx(bx(n.prototype),"unmaskedValue",String(t),this,!0)}},{key:"number",get:function(){return this.typedValue},set:function(t){this.typedValue=t}},{key:"allowNegative",get:function(){return this.signed||null!=this.min&&this.min<0||null!=this.max&&this.max<0}}]),n}(Wx);c_.DEFAULTS={radix:",",thousandsSeparator:"",mapToRadix:["."],scale:2,signed:!1,normalizeZeros:!0,padFractionalZeros:!1},Vx.MaskedNumber=c_;var h_=function(t){yx(n,t);var e=wx(n);function n(){return gx(this,n),e.apply(this,arguments)}return vx(n,[{key:"_update",value:function(t){t.mask&&(t.validate=t.mask),Dx(bx(n.prototype),"_update",this).call(this,t)}}]),n}(Wx);Vx.MaskedFunction=h_;var d_=["compiledMasks","currentMaskRef","currentMask"],f_=function(t){yx(n,t);var e=wx(n);function n(t){var i;return gx(this,n),(i=e.call(this,Object.assign({},n.DEFAULTS,t))).currentMask=null,i}return vx(n,[{key:"_update",value:function(t){Dx(bx(n.prototype),"_update",this).call(this,t),"mask"in t&&(this.compiledMasks=Array.isArray(t.mask)?t.mask.map((function(t){return Gx(t)})):[])}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._applyDispatch(t,e);return this.currentMask&&n.aggregate(this.currentMask._appendChar(t,e)),n}},{key:"_applyDispatch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.tail&&null!=e._beforeTailState?e._beforeTailState._value:this.value,i=this.rawInputValue,r=e.tail&&null!=e._beforeTailState?e._beforeTailState._rawInputValue:i,o=i.slice(r.length),a=this.currentMask,s=new Ox,l=a&&a.state;if(this.currentMask=this.doDispatch(t,Object.assign({},e)),this.currentMask)if(this.currentMask!==a){if(this.currentMask.reset(),r){var u=this.currentMask.append(r,{raw:!0});s.tailShift=u.inserted.length-n.length}o&&(s.tailShift+=this.currentMask.append(o,{raw:!0,tail:!0}).tailShift)}else this.currentMask.state=l;return s}},{key:"_appendPlaceholder",value:function(){var t=this._applyDispatch.apply(this,arguments);return this.currentMask&&t.aggregate(this.currentMask._appendPlaceholder()),t}},{key:"_appendEager",value:function(){var t=this._applyDispatch.apply(this,arguments);return this.currentMask&&t.aggregate(this.currentMask._appendEager()),t}},{key:"doDispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.dispatch(t,this,e)}},{key:"doValidate",value:function(){for(var t,e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=Dx(bx(n.prototype),"doValidate",this)).call.apply(t,[this].concat(r))&&(!this.currentMask||(e=this.currentMask).doValidate.apply(e,r))}},{key:"reset",value:function(){var t;null===(t=this.currentMask)||void 0===t||t.reset(),this.compiledMasks.forEach((function(t){return t.reset()}))}},{key:"value",get:function(){return this.currentMask?this.currentMask.value:""},set:function(t){kx(bx(n.prototype),"value",t,this,!0)}},{key:"unmaskedValue",get:function(){return this.currentMask?this.currentMask.unmaskedValue:""},set:function(t){kx(bx(n.prototype),"unmaskedValue",t,this,!0)}},{key:"typedValue",get:function(){return this.currentMask?this.currentMask.typedValue:""},set:function(t){var e=String(t);this.currentMask&&(this.currentMask.typedValue=t,e=this.currentMask.unmaskedValue),this.unmaskedValue=e}},{key:"isComplete",get:function(){var t;return Boolean(null===(t=this.currentMask)||void 0===t?void 0:t.isComplete)}},{key:"isFilled",get:function(){var t;return Boolean(null===(t=this.currentMask)||void 0===t?void 0:t.isFilled)}},{key:"remove",value:function(){var t,e=new Ox;this.currentMask&&e.aggregate((t=this.currentMask).remove.apply(t,arguments)).aggregate(this._applyDispatch());return e}},{key:"state",get:function(){return Object.assign({},Dx(bx(n.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map((function(t){return t.state})),currentMaskRef:this.currentMask,currentMask:this.currentMask&&this.currentMask.state})},set:function(t){var e=t.compiledMasks,i=t.currentMaskRef,r=t.currentMask,o=_x(t,d_);this.compiledMasks.forEach((function(t,n){return t.state=e[n]})),null!=i&&(this.currentMask=i,this.currentMask.state=r),kx(bx(n.prototype),"state",o,this,!0)}},{key:"extractInput",value:function(){var t;return this.currentMask?(t=this.currentMask).extractInput.apply(t,arguments):""}},{key:"extractTail",value:function(){for(var t,e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return this.currentMask?(t=this.currentMask).extractTail.apply(t,r):(e=Dx(bx(n.prototype),"extractTail",this)).call.apply(e,[this].concat(r))}},{key:"doCommit",value:function(){this.currentMask&&this.currentMask.doCommit(),Dx(bx(n.prototype),"doCommit",this).call(this)}},{key:"nearestInputPos",value:function(){for(var t,e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return this.currentMask?(t=this.currentMask).nearestInputPos.apply(t,r):(e=Dx(bx(n.prototype),"nearestInputPos",this)).call.apply(e,[this].concat(r))}},{key:"overwrite",get:function(){return this.currentMask?this.currentMask.overwrite:Dx(bx(n.prototype),"overwrite",this)},set:function(t){console.warn('"overwrite" option is not available in dynamic mask, use this option in siblings')}},{key:"eager",get:function(){return this.currentMask?this.currentMask.eager:Dx(bx(n.prototype),"eager",this)},set:function(t){console.warn('"eager" option is not available in dynamic mask, use this option in siblings')}},{key:"maskEquals",value:function(t){return Array.isArray(t)&&this.compiledMasks.every((function(e,n){var i;return e.maskEquals(null===(i=t[n])||void 0===i?void 0:i.mask)}))}}]),n}(Wx);f_.DEFAULTS={dispatch:function(t,e,n){if(e.compiledMasks.length){var i=e.rawInputValue,r=e.compiledMasks.map((function(e,r){return e.reset(),e.append(i,{raw:!0}),e.append(t,n),{weight:e.rawInputValue.length,index:r}}));return r.sort((function(t,e){return e.weight-t.weight})),e.compiledMasks[r[0].index]}}},Vx.MaskedDynamic=f_;var p_={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function g_(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p_.MASKED,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p_.MASKED,i=Gx(t);return function(t){return i.runIsolated((function(i){return i[e]=t,i[n]}))}}Vx.PIPE_TYPE=p_,Vx.createPipe=g_,Vx.pipe=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return g_.apply(void 0,n)(t)};try{globalThis.IMask=Vx}catch(t){}var m_=function(t){t.data("textInputFormComponent",(function(t){var e=t.getMaskOptionsUsing;return{mask:null,state:t.state,init:function(){var t=this;if(e){var n;if(this.state)this.$el.value=null===(n=this.state)||void 0===n?void 0:n.valueOf();this.mask=Vx(this.$el,e(Vx)).on("accept",(function(){t.state=t.mask.unmaskedValue})),this.$watch("state",(function(){var e,n;t.mask.unmaskedValue=null!==(e=null===(n=t.state)||void 0===n?void 0:n.valueOf())&&void 0!==e?e:""}))}}}}))},v_=function(t){t.data("textareaFormComponent",(function(){return{init:function(){var t=this;this.$nextTick((function(){t.render()}))},render:function(){this.$el.scrollHeight>0&&(this.$el.style.height="150px",this.$el.style.height=this.$el.scrollHeight+2+"px")}}}))};
>>>>>>> 454bd34d (feature: minimal easymde implementation)
/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function y_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function b_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y_(Object(n),!0).forEach((function(e){__(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x_(t){return(x_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function __(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E_(){return E_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},E_.apply(this,arguments)}function w_(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function A_(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var D_=A_(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),C_=A_(/Edge/i),k_=A_(/firefox/i),S_=A_(/safari/i)&&!A_(/chrome/i)&&!A_(/android/i),T_=A_(/iP(ad|od|hone)/i),O_=A_(/chrome/i)&&A_(/android/i),I_={capture:!1,passive:!1};function M_(t,e,n){t.addEventListener(e,n,!D_&&I_)}function L_(t,e,n){t.removeEventListener(e,n,!D_&&I_)}function R_(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function P_(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function F_(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&R_(t,e):R_(t,e))||i&&t===n)return t;if(t===n)break}while(t=P_(t))}return null}var N_,B_=/\s+/g;function j_(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(B_," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(B_," ")}}function z_(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function H_(t,e){var n="";if("string"==typeof t)n=t;else do{var i=z_(t,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function V_(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function W_(){var t=document.scrollingElement;return t||document.documentElement}function U_(t,e,n,i,r){if(t.getBoundingClientRect||t===window){var o,a,s,l,u,c,h;if(t!==window&&t.parentNode&&t!==W_()?(a=(o=t.getBoundingClientRect()).top,s=o.left,l=o.bottom,u=o.right,c=o.height,h=o.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!D_))do{if(r&&r.getBoundingClientRect&&("none"!==z_(r,"transform")||n&&"static"!==z_(r,"position"))){var d=r.getBoundingClientRect();a-=d.top+parseInt(z_(r,"border-top-width")),s-=d.left+parseInt(z_(r,"border-left-width")),l=a+o.height,u=s+o.width;break}}while(r=r.parentNode);if(i&&t!==window){var f=H_(r||t),p=f&&f.a,g=f&&f.d;f&&(l=(a/=g)+(c/=g),u=(s/=p)+(h/=p))}return{top:a,left:s,bottom:l,right:u,width:h,height:c}}}function G_(t,e,n){for(var i=K_(t,!0),r=U_(t)[e];i;){var o=U_(i)[n];if(!("top"===n||"left"===n?r>=o:r<=o))return i;if(i===W_())break;i=K_(i,!1)}return!1}function q_(t,e,n,i){for(var r=0,o=0,a=t.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==QE.ghost&&(i||a[o]!==QE.dragged)&&F_(a[o],n.draggable,t,!1)){if(r===e)return a[o];r++}o++}return null}function $_(t,e){for(var n=t.lastElementChild;n&&(n===QE.ghost||"none"===z_(n,"display")||e&&!R_(n,e));)n=n.previousElementSibling;return n||null}function Y_(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===QE.clone||e&&!R_(t,e)||n++;return n}function X_(t){var e=0,n=0,i=W_();if(t)do{var r=H_(t),o=r.a,a=r.d;e+=t.scrollLeft*o,n+=t.scrollTop*a}while(t!==i&&(t=t.parentNode));return[e,n]}function K_(t,e){if(!t||!t.getBoundingClientRect)return W_();var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=z_(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return W_();if(i||e)return n;i=!0}}}while(n=n.parentNode);return W_()}function Z_(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function J_(t,e){return function(){if(!N_){var n=arguments,i=this;1===n.length?t.call(i,n[0]):t.apply(i,n),N_=setTimeout((function(){N_=void 0}),e)}}}function Q_(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function tE(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var eE="Sortable"+(new Date).getTime();function nE(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==z_(t,"display")&&t!==QE.ghost){e.push({target:t,rect:U_(t)});var n=b_({},e[e.length-1].rect);if(t.thisAnimationDuration){var i=H_(t,!0);i&&(n.top-=i.f,n.left-=i.e)}t.fromRect=n}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n);return-1}(e,{target:t}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof n&&n());var r=!1,o=0;e.forEach((function(t){var e=0,n=t.target,a=n.fromRect,s=U_(n),l=n.prevFromRect,u=n.prevToRect,c=t.rect,h=H_(n,!0);h&&(s.top-=h.f,s.left-=h.e),n.toRect=s,n.thisAnimationDuration&&Z_(l,s)&&!Z_(a,s)&&(c.top-s.top)/(c.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(e=function(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}(c,l,u,i.options)),Z_(s,a)||(n.prevFromRect=a,n.prevToRect=s,e||(e=i.options.animation),i.animate(n,c,s,e)),e&&(r=!0,o=Math.max(o,e),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),e),n.thisAnimationDuration=e)})),clearTimeout(t),r?t=setTimeout((function(){"function"==typeof n&&n()}),o):"function"==typeof n&&n(),e=[]},animate:function(t,e,n,i){if(i){z_(t,"transition",""),z_(t,"transform","");var r=H_(this.el),o=r&&r.a,a=r&&r.d,s=(e.left-n.left)/(o||1),l=(e.top-n.top)/(a||1);t.animatingX=!!s,t.animatingY=!!l,z_(t,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),z_(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),z_(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){z_(t,"transition",""),z_(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),i)}}}}var iE=[],rE={initializeByDefault:!0},oE={mount:function(t){for(var e in rE)rE.hasOwnProperty(e)&&!(e in t)&&(t[e]=rE[e]);iE.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),iE.push(t)},pluginEvent:function(t,e,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=t+"Global";iE.forEach((function(i){e[i.pluginName]&&(e[i.pluginName][r]&&e[i.pluginName][r](b_({sortable:e},n)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](b_({sortable:e},n)))}))},initializePlugins:function(t,e,n,i){for(var r in iE.forEach((function(i){var r=i.pluginName;if(t.options[r]||i.initializeByDefault){var o=new i(t,e,t.options);o.sortable=t,o.options=t.options,t[r]=o,E_(n,o.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var o=this.modifyOption(t,r,t.options[r]);void 0!==o&&(t.options[r]=o)}},getEventProperties:function(t,e){var n={};return iE.forEach((function(i){"function"==typeof i.eventProperties&&E_(n,i.eventProperties.call(e[i.pluginName],t))})),n},modifyOption:function(t,e,n){var i;return iE.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[e]&&(i=r.optionListeners[e].call(t[r.pluginName],n))})),i}};var aE,sE,lE,uE,cE,hE,dE,fE,pE,gE,mE,vE,yE,bE,xE=["evt"],_E=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=w_(n,xE);oE.pluginEvent.bind(QE)(t,e,b_({dragEl:aE,parentEl:sE,ghostEl:lE,rootEl:uE,nextEl:cE,lastDownEl:hE,cloneEl:dE,cloneHidden:fE,dragStarted:TE,putSortable:bE,activeSortable:QE.active,originalEvent:i,oldIndex:pE,oldDraggableIndex:mE,newIndex:gE,newDraggableIndex:vE,hideGhostForTarget:XE,unhideGhostForTarget:KE,cloneNowHidden:function(){fE=!0},cloneNowShown:function(){fE=!1},dispatchSortableEvent:function(t){EE({sortable:e,name:t,originalEvent:i})}},r))};function EE(t){!function(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,o=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[eE]){var g,m=e.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||D_||C_?(g=document.createEvent("Event")).initEvent(i,!0,!0):g=new CustomEvent(i,{bubbles:!0,cancelable:!0}),g.to=a||n,g.from=s||n,g.item=r||n,g.clone=o,g.oldIndex=l,g.newIndex=u,g.oldDraggableIndex=c,g.newDraggableIndex=h,g.originalEvent=d,g.pullMode=f?f.lastPutMode:void 0;var y=b_(b_({},p),oE.getEventProperties(i,e));for(var b in y)g[b]=y[b];n&&n.dispatchEvent(g),m[v]&&m[v].call(e,g)}}(b_({putSortable:bE,cloneEl:dE,targetEl:aE,rootEl:uE,oldIndex:pE,oldDraggableIndex:mE,newIndex:gE,newDraggableIndex:vE},t))}var wE,AE,DE,CE,kE,SE,TE,OE,IE,ME,LE,RE=!1,PE=!1,FE=[],NE=!1,BE=!1,jE=[],zE=!1,HE=[],VE="undefined"!=typeof document,WE=T_,UE=C_||D_?"cssFloat":"float",GE=VE&&!O_&&!T_&&"draggable"in document.createElement("div"),qE=function(){if(VE){if(D_)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),$E=function(t,e){var n=z_(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=q_(t,0,e),o=q_(t,1,e),a=r&&z_(r),s=o&&z_(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+U_(r).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+U_(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==c?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=i&&"none"===n[UE]||o&&"none"===n[UE]&&l+u>i)?"vertical":"horizontal"},YE=function(t){function e(t,n){return function(i,r,o,a){var s=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==t&&(n||s))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(i,r,o,a),n)(i,r,o,a);var l=(n?i:r).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var n={},i=t.group;i&&"object"==x_(i)||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n},XE=function(){!qE&&lE&&z_(lE,"display","none")},KE=function(){!qE&&lE&&z_(lE,"display","")};VE&&!O_&&document.addEventListener("click",(function(t){if(PE)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),PE=!1,!1}),!0);var ZE=function(t){if(aE){t=t.touches?t.touches[0]:t;var e=(r=t.clientX,o=t.clientY,FE.some((function(t){var e=t[eE].options.emptyInsertThreshold;if(e&&!$_(t)){var n=U_(t),i=r>=n.left-e&&r<=n.right+e,s=o>=n.top-e&&o<=n.bottom+e;return i&&s?a=t:void 0}})),a);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[eE]._onDragOver(n)}}var r,o,a},JE=function(t){aE&&aE.parentNode[eE]._isOutsideThisEl(t.target)};function QE(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=E_({},e),t[eE]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return $E(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==QE.supportPointer&&"PointerEvent"in window&&!S_,emptyInsertThreshold:5};for(var i in oE.initializePlugins(this,t,n),n)!(i in e)&&(e[i]=n[i]);for(var r in YE(e),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&GE,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?M_(t,"pointerdown",this._onTapStart):(M_(t,"mousedown",this._onTapStart),M_(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(M_(t,"dragover",this),M_(t,"dragenter",this)),FE.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),E_(this,nE())}function tw(t,e,n,i,r,o,a,s){var l,u,c=t[eE],h=c.options.onMove;return!window.CustomEvent||D_||C_?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=r||e,l.relatedRect=o||U_(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),h&&(u=h.call(c,l,a)),u}function ew(t){t.draggable=!1}function nw(){zE=!1}function iw(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function rw(t){return setTimeout(t,0)}function ow(t){return clearTimeout(t)}QE.prototype={constructor:QE,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(OE=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,aE):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,r=i.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,u=i.filter;if(function(t){HE.length=0;var e=t.getElementsByTagName("input"),n=e.length;for(;n--;){var i=e[n];i.checked&&HE.push(i)}}(n),!aE&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||i.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!S_||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=F_(s,i.draggable,n,!1))&&s.animated||hE===s)){if(pE=Y_(s),mE=Y_(s,i.draggable),"function"==typeof u){if(u.call(this,t,s,this))return EE({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),_E("filter",e,{evt:t}),void(r&&t.cancelable&&t.preventDefault())}else if(u&&(u=u.split(",").some((function(i){if(i=F_(l,i.trim(),n,!1))return EE({sortable:e,rootEl:i,name:"filter",targetEl:s,fromEl:n,toEl:n}),_E("filter",e,{evt:t}),!0}))))return void(r&&t.cancelable&&t.preventDefault());i.handle&&!F_(l,i.handle,n,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,n){var i,r=this,o=r.el,a=r.options,s=o.ownerDocument;if(n&&!aE&&n.parentNode===o){var l=U_(n);if(uE=o,sE=(aE=n).parentNode,cE=aE.nextSibling,hE=n,yE=a.group,QE.dragged=aE,wE={target:aE,clientX:(e||t).clientX,clientY:(e||t).clientY},kE=wE.clientX-l.left,SE=wE.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,aE.style["will-change"]="all",i=function(){_E("delayEnded",r,{evt:t}),QE.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!k_&&r.nativeDraggable&&(aE.draggable=!0),r._triggerDragStart(t,e),EE({sortable:r,name:"choose",originalEvent:t}),j_(aE,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){V_(aE,t.trim(),ew)})),M_(s,"dragover",ZE),M_(s,"mousemove",ZE),M_(s,"touchmove",ZE),M_(s,"mouseup",r._onDrop),M_(s,"touchend",r._onDrop),M_(s,"touchcancel",r._onDrop),k_&&this.nativeDraggable&&(this.options.touchStartThreshold=4,aE.draggable=!0),_E("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(C_||D_))i();else{if(QE.eventCanceled)return void this._onDrop();M_(s,"mouseup",r._disableDelayedDrag),M_(s,"touchend",r._disableDelayedDrag),M_(s,"touchcancel",r._disableDelayedDrag),M_(s,"mousemove",r._delayedDragTouchMoveHandler),M_(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&M_(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){aE&&ew(aE),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;L_(t,"mouseup",this._disableDelayedDrag),L_(t,"touchend",this._disableDelayedDrag),L_(t,"touchcancel",this._disableDelayedDrag),L_(t,"mousemove",this._delayedDragTouchMoveHandler),L_(t,"touchmove",this._delayedDragTouchMoveHandler),L_(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?M_(document,"pointermove",this._onTouchMove):M_(document,e?"touchmove":"mousemove",this._onTouchMove):(M_(aE,"dragend",this),M_(uE,"dragstart",this._onDragStart));try{document.selection?rw((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(RE=!1,uE&&aE){_E("dragStarted",this,{evt:e}),this.nativeDraggable&&M_(document,"dragover",JE);var n=this.options;!t&&j_(aE,n.dragClass,!1),j_(aE,n.ghostClass,!0),QE.active=this,t&&this._appendGhost(),EE({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(AE){this._lastX=AE.clientX,this._lastY=AE.clientY,XE();for(var t=document.elementFromPoint(AE.clientX,AE.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(AE.clientX,AE.clientY))!==e;)e=t;if(aE.parentNode[eE]._isOutsideThisEl(t),e)do{if(e[eE]){if(e[eE]._onDragOver({clientX:AE.clientX,clientY:AE.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);KE()}},_onTouchMove:function(t){if(wE){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,r=t.touches?t.touches[0]:t,o=lE&&H_(lE,!0),a=lE&&o&&o.a,s=lE&&o&&o.d,l=WE&&LE&&X_(LE),u=(r.clientX-wE.clientX+i.x)/(a||1)+(l?l[0]-jE[0]:0)/(a||1),c=(r.clientY-wE.clientY+i.y)/(s||1)+(l?l[1]-jE[1]:0)/(s||1);if(!QE.active&&!RE){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(lE){o?(o.e+=u-(DE||0),o.f+=c-(CE||0)):o={a:1,b:0,c:0,d:1,e:u,f:c};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");z_(lE,"webkitTransform",h),z_(lE,"mozTransform",h),z_(lE,"msTransform",h),z_(lE,"transform",h),DE=u,CE=c,AE=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!lE){var t=this.options.fallbackOnBody?document.body:uE,e=U_(aE,!0,WE,!0,t),n=this.options;if(WE){for(LE=t;"static"===z_(LE,"position")&&"none"===z_(LE,"transform")&&LE!==document;)LE=LE.parentNode;LE!==document.body&&LE!==document.documentElement?(LE===document&&(LE=W_()),e.top+=LE.scrollTop,e.left+=LE.scrollLeft):LE=W_(),jE=X_(LE)}j_(lE=aE.cloneNode(!0),n.ghostClass,!1),j_(lE,n.fallbackClass,!0),j_(lE,n.dragClass,!0),z_(lE,"transition",""),z_(lE,"transform",""),z_(lE,"box-sizing","border-box"),z_(lE,"margin",0),z_(lE,"top",e.top),z_(lE,"left",e.left),z_(lE,"width",e.width),z_(lE,"height",e.height),z_(lE,"opacity","0.8"),z_(lE,"position",WE?"absolute":"fixed"),z_(lE,"zIndex","100000"),z_(lE,"pointerEvents","none"),QE.ghost=lE,t.appendChild(lE),z_(lE,"transform-origin",kE/parseInt(lE.style.width)*100+"% "+SE/parseInt(lE.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,r=n.options;_E("dragStart",this,{evt:t}),QE.eventCanceled?this._onDrop():(_E("setupClone",this),QE.eventCanceled||((dE=tE(aE)).removeAttribute("id"),dE.draggable=!1,dE.style["will-change"]="",this._hideClone(),j_(dE,this.options.chosenClass,!1),QE.clone=dE),n.cloneId=rw((function(){_E("clone",n),QE.eventCanceled||(n.options.removeCloneOnHide||uE.insertBefore(dE,aE),n._hideClone(),EE({sortable:n,name:"clone"}))})),!e&&j_(aE,r.dragClass,!0),e?(PE=!0,n._loopId=setInterval(n._emulateDragOver,50)):(L_(document,"mouseup",n._onDrop),L_(document,"touchend",n._onDrop),L_(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,aE)),M_(document,"drop",n),z_(aE,"transform","translateZ(0)")),RE=!0,n._dragStartId=rw(n._dragStarted.bind(n,e,t)),M_(document,"selectstart",n),TE=!0,S_&&z_(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,i,r,o=this.el,a=t.target,s=this.options,l=s.group,u=QE.active,c=yE===l,h=s.sort,d=bE||u,f=this,p=!1;if(!zE){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=F_(a,s.draggable,o,!0),T("dragOver"),QE.eventCanceled)return p;if(aE.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||f._ignoreWhileAnimating===a)return I(!1);if(PE=!1,u&&!s.disabled&&(c?h||(i=sE!==uE):bE===this||(this.lastPutMode=yE.checkPull(this,u,aE,t))&&l.checkPut(this,u,aE,t))){if(r="vertical"===this._getDirection(t,a),e=U_(aE),T("dragOverValid"),QE.eventCanceled)return p;if(i)return sE=uE,O(),this._hideClone(),T("revert"),QE.eventCanceled||(cE?uE.insertBefore(aE,cE):uE.appendChild(aE)),I(!0);var g=$_(o,s.draggable);if(!g||function(t,e,n){var i=U_($_(n.el,n.options.draggable)),r=10;return e?t.clientX>i.right+r||t.clientX<=i.right&&t.clientY>i.bottom&&t.clientX>=i.left:t.clientX>i.right&&t.clientY>i.top||t.clientX<=i.right&&t.clientY>i.bottom+r}(t,r,this)&&!g.animated){if(g===aE)return I(!1);if(g&&o===t.target&&(a=g),a&&(n=U_(a)),!1!==tw(uE,o,aE,e,a,n,t,!!a))return O(),g&&g.nextSibling?o.insertBefore(aE,g.nextSibling):o.appendChild(aE),sE=o,M(),I(!0)}else if(g&&function(t,e,n){var i=U_(q_(n.el,0,n.options,!0)),r=10;return e?t.clientX<i.left-r||t.clientY<i.top&&t.clientX<i.right:t.clientY<i.top-r||t.clientY<i.bottom&&t.clientX<i.left}(t,r,this)){var m=q_(o,0,s,!0);if(m===aE)return I(!1);if(n=U_(a=m),!1!==tw(uE,o,aE,e,a,n,t,!1))return O(),o.insertBefore(aE,m),sE=o,M(),I(!0)}else if(a.parentNode===o){n=U_(a);var v,y,b,x=aE.parentNode!==o,_=!function(t,e,n){var i=n?t.left:t.top,r=n?t.right:t.bottom,o=n?t.width:t.height,a=n?e.left:e.top,s=n?e.right:e.bottom,l=n?e.width:e.height;return i===a||r===s||i+o/2===a+l/2}(aE.animated&&aE.toRect||e,a.animated&&a.toRect||n,r),E=r?"top":"left",w=G_(a,"top","top")||G_(aE,"top","top"),A=w?w.scrollTop:void 0;if(OE!==a&&(y=n[E],NE=!1,BE=!_&&s.invertSwap||x),v=function(t,e,n,i,r,o,a,s){var l=i?t.clientY:t.clientX,u=i?n.height:n.width,c=i?n.top:n.left,h=i?n.bottom:n.right,d=!1;if(!a)if(s&&ME<u*r){if(!NE&&(1===IE?l>c+u*o/2:l<h-u*o/2)&&(NE=!0),NE)d=!0;else if(1===IE?l<c+ME:l>h-ME)return-IE}else if(l>c+u*(1-r)/2&&l<h-u*(1-r)/2)return function(t){return Y_(aE)<Y_(t)?1:-1}(e);if((d=d||a)&&(l<c+u*o/2||l>h-u*o/2))return l>c+u/2?1:-1;return 0}(t,a,n,r,_?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,BE,OE===a),0!==v){var D=Y_(aE);do{D-=v,b=sE.children[D]}while(b&&("none"===z_(b,"display")||b===lE))}if(0===v||b===a)return I(!1);OE=a,IE=v;var C=a.nextElementSibling,k=!1,S=tw(uE,o,aE,e,a,n,t,k=1===v);if(!1!==S)return 1!==S&&-1!==S||(k=1===S),zE=!0,setTimeout(nw,30),O(),k&&!C?o.appendChild(aE):a.parentNode.insertBefore(aE,k?C:a),w&&Q_(w,0,A-w.scrollTop),sE=aE.parentNode,void 0===y||BE||(ME=Math.abs(y-U_(a)[E])),M(),I(!0)}if(o.contains(aE))return I(!1)}return!1}function T(s,l){_E(s,f,b_({evt:t,isOwner:c,axis:r?"vertical":"horizontal",revert:i,dragRect:e,targetRect:n,canSort:h,fromSortable:d,target:a,completed:I,onMove:function(n,i){return tw(uE,o,aE,e,n,U_(n),t,i)},changed:M},l))}function O(){T("dragOverAnimationCapture"),f.captureAnimationState(),f!==d&&d.captureAnimationState()}function I(e){return T("dragOverCompleted",{insertion:e}),e&&(c?u._hideClone():u._showClone(f),f!==d&&(j_(aE,bE?bE.options.ghostClass:u.options.ghostClass,!1),j_(aE,s.ghostClass,!0)),bE!==f&&f!==QE.active?bE=f:f===QE.active&&bE&&(bE=null),d===f&&(f._ignoreWhileAnimating=a),f.animateAll((function(){T("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(a===aE&&!aE.animated||a===o&&!a.animated)&&(OE=null),s.dragoverBubble||t.rootEl||a===document||(aE.parentNode[eE]._isOutsideThisEl(t.target),!e&&ZE(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function M(){gE=Y_(aE),vE=Y_(aE,s.draggable),EE({sortable:f,name:"change",toEl:o,newIndex:gE,newDraggableIndex:vE,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){L_(document,"mousemove",this._onTouchMove),L_(document,"touchmove",this._onTouchMove),L_(document,"pointermove",this._onTouchMove),L_(document,"dragover",ZE),L_(document,"mousemove",ZE),L_(document,"touchmove",ZE)},_offUpEvents:function(){var t=this.el.ownerDocument;L_(t,"mouseup",this._onDrop),L_(t,"touchend",this._onDrop),L_(t,"pointerup",this._onDrop),L_(t,"touchcancel",this._onDrop),L_(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;gE=Y_(aE),vE=Y_(aE,n.draggable),_E("drop",this,{evt:t}),sE=aE&&aE.parentNode,gE=Y_(aE),vE=Y_(aE,n.draggable),QE.eventCanceled||(RE=!1,BE=!1,NE=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ow(this.cloneId),ow(this._dragStartId),this.nativeDraggable&&(L_(document,"drop",this),L_(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),S_&&z_(document.body,"user-select",""),z_(aE,"transform",""),t&&(TE&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),lE&&lE.parentNode&&lE.parentNode.removeChild(lE),(uE===sE||bE&&"clone"!==bE.lastPutMode)&&dE&&dE.parentNode&&dE.parentNode.removeChild(dE),aE&&(this.nativeDraggable&&L_(aE,"dragend",this),ew(aE),aE.style["will-change"]="",TE&&!RE&&j_(aE,bE?bE.options.ghostClass:this.options.ghostClass,!1),j_(aE,this.options.chosenClass,!1),EE({sortable:this,name:"unchoose",toEl:sE,newIndex:null,newDraggableIndex:null,originalEvent:t}),uE!==sE?(gE>=0&&(EE({rootEl:sE,name:"add",toEl:sE,fromEl:uE,originalEvent:t}),EE({sortable:this,name:"remove",toEl:sE,originalEvent:t}),EE({rootEl:sE,name:"sort",toEl:sE,fromEl:uE,originalEvent:t}),EE({sortable:this,name:"sort",toEl:sE,originalEvent:t})),bE&&bE.save()):gE!==pE&&gE>=0&&(EE({sortable:this,name:"update",toEl:sE,originalEvent:t}),EE({sortable:this,name:"sort",toEl:sE,originalEvent:t})),QE.active&&(null!=gE&&-1!==gE||(gE=pE,vE=mE),EE({sortable:this,name:"end",toEl:sE,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){_E("nulling",this),uE=aE=sE=lE=cE=dE=hE=fE=wE=AE=TE=gE=vE=pE=mE=OE=IE=bE=yE=QE.dragged=QE.ghost=QE.clone=QE.active=null,HE.forEach((function(t){t.checked=!0})),HE.length=DE=CE=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":aE&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)F_(t=n[i],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||iw(t));return e},sort:function(t,e){var n={},i=this.el;this.toArray().forEach((function(t,e){var r=i.children[e];F_(r,this.options.draggable,i,!1)&&(n[t]=r)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(i.removeChild(n[t]),i.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return F_(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=oE.modifyOption(this,t,e);n[t]=void 0!==i?i:e,"group"===t&&YE(n)},destroy:function(){_E("destroy",this);var t=this.el;t[eE]=null,L_(t,"mousedown",this._onTapStart),L_(t,"touchstart",this._onTapStart),L_(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(L_(t,"dragover",this),L_(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),FE.splice(FE.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!fE){if(_E("hideClone",this),QE.eventCanceled)return;z_(dE,"display","none"),this.options.removeCloneOnHide&&dE.parentNode&&dE.parentNode.removeChild(dE),fE=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(fE){if(_E("showClone",this),QE.eventCanceled)return;aE.parentNode!=uE||this.options.group.revertClone?cE?uE.insertBefore(dE,cE):uE.appendChild(dE):uE.insertBefore(dE,aE),this.options.group.revertClone&&this.animate(aE,dE),z_(dE,"display",""),fE=!1}}else this._hideClone()}},VE&&M_(document,"touchmove",(function(t){(QE.active||RE)&&t.cancelable&&t.preventDefault()})),QE.utils={on:M_,off:L_,css:z_,find:V_,is:function(t,e){return!!F_(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:J_,closest:F_,toggleClass:j_,clone:tE,index:Y_,nextTick:rw,cancelNextTick:ow,detectDirection:$E,getChild:q_},QE.get=function(t){return t[eE]},QE.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(QE.utils=b_(b_({},QE.utils),t.utils)),oE.mount(t)}))},QE.create=function(t,e){return new QE(t,e)},QE.version="1.15.0";var aw,sw,lw,uw,cw,hw,dw=[],fw=!1;function pw(){dw.forEach((function(t){clearInterval(t.pid)})),dw=[]}function gw(){clearInterval(hw)}var mw=J_((function(t,e,n,i){if(e.scroll){var r,o=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,u=W_(),c=!1;sw!==n&&(sw=n,pw(),aw=e.scroll,r=e.scrollFn,!0===aw&&(aw=K_(n,!0)));var h=0,d=aw;do{var f=d,p=U_(f),g=p.top,m=p.bottom,v=p.left,y=p.right,b=p.width,x=p.height,_=void 0,E=void 0,w=f.scrollWidth,A=f.scrollHeight,D=z_(f),C=f.scrollLeft,k=f.scrollTop;f===u?(_=b<w&&("auto"===D.overflowX||"scroll"===D.overflowX||"visible"===D.overflowX),E=x<A&&("auto"===D.overflowY||"scroll"===D.overflowY||"visible"===D.overflowY)):(_=b<w&&("auto"===D.overflowX||"scroll"===D.overflowX),E=x<A&&("auto"===D.overflowY||"scroll"===D.overflowY));var S=_&&(Math.abs(y-o)<=s&&C+b<w)-(Math.abs(v-o)<=s&&!!C),T=E&&(Math.abs(m-a)<=s&&k+x<A)-(Math.abs(g-a)<=s&&!!k);if(!dw[h])for(var O=0;O<=h;O++)dw[O]||(dw[O]={});dw[h].vx==S&&dw[h].vy==T&&dw[h].el===f||(dw[h].el=f,dw[h].vx=S,dw[h].vy=T,clearInterval(dw[h].pid),0==S&&0==T||(c=!0,dw[h].pid=setInterval(function(){i&&0===this.layer&&QE.active._onTouchMove(cw);var e=dw[this.layer].vy?dw[this.layer].vy*l:0,n=dw[this.layer].vx?dw[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(QE.dragged.parentNode[eE],n,e,t,cw,dw[this.layer].el)||Q_(dw[this.layer].el,n,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==u&&(d=K_(d,!1)));fw=c}}),30),vw=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,r=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=n||r;a();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(u.clientX,u.clientY);s(),l&&!l.el.contains(c)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function yw(){}function bw(){}yw.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=q_(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:vw},E_(yw,{pluginName:"revertOnSpill"}),bw.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:vw},E_(bw,{pluginName:"removeOnSpill"}),QE.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?M_(document,"dragover",this._handleAutoScroll):this.options.supportPointer?M_(document,"pointermove",this._handleFallbackAutoScroll):e.touches?M_(document,"touchmove",this._handleFallbackAutoScroll):M_(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?L_(document,"dragover",this._handleAutoScroll):(L_(document,"pointermove",this._handleFallbackAutoScroll),L_(document,"touchmove",this._handleFallbackAutoScroll),L_(document,"mousemove",this._handleFallbackAutoScroll)),gw(),pw(),clearTimeout(N_),N_=void 0},nulling:function(){cw=sw=aw=fw=hw=lw=uw=null,dw.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,i=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(i,r);if(cw=t,e||this.options.forceAutoScrollFallback||C_||D_||S_){mw(t,this.options,o,e);var a=K_(o,!0);!fw||hw&&i===lw&&r===uw||(hw&&gw(),hw=setInterval((function(){var o=K_(document.elementFromPoint(i,r),!0);o!==a&&(a=o,pw()),mw(t,n.options,o,e)}),10),lw=i,uw=r)}else{if(!this.options.bubbleScroll||K_(o,!0)===W_())return void pw();mw(t,this.options,K_(o,!1),!1)}}},E_(t,{pluginName:"scroll",initializeByDefault:!0})}),QE.mount(bw,yw);var xw=QE;window.Livewire.directive("sortable",(function(t){t.sortable=xw.create(t,{draggable:"[wire\\:sortable\\.item]",handle:"[wire\\:sortable\\.handle]",dataIdAttr:"wire:sortable.item"})}));var _w=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Ew=_w.join(","),ww="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Aw=function(t,e,n){var i=Array.prototype.slice.apply(t.querySelectorAll(Ew));return e&&ww.call(t,Ew)&&i.unshift(t),i=i.filter(n)},Dw=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return isNaN(e)?function(t){return"true"===t.contentEditable}(t)?0:"AUDIO"!==t.nodeName&&"VIDEO"!==t.nodeName&&"DETAILS"!==t.nodeName||null!==t.getAttribute("tabindex")?t.tabIndex:0:e},Cw=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},kw=function(t){return"INPUT"===t.tagName},Sw=function(t){return function(t){return kw(t)&&"radio"===t.type}(t)&&!function(t){if(!t.name)return!0;var e,n=t.form||t.ownerDocument,i=function(t){return n.querySelectorAll('input[type="radio"][name="'+t+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)e=i(window.CSS.escape(t.name));else try{e=i(t.name)}catch(t){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",t.message),!1}var r=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]}(e,t.form);return!r||r===t}(t)},Tw=function(t,e){return!(e.disabled||function(t){return kw(t)&&"hidden"===t.type}(e)||function(t,e){if("hidden"===getComputedStyle(t).visibility)return!0;var n=ww.call(t,"details>summary:first-of-type")?t.parentElement:t;if(ww.call(n,"details:not([open]) *"))return!0;if(e&&"full"!==e){if("non-zero-area"===e){var i=t.getBoundingClientRect(),r=i.width,o=i.height;return 0===r&&0===o}}else for(;t;){if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1}(e,t.displayCheck)||function(t){return"DETAILS"===t.tagName&&Array.prototype.slice.apply(t.children).some((function(t){return"SUMMARY"===t.tagName}))}(e)||function(t){if(kw(t)||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||"BUTTON"===t.tagName)for(var e=t.parentElement;e;){if("FIELDSET"===e.tagName&&e.disabled){for(var n=0;n<e.children.length;n++){var i=e.children.item(n);if("LEGEND"===i.tagName)return!i.contains(t)}return!0}e=e.parentElement}return!1}(e))},Ow=function(t,e){return!(!Tw(t,e)||Sw(e)||Dw(e)<0)},Iw=function(t,e){var n=[],i=[];return Aw(t,(e=e||{}).includeContainer,Ow.bind(null,e)).forEach((function(t,e){var r=Dw(t);0===r?n.push(t):i.push({documentOrder:e,tabIndex:r,node:t})})),i.sort(Cw).map((function(t){return t.node})).concat(n)},Mw=_w.concat("iframe").join(","),Lw=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==ww.call(t,Mw)&&Tw(e,t)};
/*!
* focus-trap 6.6.1
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
function Rw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Pw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Fw,Nw=(Fw=[],{activateTrap:function(t){if(Fw.length>0){var e=Fw[Fw.length-1];e!==t&&e.pause()}var n=Fw.indexOf(t);-1===n||Fw.splice(n,1),Fw.push(t)},deactivateTrap:function(t){var e=Fw.indexOf(t);-1!==e&&Fw.splice(e,1),Fw.length>0&&Fw[Fw.length-1].unpause()}}),Bw=function(t){return setTimeout(t,0)},jw=function(t,e){var n=-1;return t.every((function(t,i){return!e(t)||(n=i,!1)})),n},zw=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return"function"==typeof t?t.apply(void 0,n):t},Hw=function(t,e){var n,i=document,r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rw(Object(n),!0).forEach((function(e){Pw(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},e),o={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},a=function(t,e,n){return t&&void 0!==t[e]?t[e]:r[n||e]},s=function(t){return o.containers.some((function(e){return e.contains(t)}))},l=function(t){var e=r[t];if(!e)return null;var n=e;if("string"==typeof e&&!(n=i.querySelector(e)))throw new Error("`".concat(t,"` refers to no known node"));if("function"==typeof e&&!(n=e()))throw new Error("`".concat(t,"` did not return a node"));return n},u=function(){var t;if(!1===a({},"initialFocus"))return!1;if(null!==l("initialFocus"))t=l("initialFocus");else if(s(i.activeElement))t=i.activeElement;else{var e=o.tabbableGroups[0];t=e&&e.firstTabbableNode||l("fallbackFocus")}if(!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t},c=function(){if(o.tabbableGroups=o.containers.map((function(t){var e=Iw(t);if(e.length>0)return{container:t,firstTabbableNode:e[0],lastTabbableNode:e[e.length-1]}})).filter((function(t){return!!t})),o.tabbableGroups.length<=0&&!l("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},h=function t(e){!1!==e&&e!==i.activeElement&&(e&&e.focus?(e.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=e,function(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"==typeof t.select}(e)&&e.select()):t(u()))},d=function(t){var e=l("setReturnFocus");return e||t},f=function(t){s(t.target)||(zw(r.clickOutsideDeactivates,t)?n.deactivate({returnFocus:r.returnFocusOnDeactivate&&!Lw(t.target)}):zw(r.allowOutsideClick,t)||t.preventDefault())},p=function(t){var e=s(t.target);e||t.target instanceof Document?e&&(o.mostRecentlyFocusedNode=t.target):(t.stopImmediatePropagation(),h(o.mostRecentlyFocusedNode||u()))},g=function(t){if(function(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}(t)&&!1!==zw(r.escapeDeactivates))return t.preventDefault(),void n.deactivate();(function(t){return"Tab"===t.key||9===t.keyCode})(t)&&function(t){c();var e=null;if(o.tabbableGroups.length>0){var n=jw(o.tabbableGroups,(function(e){return e.container.contains(t.target)}));if(n<0)e=t.shiftKey?o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:o.tabbableGroups[0].firstTabbableNode;else if(t.shiftKey){var i=jw(o.tabbableGroups,(function(e){var n=e.firstTabbableNode;return t.target===n}));if(i<0&&o.tabbableGroups[n].container===t.target&&(i=n),i>=0){var r=0===i?o.tabbableGroups.length-1:i-1;e=o.tabbableGroups[r].lastTabbableNode}}else{var a=jw(o.tabbableGroups,(function(e){var n=e.lastTabbableNode;return t.target===n}));if(a<0&&o.tabbableGroups[n].container===t.target&&(a=n),a>=0){var s=a===o.tabbableGroups.length-1?0:a+1;e=o.tabbableGroups[s].firstTabbableNode}}}else e=l("fallbackFocus");e&&(t.preventDefault(),h(e))}(t)},m=function(t){zw(r.clickOutsideDeactivates,t)||s(t.target)||zw(r.allowOutsideClick,t)||(t.preventDefault(),t.stopImmediatePropagation())},v=function(){if(o.active)return Nw.activateTrap(n),o.delayInitialFocusTimer=r.delayInitialFocus?Bw((function(){h(u())})):h(u()),i.addEventListener("focusin",p,!0),i.addEventListener("mousedown",f,{capture:!0,passive:!1}),i.addEventListener("touchstart",f,{capture:!0,passive:!1}),i.addEventListener("click",m,{capture:!0,passive:!1}),i.addEventListener("keydown",g,{capture:!0,passive:!1}),n},y=function(){if(o.active)return i.removeEventListener("focusin",p,!0),i.removeEventListener("mousedown",f,!0),i.removeEventListener("touchstart",f,!0),i.removeEventListener("click",m,!0),i.removeEventListener("keydown",g,!0),n};return(n={activate:function(t){if(o.active)return this;var e=a(t,"onActivate"),n=a(t,"onPostActivate"),r=a(t,"checkCanFocusTrap");r||c(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=i.activeElement,e&&e();var s=function(){r&&c(),v(),n&&n()};return r?(r(o.containers.concat()).then(s,s),this):(s(),this)},deactivate:function(t){if(!o.active)return this;clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,y(),o.active=!1,o.paused=!1,Nw.deactivateTrap(n);var e=a(t,"onDeactivate"),i=a(t,"onPostDeactivate"),r=a(t,"checkCanReturnFocus");e&&e();var s=a(t,"returnFocus","returnFocusOnDeactivate"),l=function(){Bw((function(){s&&h(d(o.nodeFocusedBeforeActivation)),i&&i()}))};return s&&r?(r(d(o.nodeFocusedBeforeActivation)).then(l,l),this):(l(),this)},pause:function(){return o.paused||!o.active||(o.paused=!0,y()),this},unpause:function(){return o.paused&&o.active?(o.paused=!1,c(),v(),this):this},updateContainerElements:function(t){var e=[].concat(t).filter(Boolean);return o.containers=e.map((function(t){return"string"==typeof t?i.querySelector(t):t})),o.active&&c(),this}}).updateContainerElements(t),n};function Vw(t){let e=[];return Ww(t,(t=>{let n=t.hasAttribute("aria-hidden");t.setAttribute("aria-hidden","true"),e.push((()=>n||t.removeAttribute("aria-hidden")))})),()=>{for(;e.length;)e.pop()()}}function Ww(t,e){!t.isSameNode(document.body)&&t.parentNode&&Array.from(t.parentNode.children).forEach((n=>{n.isSameNode(t)||e(n),Ww(t.parentNode,e)}))}var Uw,Gw,qw=function(t){let e,n;window.addEventListener("focusin",(()=>{e=n,n=document.activeElement})),t.magic("focus",(t=>{let i=t;return{__noscroll:!1,__wrapAround:!1,within(t){return i=t,this},withoutScrolling(){return this.__noscroll=!0,this},noscroll(){return this.__noscroll=!0,this},withWrapAround(){return this.__wrapAround=!0,this},wrap(){return this.withWrapAround()},focusable:t=>Lw(t),previouslyFocused:()=>e,lastFocused:()=>e,focused:()=>n,focusables:()=>Array.isArray(i)?i:function(t,e){return Aw(t,(e=e||{}).includeContainer,Tw.bind(null,e))}(i,{displayCheck:"none"}),all(){return this.focusables()},isFirst(t){let e=this.all();return e[0]&&e[0].isSameNode(t)},isLast(t){let e=this.all();return e.length&&e.slice(-1)[0].isSameNode(t)},getFirst(){return this.all()[0]},getLast(){return this.all().slice(-1)[0]},getNext(){let t=this.all(),e=document.activeElement;if(-1!==t.indexOf(e))return this.__wrapAround&&t.indexOf(e)===t.length-1?t[0]:t[t.indexOf(e)+1]},getPrevious(){let t=this.all(),e=document.activeElement;if(-1!==t.indexOf(e))return this.__wrapAround&&0===t.indexOf(e)?t.slice(-1)[0]:t[t.indexOf(e)-1]},first(){this.focus(this.getFirst())},last(){this.focus(this.getLast())},next(){this.focus(this.getNext())},previous(){this.focus(this.getPrevious())},prev(){return this.previous()},focus(t){t&&setTimeout((()=>{t.hasAttribute("tabindex")||t.setAttribute("tabindex","0"),t.focus({preventScroll:this._noscroll})}))}}})),t.directive("trap",t.skipDuringClone(((t,{expression:e,modifiers:n},{effect:i,evaluateLater:r,cleanup:o})=>{let a=r(e),s=!1,l=Hw(t,{escapeDeactivates:!1,allowOutsideClick:!0,fallbackFocus:()=>t}),u=()=>{},c=()=>{};const h=()=>{u(),u=()=>{},c(),c=()=>{},l.deactivate({returnFocus:!n.includes("noreturn")})};i((()=>a((e=>{s!==e&&(e&&!s&&setTimeout((()=>{n.includes("inert")&&(u=Vw(t)),n.includes("noscroll")&&(c=function(){let t=document.documentElement.style.overflow,e=document.documentElement.style.paddingRight,n=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${n}px`,()=>{document.documentElement.style.overflow=t,document.documentElement.style.paddingRight=e}}()),l.activate()})),!e&&s&&h(),s=!!e)})))),o(h)}),((t,{expression:e,modifiers:n},{evaluate:i})=>{n.includes("inert")&&i(e)&&Vw(t)})))},$w=Object.create,Yw=Object.defineProperty,Xw=Object.getPrototypeOf,Kw=Object.prototype.hasOwnProperty,Zw=Object.getOwnPropertyNames,Jw=Object.getOwnPropertyDescriptor,Qw=((t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports))(((t,e)=>{!function(t,n,i){if(t){for(var r,o={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},a={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},l={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u=1;u<20;++u)o[111+u]="f"+u;for(u=0;u<=9;++u)o[u+96]=u.toString();m.prototype.bind=function(t,e,n){var i=this;return t=t instanceof Array?t:[t],i._bindMultiple.call(i,t,e,n),i},m.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},m.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},m.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},m.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(g(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var n=t.composedPath()[0];n!==t.target&&(e=n)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},m.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},m.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e]);r=null},m.init=function(){var t=m(n);for(var e in t)"_"!==e.charAt(0)&&(m[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},m.init(),t.Mousetrap=m,void 0!==e&&e.exports&&(e.exports=m),"function"==typeof define&&define.amd&&define((function(){return m}))}function c(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function h(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return o[t.which]?o[t.which]:a[t.which]?a[t.which]:String.fromCharCode(t.which).toLowerCase()}function d(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function f(t,e,n){return n||(n=function(){if(!r)for(var t in r={},o)t>95&&t<112||o.hasOwnProperty(t)&&(r[o[t]]=t);return r}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function p(t,e){var n,i,r,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),r=0;r<n.length;++r)i=n[r],l[i]&&(i=l[i]),e&&"keypress"!=e&&s[i]&&(i=s[i],o.push("shift")),d(i)&&o.push(i);return{key:i,modifiers:o,action:e=f(i,o,e)}}function g(t,e){return null!==t&&t!==n&&(t===e||g(t.parentNode,e))}function m(t){var e=this;if(t=t||n,!(e instanceof m))return new m(t);e.target=t,e._callbacks={},e._directMap={};var i,r={},o=!1,a=!1,s=!1;function l(t){t=t||{};var e,n=!1;for(e in r)t[e]?n=!0:r[e]=0;n||(s=!1)}function u(t,n,i,o,a,s){var l,u,c,h,f=[],p=i.type;if(!e._callbacks[t])return[];for("keyup"==p&&d(t)&&(n=[t]),l=0;l<e._callbacks[t].length;++l)if(u=e._callbacks[t][l],(o||!u.seq||r[u.seq]==u.level)&&p==u.action&&("keypress"==p&&!i.metaKey&&!i.ctrlKey||(c=n,h=u.modifiers,c.sort().join(",")===h.sort().join(",")))){var g=!o&&u.combo==a,m=o&&u.seq==o&&u.level==s;(g||m)&&e._callbacks[t].splice(l,1),f.push(u)}return f}function f(t,n,i,r){e.stopCallback(n,n.target||n.srcElement,i,r)||!1===t(n,i)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function g(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=h(t);n&&("keyup"!=t.type||o!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):o=!1)}function v(t,e,n,a){function u(e){return function(){s=e,++r[t],clearTimeout(i),i=setTimeout(l,1e3)}}function c(e){f(n,e,t),"keyup"!==a&&(o=h(e)),setTimeout(l,10)}r[t]=0;for(var d=0;d<e.length;++d){var g=d+1===e.length?c:u(a||p(e[d+1]).action);y(e[d],g,a,t,d)}}function y(t,n,i,r,o){e._directMap[t+":"+i]=n;var a,s=(t=t.replace(/\s+/g," ")).split(" ");s.length>1?v(t,s,n,i):(a=p(t,i),e._callbacks[a.key]=e._callbacks[a.key]||[],u(a.key,a.modifiers,{type:a.action},r,t,o),e._callbacks[a.key][r?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:r,level:o,combo:t}))}e._handleKey=function(t,e,n){var i,r=u(t,e,n),o={},c=0,h=!1;for(i=0;i<r.length;++i)r[i].seq&&(c=Math.max(c,r[i].level));for(i=0;i<r.length;++i)if(r[i].seq){if(r[i].level!=c)continue;h=!0,o[r[i].seq]=1,f(r[i].callback,n,r[i].combo,r[i].seq)}else h||f(r[i].callback,n,r[i].combo);var p="keypress"==n.type&&a;n.type!=s||d(t)||p||l(o),a=h&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var i=0;i<t.length;++i)y(t[i],e,n)},c(t,"keypress",g),c(t,"keydown",g),c(t,"keyup",g)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)})),tA=(Uw=Qw(),((t,e,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of Zw(e))Kw.call(t,i)||"default"===i||Yw(t,i,{get:()=>e[i],enumerable:!(n=Jw(e,i))||n.enumerable});return t})((Gw=Yw(null!=Uw?$w(Xw(Uw)):{},"default",Uw&&Uw.__esModule&&"default"in Uw?{get:()=>Uw.default,enumerable:!0}:{value:Uw,enumerable:!0}),Yw(Gw,"__esModule",{value:!0})),Uw));!function(t){if(t){var e={},n=t.prototype.stopCallback;t.prototype.stopCallback=function(t,i,r,o){return!!this.paused||!e[r]&&!e[o]&&n.call(this,t,i,r)},t.prototype.bindGlobal=function(t,n,i){if(this.bind(t,n,i),t instanceof Array)for(var r=0;r<t.length;r++)e[t[r]]=!0;else e[t]=!0},t.init()}}("undefined"!=typeof Mousetrap?Mousetrap:void 0);var eA=t=>{t.directive("mousetrap",((t,{modifiers:e,expression:n},{evaluate:i})=>{const r=()=>n?i(n):t.click();e.includes("global")&&(e=e.filter((t=>"global"!==t)),tA.default.bindGlobal(e,(t=>{t.preventDefault(),r()}))),tA.default.bind(e,(t=>{t.preventDefault(),r()}))}))};var nA=function(t){let e=()=>{let e,n=localStorage;return t.interceptor(((i,r,o,a,s)=>{let l=e||`_x_${a}`,u=function(t,e){return null!==e.getItem(t)}(l,n)?function(t,e){return JSON.parse(e.getItem(t,e))}(l,n):i;return o(u),t.effect((()=>{let t=r();!function(t,e,n){n.setItem(t,JSON.stringify(e))}(l,t,n),o(t)})),u}),(t=>{t.as=n=>(e=n,t),t.using=e=>(n=e,t)}))};Object.defineProperty(t,"$persist",{get:()=>e()}),t.magic("persist",e)},iA=Object.create,rA=Object.defineProperty,oA=Object.getPrototypeOf,aA=Object.prototype.hasOwnProperty,sA=Object.getOwnPropertyNames,lA=Object.getOwnPropertyDescriptor,uA=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),cA=t=>((t,e,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of sA(e))aA.call(t,i)||"default"===i||rA(t,i,{get:()=>e[i],enumerable:!(n=lA(e,i))||n.enumerable});return t})((t=>rA(t,"__esModule",{value:!0}))(rA(null!=t?iA(oA(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),hA=uA((t=>{function e(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function n(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function i(t){var e=n(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function r(t){return t instanceof n(t).Element||t instanceof Element}function o(t){return t instanceof n(t).HTMLElement||t instanceof HTMLElement}function a(t){return"undefined"!=typeof ShadowRoot&&(t instanceof n(t).ShadowRoot||t instanceof ShadowRoot)}function s(t){return t?(t.nodeName||"").toLowerCase():null}function l(t){return((r(t)?t.ownerDocument:t.document)||window.document).documentElement}function u(t){return e(l(t)).left+i(t).scrollLeft}function c(t){return n(t).getComputedStyle(t)}function h(t){var e=c(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function d(t,r,a){void 0===a&&(a=!1);var c,d,f=l(r),p=e(t),g=o(r),m={scrollLeft:0,scrollTop:0},v={x:0,y:0};return(g||!g&&!a)&&(("body"!==s(r)||h(f))&&(m=(c=r)!==n(c)&&o(c)?{scrollLeft:(d=c).scrollLeft,scrollTop:d.scrollTop}:i(c)),o(r)?((v=e(r)).x+=r.clientLeft,v.y+=r.clientTop):f&&(v.x=u(f))),{x:p.left+m.scrollLeft-v.x,y:p.top+m.scrollTop-v.y,width:p.width,height:p.height}}function f(t){var n=e(t),i=t.offsetWidth,r=t.offsetHeight;return Math.abs(n.width-i)<=1&&(i=n.width),Math.abs(n.height-r)<=1&&(r=n.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:r}}function p(t){return"html"===s(t)?t:t.assignedSlot||t.parentNode||(a(t)?t.host:null)||l(t)}function g(t){return["html","body","#document"].indexOf(s(t))>=0?t.ownerDocument.body:o(t)&&h(t)?t:g(p(t))}function m(t,e){var i;void 0===e&&(e=[]);var r=g(t),o=r===(null==(i=t.ownerDocument)?void 0:i.body),a=n(r),s=o?[a].concat(a.visualViewport||[],h(r)?r:[]):r,l=e.concat(s);return o?l:l.concat(m(p(s)))}function v(t){return["table","td","th"].indexOf(s(t))>=0}function y(t){return o(t)&&"fixed"!==c(t).position?t.offsetParent:null}function b(t){for(var e=n(t),i=y(t);i&&v(i)&&"static"===c(i).position;)i=y(i);return i&&("html"===s(i)||"body"===s(i)&&"static"===c(i).position)?e:i||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&o(t)&&"fixed"===c(t).position)return null;for(var n=p(t);o(n)&&["html","body"].indexOf(s(n))<0;){var i=c(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}Object.defineProperty(t,"__esModule",{value:!0});var x="top",_="bottom",E="right",w="left",A="auto",D=[x,_,E,w],C="start",k="end",S="viewport",T="popper",O=D.reduce((function(t,e){return t.concat([e+"-"+C,e+"-"+k])}),[]),I=[].concat(D,[A]).reduce((function(t,e){return t.concat([e,e+"-"+C,e+"-"+k])}),[]),M=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function L(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}function R(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}function P(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return[].concat(n).reduce((function(t,e){return t.replace(/%s/,e)}),t)}var F='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',N=["name","enabled","phase","fn","effect","requires","options"];function B(t){return t.split("-")[0]}var j=Math.max,z=Math.min,H=Math.round;function V(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&a(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function W(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function U(t,r){return r===S?W(function(t){var e=n(t),i=l(t),r=e.visualViewport,o=i.clientWidth,a=i.clientHeight,s=0,c=0;return r&&(o=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,c=r.offsetTop)),{width:o,height:a,x:s+u(t),y:c}}(t)):o(r)?function(t){var n=e(t);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(r):W(function(t){var e,n=l(t),r=i(t),o=null==(e=t.ownerDocument)?void 0:e.body,a=j(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=j(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),h=-r.scrollLeft+u(t),d=-r.scrollTop;return"rtl"===c(o||n).direction&&(h+=j(n.clientWidth,o?o.clientWidth:0)-a),{width:a,height:s,x:h,y:d}}(l(t)))}function G(t,e,n){var i="clippingParents"===e?function(t){var e=m(p(t)),n=["absolute","fixed"].indexOf(c(t).position)>=0&&o(t)?b(t):t;return r(n)?e.filter((function(t){return r(t)&&V(t,n)&&"body"!==s(t)})):[]}(t):[].concat(e),a=[].concat(i,[n]),l=a[0],u=a.reduce((function(e,n){var i=U(t,n);return e.top=j(i.top,e.top),e.right=z(i.right,e.right),e.bottom=z(i.bottom,e.bottom),e.left=j(i.left,e.left),e}),U(t,l));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function q(t){return t.split("-")[1]}function $(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Y(t){var e,n=t.reference,i=t.element,r=t.placement,o=r?B(r):null,a=r?q(r):null,s=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(o){case x:e={x:s,y:n.y-i.height};break;case _:e={x:s,y:n.y+n.height};break;case E:e={x:n.x+n.width,y:l};break;case w:e={x:n.x-i.width,y:l};break;default:e={x:n.x,y:n.y}}var u=o?$(o):null;if(null!=u){var c="y"===u?"height":"width";switch(a){case C:e[u]=e[u]-(n[c]/2-i[c]/2);break;case k:e[u]=e[u]+(n[c]/2-i[c]/2)}}return e}function X(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function K(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function Z(t,n){void 0===n&&(n={});var i=n,o=i.placement,a=void 0===o?t.placement:o,s=i.boundary,u=void 0===s?"clippingParents":s,c=i.rootBoundary,h=void 0===c?S:c,d=i.elementContext,f=void 0===d?T:d,p=i.altBoundary,g=void 0!==p&&p,m=i.padding,v=void 0===m?0:m,y=X("number"!=typeof v?v:K(v,D)),b=f===T?"reference":T,w=t.elements.reference,A=t.rects.popper,C=t.elements[g?b:f],k=G(r(C)?C:C.contextElement||l(t.elements.popper),u,h),O=e(w),I=Y({reference:O,element:A,strategy:"absolute",placement:a}),M=W(Object.assign({},A,I)),L=f===T?M:O,R={top:k.top-L.top+y.top,bottom:L.bottom-k.bottom+y.bottom,left:k.left-L.left+y.left,right:L.right-k.right+y.right},P=t.modifiersData.offset;if(f===T&&P){var F=P[a];Object.keys(R).forEach((function(t){var e=[E,_].indexOf(t)>=0?1:-1,n=[x,_].indexOf(t)>=0?"y":"x";R[t]+=F[n]*e}))}return R}var J="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",Q={placement:"bottom",modifiers:[],strategy:"absolute"};function tt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function et(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,o=e.defaultOptions,a=void 0===o?Q:o;return function(t,e,n){void 0===n&&(n=a);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},Q,a),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},s=[],l=!1,u={state:o,setOptions:function(n){h(),o.options=Object.assign({},a,o.options,n),o.scrollParents={reference:r(t)?m(t):t.contextElement?m(t.contextElement):[],popper:m(e)};var l=function(t){var e=L(t);return M.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(i,o.options.modifiers)));o.orderedModifiers=l.filter((function(t){return t.enabled}));var d=function(t,e){var n=new Set;return t.filter((function(t){var i=e(t);if(!n.has(i))return n.add(i),!0}))}([].concat(l,o.options.modifiers),(function(t){return t.name}));(function(t){t.forEach((function(e){Object.keys(e).forEach((function(n){switch(n){case"name":"string"!=typeof e.name&&console.error(P(F,String(e.name),'"name"','"string"','"'+String(e.name)+'"'));break;case"enabled":"boolean"!=typeof e.enabled&&console.error(P(F,e.name,'"enabled"','"boolean"','"'+String(e.enabled)+'"'));case"phase":M.indexOf(e.phase)<0&&console.error(P(F,e.name,'"phase"',"either "+M.join(", "),'"'+String(e.phase)+'"'));break;case"fn":"function"!=typeof e.fn&&console.error(P(F,e.name,'"fn"','"function"','"'+String(e.fn)+'"'));break;case"effect":"function"!=typeof e.effect&&console.error(P(F,e.name,'"effect"','"function"','"'+String(e.fn)+'"'));break;case"requires":Array.isArray(e.requires)||console.error(P(F,e.name,'"requires"','"array"','"'+String(e.requires)+'"'));break;case"requiresIfExists":Array.isArray(e.requiresIfExists)||console.error(P(F,e.name,'"requiresIfExists"','"array"','"'+String(e.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+e.name+'" modifier, valid properties are '+N.map((function(t){return'"'+t+'"'})).join(", ")+'; but "'+n+'" was provided.')}e.requires&&e.requires.forEach((function(n){null==t.find((function(t){return t.name===n}))&&console.error(P('Popper: modifier "%s" requires "%s", but "%s" modifier is not available',String(e.name),n,n))}))}))}))})(d),B(o.options.placement)===A&&(o.orderedModifiers.find((function(t){return"flip"===t.name}))||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" ")));var f=c(e);return[f.marginTop,f.marginRight,f.marginBottom,f.marginLeft].some((function(t){return parseFloat(t)}))&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" ")),o.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var a=r({state:o,name:e,instance:u,options:i}),l=function(){};s.push(a||l)}})),u.update()},forceUpdate:function(){if(!l){var t=o.elements,e=t.reference,n=t.popper;if(tt(e,n)){o.rects={reference:d(e,b(n),"fixed"===o.options.strategy),popper:f(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach((function(t){return o.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0,r=0;r<o.orderedModifiers.length;r++){if((i+=1)>100){console.error("Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.");break}if(!0!==o.reset){var a=o.orderedModifiers[r],s=a.fn,c=a.options,h=void 0===c?{}:c,p=a.name;"function"==typeof s&&(o=s({state:o,options:h,name:p,instance:u})||o)}else o.reset=!1,r=-1}}else console.error(J)}},update:R((function(){return new Promise((function(t){u.forceUpdate(),t(o)}))})),destroy:function(){h(),l=!0}};if(!tt(t,e))return console.error(J),u;function h(){s.forEach((function(t){return t()})),s=[]}return u.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var nt={passive:!0};var it={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,i=t.instance,r=t.options,o=r.scroll,a=void 0===o||o,s=r.resize,l=void 0===s||s,u=n(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&c.forEach((function(t){t.addEventListener("scroll",i.update,nt)})),l&&u.addEventListener("resize",i.update,nt),function(){a&&c.forEach((function(t){t.removeEventListener("scroll",i.update,nt)})),l&&u.removeEventListener("resize",i.update,nt)}},data:{}};var rt={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Y({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},ot={top:"auto",right:"auto",bottom:"auto",left:"auto"};function at(t){var e,i=t.popper,r=t.popperRect,o=t.placement,a=t.offsets,s=t.position,u=t.gpuAcceleration,h=t.adaptive,d=t.roundOffsets,f=!0===d?function(t){var e=t.x,n=t.y,i=window.devicePixelRatio||1;return{x:H(H(e*i)/i)||0,y:H(H(n*i)/i)||0}}(a):"function"==typeof d?d(a):a,p=f.x,g=void 0===p?0:p,m=f.y,v=void 0===m?0:m,y=a.hasOwnProperty("x"),A=a.hasOwnProperty("y"),D=w,C=x,k=window;if(h){var S=b(i),T="clientHeight",O="clientWidth";S===n(i)&&"static"!==c(S=l(i)).position&&(T="scrollHeight",O="scrollWidth"),o===x&&(C=_,v-=S[T]-r.height,v*=u?1:-1),o===w&&(D=E,g-=S[O]-r.width,g*=u?1:-1)}var I,M=Object.assign({position:s},h&&ot);return u?Object.assign({},M,((I={})[C]=A?"0":"",I[D]=y?"0":"",I.transform=(k.devicePixelRatio||1)<2?"translate("+g+"px, "+v+"px)":"translate3d("+g+"px, "+v+"px, 0)",I)):Object.assign({},M,((e={})[C]=A?v+"px":"",e[D]=y?g+"px":"",e.transform="",e))}var st={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,u=c(e.elements.popper).transitionProperty||"";a&&["transform","top","right","bottom","left"].some((function(t){return u.indexOf(t)>=0}))&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',"\n\n",'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.","\n\n","We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "));var h={placement:B(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,at(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,at(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var lt={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];o(r)&&s(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},a=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});o(i)&&s(i)&&(Object.assign(i.style,a),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};var ut={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=void 0===r?[0,0]:r,a=I.reduce((function(t,n){return t[n]=function(t,e,n){var i=B(t),r=[w,x].indexOf(i)>=0?-1:1,o="function"==typeof n?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*r,[w,E].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,o),t}),{}),s=a[e.placement],l=s.x,u=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=a}},ct={left:"right",right:"left",bottom:"top",top:"bottom"};function ht(t){return t.replace(/left|right|bottom|top/g,(function(t){return ct[t]}))}var dt={start:"end",end:"start"};function ft(t){return t.replace(/start|end/g,(function(t){return dt[t]}))}var pt={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,g=n.allowedAutoPlacements,m=e.options.placement,v=B(m),y=l||(v===m||!p?[ht(m)]:function(t){if(B(t)===A)return[];var e=ht(t);return[ft(t),e,ft(e)]}(m)),b=[m].concat(y).reduce((function(t,n){return t.concat(B(n)===A?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=void 0===l?I:l,c=q(i),h=c?s?O:O.filter((function(t){return q(t)===c})):D,d=h.filter((function(t){return u.indexOf(t)>=0}));0===d.length&&(d=h,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var f=d.reduce((function(e,n){return e[n]=Z(t,{placement:n,boundary:r,rootBoundary:o,padding:a})[B(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:n,boundary:c,rootBoundary:h,padding:u,flipVariations:p,allowedAutoPlacements:g}):n)}),[]),k=e.rects.reference,S=e.rects.popper,T=new Map,M=!0,L=b[0],R=0;R<b.length;R++){var P=b[R],F=B(P),N=q(P)===C,j=[x,_].indexOf(F)>=0,z=j?"width":"height",H=Z(e,{placement:P,boundary:c,rootBoundary:h,altBoundary:d,padding:u}),V=j?N?E:w:N?_:x;k[z]>S[z]&&(V=ht(V));var W=ht(V),U=[];if(o&&U.push(H[F]<=0),s&&U.push(H[V]<=0,H[W]<=0),U.every((function(t){return t}))){L=P,M=!1;break}T.set(P,U)}if(M)for(var G=function(t){var e=b.find((function(e){var n=T.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return L=e,"break"},$=p?3:1;$>0;$--){if("break"===G($))break}e.placement!==L&&(e.modifiersData[i]._skip=!0,e.placement=L,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function gt(t,e,n){return j(t,z(e,n))}var mt={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,g=n.tetherOffset,m=void 0===g?0:g,v=Z(e,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),y=B(e.placement),A=q(e.placement),D=!A,k=$(y),S="x"===k?"y":"x",T=e.modifiersData.popperOffsets,O=e.rects.reference,I=e.rects.popper,M="function"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,L={x:0,y:0};if(T){if(o||s){var R="y"===k?x:w,P="y"===k?_:E,F="y"===k?"height":"width",N=T[k],H=T[k]+v[R],V=T[k]-v[P],W=p?-I[F]/2:0,U=A===C?O[F]:I[F],G=A===C?-I[F]:-O[F],Y=e.elements.arrow,X=p&&Y?f(Y):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},J=K[R],Q=K[P],tt=gt(0,O[F],X[F]),et=D?O[F]/2-W-tt-J-M:U-tt-J-M,nt=D?-O[F]/2+W+tt+Q+M:G+tt+Q+M,it=e.elements.arrow&&b(e.elements.arrow),rt=it?"y"===k?it.clientTop||0:it.clientLeft||0:0,ot=e.modifiersData.offset?e.modifiersData.offset[e.placement][k]:0,at=T[k]+et-ot-rt,st=T[k]+nt-ot;if(o){var lt=gt(p?z(H,at):H,N,p?j(V,st):V);T[k]=lt,L[k]=lt-N}if(s){var ut="x"===k?x:w,ct="x"===k?_:E,ht=T[S],dt=ht+v[ut],ft=ht-v[ct],pt=gt(p?z(dt,at):dt,ht,p?j(ft,st):ft);T[S]=pt,L[S]=pt-ht}}e.modifiersData[i]=L}},requiresIfExists:["offset"]};var vt={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=B(n.placement),l=$(s),u=[w,E].indexOf(s)>=0?"height":"width";if(o&&a){var c=function(t,e){return X("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:K(t,D))}(r.padding,n),h=f(o),d="y"===l?x:w,p="y"===l?_:E,g=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],m=a[l]-n.rects.reference[l],v=b(o),y=v?"y"===l?v.clientHeight||0:v.clientWidth||0:0,A=g/2-m/2,C=c[d],k=y-h[u]-c[p],S=y/2-h[u]/2+A,T=gt(C,S,k),O=l;n.modifiersData[i]=((e={})[O]=T,e.centerOffset=T-S,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&(o(i)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),V(e.elements.popper,i)?e.elements.arrow=i:console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" ")))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function yt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function bt(t){return[x,E,_,w].some((function(e){return t[e]>=0}))}var xt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,a=Z(e,{elementContext:"reference"}),s=Z(e,{altBoundary:!0}),l=yt(a,i),u=yt(s,r,o),c=bt(l),h=bt(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}},_t=et({defaultModifiers:[it,rt,st,lt]}),Et=[it,rt,st,lt,ut,pt,mt,vt,xt],wt=et({defaultModifiers:Et});t.applyStyles=lt,t.arrow=vt,t.computeStyles=st,t.createPopper=wt,t.createPopperLite=_t,t.defaultModifiers=Et,t.detectOverflow=Z,t.eventListeners=it,t.flip=pt,t.hide=xt,t.offset=ut,t.popperGenerator=et,t.popperOffsets=rt,t.preventOverflow=mt})),dA=uA((t=>{Object.defineProperty(t,"__esModule",{value:!0});var e=hA(),n="tippy-content",i="tippy-backdrop",r="tippy-arrow",o="tippy-svg-arrow",a={passive:!0,capture:!0};function s(t,e,n){if(Array.isArray(t)){var i=t[e];return null==i?Array.isArray(n)?n[e]:n:i}return t}function l(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function u(t,e){return"function"==typeof t?t.apply(void 0,e):t}function c(t,e){return 0===e?t:function(i){clearTimeout(n),n=setTimeout((function(){t(i)}),e)};var n}function h(t,e){var n=Object.assign({},t);return e.forEach((function(t){delete n[t]})),n}function d(t){return[].concat(t)}function f(t,e){-1===t.indexOf(e)&&t.push(e)}function p(t){return t.split("-")[0]}function g(t){return[].slice.call(t)}function m(){return document.createElement("div")}function v(t){return["Element","Fragment"].some((function(e){return l(t,e)}))}function y(t){return l(t,"MouseEvent")}function b(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function x(t){return v(t)?[t]:function(t){return l(t,"NodeList")}(t)?g(t):Array.isArray(t)?t:g(document.querySelectorAll(t))}function _(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function E(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function w(t){var e,n=d(t)[0];return(null==n||null==(e=n.ownerDocument)?void 0:e.body)?n.ownerDocument:document}function A(t,e,n){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[i](e,n)}))}var D={isTouch:!1},C=0;function k(){D.isTouch||(D.isTouch=!0,window.performance&&document.addEventListener("mousemove",S))}function S(){var t=performance.now();t-C<20&&(D.isTouch=!1,document.removeEventListener("mousemove",S)),C=t}function T(){var t=document.activeElement;if(b(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}var O,I="undefined"!=typeof window&&"undefined"!=typeof document?navigator.userAgent:"",M=/MSIE |Trident\//.test(I);function L(t){return[t+"() was called on a"+("destroy"===t?"n already-":" ")+"destroyed instance. This is a no-op but","indicates a potential memory leak."].join(" ")}function R(t){return t.replace(/[ \t]{2,}/g," ").replace(/^[ \t]*/gm,"").trim()}function P(t){return R("\n  %ctippy.js\n\n  %c"+R(t)+"\n\n  %c This is a development-only message. It will be removed in production.\n  ")}function F(t){return[P(t),"color: #00C584; font-size: 1.3em; font-weight: bold;","line-height: 1.5","color: #a6a095;"]}function N(t,e){var n;t&&!O.has(e)&&(O.add(e),(n=console).warn.apply(n,F(e)))}function B(t,e){var n;t&&!O.has(e)&&(O.add(e),(n=console).error.apply(n,F(e)))}O=new Set;var j={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},z=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},j,{},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),H=Object.keys(z);function V(t){var e=(t.plugins||[]).reduce((function(e,n){var i=n.name,r=n.defaultValue;return i&&(e[i]=void 0!==t[i]?t[i]:r),e}),{});return Object.assign({},t,{},e)}function W(t,e){var n=Object.assign({},e,{content:u(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(V(Object.assign({},z,{plugins:e}))):H).reduce((function(e,n){var i=(t.getAttribute("data-tippy-"+n)||"").trim();if(!i)return e;if("content"===n)e[n]=i;else try{e[n]=JSON.parse(i)}catch(t){e[n]=i}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},z.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}function U(t,e){void 0===t&&(t={}),void 0===e&&(e=[]),Object.keys(t).forEach((function(t){var n,i,r=h(z,Object.keys(j)),o=(n=r,i=t,!{}.hasOwnProperty.call(n,i));o&&(o=0===e.filter((function(e){return e.name===t})).length),N(o,["`"+t+"`","is not a valid prop. You may have spelled it incorrectly, or if it's","a plugin, forgot to pass it in an array as props.plugins.","\n\n","All props: https://atomiks.github.io/tippyjs/v6/all-props/\n","Plugins: https://atomiks.github.io/tippyjs/v6/plugins/"].join(" "))}))}function G(t,e){t.innerHTML=e}function q(t){var e=m();return!0===t?e.className=r:(e.className=o,v(t)?e.appendChild(t):G(e,t)),e}function $(t,e){v(e.content)?(G(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?G(t,e.content):t.textContent=e.content)}function Y(t){var e=t.firstElementChild,a=g(e.children);return{box:e,content:a.find((function(t){return t.classList.contains(n)})),arrow:a.find((function(t){return t.classList.contains(r)||t.classList.contains(o)})),backdrop:a.find((function(t){return t.classList.contains(i)}))}}function X(t){var e=m(),i=m();i.className="tippy-box",i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var r=m();function o(n,i){var r=Y(e),o=r.box,a=r.content,s=r.arrow;i.theme?o.setAttribute("data-theme",i.theme):o.removeAttribute("data-theme"),"string"==typeof i.animation?o.setAttribute("data-animation",i.animation):o.removeAttribute("data-animation"),i.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof i.maxWidth?i.maxWidth+"px":i.maxWidth,i.role?o.setAttribute("role",i.role):o.removeAttribute("role"),n.content===i.content&&n.allowHTML===i.allowHTML||$(a,t.props),i.arrow?s?n.arrow!==i.arrow&&(o.removeChild(s),o.appendChild(q(i.arrow))):o.appendChild(q(i.arrow)):s&&o.removeChild(s)}return r.className=n,r.setAttribute("data-state","hidden"),$(r,t.props),e.appendChild(i),i.appendChild(r),o(t.props,t.props),{popper:e,onUpdate:o}}X.$$tippy=!0;var K=1,Z=[],J=[];function Q(t,n){var i,r,o,l,h,v,b,x,C,k=W(t,Object.assign({},z,{},V((i=n,Object.keys(i).reduce((function(t,e){return void 0!==i[e]&&(t[e]=i[e]),t}),{}))))),S=!1,T=!1,O=!1,I=!1,R=[],P=c(_t,k.interactiveDebounce),F=K++,j=(C=k.plugins).filter((function(t,e){return C.indexOf(t)===e})),H={id:F,reference:t,popper:m(),popperInstance:null,props:k,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:j,clearDelayTimeouts:function(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(l)},setProps:function(e){N(H.state.isDestroyed,L("setProps"));if(H.state.isDestroyed)return;st("onBeforeUpdate",[H,e]),bt();var n=H.props,i=W(t,Object.assign({},H.props,{},e,{ignoreAttributes:!0}));H.props=i,yt(),n.interactiveDebounce!==i.interactiveDebounce&&(ct(),P=c(_t,i.interactiveDebounce));n.triggerTarget&&!i.triggerTarget?d(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):i.triggerTarget&&t.removeAttribute("aria-expanded");ut(),at(),q&&q(n,i);H.popperInstance&&(Dt(),kt().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)})));st("onAfterUpdate",[H,e])},setContent:function(t){H.setProps({content:t})},show:function(){N(H.state.isDestroyed,L("show"));var t=H.state.isVisible,e=H.state.isDestroyed,n=!H.state.isEnabled,i=D.isTouch&&!H.props.touch,r=s(H.props.duration,0,z.duration);if(t||e||n||i)return;if(nt().hasAttribute("disabled"))return;if(st("onShow",[H],!1),!1===H.props.onShow(H))return;H.state.isVisible=!0,et()&&(G.style.visibility="visible");at(),pt(),H.state.isMounted||(G.style.transition="none");if(et()){var o=rt(),a=o.box,l=o.content;_([a,l],0)}b=function(){var t;if(H.state.isVisible&&!I){if(I=!0,G.offsetHeight,G.style.transition=H.props.moveTransition,et()&&H.props.animation){var e=rt(),n=e.box,i=e.content;_([n,i],r),E([n,i],"visible")}lt(),ut(),f(J,H),null==(t=H.popperInstance)||t.forceUpdate(),H.state.isMounted=!0,st("onMount",[H]),H.props.animation&&et()&&function(t,e){mt(t,e)}(r,(function(){H.state.isShown=!0,st("onShown",[H])}))}},function(){var t,e=H.props.appendTo,n=nt();t=H.props.interactive&&e===z.appendTo||"parent"===e?n.parentNode:u(e,[n]);t.contains(G)||t.appendChild(G);Dt(),N(H.props.interactive&&e===z.appendTo&&n.nextElementSibling!==G,["Interactive tippy element may not be accessible via keyboard","navigation because it is not directly after the reference element","in the DOM source order.","\n\n","Using a wrapper <div> or <span> tag around the reference element","solves this by creating a new parentNode context.","\n\n","Specifying `appendTo: document.body` silences this warning, but it","assumes you are using a focus management solution to handle","keyboard navigation.","\n\n","See: https://atomiks.github.io/tippyjs/v6/accessibility/#interactivity"].join(" "))}()},hide:function(){N(H.state.isDestroyed,L("hide"));var t=!H.state.isVisible,e=H.state.isDestroyed,n=!H.state.isEnabled,i=s(H.props.duration,1,z.duration);if(t||e||n)return;if(st("onHide",[H],!1),!1===H.props.onHide(H))return;H.state.isVisible=!1,H.state.isShown=!1,I=!1,S=!1,et()&&(G.style.visibility="hidden");if(ct(),gt(),at(),et()){var r=rt(),o=r.box,a=r.content;H.props.animation&&(_([o,a],i),E([o,a],"hidden"))}lt(),ut(),H.props.animation?et()&&function(t,e){mt(t,(function(){!H.state.isVisible&&G.parentNode&&G.parentNode.contains(G)&&e()}))}(i,H.unmount):H.unmount()},hideWithInteractivity:function(t){N(H.state.isDestroyed,L("hideWithInteractivity"));it().addEventListener("mousemove",P),f(Z,P),P(t)},enable:function(){H.state.isEnabled=!0},disable:function(){H.hide(),H.state.isEnabled=!1},unmount:function(){N(H.state.isDestroyed,L("unmount"));H.state.isVisible&&H.hide();if(!H.state.isMounted)return;Ct(),kt().forEach((function(t){t._tippy.unmount()})),G.parentNode&&G.parentNode.removeChild(G);J=J.filter((function(t){return t!==H})),H.state.isMounted=!1,st("onHidden",[H])},destroy:function(){N(H.state.isDestroyed,L("destroy"));if(H.state.isDestroyed)return;H.clearDelayTimeouts(),H.unmount(),bt(),delete t._tippy,H.state.isDestroyed=!0,st("onDestroy",[H])}};if(!k.render)return B(!0,"render() function has not been supplied."),H;var U=k.render(H),G=U.popper,q=U.onUpdate;G.setAttribute("data-tippy-root",""),G.id="tippy-"+H.id,H.popper=G,t._tippy=H,G._tippy=H;var $=j.map((function(t){return t.fn(H)})),X=t.hasAttribute("aria-expanded");return yt(),ut(),at(),st("onCreate",[H]),k.showOnCreate&&St(),G.addEventListener("mouseenter",(function(){H.props.interactive&&H.state.isVisible&&H.clearDelayTimeouts()})),G.addEventListener("mouseleave",(function(t){H.props.interactive&&H.props.trigger.indexOf("mouseenter")>=0&&(it().addEventListener("mousemove",P),P(t))})),H;function Q(){var t=H.props.touch;return Array.isArray(t)?t:[t,0]}function tt(){return"hold"===Q()[0]}function et(){var t;return!!(null==(t=H.props.render)?void 0:t.$$tippy)}function nt(){return x||t}function it(){var t=nt().parentNode;return t?w(t):document}function rt(){return Y(G)}function ot(t){return H.state.isMounted&&!H.state.isVisible||D.isTouch||h&&"focus"===h.type?0:s(H.props.delay,t?0:1,z.delay)}function at(){G.style.pointerEvents=H.props.interactive&&H.state.isVisible?"":"none",G.style.zIndex=""+H.props.zIndex}function st(t,e,n){var i;(void 0===n&&(n=!0),$.forEach((function(n){n[t]&&n[t].apply(void 0,e)})),n)&&(i=H.props)[t].apply(i,e)}function lt(){var e=H.props.aria;if(e.content){var n="aria-"+e.content,i=G.id;d(H.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(n);if(H.state.isVisible)t.setAttribute(n,e?e+" "+i:i);else{var r=e&&e.replace(i,"").trim();r?t.setAttribute(n,r):t.removeAttribute(n)}}))}}function ut(){!X&&H.props.aria.expanded&&d(H.props.triggerTarget||t).forEach((function(t){H.props.interactive?t.setAttribute("aria-expanded",H.state.isVisible&&t===nt()?"true":"false"):t.removeAttribute("aria-expanded")}))}function ct(){it().removeEventListener("mousemove",P),Z=Z.filter((function(t){return t!==P}))}function ht(t){if(!(D.isTouch&&(O||"mousedown"===t.type)||H.props.interactive&&G.contains(t.target))){if(nt().contains(t.target)){if(D.isTouch)return;if(H.state.isVisible&&H.props.trigger.indexOf("click")>=0)return}else st("onClickOutside",[H,t]);!0===H.props.hideOnClick&&(H.clearDelayTimeouts(),H.hide(),T=!0,setTimeout((function(){T=!1})),H.state.isMounted||gt())}}function dt(){O=!0}function ft(){O=!1}function pt(){var t=it();t.addEventListener("mousedown",ht,!0),t.addEventListener("touchend",ht,a),t.addEventListener("touchstart",ft,a),t.addEventListener("touchmove",dt,a)}function gt(){var t=it();t.removeEventListener("mousedown",ht,!0),t.removeEventListener("touchend",ht,a),t.removeEventListener("touchstart",ft,a),t.removeEventListener("touchmove",dt,a)}function mt(t,e){var n=rt().box;function i(t){t.target===n&&(A(n,"remove",i),e())}if(0===t)return e();A(n,"remove",v),A(n,"add",i),v=i}function vt(e,n,i){void 0===i&&(i=!1),d(H.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,n,i),R.push({node:t,eventType:e,handler:n,options:i})}))}function yt(){var t;tt()&&(vt("touchstart",xt,{passive:!0}),vt("touchend",Et,{passive:!0})),(t=H.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(vt(t,xt),t){case"mouseenter":vt("mouseleave",Et);break;case"focus":vt(M?"focusout":"blur",wt);break;case"focusin":vt("focusout",wt)}}))}function bt(){R.forEach((function(t){var e=t.node,n=t.eventType,i=t.handler,r=t.options;e.removeEventListener(n,i,r)})),R=[]}function xt(t){var e,n=!1;if(H.state.isEnabled&&!At(t)&&!T){var i="focus"===(null==(e=h)?void 0:e.type);h=t,x=t.currentTarget,ut(),!H.state.isVisible&&y(t)&&Z.forEach((function(e){return e(t)})),"click"===t.type&&(H.props.trigger.indexOf("mouseenter")<0||S)&&!1!==H.props.hideOnClick&&H.state.isVisible?n=!0:St(t),"click"===t.type&&(S=!n),n&&!i&&Tt(t)}}function _t(t){var e=t.target,n=nt().contains(e)||G.contains(e);"mousemove"===t.type&&n||function(t,e){var n=e.clientX,i=e.clientY;return t.every((function(t){var e=t.popperRect,r=t.popperState,o=t.props.interactiveBorder,a=p(r.placement),s=r.modifiersData.offset;if(!s)return!0;var l="bottom"===a?s.top.y:0,u="top"===a?s.bottom.y:0,c="right"===a?s.left.x:0,h="left"===a?s.right.x:0,d=e.top-i+l>o,f=i-e.bottom-u>o,g=e.left-n+c>o,m=n-e.right-h>o;return d||f||g||m}))}(kt().concat(G).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:k}:null})).filter(Boolean),t)&&(ct(),Tt(t))}function Et(t){At(t)||H.props.trigger.indexOf("click")>=0&&S||(H.props.interactive?H.hideWithInteractivity(t):Tt(t))}function wt(t){H.props.trigger.indexOf("focusin")<0&&t.target!==nt()||H.props.interactive&&t.relatedTarget&&G.contains(t.relatedTarget)||Tt(t)}function At(t){return!!D.isTouch&&tt()!==t.type.indexOf("touch")>=0}function Dt(){Ct();var n=H.props,i=n.popperOptions,r=n.placement,o=n.offset,a=n.getReferenceClientRect,s=n.moveTransition,l=et()?Y(G).arrow:null,u=a?{getBoundingClientRect:a,contextElement:a.contextElement||nt()}:t,c={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(et()){var n=rt().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}},h=[{name:"offset",options:{offset:o}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},c];et()&&l&&h.push({name:"arrow",options:{element:l,padding:3}}),h.push.apply(h,(null==i?void 0:i.modifiers)||[]),H.popperInstance=e.createPopper(u,G,Object.assign({},i,{placement:r,onFirstUpdate:b,modifiers:h}))}function Ct(){H.popperInstance&&(H.popperInstance.destroy(),H.popperInstance=null)}function kt(){return g(G.querySelectorAll("[data-tippy-root]"))}function St(t){H.clearDelayTimeouts(),t&&st("onTrigger",[H,t]),pt();var e=ot(!0),n=Q(),i=n[0],o=n[1];D.isTouch&&"hold"===i&&o&&(e=o),e?r=setTimeout((function(){H.show()}),e):H.show()}function Tt(t){if(H.clearDelayTimeouts(),st("onUntrigger",[H,t]),H.state.isVisible){if(!(H.props.trigger.indexOf("mouseenter")>=0&&H.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&S)){var e=ot(!1);e?o=setTimeout((function(){H.state.isVisible&&H.hide()}),e):l=requestAnimationFrame((function(){H.hide()}))}}else gt()}}function tt(t,e){void 0===e&&(e={});var n=z.plugins.concat(e.plugins||[]);!function(t){var e=!t,n="[object Object]"===Object.prototype.toString.call(t)&&!t.addEventListener;B(e,["tippy() was passed","`"+String(t)+"`","as its targets (first) argument. Valid types are: String, Element,","Element[], or NodeList."].join(" ")),B(n,["tippy() was passed a plain object which is not supported as an argument","for virtual positioning. Use props.getReferenceClientRect instead."].join(" "))}(t),U(e,n),document.addEventListener("touchstart",k,a),window.addEventListener("blur",T);var i=Object.assign({},e,{plugins:n}),r=x(t),o=v(i.content),s=r.length>1;N(o&&s,["tippy() was passed an Element as the `content` prop, but more than","one tippy instance was created by this invocation. This means the","content element will only be appended to the last tippy instance.","\n\n","Instead, pass the .innerHTML of the element, or use a function that","returns a cloned version of the element instead.","\n\n","1) content: element.innerHTML\n","2) content: () => element.cloneNode(true)"].join(" "));var l=r.reduce((function(t,e){var n=e&&Q(e,i);return n&&t.push(n),t}),[]);return v(t)?l[0]:l}tt.defaultProps=z,tt.setDefaultProps=function(t){U(t,[]),Object.keys(t).forEach((function(e){z[e]=t[e]}))},tt.currentInput=D;var et=Object.assign({},e.applyStyles,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}}),nt={mouseover:"mouseenter",focusin:"focus",click:"click"};var it={name:"animateFill",defaultValue:!1,fn:function(t){var e;if(!(null==(e=t.props.render)?void 0:e.$$tippy))return B(t.props.animateFill,"The `animateFill` plugin requires the default render function."),{};var n=Y(t.popper),r=n.box,o=n.content,a=t.props.animateFill?function(){var t=m();return t.className=i,E([t],"hidden"),t}():null;return{onCreate:function(){a&&(r.insertBefore(a,r.firstElementChild),r.setAttribute("data-animatefill",""),r.style.overflow="hidden",t.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(a){var t=r.style.transitionDuration,e=Number(t.replace("ms",""));o.style.transitionDelay=Math.round(e/10)+"ms",a.style.transitionDuration=t,E([a],"visible")}},onShow:function(){a&&(a.style.transitionDuration="0ms")},onHide:function(){a&&E([a],"hidden")}}}};var rt={clientX:0,clientY:0},ot=[];function at(t){var e=t.clientX,n=t.clientY;rt={clientX:e,clientY:n}}var st={name:"followCursor",defaultValue:!1,fn:function(t){var e=t.reference,n=w(t.props.triggerTarget||e),i=!1,r=!1,o=!0,a=t.props;function s(){return"initial"===t.props.followCursor&&t.state.isVisible}function l(){n.addEventListener("mousemove",h)}function u(){n.removeEventListener("mousemove",h)}function c(){i=!0,t.setProps({getReferenceClientRect:null}),i=!1}function h(n){var i=!n.target||e.contains(n.target),r=t.props.followCursor,o=n.clientX,a=n.clientY,s=e.getBoundingClientRect(),l=o-s.left,u=a-s.top;!i&&t.props.interactive||t.setProps({getReferenceClientRect:function(){var t=e.getBoundingClientRect(),n=o,i=a;"initial"===r&&(n=t.left+l,i=t.top+u);var s="horizontal"===r?t.top:i,c="vertical"===r?t.right:n,h="horizontal"===r?t.bottom:i,d="vertical"===r?t.left:n;return{width:c-d,height:h-s,top:s,right:c,bottom:h,left:d}}})}function d(){t.props.followCursor&&(ot.push({instance:t,doc:n}),function(t){t.addEventListener("mousemove",at)}(n))}function f(){0===(ot=ot.filter((function(e){return e.instance!==t}))).filter((function(t){return t.doc===n})).length&&function(t){t.removeEventListener("mousemove",at)}(n)}return{onCreate:d,onDestroy:f,onBeforeUpdate:function(){a=t.props},onAfterUpdate:function(e,n){var o=n.followCursor;i||void 0!==o&&a.followCursor!==o&&(f(),o?(d(),!t.state.isMounted||r||s()||l()):(u(),c()))},onMount:function(){t.props.followCursor&&!r&&(o&&(h(rt),o=!1),s()||l())},onTrigger:function(t,e){y(e)&&(rt={clientX:e.clientX,clientY:e.clientY}),r="focus"===e.type},onHidden:function(){t.props.followCursor&&(c(),u(),o=!0)}}}};var lt={name:"inlinePositioning",defaultValue:!1,fn:function(t){var e,n=t.reference;var i=-1,r=!1,o={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(r){var o=r.state;t.props.inlinePositioning&&(e!==o.placement&&t.setProps({getReferenceClientRect:function(){return function(t,e,n,i){if(n.length<2||null===t)return e;if(2===n.length&&i>=0&&n[0].left>n[1].right)return n[i]||e;switch(t){case"top":case"bottom":var r=n[0],o=n[n.length-1],a="top"===t,s=r.top,l=o.bottom,u=a?r.left:o.left,c=a?r.right:o.right;return{top:s,bottom:l,left:u,right:c,width:c-u,height:l-s};case"left":case"right":var h=Math.min.apply(Math,n.map((function(t){return t.left}))),d=Math.max.apply(Math,n.map((function(t){return t.right}))),f=n.filter((function(e){return"left"===t?e.left===h:e.right===d})),p=f[0].top,g=f[f.length-1].bottom;return{top:p,bottom:g,left:h,right:d,width:d-h,height:g-p};default:return e}}(p(o.placement),n.getBoundingClientRect(),g(n.getClientRects()),i)}}),e=o.placement)}};function a(){var e;r||(e=function(t,e){var n;return{popperOptions:Object.assign({},t.popperOptions,{modifiers:[].concat(((null==(n=t.popperOptions)?void 0:n.modifiers)||[]).filter((function(t){return t.name!==e.name})),[e])})}}(t.props,o),r=!0,t.setProps(e),r=!1)}return{onCreate:a,onAfterUpdate:a,onTrigger:function(e,n){if(y(n)){var r=g(t.reference.getClientRects()),o=r.find((function(t){return t.left-2<=n.clientX&&t.right+2>=n.clientX&&t.top-2<=n.clientY&&t.bottom+2>=n.clientY}));i=r.indexOf(o)}},onUntrigger:function(){i=-1}}}};var ut={name:"sticky",defaultValue:!1,fn:function(t){var e=t.reference,n=t.popper;function i(e){return!0===t.props.sticky||t.props.sticky===e}var r=null,o=null;function a(){var s=i("reference")?(t.popperInstance?t.popperInstance.state.elements.reference:e).getBoundingClientRect():null,l=i("popper")?n.getBoundingClientRect():null;(s&&ct(r,s)||l&&ct(o,l))&&t.popperInstance&&t.popperInstance.update(),r=s,o=l,t.state.isMounted&&requestAnimationFrame(a)}return{onMount:function(){t.props.sticky&&a()}}}};function ct(t,e){return!t||!e||(t.top!==e.top||t.right!==e.right||t.bottom!==e.bottom||t.left!==e.left)}tt.setDefaultProps({render:X}),t.animateFill=it,t.createSingleton=function(t,e){var n;void 0===e&&(e={}),B(!Array.isArray(t),["The first argument passed to createSingleton() must be an array of","tippy instances. The passed value was",String(t)].join(" "));var i,r=t,o=[],a=e.overrides,s=[],l=!1;function u(){o=r.map((function(t){return t.reference}))}function c(t){r.forEach((function(e){t?e.enable():e.disable()}))}function d(t){return r.map((function(e){var n=e.setProps;return e.setProps=function(r){n(r),e.reference===i&&t.setProps(r)},function(){e.setProps=n}}))}function f(t,e){var n=o.indexOf(e);if(e!==i){i=e;var s=(a||[]).concat("content").reduce((function(t,e){return t[e]=r[n].props[e],t}),{});t.setProps(Object.assign({},s,{getReferenceClientRect:"function"==typeof s.getReferenceClientRect?s.getReferenceClientRect:function(){return e.getBoundingClientRect()}}))}}c(!1),u();var p={fn:function(){return{onDestroy:function(){c(!0)},onHidden:function(){i=null},onClickOutside:function(t){t.props.showOnCreate&&!l&&(l=!0,i=null)},onShow:function(t){t.props.showOnCreate&&!l&&(l=!0,f(t,o[0]))},onTrigger:function(t,e){f(t,e.currentTarget)}}}},g=tt(m(),Object.assign({},h(e,["overrides"]),{plugins:[p].concat(e.plugins||[]),triggerTarget:o,popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat((null==(n=e.popperOptions)?void 0:n.modifiers)||[],[et])})})),v=g.show;g.show=function(t){if(v(),!i&&null==t)return f(g,o[0]);if(!i||null!=t){if("number"==typeof t)return o[t]&&f(g,o[t]);if(r.includes(t)){var e=t.reference;return f(g,e)}return o.includes(t)?f(g,t):void 0}},g.showNext=function(){var t=o[0];if(!i)return g.show(0);var e=o.indexOf(i);g.show(o[e+1]||t)},g.showPrevious=function(){var t=o[o.length-1];if(!i)return g.show(t);var e=o.indexOf(i),n=o[e-1]||t;g.show(n)};var y=g.setProps;return g.setProps=function(t){a=t.overrides||a,y(t)},g.setInstances=function(t){c(!0),s.forEach((function(t){return t()})),r=t,c(!1),u(),d(g),g.setProps({triggerTarget:o})},s=d(g),g},t.default=tt,t.delegate=function(t,e){B(!(e&&e.target),["You must specity a `target` prop indicating a CSS selector string matching","the target elements that should receive a tippy."].join(" "));var n=[],i=[],r=!1,o=e.target,s=h(e,["target"]),l=Object.assign({},s,{trigger:"manual",touch:!1}),u=Object.assign({},s,{showOnCreate:!0}),c=tt(t,l);function f(t){if(t.target&&!r){var n=t.target.closest(o);if(n){var a=n.getAttribute("data-tippy-trigger")||e.trigger||z.trigger;if(!n._tippy&&!("touchstart"===t.type&&"boolean"==typeof u.touch||"touchstart"!==t.type&&a.indexOf(nt[t.type])<0)){var s=tt(n,u);s&&(i=i.concat(s))}}}}function p(t,e,i,r){void 0===r&&(r=!1),t.addEventListener(e,i,r),n.push({node:t,eventType:e,handler:i,options:r})}return d(c).forEach((function(t){var e=t.destroy,o=t.enable,s=t.disable;t.destroy=function(t){void 0===t&&(t=!0),t&&i.forEach((function(t){t.destroy()})),i=[],n.forEach((function(t){var e=t.node,n=t.eventType,i=t.handler,r=t.options;e.removeEventListener(n,i,r)})),n=[],e()},t.enable=function(){o(),i.forEach((function(t){return t.enable()})),r=!1},t.disable=function(){s(),i.forEach((function(t){return t.disable()})),r=!0},function(t){var e=t.reference;p(e,"touchstart",f,a),p(e,"mouseover",f),p(e,"focusin",f),p(e,"click",f)}(t)})),c},t.followCursor=st,t.hideAll=function(t){var e=void 0===t?{}:t,n=e.exclude,i=e.duration;J.forEach((function(t){var e=!1;if(n&&(e=b(n)?t.reference===n:t.popper===n.popper),!e){var r=t.props.duration;t.setProps({duration:i}),t.hide(),t.state.isDestroyed||t.setProps({duration:r})}}))},t.inlinePositioning=lt,t.roundArrow='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',t.sticky=ut})),fA=cA(dA()),pA=cA(dA());var gA=function(t){t.magic("tooltip",(t=>(e,n={})=>{const i=(0,fA.default)(t,{content:e,trigger:"manual",...n});i.show(),setTimeout((()=>{i.hide(),setTimeout((()=>i.destroy()),n.duration||300)}),n.timeout||2e3)})),t.directive("tooltip",((t,{modifiers:e,expression:n},{evaluateLater:i,effect:r})=>{const o=e.length>0?(t=>{const e={plugins:[]},n=e=>t[t.indexOf(e)+1];if(t.includes("animation")&&(e.animation=n("animation")),t.includes("duration")&&(e.duration=parseInt(n("duration"))),t.includes("delay")){const t=n("delay");e.delay=t.includes("-")?t.split("-").map((t=>parseInt(t))):parseInt(t)}if(t.includes("cursor")){e.plugins.push(pA.followCursor);const t=n("cursor");["x","initial"].includes(t)?e.followCursor="x"===t?"horizontal":"initial":e.followCursor=!0}return t.includes("on")&&(e.trigger=n("on")),t.includes("arrowless")&&(e.arrow=!1),t.includes("html")&&(e.allowHTML=!0),t.includes("interactive")&&(e.interactive=!0),t.includes("border")&&e.interactive&&(e.interactiveBorder=parseInt(n("border"))),t.includes("debounce")&&e.interactive&&(e.interactiveDebounce=parseInt(n("debounce"))),t.includes("max-width")&&(e.maxWidth=parseInt(n("max-width"))),t.includes("theme")&&(e.theme=n("theme")),t.includes("placement")&&(e.placement=n("placement")),e})(e):{};t.__x_tippy||(t.__x_tippy=(0,fA.default)(t,o));const a=()=>t.__x_tippy.enable(),s=e=>{e?(a(),t.__x_tippy.setContent(e)):t.__x_tippy.disable()};if(e.includes("raw"))s(n);else{const e=i(n);r((()=>{e((e=>{"object"==typeof e?(t.__x_tippy.setProps(e),a()):s(e)}))}))}}))};Cn.plugin(Lu),Cn.plugin((function(t){t.plugin(Rh),t.plugin(fd),t.plugin(ox),t.plugin(ax),t.plugin(lx),t.plugin(cx),t.plugin(dx),t.plugin(fx),t.plugin(m_),t.plugin(v_)})),Cn.plugin(qw),Cn.plugin(eA),Cn.plugin(nA),Cn.plugin(gA),Cn.store("sidebar",{isOpen:Cn.$persist(!1).as("isOpen"),collapsedGroups:Cn.$persist([]).as("collapsedGroups"),groupIsCollapsed:function(t){return this.collapsedGroups.includes(t)},toggleCollapsedGroup:function(t){this.collapsedGroups=this.collapsedGroups.includes(t)?this.collapsedGroups.filter((function(e){return e!==t})):this.collapsedGroups.concat(t)},close:function(){this.isOpen=!1},open:function(){this.isOpen=!0}}),Cn.store("theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),window.addEventListener("dark-mode-toggled",(function(t){Cn.store("theme",t.detail)})),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){Cn.store("theme",t.matches?"dark":"light")})),Iu.defaults.font.family="'DM Sans', sans-serif",Iu.defaults.color="#6b7280",window.Alpine=Cn,window.Chart=Iu,Cn.start()},173:()=>{},666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,i){var r=e&&e.prototype instanceof m?e:m,o=Object.create(r.prototype),a=new S(i||[]);return o._invoke=function(t,e,n){var i=h;return function(r,o){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw o;return O()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=D(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var l=c(t,e,n);if("normal"===l.type){if(i=n.done?p:d,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=p,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={};function m(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(T([])));_&&_!==n&&i.call(_,o)&&(b=_);var E=y.prototype=m.prototype=Object.create(b);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function n(r,o,a,s){var l=c(t[r],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==typeof h&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var r;this._invoke=function(t,i){function o(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(o,o):o()}}function D(t,n){var i=t.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=c(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:O}}function O(){return{value:e,done:!0}}return v.prototype=y,l(E,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},w(A.prototype),l(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new A(u(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(E),l(E,s,"Generator"),l(E,o,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:T(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var o=n[t]={exports:{}};return e[t](o,o.exports,i),o.exports}i.m=e,i.amdO={},t=[],i.O=(e,n,r,o)=>{if(!n){var a=1/0;for(c=0;c<t.length;c++){for(var[n,r,o]=t[c],s=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(i.O).every((t=>i.O[t](n[l])))?n.splice(l--,1):(s=!1,o<a&&(a=o));if(s){t.splice(c--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[n,r,o]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={260:0,143:0};i.O.j=e=>0===t[e];var e=(e,n)=>{var r,o,[a,s,l]=n,u=0;if(a.some((e=>0!==t[e]))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(l)var c=l(i)}for(e&&e(n);u<a.length;u++)o=a[u],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(c)},n=self.webpackChunkfilament=self.webpackChunkfilament||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),i.O(void 0,[143],(()=>i(884)));var r=i.O(void 0,[143],(()=>i(173)));r=i.O(r)})();
//# sourceMappingURL=app.js.map